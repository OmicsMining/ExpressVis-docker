(self.webpackChunkclient=self.webpackChunkclient||[]).push([[618],{3544:function(we,ht,ct){var gt;we.exports=(gt=ct(5805),function(G){var N={};function I(w){if(N[w])return N[w].exports;var b=N[w]={i:w,l:!1,exports:{}};return G[w].call(b.exports,b,b.exports,I),b.l=!0,b.exports}return I.m=G,I.c=N,I.i=function(w){return w},I.d=function(w,b,v){I.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},I.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return I.d(b,"a",b),b},I.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},I.p="",I(I.s=7)}([function(G,N){G.exports=gt},function(G,N,I){"use strict";var w=I(0).FDLayoutConstants;function b(){}for(var v in w)b[v]=w[v];b.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,b.DEFAULT_RADIAL_SEPARATION=w.DEFAULT_EDGE_LENGTH,b.DEFAULT_COMPONENT_SEPERATION=60,b.TILE=!0,b.TILING_PADDING_VERTICAL=10,b.TILING_PADDING_HORIZONTAL=10,b.TREE_REDUCTION_ON_INCREMENTAL=!1,G.exports=b},function(G,N,I){"use strict";var w=I(0).FDLayoutEdge;function b(f,y,d){w.call(this,f,y,d)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];G.exports=b},function(G,N,I){"use strict";var w=I(0).LGraph;function b(f,y,d){w.call(this,f,y,d)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];G.exports=b},function(G,N,I){"use strict";var w=I(0).LGraphManager;function b(f){w.call(this,f)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];G.exports=b},function(G,N,I){"use strict";var w=I(0).FDLayoutNode,b=I(0).IMath;function v(y,d,p,c){w.call(this,y,d,p,c)}for(var f in v.prototype=Object.create(w.prototype),w)v[f]=w[f];v.prototype.move=function(){var y=this.graphManager.getLayout();this.displacementX=y.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=y.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementX=y.coolingFactor*y.maxNodeDisplacement*b.sign(this.displacementX)),Math.abs(this.displacementY)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementY=y.coolingFactor*y.maxNodeDisplacement*b.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),y.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},v.prototype.propogateDisplacementToChildren=function(y,d){for(var c,p=this.getChild().getNodes(),E=0;E<p.length;E++)null==(c=p[E]).getChild()?(c.moveBy(y,d),c.displacementX+=y,c.displacementY+=d):c.propogateDisplacementToChildren(y,d)},v.prototype.setPred1=function(y){this.pred1=y},v.prototype.getPred1=function(){return pred1},v.prototype.getPred2=function(){return pred2},v.prototype.setNext=function(y){this.next=y},v.prototype.getNext=function(){return next},v.prototype.setProcessed=function(y){this.processed=y},v.prototype.isProcessed=function(){return processed},G.exports=v},function(G,N,I){"use strict";var w=I(0).FDLayout,b=I(4),v=I(3),f=I(5),y=I(2),d=I(1),p=I(0).FDLayoutConstants,c=I(0).LayoutConstants,E=I(0).Point,S=I(0).PointD,A=I(0).Layout,M=I(0).Integer,R=I(0).IGeometry,X=I(0).LGraph,at=I(0).Transform;function dt(){w.call(this),this.toBeTiled={}}for(var At in dt.prototype=Object.create(w.prototype),w)dt[At]=w[At];dt.prototype.newGraphManager=function(){var q=new b(this);return this.graphManager=q,q},dt.prototype.newGraph=function(q){return new v(null,this.graphManager,q)},dt.prototype.newNode=function(q){return new f(this.graphManager,q)},dt.prototype.newEdge=function(q){return new y(null,null,q)},dt.prototype.initParameters=function(){w.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=d.DEFAULT_EDGE_LENGTH<10?10:d.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=p.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=p.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=p.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=p.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=p.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=p.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/p.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=p.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},dt.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},dt.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(d.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var Z=new Set(this.getAllNodes()),nt=this.nodesWithGravity.filter(function(j){return Z.has(j)});this.graphManager.setAllNodesToApplyGravitation(nt)}}else{var q=this.getFlatForest();q.length>0?this.positionNodesRadially(q):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),Z=new Set(this.getAllNodes()),nt=this.nodesWithGravity.filter(function(O){return Z.has(O)}),this.graphManager.setAllNodesToApplyGravitation(nt),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},dt.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%p.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var q=new Set(this.getAllNodes()),Z=this.nodesWithGravity.filter(function(H){return q.has(H)});this.graphManager.setAllNodesToApplyGravitation(Z),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=p.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=p.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var nt=!this.isTreeGrowing&&!this.isGrowthFinished,O=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(nt,O),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},dt.prototype.getPositionsData=function(){for(var q=this.graphManager.getAllNodes(),Z={},nt=0;nt<q.length;nt++){var O=q[nt].rect,H=q[nt].id;Z[H]={id:H,x:O.getCenterX(),y:O.getCenterY(),w:O.width,h:O.height}}return Z},dt.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var q=!1;if("during"===p.ANIMATE)this.emit("layoutstarted");else{for(;!q;)q=this.tick();this.graphManager.updateBounds()}},dt.prototype.calculateNodesToApplyGravitationTo=function(){var Z,H,q=[],nt=this.graphManager.getGraphs(),O=nt.length;for(H=0;H<O;H++)(Z=nt[H]).updateConnected(),Z.isConnected||(q=q.concat(Z.getNodes()));return q},dt.prototype.createBendpoints=function(){var q=[];q=q.concat(this.graphManager.getAllEdges());var nt,Z=new Set;for(nt=0;nt<q.length;nt++){var O=q[nt];if(!Z.has(O)){var H=O.getSource(),j=O.getTarget();if(H==j)O.getBendpoints().push(new S),O.getBendpoints().push(new S),this.createDummyNodesForBendpoints(O),Z.add(O);else{var J=[];if(J=(J=J.concat(H.getEdgeListToNode(j))).concat(j.getEdgeListToNode(H)),!Z.has(J[0])){var rt;if(J.length>1)for(rt=0;rt<J.length;rt++){var bt=J[rt];bt.getBendpoints().push(new S),this.createDummyNodesForBendpoints(bt)}J.forEach(function(Nt){Z.add(Nt)})}}}if(Z.size==q.length)break}},dt.prototype.positionNodesRadially=function(q){for(var Z=new E(0,0),nt=Math.ceil(Math.sqrt(q.length)),O=0,H=0,j=0,J=new S(0,0),rt=0;rt<q.length;rt++){rt%nt==0&&(j=0,H=O,0!=rt&&(H+=d.DEFAULT_COMPONENT_SEPERATION),O=0);var bt=q[rt],Nt=A.findCenterOfTree(bt);Z.x=j,Z.y=H,(J=dt.radialLayout(bt,Nt,Z)).y>O&&(O=Math.floor(J.y)),j=Math.floor(J.x+d.DEFAULT_COMPONENT_SEPERATION)}this.transform(new S(c.WORLD_CENTER_X-J.x/2,c.WORLD_CENTER_Y-J.y/2))},dt.radialLayout=function(q,Z,nt){var O=Math.max(this.maxDiagonalInTree(q),d.DEFAULT_RADIAL_SEPARATION);dt.branchRadialLayout(Z,null,0,359,0,O);var H=X.calculateBounds(q),j=new at;j.setDeviceOrgX(H.getMinX()),j.setDeviceOrgY(H.getMinY()),j.setWorldOrgX(nt.x),j.setWorldOrgY(nt.y);for(var J=0;J<q.length;J++)q[J].transform(j);var bt=new S(H.getMaxX(),H.getMaxY());return j.inverseTransformPoint(bt)},dt.branchRadialLayout=function(q,Z,nt,O,H,j){var J=(O-nt+1)/2;J<0&&(J+=180);var bt=(J+nt)%360*R.TWO_PI/360,W=(Math.cos(bt),H*Math.cos(bt)),tt=H*Math.sin(bt);q.setCenter(W,tt);var ft=[],Dt=(ft=ft.concat(q.getEdges())).length;null!=Z&&Dt--;for(var Rt,Ot=0,It=ft.length,Vt=q.getEdgesBetween(Z);Vt.length>1;){var te=Vt[0];Vt.splice(0,1);var he=ft.indexOf(te);he>=0&&ft.splice(he,1),It--,Dt--}Rt=null!=Z?(ft.indexOf(Vt[0])+1)%It:0;for(var de=Math.abs(O-nt)/Dt,oe=Rt;Ot!=Dt;oe=++oe%It){var Ee=ft[oe].getOtherEnd(q);if(Ee!=Z){var De=(nt+Ot*de)%360;dt.branchRadialLayout(Ee,q,De,(De+de)%360,H+j,j),Ot++}}},dt.maxDiagonalInTree=function(q){for(var Z=M.MIN_VALUE,nt=0;nt<q.length;nt++){var H=q[nt].getDiagonal();H>Z&&(Z=H)}return Z},dt.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},dt.prototype.groupZeroDegreeMembers=function(){var q=this,Z={};this.memberGroups={},this.idToDummyNode={};for(var nt=[],O=this.graphManager.getAllNodes(),H=0;H<O.length;H++){var J=(j=O[H]).getParent();0===this.getNodeDegreeWithChildren(j)&&(null==J.id||!this.getToBeTiled(J))&&nt.push(j)}for(H=0;H<nt.length;H++){var j,rt=(j=nt[H]).getParent().id;void 0===Z[rt]&&(Z[rt]=[]),Z[rt]=Z[rt].concat(j)}Object.keys(Z).forEach(function(bt){if(Z[bt].length>1){var Nt="DummyCompound_"+bt;q.memberGroups[Nt]=Z[bt];var W=Z[bt][0].getParent(),tt=new f(q.graphManager);tt.id=Nt,tt.paddingLeft=W.paddingLeft||0,tt.paddingRight=W.paddingRight||0,tt.paddingBottom=W.paddingBottom||0,tt.paddingTop=W.paddingTop||0,q.idToDummyNode[Nt]=tt;var ft=q.getGraphManager().add(q.newGraph(),tt),Dt=W.getChild();Dt.add(tt);for(var Ot=0;Ot<Z[bt].length;Ot++){var It=Z[bt][Ot];Dt.remove(It),ft.add(It)}}})},dt.prototype.clearCompounds=function(){var q={},Z={};this.performDFSOnCompounds();for(var nt=0;nt<this.compoundOrder.length;nt++)Z[this.compoundOrder[nt].id]=this.compoundOrder[nt],q[this.compoundOrder[nt].id]=[].concat(this.compoundOrder[nt].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[nt].getChild()),this.compoundOrder[nt].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(q,Z)},dt.prototype.clearZeroDegreeMembers=function(){var q=this,Z=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(nt){var O=q.idToDummyNode[nt];Z[nt]=q.tileNodes(q.memberGroups[nt],O.paddingLeft+O.paddingRight),O.rect.width=Z[nt].width,O.rect.height=Z[nt].height})},dt.prototype.repopulateCompounds=function(){for(var q=this.compoundOrder.length-1;q>=0;q--){var Z=this.compoundOrder[q];this.adjustLocations(this.tiledMemberPack[Z.id],Z.rect.x,Z.rect.y,Z.paddingLeft,Z.paddingTop)}},dt.prototype.repopulateZeroDegreeMembers=function(){var q=this,Z=this.tiledZeroDegreePack;Object.keys(Z).forEach(function(nt){var O=q.idToDummyNode[nt];q.adjustLocations(Z[nt],O.rect.x,O.rect.y,O.paddingLeft,O.paddingTop)})},dt.prototype.getToBeTiled=function(q){var Z=q.id;if(null!=this.toBeTiled[Z])return this.toBeTiled[Z];var nt=q.getChild();if(null==nt)return this.toBeTiled[Z]=!1,!1;for(var O=nt.getNodes(),H=0;H<O.length;H++){var j=O[H];if(this.getNodeDegree(j)>0)return this.toBeTiled[Z]=!1,!1;if(null!=j.getChild()){if(!this.getToBeTiled(j))return this.toBeTiled[Z]=!1,!1}else this.toBeTiled[j.id]=!1}return this.toBeTiled[Z]=!0,!0},dt.prototype.getNodeDegree=function(q){for(var nt=q.getEdges(),O=0,H=0;H<nt.length;H++){var j=nt[H];j.getSource().id!==j.getTarget().id&&(O+=1)}return O},dt.prototype.getNodeDegreeWithChildren=function(q){var Z=this.getNodeDegree(q);if(null==q.getChild())return Z;for(var nt=q.getChild().getNodes(),O=0;O<nt.length;O++)Z+=this.getNodeDegreeWithChildren(nt[O]);return Z},dt.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},dt.prototype.fillCompexOrderByDFS=function(q){for(var Z=0;Z<q.length;Z++){var nt=q[Z];null!=nt.getChild()&&this.fillCompexOrderByDFS(nt.getChild().getNodes()),this.getToBeTiled(nt)&&this.compoundOrder.push(nt)}},dt.prototype.adjustLocations=function(q,Z,nt,O,H){nt+=H;for(var j=Z+=O,J=0;J<q.rows.length;J++){var rt=q.rows[J];Z=j;for(var bt=0,Nt=0;Nt<rt.length;Nt++){var W=rt[Nt];W.rect.x=Z,W.rect.y=nt,Z+=W.rect.width+q.horizontalPadding,W.rect.height>bt&&(bt=W.rect.height)}nt+=bt+q.verticalPadding}},dt.prototype.tileCompoundMembers=function(q,Z){var nt=this;this.tiledMemberPack=[],Object.keys(q).forEach(function(O){var H=Z[O];nt.tiledMemberPack[O]=nt.tileNodes(q[O],H.paddingLeft+H.paddingRight),H.rect.width=nt.tiledMemberPack[O].width,H.rect.height=nt.tiledMemberPack[O].height})},dt.prototype.tileNodes=function(q,Z){var H={rows:[],rowWidth:[],rowHeight:[],width:0,height:Z,verticalPadding:d.TILING_PADDING_VERTICAL,horizontalPadding:d.TILING_PADDING_HORIZONTAL};q.sort(function(rt,bt){return rt.rect.width*rt.rect.height>bt.rect.width*bt.rect.height?-1:rt.rect.width*rt.rect.height<bt.rect.width*bt.rect.height?1:0});for(var j=0;j<q.length;j++){var J=q[j];0==H.rows.length?this.insertNodeToRow(H,J,0,Z):this.canAddHorizontal(H,J.rect.width,J.rect.height)?this.insertNodeToRow(H,J,this.getShortestRowIndex(H),Z):this.insertNodeToRow(H,J,H.rows.length,Z),this.shiftToLastRow(H)}return H},dt.prototype.insertNodeToRow=function(q,Z,nt,O){var H=O;nt==q.rows.length&&(q.rows.push([]),q.rowWidth.push(H),q.rowHeight.push(0));var J=q.rowWidth[nt]+Z.rect.width;q.rows[nt].length>0&&(J+=q.horizontalPadding),q.rowWidth[nt]=J,q.width<J&&(q.width=J);var rt=Z.rect.height;nt>0&&(rt+=q.verticalPadding);var bt=0;rt>q.rowHeight[nt]&&(bt=q.rowHeight[nt],q.rowHeight[nt]=rt,bt=q.rowHeight[nt]-bt),q.height+=bt,q.rows[nt].push(Z)},dt.prototype.getShortestRowIndex=function(q){for(var Z=-1,nt=Number.MAX_VALUE,O=0;O<q.rows.length;O++)q.rowWidth[O]<nt&&(Z=O,nt=q.rowWidth[O]);return Z},dt.prototype.getLongestRowIndex=function(q){for(var Z=-1,nt=Number.MIN_VALUE,O=0;O<q.rows.length;O++)q.rowWidth[O]>nt&&(Z=O,nt=q.rowWidth[O]);return Z},dt.prototype.canAddHorizontal=function(q,Z,nt){var O=this.getShortestRowIndex(q);if(O<0)return!0;var H=q.rowWidth[O];if(H+q.horizontalPadding+Z<=q.width)return!0;var J,rt,j=0;return q.rowHeight[O]<nt&&O>0&&(j=nt+q.verticalPadding-q.rowHeight[O]),J=q.width-H>=Z+q.horizontalPadding?(q.height+j)/(H+Z+q.horizontalPadding):(q.height+j)/q.width,j=nt+q.verticalPadding,(rt=q.width<Z?(q.height+j)/Z:(q.height+j)/q.width)<1&&(rt=1/rt),J<1&&(J=1/J),J<rt},dt.prototype.shiftToLastRow=function(q){var Z=this.getLongestRowIndex(q),nt=q.rowWidth.length-1,O=q.rows[Z],H=O[O.length-1],j=H.width+q.horizontalPadding;if(q.width-q.rowWidth[nt]>j&&Z!=nt){O.splice(-1,1),q.rows[nt].push(H),q.rowWidth[Z]=q.rowWidth[Z]-j,q.rowWidth[nt]=q.rowWidth[nt]+j,q.width=q.rowWidth[instance.getLongestRowIndex(q)];for(var J=Number.MIN_VALUE,rt=0;rt<O.length;rt++)O[rt].height>J&&(J=O[rt].height);Z>0&&(J+=q.verticalPadding);var bt=q.rowHeight[Z]+q.rowHeight[nt];q.rowHeight[Z]=J,q.rowHeight[nt]<H.height+q.verticalPadding&&(q.rowHeight[nt]=H.height+q.verticalPadding),q.height+=q.rowHeight[Z]+q.rowHeight[nt]-bt,this.shiftToLastRow(q)}},dt.prototype.tilingPreLayout=function(){d.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},dt.prototype.tilingPostLayout=function(){d.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},dt.prototype.reduceTrees=function(){for(var nt,q=[],Z=!0;Z;){var O=this.graphManager.getAllNodes(),H=[];Z=!1;for(var j=0;j<O.length;j++)1==(nt=O[j]).getEdges().length&&!nt.getEdges()[0].isInterGraph&&null==nt.getChild()&&(H.push([nt,nt.getEdges()[0],nt.getOwner()]),Z=!0);if(1==Z){for(var J=[],rt=0;rt<H.length;rt++)1==H[rt][0].getEdges().length&&(J.push(H[rt]),H[rt][0].getOwner().remove(H[rt][0]));q.push(J),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=q},dt.prototype.growTree=function(q){for(var O,nt=q[q.length-1],H=0;H<nt.length;H++)this.findPlaceforPrunedNode(O=nt[H]),O[2].add(O[0]),O[2].add(O[1],O[1].source,O[1].target);q.splice(q.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},dt.prototype.findPlaceforPrunedNode=function(q){var Z,nt,O=q[0],H=(nt=O==q[1].source?q[1].target:q[1].source).startX,j=nt.finishX,J=nt.startY,rt=nt.finishY,ft=[0,0,0,0];if(J>0)for(var Dt=H;Dt<=j;Dt++)ft[0]+=this.grid[Dt][J-1].length+this.grid[Dt][J].length-1;if(j<this.grid.length-1)for(Dt=J;Dt<=rt;Dt++)ft[1]+=this.grid[j+1][Dt].length+this.grid[j][Dt].length-1;if(rt<this.grid[0].length-1)for(Dt=H;Dt<=j;Dt++)ft[2]+=this.grid[Dt][rt+1].length+this.grid[Dt][rt].length-1;if(H>0)for(Dt=J;Dt<=rt;Dt++)ft[3]+=this.grid[H-1][Dt].length+this.grid[H][Dt].length-1;for(var It,Rt,Ot=M.MAX_VALUE,Vt=0;Vt<ft.length;Vt++)ft[Vt]<Ot?(Ot=ft[Vt],It=1,Rt=Vt):ft[Vt]==Ot&&It++;if(3==It&&0==Ot)0==ft[0]&&0==ft[1]&&0==ft[2]?Z=1:0==ft[0]&&0==ft[1]&&0==ft[3]?Z=0:0==ft[0]&&0==ft[2]&&0==ft[3]?Z=3:0==ft[1]&&0==ft[2]&&0==ft[3]&&(Z=2);else if(2==It&&0==Ot){var te=Math.floor(2*Math.random());Z=0==ft[0]&&0==ft[1]?0==te?0:1:0==ft[0]&&0==ft[2]?0==te?0:2:0==ft[0]&&0==ft[3]?0==te?0:3:0==ft[1]&&0==ft[2]?0==te?1:2:0==ft[1]&&0==ft[3]?0==te?1:3:0==te?2:3}else Z=4==It&&0==Ot?te=Math.floor(4*Math.random()):Rt;0==Z?O.setCenter(nt.getCenterX(),nt.getCenterY()-nt.getHeight()/2-p.DEFAULT_EDGE_LENGTH-O.getHeight()/2):1==Z?O.setCenter(nt.getCenterX()+nt.getWidth()/2+p.DEFAULT_EDGE_LENGTH+O.getWidth()/2,nt.getCenterY()):2==Z?O.setCenter(nt.getCenterX(),nt.getCenterY()+nt.getHeight()/2+p.DEFAULT_EDGE_LENGTH+O.getHeight()/2):O.setCenter(nt.getCenterX()-nt.getWidth()/2-p.DEFAULT_EDGE_LENGTH-O.getWidth()/2,nt.getCenterY())},G.exports=dt},function(G,N,I){"use strict";var w={};w.layoutBase=I(0),w.CoSEConstants=I(1),w.CoSEEdge=I(2),w.CoSEGraph=I(3),w.CoSEGraphManager=I(4),w.CoSELayout=I(6),w.CoSENode=I(5),G.exports=w}]))},5674:function(we,ht,ct){var gt;we.exports=(gt=ct(2103),function(G){var N={};function I(w){if(N[w])return N[w].exports;var b=N[w]={i:w,l:!1,exports:{}};return G[w].call(b.exports,b,b.exports,I),b.l=!0,b.exports}return I.m=G,I.c=N,I.i=function(w){return w},I.d=function(w,b,v){I.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},I.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return I.d(b,"a",b),b},I.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},I.p="",I(I.s=3)}([function(G,N,I){"use strict";var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},b=I(1),v=I(2),f=I(5)||("undefined"!=typeof window?window.cola:null),y=I(4),p=function(X){return(void 0===X?"undefined":w(X))===w(0)},S=function(){},A=function(X,at){return function(X){return null!=X&&(void 0===X?"undefined":w(X))===w(function(){})}(X)?X.apply(at,[at]):X};function M(R){this.options=b({},v,R)}M.prototype.run=function(){var R=this,X=this.options;R.manuallyStopped=!1;var at=X.cy,dt=X.eles,At=dt.nodes(),q=dt.edges(),Z=!1,O=At.filter(function(Jt){return Jt.isParent()}),H=At.subtract(O),j=X.boundingBox||{x1:0,y1:0,w:at.width(),h:at.height()};void 0===j.x2&&(j.x2=j.x1+j.w),void 0===j.w&&(j.w=j.x2-j.x1),void 0===j.y2&&(j.y2=j.y1+j.h),void 0===j.h&&(j.h=j.y2-j.y1);var J=function(){for(var Jt=0;Jt<At.length;Jt++){var ie=At[Jt],pe=ie.layoutDimensions(X),me=ie.scratch("cola");if(!me.updatedDims){var Me=A(X.nodeSpacing,ie);me.width=pe.w+2*Me,me.height=pe.h+2*Me}}At.positions(function(Ge){var hn=Ge.scratch().cola,Qe=void 0;return!Ge.grabbed()&&H.contains(Ge)&&(!p((Qe={x:j.x1+hn.x,y:j.y1+hn.y}).x)||!p(Qe.y))&&(Qe=void 0),Qe}),At.updateCompoundBounds(),Z||(bt(),Z=!0),X.fit&&at.fit(X.padding)},rt=function(){X.ungrabifyWhileSimulating&&tt.grabify(),at.off("destroy",ft),At.off("grab free position",Dt),At.off("lock unlock",Ot),R.one("layoutstop",X.stop),R.trigger({type:"layoutstop",layout:R})},bt=function(){R.one("layoutready",X.ready),R.trigger({type:"layoutready",layout:R})},Nt=X.refresh;Nt=X.refresh<0?1:Math.max(1,Nt);var W=R.adaptor=f.adaptor({trigger:function(Jt){switch(Jt.type){case"tick":case f.EventType?f.EventType.tick:null:X.animate&&J();break;case"end":case f.EventType?f.EventType.end:null:J(),X.infinite||rt()}},kick:function(){var Jt=!0,ie=function(){if(R.manuallyStopped)return rt(),!0;var Ge=W.tick();return!X.infinite&&!Jt&&W.convergenceThreshold(X.convergenceThreshold),Jt=!1,Ge&&X.infinite&&W.resume(),Ge};if(X.animate){y(function Me(){(function(){for(var Ge=void 0,hn=0;hn<Nt&&!Ge;hn++)Ge=Ge||ie();return Ge})()||y(Me)})}else for(;!ie(););},on:S,drag:S});R.adaptor=W;var tt=At.filter(":grabbable");X.ungrabifyWhileSimulating&&tt.ungrabify();var ft=void 0;at.one("destroy",ft=function(){R.stop()});var Dt=void 0;At.on("grab free position",Dt=function(Jt){var pe=this.scratch().cola,me=this.position();if(Jt.cyTarget===this||Jt.target===this)switch(Jt.type){case"grab":W.dragstart(pe);break;case"free":W.dragend(pe);break;case"position":(pe.px!==me.x-j.x1||pe.py!==me.y-j.y1)&&(pe.px=me.x-j.x1,pe.py=me.y-j.y1)}});var Ot=void 0;At.on("lock unlock",Ot=function(){var ie=this.scratch().cola;ie.fixed=this.locked(),this.locked()?W.dragstart(ie):W.dragend(ie)}),W.nodes(H.map(function(Ut,Jt){var ie=A(X.nodeSpacing,Ut),pe=Ut.position(),me=Ut.layoutDimensions(X);return Ut.scratch().cola={x:X.randomize&&!Ut.locked()||void 0===pe.x?Math.round(Math.random()*j.w):pe.x,y:X.randomize&&!Ut.locked()||void 0===pe.y?Math.round(Math.random()*j.h):pe.y,width:me.w+2*ie,height:me.h+2*ie,index:Jt,fixed:Ut.locked()}}));var It=[];X.alignment&&(X.alignment.vertical&&X.alignment.vertical.forEach(function(Ut){var Jt=[];Ut.forEach(function(ie){var me=ie.node.scratch().cola;Jt.push({node:me.index,offset:ie.offset?ie.offset:0})}),It.push({type:"alignment",axis:"x",offsets:Jt})}),X.alignment.horizontal&&X.alignment.horizontal.forEach(function(Ut){var Jt=[];Ut.forEach(function(ie){var me=ie.node.scratch().cola;Jt.push({node:me.index,offset:ie.offset?ie.offset:0})}),It.push({type:"alignment",axis:"y",offsets:Jt})})),X.gapInequalities&&X.gapInequalities.forEach(function(Ut){var Jt=Ut.left.scratch().cola.index,ie=Ut.right.scratch().cola.index;It.push({axis:Ut.axis,left:Jt,right:ie,gap:Ut.gap,equality:Ut.equality})}),It.length>0&&W.constraints(It),W.groups(O.map(function(Ut,Jt){var ie=A(X.nodeSpacing,Ut),pe=function(Ar){return parseFloat(Ut.style("padding-"+Ar))},me=pe("left")+ie,Me=pe("right")+ie,Ge=pe("top")+ie,hn=pe("bottom")+ie;return Ut.scratch().cola={index:Jt,padding:Math.max(me,Me,Ge,hn),leaves:Ut.children().intersection(H).map(function(Qe){return Qe[0].scratch().cola.index}),fixed:Ut.locked()},Ut}).map(function(Ut){return Ut.scratch().cola.groups=Ut.children().intersection(O).map(function(Jt){return Jt.scratch().cola.index}),Ut.scratch().cola}));var te=void 0,he=void 0;null!=X.edgeLength?(te=X.edgeLength,he="linkDistance"):null!=X.edgeSymDiffLength?(te=X.edgeSymDiffLength,he="symmetricDiffLinkLengths"):null!=X.edgeJaccardLength?(te=X.edgeJaccardLength,he="jaccardLinkLengths"):(te=100,he="linkDistance");if(W.links(q.stdFilter(function(Ut){return H.contains(Ut.source())&&H.contains(Ut.target())}).map(function(Ut){var Jt=Ut.scratch().cola={source:Ut.source()[0].scratch().cola.index,target:Ut.target()[0].scratch().cola.index};return null!=te&&(Jt.calcLength=A(te,Ut)),Jt})),W.size([j.w,j.h]),null!=te&&W[he](function(Jt){return Jt.calcLength}),X.flow){var oe=void 0;!function(X){return(void 0===X?"undefined":w(X))===w("")}(X.flow)?p(X.flow)?oe={axis:"y",minSeparation:X.flow}:function(X){return null!=X&&(void 0===X?"undefined":w(X))===w({})}(X.flow)?((oe=X.flow).axis=oe.axis||"y",oe.minSeparation=null!=oe.minSeparation?oe.minSeparation:50):oe={axis:"y",minSeparation:50}:oe={axis:X.flow,minSeparation:50},W.flowLayout(oe.axis,oe.minSeparation)}return R.trigger({type:"layoutstart",layout:R}),W.avoidOverlaps(X.avoidOverlap).handleDisconnected(X.handleDisconnected).start(X.unconstrIter,X.userConstIter,X.allConstIter,void 0,void 0,X.centerGraph),X.infinite||setTimeout(function(){R.manuallyStopped||W.stop()},X.maxSimulationTime),this},M.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},G.exports=M},function(G,N,I){"use strict";G.exports=null!=Object.assign?Object.assign.bind(Object):function(w){for(var b=arguments.length,v=Array(b>1?b-1:0),f=1;f<b;f++)v[f-1]=arguments[f];return v.filter(function(y){return null!=y}).forEach(function(y){Object.keys(y).forEach(function(d){return w[d]=y[d]})}),w}},function(G,N,I){"use strict";G.exports={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(v){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,centerGraph:!0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1}},function(G,N,I){"use strict";var w=I(0),b=function(f){!f||f("layout","cola",w)};"undefined"!=typeof cytoscape&&b(cytoscape),G.exports=b},function(G,N,I){"use strict";var b,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v};b="undefined"!==("undefined"==typeof window?"undefined":w(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){return setTimeout(v,16)}:function(f){f()},G.exports=b},function(G,N){G.exports=gt}]))},2142:function(we,ht,ct){var gt;we.exports=(gt=ct(3544),function(G){var N={};function I(w){if(N[w])return N[w].exports;var b=N[w]={i:w,l:!1,exports:{}};return G[w].call(b.exports,b,b.exports,I),b.l=!0,b.exports}return I.m=G,I.c=N,I.i=function(w){return w},I.d=function(w,b,v){I.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},I.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return I.d(b,"a",b),b},I.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},I.p="",I(I.s=1)}([function(G,N){G.exports=gt},function(G,N,I){"use strict";var w=I(0).layoutBase.LayoutConstants,b=I(0).layoutBase.FDLayoutConstants,v=I(0).CoSEConstants,f=I(0).CoSELayout,y=I(0).CoSENode,d=I(0).layoutBase.PointD,p=I(0).layoutBase.DimensionD,c={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function S(R){this.options=function(R,X){var at={};for(var dt in R)at[dt]=R[dt];for(var dt in X)at[dt]=X[dt];return at}(c,R),A(this.options)}var A=function(X){null!=X.nodeRepulsion&&(v.DEFAULT_REPULSION_STRENGTH=b.DEFAULT_REPULSION_STRENGTH=X.nodeRepulsion),null!=X.idealEdgeLength&&(v.DEFAULT_EDGE_LENGTH=b.DEFAULT_EDGE_LENGTH=X.idealEdgeLength),null!=X.edgeElasticity&&(v.DEFAULT_SPRING_STRENGTH=b.DEFAULT_SPRING_STRENGTH=X.edgeElasticity),null!=X.nestingFactor&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=X.nestingFactor),null!=X.gravity&&(v.DEFAULT_GRAVITY_STRENGTH=b.DEFAULT_GRAVITY_STRENGTH=X.gravity),null!=X.numIter&&(v.MAX_ITERATIONS=b.MAX_ITERATIONS=X.numIter),null!=X.gravityRange&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=b.DEFAULT_GRAVITY_RANGE_FACTOR=X.gravityRange),null!=X.gravityCompound&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.DEFAULT_COMPOUND_GRAVITY_STRENGTH=X.gravityCompound),null!=X.gravityRangeCompound&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=X.gravityRangeCompound),null!=X.initialEnergyOnIncremental&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.DEFAULT_COOLING_FACTOR_INCREMENTAL=X.initialEnergyOnIncremental),w.QUALITY="draft"==X.quality?0:"proof"==X.quality?2:1,v.NODE_DIMENSIONS_INCLUDE_LABELS=b.NODE_DIMENSIONS_INCLUDE_LABELS=w.NODE_DIMENSIONS_INCLUDE_LABELS=X.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=b.DEFAULT_INCREMENTAL=w.DEFAULT_INCREMENTAL=!X.randomize,v.ANIMATE=b.ANIMATE=w.ANIMATE=X.animate,v.TILE=X.tile,v.TILING_PADDING_VERTICAL="function"==typeof X.tilingPaddingVertical?X.tilingPaddingVertical.call():X.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL="function"==typeof X.tilingPaddingHorizontal?X.tilingPaddingHorizontal.call():X.tilingPaddingHorizontal};S.prototype.run=function(){var R,X,at=this.options,At=(this.idToLNode={},this.layout=new f),q=this;q.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var Z=At.newGraphManager();this.gm=Z;var nt=this.options.eles.nodes(),O=this.options.eles.edges();this.root=Z.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(nt),At);for(var H=0;H<O.length;H++){var j=O[H],J=this.idToLNode[j.data("source")],rt=this.idToLNode[j.data("target")];J!==rt&&0==J.getEdgesBetween(rt).length&&(Z.add(At.newEdge(),J,rt).id=j.id())}var Nt=function(ft,Dt){"number"==typeof ft&&(ft=Dt);var Ot=ft.data("id"),It=q.idToLNode[Ot];return{x:It.getRect().getCenterX(),y:It.getRect().getCenterY()}},W=function tt(){for(var Ot,ft=function(){at.fit&&at.cy.fit(at.eles,at.padding),R||(R=!0,q.cy.one("layoutready",at.ready),q.cy.trigger({type:"layoutready",layout:q}))},Dt=q.options.refresh,It=0;It<Dt&&!Ot;It++)Ot=q.stopped||q.layout.tick();if(Ot)return At.checkLayoutSuccess()&&!At.isSubLayout&&At.doPostLayout(),At.tilingPostLayout&&At.tilingPostLayout(),At.isLayoutFinished=!0,q.options.eles.nodes().positions(Nt),ft(),q.cy.one("layoutstop",q.options.stop),q.cy.trigger({type:"layoutstop",layout:q}),X&&cancelAnimationFrame(X),void(R=!1);var Rt=q.layout.getPositionsData();at.eles.nodes().positions(function(Vt,te){if("number"==typeof Vt&&(Vt=te),!Vt.isParent()){for(var he=Vt.id(),de=Rt[he],oe=Vt;null==de&&(de=Rt[oe.data("parent")]||Rt["DummyCompound_"+oe.data("parent")],Rt[he]=de,null!=(oe=oe.parent()[0])););return null!=de?{x:de.x,y:de.y}:{x:Vt.position("x"),y:Vt.position("y")}}}),ft(),X=requestAnimationFrame(tt)};return At.addListener("layoutstarted",function(){"during"===q.options.animate&&(X=requestAnimationFrame(W))}),At.runLayout(),"during"!==this.options.animate&&(q.options.eles.nodes().not(":parent").layoutPositions(q,q.options,Nt),R=!1),this},S.prototype.getTopMostNodes=function(R){for(var X={},at=0;at<R.length;at++)X[R[at].id()]=!0;return R.filter(function(At,q){"number"==typeof At&&(At=q);for(var Z=At.parent()[0];null!=Z;){if(X[Z.id()])return!1;Z=Z.parent()[0]}return!0})},S.prototype.processChildrenList=function(R,X,at){for(var dt=X.length,At=0;At<dt;At++){var nt,rt,q=X[At],Z=q.children(),O=q.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((nt=null!=q.outerWidth()&&null!=q.outerHeight()?R.add(new y(at.graphManager,new d(q.position("x")-O.w/2,q.position("y")-O.h/2),new p(parseFloat(O.w),parseFloat(O.h)))):R.add(new y(this.graphManager))).id=q.data("id"),nt.paddingLeft=parseInt(q.css("padding")),nt.paddingTop=parseInt(q.css("padding")),nt.paddingRight=parseInt(q.css("padding")),nt.paddingBottom=parseInt(q.css("padding")),this.options.nodeDimensionsIncludeLabels&&q.isParent()){var H=q.boundingBox({includeLabels:!0,includeNodes:!1}).w,j=q.boundingBox({includeLabels:!0,includeNodes:!1}).h,J=q.css("text-halign");nt.labelWidth=H,nt.labelHeight=j,nt.labelPos=J}this.idToLNode[q.data("id")]=nt,isNaN(nt.rect.x)&&(nt.rect.x=0),isNaN(nt.rect.y)&&(nt.rect.y=0),null!=Z&&Z.length>0&&(rt=at.getGraphManager().add(at.newGraph(),nt),this.processChildrenList(rt,Z,at))}},S.prototype.stop=function(){return this.stopped=!0,this};var M=function(X){X("layout","cose-bilkent",S)};"undefined"!=typeof cytoscape&&M(cytoscape),G.exports=M}]))},9319:function(we){we.exports=function(){"use strict";function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,n){return e&&gt(t.prototype,e),n&&gt(t,n),t}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=[],a=!0,o=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done)&&(i.push(s.value),!r||i.length!==r);a=!0);}catch(h){o=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w="undefined"==typeof window?null:window,b=w?w.navigator:null,v=ht(""),f=ht({}),y=ht(function(){}),d="undefined"==typeof HTMLElement?"undefined":ht(HTMLElement),p=function(t){return t&&t.instanceString&&E(t.instanceString)?t.instanceString():null},c=function(t){return null!=t&&ht(t)==v},E=function(t){return null!=t&&ht(t)===y},S=function(t){return!X(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},A=function(t){return null!=t&&ht(t)===f&&!S(t)&&t.constructor===Object},M=function(t){return null!=t&&ht(t)===ht(1)&&!isNaN(t)},R=function(t){return"undefined"===d?void 0:null!=t&&t instanceof HTMLElement},X=function(t){return at(t)||dt(t)},at=function(t){return"collection"===p(t)&&t._private.single},dt=function(t){return"collection"===p(t)&&!t._private.single},At=function(t){return"core"===p(t)},q=function(t){return"stylesheet"===p(t)},Z=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},nt=function(t){return null!=(e=t)&&ht(e)===f&&E(t.then);var e},O=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);return r.join("$")});var n=function r(){var i,a=this,o=arguments,l=e.apply(a,o),s=r.cache;return(i=s[l])||(i=s[l]=t.apply(a,o)),i};return n.cache={},n},H=O(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),j=O(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),J=O(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),rt=function(t){return Z(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},bt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Nt=function(t,e){return t<e?-1:t>e?1:0},W=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];t[o]=r[o]}}return t},ft={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Dt=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(A(a))throw Error("Tried to set map with object key");i<n.length-1?(null==e[a]&&(e[a]={}),e=e[a]):e[a]=t.value}},Ot=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(A(a))throw Error("Tried to get map with object key");if(null==(e=e[a]))return e}return e},It="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rt=/^\s+|\s+$/g,Vt=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,he=/^0o[0-7]+$/i,de=parseInt,Ee="object"==typeof self&&self&&self.Object===Object&&self,De="object"==typeof It&&It&&It.Object===Object&&It||Ee||Function("return this")(),Ut=Object.prototype.toString,Jt=Math.max,ie=Math.min,pe=function(){return De.Date.now()};function me(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Me(t){if("number"==typeof t)return t;if("symbol"==typeof(r=t)||(i=r)&&"object"==typeof i&&"[object Symbol]"==Ut.call(r))return NaN;var r,i;if(me(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=me(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var n=te.test(t);return n||he.test(t)?de(t.slice(2),n?2:8):Vt.test(t)?NaN:+t}var Ge=function(t,e,n){var r,i,a,o,l,s,u=0,h=!1,g=!1,x=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function D(C){var V=r,B=i;return r=i=void 0,u=C,o=t.apply(B,V)}function m(C){return u=C,l=setTimeout(_,e),h?D(C):o}function T(C){var V=C-s;return void 0===s||V>=e||V<0||g&&C-u>=a}function _(){var V,B,C=pe();if(T(C))return L(C);l=setTimeout(_,(B=e-((V=C)-s),g?ie(B,a-(V-u)):B))}function L(C){return l=void 0,x&&r?D(C):(r=i=void 0,o)}function P(){var C=pe(),V=T(C);if(r=arguments,i=this,s=C,V){if(void 0===l)return m(s);if(g)return l=setTimeout(_,e),D(s)}return void 0===l&&(l=setTimeout(_,e)),o}return e=Me(e)||0,me(n)&&(h=!!n.leading,a=(g="maxWait"in n)?Jt(Me(n.maxWait)||0,e):a,x="trailing"in n?!!n.trailing:x),P.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},P.flush=function(){return void 0===l?o:L(pe())},P},hn=w?w.performance:null,Qe=hn&&hn.now?function(){return hn.now()}:function(){return Date.now()},Ar=function(){if(w){if(w.requestAnimationFrame)return function(t){w.requestAnimationFrame(t)};if(w.mozRequestAnimationFrame)return function(t){w.mozRequestAnimationFrame(t)};if(w.webkitRequestAnimationFrame)return function(t){w.webkitRequestAnimationFrame(t)};if(w.msRequestAnimationFrame)return function(t){w.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(Qe())},1e3/60)}}(),Wn=function(t){return Ar(t)},cn=Qe,_i=65599,jr=function(t){for(var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;!(e=t.next()).done;)r=r*_i+e.value|0;return r},cr=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261)*_i+t|0},dr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},Dn=function(t){return 2097152*t[0]+t[1]},Cr=function(t,e){return[cr(t[0],e[0]),dr(t[1],e[1])]},Fn=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return jr({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},Ai=function(){return xa(arguments)},xa=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?Fn(r):Fn(r,e)}return e},Ci=!0,wa=null!=console.warn,Ni=null!=console.trace,Wr=Number.MAX_SAFE_INTEGER||9007199254740991,ki=function(){return!0},Nr=function(){return!1},Mi=function(){return 0},Kr=function(){},_e=function(t){throw new Error(t)},Qr=function(t){if(void 0===t)return Ci;Ci=!!t},be=function(t){Qr()&&(wa?console.warn(t):(console.log(t),Ni&&console.trace()))},vn=function(t){return null==t?t:S(t)?t.slice():A(t)?W({},t):t},Oi=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},Ea={},Jr=function(){return Ea},Re=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var a=e[i],o=null==n?void 0:n[a];r[a]=void 0===o?t[a]:o}return r}},Ln=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},ti=function(t){t.splice(0,t.length)},dn=function(t,e,n){return n&&(e=J(n,e)),t[e]},kn=function(t,e,n,r){n&&(e=J(n,e)),t[e]=r},Ve="undefined"!=typeof Map?Map:function(){function t(){ct(this,t),this._obj={}}return G(t,[{key:"set",value:function(e,n){return this._obj[e]=n,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),t}(),Gi=function(){function t(e){if(ct(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return G(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var n=this._obj;1!==n[e]&&(n[e]=1,this.size++)}},{key:"delete",value:function(e){var n=this._obj;1===n[e]&&(n[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(n){return e.has(n)})}},{key:"forEach",value:function(e,n){return this.toArray().forEach(e,n)}}]),t}(),Kn="undefined"!==("undefined"==typeof Set?"undefined":ht(Set))?Set:Gi,fr=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&At(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Kn,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var a=e.renderedPosition,o=t.pan(),l=t.zoom();i.position={x:(a.x-o.x)/l,y:(a.y-o.y)/l}}var s=[];S(e.classes)?s=e.classes:c(e.classes)&&(s=e.classes.split(/\s+/));for(var u=0,h=s.length;u<h;u++){var g=s[u];g&&""!==g&&i.classes.add(g)}this.createEmitter();var x=e.style||e.css;x&&(be("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(x)),(void 0===n||n)&&this.restore()}else _e("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else _e("An element must have a core reference and parameters set")},pr=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;A(e)&&!X(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||E(n)?r:n,n=E(n)?n:function(){};for(var a,o=this._private.cy,l=e=c(e)?this.filter(e):e,s=[],u=[],h={},g={},x={},D=0,m=this.byGroup(),T=m.nodes,_=m.edges,L=0;L<l.length;L++){var P=l[L],C=P.id();P.isNode()&&(s.unshift(P),t.bfs&&(x[C]=!0,u.push(P)),g[C]=0)}var V=function(){var Q=t.bfs?s.shift():s.pop(),it=Q.id();if(t.dfs){if(x[it])return"continue";x[it]=!0,u.push(Q)}var ot,st=g[it],yt=h[it],pt=null!=yt?yt.source():null,et=null!=yt?yt.target():null,Pt=null==yt?void 0:Q.same(pt)?et[0]:pt[0];if(!0===(ot=n(Q,yt,Pt,D++,st)))return a=Q,"break";if(!1===ot)return"break";for(var Lt=Q.connectedEdges().filter(function(kt){return(!r||kt.source().same(Q))&&_.has(kt)}),mt=0;mt<Lt.length;mt++){var _t=Lt[mt],xt=_t.connectedNodes().filter(function(kt){return!kt.same(Q)&&T.has(kt)}),Tt=xt.id();0===xt.length||x[Tt]||(s.push(xt=xt[0]),t.bfs&&(x[Tt]=!0,u.push(xt)),h[Tt]=_t,g[Tt]=g[it]+1)}};t:for(;0!==s.length;)switch(V()){case"continue":continue;case"break":break t}for(var F=o.collection(),k=0;k<u.length;k++){var U=u[k],$=h[U.id()];null!=$&&F.push($),F.push(U)}return{path:o.collection(F),found:o.collection(a)}}},Tn={breadthFirstSearch:pr({bfs:!0}),depthFirstSearch:pr({dfs:!0})};Tn.bfs=Tn.breadthFirstSearch,Tn.dfs=Tn.depthFirstSearch;var e,t,gr=(t=e={exports:{}},function(){var n,r,i,a,o,l,s,u,h,g,x,D,m,T,_;i=Math.floor,g=Math.min,r=function(L,P){return L<P?-1:L>P?1:0},h=function(L,P,C,V,B){var F;if(null==C&&(C=0),null==B&&(B=r),C<0)throw new Error("lo must be non-negative");for(null==V&&(V=L.length);C<V;)B(P,L[F=i((C+V)/2)])<0?V=F:C=F+1;return[].splice.apply(L,[C,C-C].concat(P)),P},l=function(L,P,C){return null==C&&(C=r),L.push(P),T(L,0,L.length-1,C)},o=function(L,P){var C,V;return null==P&&(P=r),C=L.pop(),L.length?(V=L[0],L[0]=C,_(L,0,P)):V=C,V},u=function(L,P,C){var V;return null==C&&(C=r),V=L[0],L[0]=P,_(L,0,C),V},s=function(L,P,C){var V;return null==C&&(C=r),L.length&&C(L[0],P)<0&&(P=(V=[L[0],P])[0],L[0]=V[1],_(L,0,C)),P},a=function(L,P){var V,B,F,k,U;for(null==P&&(P=r),k=[],V=0,B=(F=function(){U=[];for(var $=0,Q=i(L.length/2);0<=Q?$<Q:$>Q;0<=Q?$++:$--)U.push($);return U}.apply(this).reverse()).length;V<B;V++)k.push(_(L,F[V],P));return k},m=function(L,P,C){var V;if(null==C&&(C=r),-1!==(V=L.indexOf(P)))return T(L,0,V,C),_(L,V,C)},x=function(L,P,C){var B,F,k,U;if(null==C&&(C=r),!(B=L.slice(0,P)).length)return B;for(a(B,C),F=0,k=(U=L.slice(P)).length;F<k;F++)s(B,U[F],C);return B.sort(C).reverse()},D=function(L,P,C){var V,B,F,k,U,$,Q,it,ot;if(null==C&&(C=r),10*P<=L.length){if(!(F=L.slice(0,P).sort(C)).length)return F;for(B=F[F.length-1],k=0,$=(Q=L.slice(P)).length;k<$;k++)C(V=Q[k],B)<0&&(h(F,V,0,null,C),F.pop(),B=F[F.length-1]);return F}for(a(L,C),ot=[],U=0,it=g(P,L.length);0<=it?U<it:U>it;0<=it?++U:--U)ot.push(o(L,C));return ot},T=function(L,P,C,V){var B,F,k;for(null==V&&(V=r),B=L[C];C>P&&V(B,F=L[k=C-1>>1])<0;)L[C]=F,C=k;return L[C]=B},_=function(L,P,C){var V,B,F,k,U;for(null==C&&(C=r),B=L.length,U=P,F=L[P],V=2*P+1;V<B;)(k=V+1)<B&&!(C(L[V],L[k])<0)&&(V=k),L[P]=L[V],V=2*(P=V)+1;return L[P]=F,T(L,U,P,C)},n=function(){function L(P){this.cmp=null!=P?P:r,this.nodes=[]}return L.push=l,L.pop=o,L.replace=u,L.pushpop=s,L.heapify=a,L.updateItem=m,L.nlargest=x,L.nsmallest=D,L.prototype.push=function(P){return l(this.nodes,P,this.cmp)},L.prototype.pop=function(){return o(this.nodes,this.cmp)},L.prototype.peek=function(){return this.nodes[0]},L.prototype.contains=function(P){return-1!==this.nodes.indexOf(P)},L.prototype.replace=function(P){return u(this.nodes,P,this.cmp)},L.prototype.pushpop=function(P){return s(this.nodes,P,this.cmp)},L.prototype.heapify=function(){return a(this.nodes,this.cmp)},L.prototype.updateItem=function(P){return m(this.nodes,P,this.cmp)},L.prototype.clear=function(){return this.nodes=[]},L.prototype.empty=function(){return 0===this.nodes.length},L.prototype.size=function(){return this.nodes.length},L.prototype.clone=function(){var P;return(P=new L).nodes=this.nodes.slice(0),P},L.prototype.toArray=function(){return this.nodes.slice(0)},L.prototype.insert=L.prototype.push,L.prototype.top=L.prototype.peek,L.prototype.front=L.prototype.peek,L.prototype.has=L.prototype.contains,L.prototype.copy=L.prototype.clone,L}(),t.exports=n}.call(It),e.exports),Y=Re({root:null,weight:function(t){return 1},directed:!1}),ei={dijkstra:function(t){if(!A(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Y(t),r=n.root,a=n.directed,o=this,l=n.weight,s=c(r)?this.filter(r)[0]:r[0],u={},h={},g={},x=this.byGroup(),D=x.nodes,m=x.edges;m.unmergeBy(function(yt){return yt.isLoop()});for(var T=function(yt){return u[yt.id()]},_=function(yt,pt){u[yt.id()]=pt,L.updateItem(yt)},L=new gr(function(yt,pt){return T(yt)-T(pt)}),P=0;P<D.length;P++){var C=D[P];u[C.id()]=C.same(s)?0:1/0,L.push(C)}for(var V=function(yt,pt){for(var et,Pt=(a?yt.edgesTo(pt):yt.edgesWith(pt)).intersect(m),Lt=1/0,mt=0;mt<Pt.length;mt++){var _t=Pt[mt],xt=l(_t);(xt<Lt||!et)&&(Lt=xt,et=_t)}return{edge:et,dist:Lt}};L.size()>0;){var B=L.pop(),F=T(B),k=B.id();if(g[k]=F,F!==1/0)for(var U=B.neighborhood().intersect(D),$=0;$<U.length;$++){var Q=U[$],it=Q.id(),ot=V(B,Q),st=F+ot.dist;st<T(Q)&&(_(Q,st),h[it]={node:B,edge:ot.edge})}}return{distanceTo:function(yt){var pt=c(yt)?D.filter(yt)[0]:yt[0];return g[pt.id()]},pathTo:function(yt){var pt=c(yt)?D.filter(yt)[0]:yt[0],et=[],Pt=pt,Lt=Pt.id();if(pt.length>0)for(et.unshift(pt);h[Lt];){var mt=h[Lt];et.unshift(mt.edge),et.unshift(mt.node),Lt=(Pt=mt.node).id()}return o.spawn(et)}}}},ni={kruskal:function(t){t=t||function(P){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,a=new Array(i),o=n,l=function(P){for(var C=0;C<a.length;C++)if(a[C].has(P))return C},s=0;s<i;s++)a[s]=this.spawn(n[s]);for(var u=r.sort(function(P,C){return t(P)-t(C)}),h=0;h<u.length;h++){var g=u[h],x=g.source()[0],D=g.target()[0],m=l(x),T=l(D),_=a[m],L=a[T];m!==T&&(o.merge(g),_.merge(L),a.splice(T,1))}return o}},Da=Re({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),La={aStar:function(t){var e=this.cy(),n=Da(t),r=n.root,i=n.goal,a=n.heuristic,o=n.directed,l=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var s,u,h=r.id(),g=i.id(),x={},D={},m={},T=new gr(function(Lt,mt){return D[Lt.id()]-D[mt.id()]}),_=new Kn,L={},P={},C=function(Lt,mt){T.push(Lt),_.add(mt)};C(r,h),x[h]=0,D[h]=a(r);for(var B=0;T.size()>0;){if(u=(s=T.pop()).id(),_.delete(u),B++,u===g){for(var F=[],k=i,U=g,$=P[U];F.unshift(k),null!=$&&F.unshift($),null!=(k=L[U]);)$=P[U=k.id()];return{found:!0,distance:x[u],path:this.spawn(F),steps:B}}m[u]=!0;for(var Q=s._private.edges,it=0;it<Q.length;it++){var ot=Q[it];if(this.hasElementWithId(ot.id())&&(!o||ot.data("source")===u)){var st=ot.source(),yt=ot.target(),pt=st.id()!==u?st:yt,et=pt.id();if(this.hasElementWithId(et)&&!m[et]){var Pt=x[u]+l(ot);_.has(et)?Pt<x[et]&&(x[et]=Pt,D[et]=Pt+a(pt),L[et]=s,P[et]=ot):(x[et]=Pt,D[et]=Pt+a(pt),C(pt,et),L[et]=s,P[et]=ot)}}}}return{found:!1,distance:void 0,path:void 0,steps:B}}},Ta=Re({weight:function(t){return 1},directed:!1}),Ia={floydWarshall:function(t){for(var e=this.cy(),n=Ta(t),i=n.directed,a=n.weight,o=this.byGroup(),l=o.nodes,s=o.edges,u=l.length,h=u*u,g=function(mt){return l.indexOf(mt)},x=function(mt){return l[mt]},D=new Array(h),m=0;m<h;m++){var T=m%u;D[m]=(m-T)/u===T?0:1/0}for(var L=new Array(h),P=new Array(h),C=0;C<s.length;C++){var V=s[C],B=V.source()[0],F=V.target()[0];if(B!==F){var k=g(B),U=g(F),$=k*u+U,Q=a(V);if(D[$]>Q&&(D[$]=Q,L[$]=U,P[$]=V),!i){var it=U*u+k;!i&&D[it]>Q&&(D[it]=Q,L[it]=k,P[it]=V)}}}for(var ot=0;ot<u;ot++)for(var st=0;st<u;st++)for(var yt=st*u+ot,pt=0;pt<u;pt++){var et=st*u+pt,Pt=ot*u+pt;D[yt]+D[Pt]<D[et]&&(D[et]=D[yt]+D[Pt],L[et]=L[yt])}var Lt=function(mt){return g((c(_t=mt)?e.filter(_t):_t)[0]);var _t};return{distance:function(mt,_t){var xt=Lt(mt),Tt=Lt(_t);return D[xt*u+Tt]},path:function(mt,_t){var xt=Lt(mt),Tt=Lt(_t),kt=x(xt);if(xt===Tt)return kt.collection();if(null==L[xt*u+Tt])return e.collection();var Xt=e.collection();for(Xt.merge(kt);xt!==Tt;)Xt.merge(P[xt*u+(xt=L[xt*u+Tt])]),Xt.merge(x(xt));return Xt}}}},Sa=Re({weight:function(t){return 1},directed:!1,root:null}),Pa={bellmanFord:function(t){var e=this,n=Sa(t),i=n.directed,a=n.root,o=n.weight,l=this,s=this.cy(),u=this.byGroup(),h=u.edges,g=u.nodes,x=g.length,D=new Ve,m=!1;a=s.collection(a)[0],h.unmergeBy(function(Tt){return Tt.isLoop()});for(var T=h.length,_=function(Tt){var kt=D.get(Tt.id());return kt||(kt={},D.set(Tt.id(),kt)),kt},L=function(Tt){return(c(Tt)?s.$(Tt):Tt)[0]},P=0;P<x;P++){var C=g[P],V=_(C);V.dist=C.same(a)?0:1/0,V.pred=null,V.edge=null}for(var B=!1,F=function(Tt,kt,Bt,Xt,Yt,jt){var Zt=Xt.dist+jt;Zt<Yt.dist&&!Bt.same(Xt.edge)&&(Yt.dist=Zt,Yt.pred=Tt,Yt.edge=Bt,B=!0)},k=1;k<x;k++){B=!1;for(var U=0;U<T;U++){var $=h[U],Q=$.source(),it=$.target(),ot=o($),st=_(Q),yt=_(it);F(Q,0,$,st,yt,ot),i||F(it,0,$,yt,st,ot)}if(!B)break}if(B)for(var pt=0;pt<T;pt++){var et=h[pt],Pt=et.source(),Lt=et.target(),mt=o(et),_t=_(Pt).dist,xt=_(Lt).dist;if(_t+mt<xt||!i&&xt+mt<_t){be("Graph contains a negative weight cycle for Bellman-Ford"),m=!0;break}}return{distanceTo:function(Tt){return _(L(Tt)).dist},pathTo:function(Tt){for(var kt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,Xt=[],Yt=L(Tt);;){if(null==Yt)return e.spawn();var jt=_(Yt),Zt=jt.edge,ne=jt.pred;if(Xt.unshift(Yt[0]),Yt.same(kt)&&Xt.length>0)break;null!=Zt&&Xt.unshift(Zt),Yt=ne}return l.spawn(Xt)},hasNegativeWeightCycle:m,negativeWeightCycles:[]}}},_a=Math.sqrt(2),Aa=function(t,e,n){0===n.length&&_e("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],o=e[r[1]],l=e[r[2]],s=n,u=s.length-1;u>=0;u--){var h=s[u],g=h[1],x=h[2];(e[g]===o&&e[x]===l||e[g]===l&&e[x]===o)&&s.splice(u,1)}for(var D=0;D<s.length;D++){var m=s[D];m[1]===l?(s[D]=m.slice(),s[D][1]=o):m[2]===l&&(s[D]=m.slice(),s[D][2]=o)}for(var T=0;T<e.length;T++)e[T]===l&&(e[T]=o);return s},ri=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Aa(i,t,e),n--}return e},Ca={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy(function(et){return et.isLoop()});var i=n.length,a=r.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/_a);if(!(i<2)){for(var s=[],u=0;u<a;u++){var h=r[u];s.push([u,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,x=[],D=new Array(i),m=new Array(i),T=new Array(i),_=function(et,Pt){for(var Lt=0;Lt<i;Lt++)Pt[Lt]=et[Lt]},L=0;L<=o;L++){for(var P=0;P<i;P++)m[P]=P;var C=ri(m,s.slice(),i,l),V=C.slice();_(m,T);var B=ri(m,C,l,2),F=ri(T,V,l,2);B.length<=F.length&&B.length<g?(g=B.length,x=B,_(m,D)):F.length<=B.length&&F.length<g&&(g=F.length,x=F,_(T,D))}for(var k=this.spawn(x.map(function(et){return r[et[0]]})),U=this.spawn(),$=this.spawn(),Q=D[0],it=0;it<D.length;it++){var st=n[it];D[it]===Q?U.merge(st):$.merge(st)}var yt=function(et){var Pt=t.spawn();return et.forEach(function(Lt){Pt.merge(Lt),Lt.connectedEdges().forEach(function(mt){t.contains(mt)&&!k.contains(mt)&&Pt.merge(mt)})}),Pt},pt=[yt(U),yt($)];return{cut:k,components:pt,partition1:U,partition2:$}}_e("At least 2 nodes are required for Karger-Stein algorithm")}},vr=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},ii=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Bn=function(t){return{x:t[0],y:t[1]}},kr=function(t,e){return Math.atan2(e,t)-Math.PI/2},ai=Math.log2||function(t){return Math.log(t)/Math.log(2)},Ri=function(t){return t>0?1:t<0?-1:0},Yn=function(t,e){return Math.sqrt(zn(t,e))},zn=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Fi=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},Oe=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},Qn=function(t,e,n,r){return{x:Oe(t.x,e.x,n.x,r),y:Oe(t.y,e.y,n.y,r)}},yr=function(t,e,n){return Math.max(t,Math.min(n,e))},Je=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},Na=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},Xn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},oi=function(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)e=n=r=i=a[0];else if(2===a.length)e=r=a[0],i=n=a[1];else if(4===a.length){var o=I(a,4);e=o[0],n=o[1],r=o[2],i=o[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Bi=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},si=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},Jn=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},Yi=function(t,e){return Jn(t,e.x1,e.y1)&&Jn(t,e.x2,e.y2)},ka=function(t,e,n,r,i,a,o){var l,s=xr(i,a),u=i/2,h=a/2,g=r-h-o;if((l=Mn(t,e,n,r,n-u+s-o,g,n+u-s+o,g,!1)).length>0)return l;var x=n+u+o;if((l=Mn(t,e,n,r,x,r-h+s-o,x,r+h-s+o,!1)).length>0)return l;var D=r+h+o;if((l=Mn(t,e,n,r,n-u+s-o,D,n+u-s+o,D,!1)).length>0)return l;var m,T=n-u-o;if((l=Mn(t,e,n,r,T,r-h+s-o,T,r+h-s+o,!1)).length>0)return l;var _=n-u+s,L=r-h+s;if((m=mr(t,e,n,r,_,L,s+o)).length>0&&m[0]<=_&&m[1]<=L)return[m[0],m[1]];var P=n+u-s,C=r-h+s;if((m=mr(t,e,n,r,P,C,s+o)).length>0&&m[0]>=P&&m[1]<=C)return[m[0],m[1]];var V=n+u-s,B=r+h-s;if((m=mr(t,e,n,r,V,B,s+o)).length>0&&m[0]>=V&&m[1]>=B)return[m[0],m[1]];var F=n-u+s,k=r+h-s;return(m=mr(t,e,n,r,F,k,s+o)).length>0&&m[0]<=F&&m[1]>=k?[m[0],m[1]]:[]},zi=function(t,e,n,r,i,a,o){var l=o,s=Math.min(n,i),u=Math.max(n,i),h=Math.min(r,a),g=Math.max(r,a);return s-l<=t&&t<=u+l&&h-l<=e&&e<=g+l},Ma=function(t,e,n,r,i,a,o,l,s){var u=Math.min(n,o,i)-s,h=Math.max(n,o,i)+s,g=Math.min(r,l,a)-s,x=Math.max(r,l,a)+s;return!(t<u||t>h||e<g||e>x)},Oa=function(t,e,n,r,i,a,o,l){var _,L,P,C,V,B,F,k,U,$,Q,it,ot,s=[];L=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*l-6*a*a+3*a*l,P=3*n*n-6*n*i+n*o-n*t+2*i*i+2*i*t-o*t+3*r*r-6*r*a+r*l-r*e+2*a*a+2*a*e-l*e,C=1*n*i-n*n+n*t-i*t+r*a-r*r+r*e-a*e,0==(_=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*l+4*a*a-4*a*l+l*l)&&(_=1e-5),k=-27*(C/=_)+(L/=_)*(9*(P/=_)-L*L*2),B=(F=(3*P-L*L)/9)*F*F+(k/=54)*k,(V=s)[1]=0,it=L/3,B>0?($=($=k+Math.sqrt(B))<0?-Math.pow(-$,1/3):Math.pow($,1/3),Q=(Q=k-Math.sqrt(B))<0?-Math.pow(-Q,1/3):Math.pow(Q,1/3),V[0]=-it+$+Q,V[4]=V[2]=-(it+=($+Q)/2),it=Math.sqrt(3)*(-Q+$)/2,V[3]=it,V[5]=-it):(V[5]=V[3]=0,0===B?(ot=k<0?-Math.pow(-k,1/3):Math.pow(k,1/3),V[0]=2*ot-it,V[4]=V[2]=-(ot+it)):(U=(F=-F)*F*F,U=Math.acos(k/Math.sqrt(U)),ot=2*Math.sqrt(F),V[0]=-it+ot*Math.cos(U/3),V[2]=-it+ot*Math.cos((U+2*Math.PI)/3),V[4]=-it+ot*Math.cos((U+4*Math.PI)/3)));for(var u=[],h=0;h<6;h+=2)Math.abs(s[h+1])<1e-7&&s[h]>=0&&s[h]<=1&&u.push(s[h]);u.push(1),u.push(0);for(var g,x,D,m=-1,T=0;T<u.length;T++)g=Math.pow(1-u[T],2)*n+2*(1-u[T])*u[T]*i+u[T]*u[T]*o,x=Math.pow(1-u[T],2)*r+2*(1-u[T])*u[T]*a+u[T]*u[T]*l,D=Math.pow(g-t,2)+Math.pow(x-e,2),m>=0?D<m&&(m=D):m=D;return m},Ga=function(t,e,n,r,i,a){var o=[t-n,e-r],l=[i-n,a-r],s=l[0]*l[0]+l[1]*l[1],u=o[0]*o[0]+o[1]*o[1],h=o[0]*l[0]+o[1]*l[1],g=h*h/s;return h<0?u:g>s?(t-i)*(t-i)+(e-a)*(e-a):u-g},tn=function(t,e,n){for(var r,i,a,o,l=0,s=0;s<n.length/2;s++)if(i=n[2*s+1],s+1<n.length/2?(a=n[2*(s+1)],o=n[2*(s+1)+1]):(a=n[2*(s+1-n.length/2)],o=n[2*(s+1-n.length/2)+1]),(r=n[2*s])!=t||a!=t){if(!(r>=t&&t>=a||r<=t&&t<=a))continue;(t-r)/(a-r)*(o-i)+i>e&&l++}return l%2!=0},In=function(t,e,n,r,i,a,o,l,s){var u,h=new Array(n.length);null!=l[0]?(u=Math.atan(l[1]/l[0]),l[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=l;for(var g,x=Math.cos(-u),D=Math.sin(-u),m=0;m<h.length/2;m++)h[2*m]=a/2*(n[2*m]*x-n[2*m+1]*D),h[2*m+1]=o/2*(n[2*m+1]*x+n[2*m]*D),h[2*m]+=r,h[2*m+1]+=i;if(s>0){var T=Hi(h,-s);g=Xi(T)}else g=h;return tn(t,e,g)},Xi=function(t){for(var a,o,l,s,u=new Array(t.length/2),h=0;h<t.length/4;h++){h<t.length/4-1?(a=t[4*(h+1)],o=t[4*(h+1)+1],l=t[4*(h+1)+2],s=t[4*(h+1)+3]):(a=t[0],o=t[1],l=t[2],s=t[3]);var g=Mn(t[4*h],t[4*h+1],t[4*h+2],t[4*h+3],a,o,l,s,!0);u[2*h]=g[0],u[2*h+1]=g[1]}return u},Hi=function(t,e){for(var n,r,i,a,o=new Array(2*t.length),l=0;l<t.length/2;l++){l<t.length/2-1?(i=t[2*(l+1)],a=t[2*(l+1)+1]):(i=t[0],a=t[1]);var s=a-(r=t[2*l+1]),u=-(i-(n=t[2*l])),h=Math.sqrt(s*s+u*u),g=s/h,x=u/h;o[4*l]=n+g*e,o[4*l+1]=r+x*e,o[4*l+2]=i+g*e,o[4*l+3]=a+x*e}return o},Hn=function(t,e,n,r,i,a,o){return t-=i,e-=a,(t/=n/2+o)*t+(e/=r/2+o)*e<=1},mr=function(t,e,n,r,i,a,o){var l=[n-t,r-e],s=[t-i,e-a],u=l[0]*l[0]+l[1]*l[1],h=2*(s[0]*l[0]+s[1]*l[1]),g=h*h-4*u*(s[0]*s[0]+s[1]*s[1]-o*o);if(g<0)return[];var x=(-h+Math.sqrt(g))/(2*u),D=(-h-Math.sqrt(g))/(2*u),m=Math.min(x,D),T=Math.max(x,D),_=[];if(m>=0&&m<=1&&_.push(m),T>=0&&T<=1&&_.push(T),0===_.length)return[];var L=_[0]*l[0]+t,P=_[0]*l[1]+e;return _.length>1?_[0]==_[1]?[L,P]:[L,P,_[1]*l[0]+t,_[1]*l[1]+e]:[L,P]},li=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Mn=function(t,e,n,r,i,a,o,l,s){var u=t-i,h=n-t,g=o-i,x=e-a,D=r-e,m=l-a,T=g*x-m*u,_=h*x-D*u,L=m*h-g*D;if(0!==L){var P=T/L,C=_/L;return-.001<=P&&P<=1.001&&-.001<=C&&C<=1.001||s?[t+P*h,e+P*D]:[]}return 0===T||0===_?li(t,n,o)===o?[o,l]:li(t,n,i)===i?[i,a]:li(i,o,n)===n?[n,r]:[]:[]},br=function(t,e,n,r,i,a,o,l){var s,u,x,D,m=[],T=new Array(n.length),_=!0;if(null==a&&(_=!1),_){for(var L=0;L<T.length/2;L++)T[2*L]=n[2*L]*a+r,T[2*L+1]=n[2*L+1]*o+i;if(l>0){var P=Hi(T,-l);u=Xi(P)}else u=T}else u=n;for(var C=0;C<u.length/2;C++)C<u.length/2-1?(x=u[2*(C+1)],D=u[2*(C+1)+1]):(x=u[0],D=u[1]),0!==(s=Mn(t,e,r,i,u[2*C],u[2*C+1],x,D)).length&&m.push(s[0],s[1]);return m},Mr=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[e[0]+a*r[0],e[1]+a*r[1]]},Ue=function(t,e){var n=ui(t,e);return Vi(n)},Vi=function(t){for(var e,n,r=t.length/2,i=1/0,a=1/0,o=-1/0,l=-1/0,s=0;s<r;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),l=Math.max(l,n);for(var u=2/(o-i),h=2/(l-a),g=0;g<r;g++)e=t[2*g]=t[2*g]*u,n=t[2*g+1]=t[2*g+1]*h,i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),l=Math.max(l,n);if(a<-1)for(var x=0;x<r;x++)n=t[2*x+1]=t[2*x+1]+(-1-a);return t},ui=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,a=new Array(2*t),o=0;o<t;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},xr=function(t,e){return Math.min(t/4,e/4,8)},hi=function(t,e){return Math.min(t/10,e/10,8)},Ui=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Ra=Re({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),Fa={pageRank:function(t){for(var e=Ra(t),n=e.dampingFactor,r=e.precision,i=e.iterations,a=e.weight,o=this._private.cy,l=this.byGroup(),s=l.nodes,u=l.edges,h=s.length,x=u.length,D=new Array(h*h),m=new Array(h),T=(1-n)/h,_=0;_<h;_++){for(var L=0;L<h;L++)D[_*h+L]=0;m[_]=0}for(var P=0;P<x;P++){var C=u[P],V=C.data("source"),B=C.data("target");if(V!==B){var F=s.indexOfId(V),k=s.indexOfId(B),U=a(C);D[k*h+F]+=U,m[F]+=U}}for(var $=1/h+T,Q=0;Q<h;Q++)if(0===m[Q])for(var it=0;it<h;it++)D[it*h+Q]=$;else for(var ot=0;ot<h;ot++){var st=ot*h+Q;D[st]=D[st]/m[Q]+T}for(var yt,pt=new Array(h),et=new Array(h),Pt=0;Pt<h;Pt++)pt[Pt]=1;for(var Lt=0;Lt<i;Lt++){for(var mt=0;mt<h;mt++)et[mt]=0;for(var _t=0;_t<h;_t++)for(var xt=0;xt<h;xt++)et[_t]+=D[_t*h+xt]*pt[xt];Fi(et),yt=pt,pt=et,et=yt;for(var kt=0,Bt=0;Bt<h;Bt++){var Xt=yt[Bt]-pt[Bt];kt+=Xt*Xt}if(kt<r)break}return{rank:function(Yt){return Yt=o.collection(Yt)[0],pt[s.indexOf(Yt)]}}}},qi=Re({root:null,weight:function(t){return 1},directed:!1,alpha:0}),lt={degreeCentralityNormalized:function(t){t=qi(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},a={},o=0,l=0,s=0;s<r;s++){var u=n[s],h=u.id();t.root=u;var g=this.degreeCentrality(t);o<g.indegree&&(o=g.indegree),l<g.outdegree&&(l=g.outdegree),i[h]=g.indegree,a[h]=g.outdegree}return{indegree:function(L){return 0==o?0:(c(L)&&(L=e.filter(L)),i[L.id()]/o)},outdegree:function(L){return 0===l?0:(c(L)&&(L=e.filter(L)),a[L.id()]/l)}}}for(var x={},D=0,m=0;m<r;m++){var T=n[m];t.root=T;var _=this.degreeCentrality(t);D<_.degree&&(D=_.degree),x[T.id()]=_.degree}return{degree:function(L){return 0===D?0:(c(L)&&(L=e.filter(L)),x[L.id()]/D)}}},degreeCentrality:function(t){t=qi(t);var e=this.cy(),n=this,i=t.root,a=t.weight,o=t.directed,l=t.alpha;if(i=e.collection(i)[0],o){for(var s=i.connectedEdges(),u=s.filter(function(B){return B.target().same(i)&&n.has(B)}),h=s.filter(function(B){return B.source().same(i)&&n.has(B)}),g=u.length,x=h.length,D=0,m=0,T=0;T<u.length;T++)D+=a(u[T]);for(var _=0;_<h.length;_++)m+=a(h[_]);return{indegree:Math.pow(g,1-l)*Math.pow(D,l),outdegree:Math.pow(x,1-l)*Math.pow(m,l)}}for(var L=i.connectedEdges().intersection(n),P=L.length,C=0,V=0;V<L.length;V++)C+=a(L[V]);return{degree:Math.pow(P,1-l)*Math.pow(C,l)}}};lt.dc=lt.degreeCentrality,lt.dcn=lt.degreeCentralityNormalised=lt.degreeCentralityNormalized;var St=Re({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),K={closenessCentralityNormalized:function(t){for(var e=St(t),n=e.harmonic,r=e.weight,i=e.directed,a=this.cy(),o={},l=0,s=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),h=0;h<s.length;h++){for(var g=0,x=s[h],D=0;D<s.length;D++)if(h!==D){var m=u.distance(x,s[D]);g+=n?1/m:m}n||(g=1/g),l<g&&(l=g),o[x.id()]=g}return{closeness:function(T){return 0==l?0:(T=c(T)?a.filter(T)[0].id():T.id(),o[T]/l)}}},closenessCentrality:function(t){var e=St(t),n=e.root,r=e.weight,i=e.directed,a=e.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),l=0,s=this.nodes(),u=0;u<s.length;u++){var h=s[u];if(!h.same(n)){var g=o.distanceTo(h);l+=a?1/g:g}}return a?l:1/l}};K.cc=K.closenessCentrality,K.ccn=K.closenessCentralityNormalised=K.closenessCentralityNormalized;var Mt=Re({weight:null,directed:!1}),Ft={betweennessCentrality:function(t){for(var e=Mt(t),n=e.directed,r=e.weight,i=null!=r,a=this.cy(),o=this.nodes(),l={},s={},u=0,h=function(P,C){s[P]=C,C>u&&(u=C)},g=function(P){return s[P]},x=0;x<o.length;x++){var D=o[x],m=D.id();l[m]=n?D.outgoers().nodes():D.openNeighborhood().nodes(),h(m,0)}for(var T=function(P){for(var C=o[P].id(),V=[],B={},F={},k={},U=new gr(function(Bt,Xt){return k[Bt]-k[Xt]}),$=0;$<o.length;$++){var Q=o[$].id();B[Q]=[],F[Q]=0,k[Q]=1/0}for(F[C]=1,k[C]=0,U.push(C);!U.empty();){var it=U.pop();if(V.push(it),i)for(var ot=0;ot<l[it].length;ot++){var pt,st=l[it][ot],yt=a.getElementById(it);pt=yt.edgesTo(st).length>0?yt.edgesTo(st)[0]:st.edgesTo(yt)[0];var et=r(pt);st=st.id(),k[st]>k[it]+et&&(k[st]=k[it]+et,U.nodes.indexOf(st)<0?U.push(st):U.updateItem(st),F[st]=0,B[st]=[]),k[st]==k[it]+et&&(F[st]=F[st]+F[it],B[st].push(it))}else for(var Pt=0;Pt<l[it].length;Pt++){var Lt=l[it][Pt].id();k[Lt]==1/0&&(U.push(Lt),k[Lt]=k[it]+1),k[Lt]==k[it]+1&&(F[Lt]=F[Lt]+F[it],B[Lt].push(it))}}for(var mt={},_t=0;_t<o.length;_t++)mt[o[_t].id()]=0;for(;V.length>0;){for(var xt=V.pop(),Tt=0;Tt<B[xt].length;Tt++){var kt=B[xt][Tt];mt[kt]=mt[kt]+F[kt]/F[xt]*(1+mt[xt])}xt!=o[P].id()&&h(xt,g(xt)+mt[xt])}},_=0;_<o.length;_++)T(_);var L={betweenness:function(P){var C=a.collection(P).id();return g(C)},betweennessNormalized:function(P){if(0==u)return 0;var C=a.collection(P).id();return g(C)/u}};return L.betweennessNormalised=L.betweennessNormalized,L}};Ft.bc=Ft.betweennessCentrality;var $t=Re({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),ze=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Fe=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var a=0;a<e;a++)t[a*e+r]=t[a*e+r]/n}},yn=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)r[i*n+l]+=t[i*n+o]*e[o*n+l]}return r},mn=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=yn(t,r,e);return t},ci=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Fe(r,e),r},vt=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},qt=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},ee=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=$t(t),a={},o=0;o<e.length;o++)a[e[o].id()]=o;for(var l,s=e.length,u=s*s,h=new Array(u),g=0;g<u;g++)h[g]=0;for(var x=0;x<n.length;x++){var D=n[x],m=a[D.source().id()],T=a[D.target().id()],_=ze(D,i.attributes);h[m*s+T]+=_,h[T*s+m]+=_}(function(V,B,F){for(var k=0;k<B;k++)V[k*B+k]=F})(h,s,i.multFactor),Fe(h,s);for(var L=!0,P=0;L&&P<i.maxIterations;)L=!1,l=mn(h,s,i.expandFactor),h=ci(l,s,i.inflateFactor),vt(h,l,u,4)||(L=!0),P++;return function(V){for(var B=0;B<V.length;B++)for(var F=0;F<V.length;F++)B!=F&&qt(V[B],V[F])&&V.splice(F,1);return V}(function(V,B,F,k){for(var U=[],$=0;$<B;$++){for(var Q=[],it=0;it<B;it++)Math.round(1e3*V[$*B+it])/1e3>0&&Q.push(F[it]);0!==Q.length&&U.push(k.collection(Q))}return U}(h,s,e,r))},se={markovClustering:ee,mcl:ee},Le=function(t){return t},Te=function(t,e){return Math.abs(e-t)},sn=function(t,e,n){return t+Te(e,n)},Ae=function(t,e,n){return t+Math.pow(n-e,2)},ln=function(t){return Math.sqrt(t)},Xe=function(t,e,n){return Math.max(t,Te(e,n))},qe=function(t,e,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Le,o=r,l=0;l<t;l++)o=i(o,e(l),n(l));return a(o)},Ce={euclidean:function(t,e,n){return t>=2?qe(t,e,n,0,Ae,ln):qe(t,e,n,0,sn)},squaredEuclidean:function(t,e,n){return qe(t,e,n,0,Ae)},manhattan:function(t,e,n){return qe(t,e,n,0,sn)},max:function(t,e,n){return qe(t,e,n,-1/0,Xe)}};function He(t,e,n,r,i,a){var o;return o=E(t)?t:Ce[t]||Ce.euclidean,0===e&&E(t)?o(i,a):o(e,n,r,i,a)}Ce["squared-euclidean"]=Ce.squaredEuclidean,Ce.squaredeuclidean=Ce.squaredEuclidean;var Sn=Re({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Pn=function(t){return Sn(t)},_n=function(t,e,n,r,i){var a="kMedoids"!==i?function(s){return n[s]}:function(s){return r[s](n)};return He(t,r.length,a,function(s){return r[s](e)},n,e)},On=function(t,e,n){for(var r=n.length,i=new Array(r),a=new Array(r),o=new Array(e),l=null,s=0;s<r;s++)i[s]=t.min(n[s]).value,a[s]=t.max(n[s]).value;for(var u=0;u<e;u++){l=[];for(var h=0;h<r;h++)l[h]=Math.random()*(a[h]-i[h])+i[h];o[u]=l}return o},An=function(t,e,n,r,i){for(var a=1/0,o=0,l=0;l<e.length;l++){var s=_n(n,t,e[l],r,i);s<a&&(a=s,o=l)}return o},Vn=function(t,e,n){for(var r=[],i=null,a=0;a<e.length;a++)n[(i=e[a]).id()]===t&&r.push(i);return r},di=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},$i=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},Ba=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];$i(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var a=0;a<e;a++)n[a]=t[Math.floor(Math.random()*t.length)];return n},bo=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=_n("manhattan",e[i],t,n,"kMedoids");return r},ll=function(t,e,n,r,i){for(var a,o,l=0;l<e.length;l++)for(var s=0;s<t.length;s++)r[l][s]=Math.pow(n[l][s],i.m);for(var u=0;u<t.length;u++)for(var h=0;h<i.attributes.length;h++){a=0,o=0;for(var g=0;g<e.length;g++)a+=r[g][u]*i.attributes[h](e[g]),o+=r[g][u];t[u][h]=a/o}},ul=function(t,e,n,r,i){for(var a=0;a<t.length;a++)e[a]=t[a].slice();for(var o,l,s,u=2/(i.m-1),h=0;h<n.length;h++)for(var g=0;g<r.length;g++){o=0;for(var x=0;x<n.length;x++)l=_n(i.distance,r[g],n[h],i.attributes,"cmeans"),s=_n(i.distance,r[g],n[x],i.attributes,"cmeans"),o+=Math.pow(l/s,u);t[g][h]=1/o}},xo=function(t){var e,n,r,i,a=this.cy(),o=this.nodes(),l=Pn(t);r=new Array(o.length);for(var s=0;s<o.length;s++)r[s]=new Array(l.k);n=new Array(o.length);for(var u=0;u<o.length;u++)n[u]=new Array(l.k);for(var h=0;h<o.length;h++){for(var g=0,x=0;x<l.k;x++)n[h][x]=Math.random(),g+=n[h][x];for(var D=0;D<l.k;D++)n[h][D]=n[h][D]/g}e=new Array(l.k);for(var m=0;m<l.k;m++)e[m]=new Array(l.attributes.length);i=new Array(o.length);for(var T=0;T<o.length;T++)i[T]=new Array(l.k);for(var _=!0,L=0;_&&L<l.maxIterations;)_=!1,ll(e,o,n,i,l),ul(n,r,e,o,l),di(n,r,l.sensitivityThreshold)||(_=!0),L++;return{clusters:function(P,C,V,B){for(var F,k,U=new Array(V.k),$=0;$<U.length;$++)U[$]=[];for(var Q=0;Q<C.length;Q++){F=-1/0,k=-1;for(var it=0;it<C[0].length;it++)C[Q][it]>F&&(F=C[Q][it],k=it);U[k].push(P[Q])}for(var ot=0;ot<U.length;ot++)U[ot]=B.collection(U[ot]);return U}(o,n,l,a),degreeOfMembership:n}},hl={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,a=Pn(t),o=new Array(a.k),l={};e=a.testMode?"number"==typeof a.testCentroids?On(r,a.k,a.attributes):"object"===ht(a.testCentroids)?a.testCentroids:On(r,a.k,a.attributes):On(r,a.k,a.attributes);for(var h,g=!0,x=0;g&&x<a.maxIterations;){for(var D=0;D<r.length;D++)l[(i=r[D]).id()]=An(i,e,a.distance,a.attributes,"kMeans");g=!1;for(var m=0;m<a.k;m++){var T=Vn(m,r,l);if(0!==T.length){for(var _=a.attributes.length,L=e[m],P=new Array(_),C=new Array(_),V=0;V<_;V++){C[V]=0;for(var B=0;B<T.length;B++)C[V]+=a.attributes[V](i=T[B]);P[V]=C[V]/T.length,h=a.sensitivityThreshold,Math.abs(L[V]-P[V])<=h||(g=!0)}e[m]=P,o[m]=n.collection(T)}}x++}return o},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),a=null,o=Pn(t),l=new Array(o.k),s={},u=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(e="object"===ht(o.testCentroids)?o.testCentroids:Ba(i,o.k)):e=Ba(i,o.k);for(var h=!0,g=0;h&&g<o.maxIterations;){for(var x=0;x<i.length;x++)s[(a=i[x]).id()]=An(a,e,o.distance,o.attributes,"kMedoids");h=!1;for(var D=0;D<e.length;D++){var m=Vn(D,i,s);if(0!==m.length){u[D]=bo(e[D],m,o.attributes);for(var T=0;T<m.length;T++)(n=bo(m[T],m,o.attributes))<u[D]&&(u[D]=n,e[D]=m[T],h=!0);l[D]=r.collection(m)}}g++}return l},fuzzyCMeans:xo,fcm:xo},cl=Re({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),dl={single:"min",complete:"max"},wo=function(t,e,n,r,i){for(var a,o=0,l=1/0,s=i.attributes,u=function(k,U){return He(i.distance,s.length,function($){return s[$](k)},function($){return s[$](U)},k,U)},h=0;h<t.length;h++){var g=t[h].key,x=n[g][r[g]];x<l&&(o=g,l=x)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var D,m=e[o],T=e[r[o]];D="dendrogram"===i.mode?{left:m,right:T,key:m.key}:{value:m.value.concat(T.value),key:m.key},t[m.index]=D,t.splice(T.index,1),e[m.key]=D;for(var _=0;_<t.length;_++){var L=t[_];m.key===L.key?a=1/0:"min"===i.linkage?(a=n[m.key][L.key],n[m.key][L.key]>n[T.key][L.key]&&(a=n[T.key][L.key])):"max"===i.linkage?(a=n[m.key][L.key],n[m.key][L.key]<n[T.key][L.key]&&(a=n[T.key][L.key])):a="mean"===i.linkage?(n[m.key][L.key]*m.size+n[T.key][L.key]*T.size)/(m.size+T.size):"dendrogram"===i.mode?u(L.value,m.value):u(L.value[0],m.value[0]),n[m.key][L.key]=n[L.key][m.key]=a}for(var P=0;P<t.length;P++){var C=t[P].key;if(r[C]===m.key||r[C]===T.key){for(var V=C,B=0;B<t.length;B++){var F=t[B].key;n[C][F]<n[C][V]&&(V=F)}r[C]=V}t[P].index=P}return m.key=T.key=m.index=T.index=null,!0},Zi=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Eo=function(t){for(var e=this.cy(),n=this.nodes(),r=(P=void 0,void 0,P=cl(t),null!=(C=dl[P.linkage])&&(P.linkage=C),P),i=r.attributes,a=function(L,P){return He(r.distance,i.length,function(C){return i[C](L)},function(C){return i[C](P)},L,P)},o=[],l=[],s=[],u=[],h=0;h<n.length;h++){var g={value:"dendrogram"===r.mode?n[h]:[n[h]],key:h,index:h};o[h]=g,u[h]=g,l[h]=[],s[h]=0}for(var P,C,x=0;x<o.length;x++)for(var D=0;D<=x;D++){var m;m="dendrogram"===r.mode?x===D?1/0:a(o[x].value,o[D].value):x===D?1/0:a(o[x].value[0],o[D].value[0]),l[x][D]=m,l[D][x]=m,m<l[x][s[x]]&&(s[x]=D)}for(var T,_=wo(o,u,l,s,r);_;)_=wo(o,u,l,s,r);return"dendrogram"===r.mode?(T=function L(P,C,V){if(!P)return[];var B=[],F=[],k=[];return 0===C?(P.left&&Zi(P.left,B),P.right&&Zi(P.right,F),k=B.concat(F),[V.collection(k)]):1===C?P.value?[V.collection(P.value)]:(P.left&&Zi(P.left,B),P.right&&Zi(P.right,F),[V.collection(B),V.collection(F)]):P.value?[V.collection(P.value)]:(P.left&&(B=L(P.left,C-1,V)),P.right&&(F=L(P.right,C-1,V)),B.concat(F))}(o[0],r.dendrogramDepth,e),r.addDendrogram&&function L(P,C){if(!P)return"";if(P.left&&P.right){var V=L(P.left,C),B=L(P.right,C),F=C.add({group:"nodes",data:{id:V+","+B}});return C.add({group:"edges",data:{source:V,target:F.id()}}),C.add({group:"edges",data:{source:B,target:F.id()}}),F.id()}return P.value?P.value.id():void 0}(o[0],e)):(T=new Array(o.length),o.forEach(function(L,P){L.key=L.index=null,T[P]=e.collection(L.value)})),T},fl={hierarchicalClustering:Eo,hca:Eo},pl=Re({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),gl=function(t,e,n,r){var i=function(a,o){return r[o](a)};return-He(t,r.length,function(a){return i(e,a)},function(a){return i(n,a)},e,n)},Do=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var a=-1,o=-1/0,l=0;l<n.length;l++){var s=n[l];e[i*t+s]>o&&(a=s,o=e[i*t+s])}a>0&&r.push(a)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},Lo=function(t){for(var e,n,r,i,a,o,l=this.cy(),s=this.nodes(),u=function(z){var ut=z.damping,wt=z.preference;.5<=ut&&ut<1||_e("Damping must range on [0.5, 1).  Got: ".concat(ut));var Ct=["median","mean","min","max"];return Ct.some(function(Et){return Et===wt})||M(wt)||_e("Preference must be one of [".concat(Ct.map(function(Et){return"'".concat(Et,"'")}).join(", "),"] or a number.  Got: ").concat(wt)),pl(z)}(t),h={},g=0;g<s.length;g++)h[s[g].id()]=g;n=(e=s.length)*e,r=new Array(n);for(var x=0;x<n;x++)r[x]=-1/0;for(var D=0;D<e;D++)for(var m=0;m<e;m++)D!==m&&(r[D*e+m]=gl(u.distance,s[D],s[m],u.attributes));i=function(t,e){return"median"===e?function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(i<n.length&&n.splice(i,n.length-i),r>0&&n.splice(0,r)):n=n.slice(r,i);for(var s=0,u=n.length-1;u>=0;u--)l?isFinite(n[u])||(n[u]=-1/0,s++):n.splice(u,1);o&&n.sort(function(D,m){return D-m});var g=n.length,x=Math.floor(g/2);return g%2!=0?n[x+1+s]:(n[x-1+s]+n[x+s])/2}(t):"mean"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=0,o=0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l<i;l++){var s=n[l];isFinite(s)&&(a+=s,o++)}return a/o}(t):"min"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<i;o++){var l=n[o];isFinite(l)&&(a=Math.min(l,a))}return a}(t):"max"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=-1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<i;o++){var l=n[o];isFinite(l)&&(a=Math.max(l,a))}return a}(t):e}(r,u.preference);for(var T=0;T<e;T++)r[T*e+T]=i;a=new Array(n);for(var _=0;_<n;_++)a[_]=0;o=new Array(n);for(var L=0;L<n;L++)o[L]=0;for(var P=new Array(e),C=new Array(e),V=new Array(e),B=0;B<e;B++)P[B]=0,C[B]=0,V[B]=0;for(var F,k=new Array(e*u.minIterations),U=0;U<k.length;U++)k[U]=0;for(F=0;F<u.maxIterations;F++){for(var $=0;$<e;$++){for(var Q=-1/0,it=-1/0,ot=-1,st=0,yt=0;yt<e;yt++)P[yt]=a[$*e+yt],(st=o[$*e+yt]+r[$*e+yt])>=Q?(it=Q,Q=st,ot=yt):st>it&&(it=st);for(var pt=0;pt<e;pt++)a[$*e+pt]=(1-u.damping)*(r[$*e+pt]-Q)+u.damping*P[pt];a[$*e+ot]=(1-u.damping)*(r[$*e+ot]-it)+u.damping*P[ot]}for(var et=0;et<e;et++){for(var Pt=0,Lt=0;Lt<e;Lt++)P[Lt]=o[Lt*e+et],C[Lt]=Math.max(0,a[Lt*e+et]),Pt+=C[Lt];Pt-=C[et],C[et]=a[et*e+et],Pt+=C[et];for(var mt=0;mt<e;mt++)o[mt*e+et]=(1-u.damping)*Math.min(0,Pt-C[mt])+u.damping*P[mt];o[et*e+et]=(1-u.damping)*(Pt-C[et])+u.damping*P[et]}for(var _t=0,xt=0;xt<e;xt++){var Tt=o[xt*e+xt]+a[xt*e+xt]>0?1:0;k[F%u.minIterations*e+xt]=Tt,_t+=Tt}if(_t>0&&(F>=u.minIterations-1||F==u.maxIterations-1)){for(var kt=0,Bt=0;Bt<e;Bt++){V[Bt]=0;for(var Xt=0;Xt<u.minIterations;Xt++)V[Bt]+=k[Xt*e+Bt];0!==V[Bt]&&V[Bt]!==u.minIterations||kt++}if(kt===e)break}}for(var Yt=function(z,ut,wt){for(var Ct=[],Et=0;Et<z;Et++)ut[Et*z+Et]+wt[Et*z+Et]>0&&Ct.push(Et);return Ct}(e,a,o),jt=function(z,ut,wt){for(var Ct=Do(z,ut,wt),Et=0;Et<wt.length;Et++){for(var Ht=[],Gt=0;Gt<Ct.length;Gt++)Ct[Gt]===wt[Et]&&Ht.push(Gt);for(var Kt=-1,ae=-1/0,ue=0;ue<Ht.length;ue++){for(var ce=0,re=0;re<Ht.length;re++)ce+=ut[Ht[re]*z+Ht[ue]];ce>ae&&(Kt=ue,ae=ce)}wt[Et]=Ht[Kt]}return Do(z,ut,wt)}(e,r,Yt),Zt={},ne=0;ne<Yt.length;ne++)Zt[Yt[ne]]=[];for(var le=0;le<s.length;le++){var zt=jt[h[s[le].id()]];null!=zt&&Zt[zt].push(s[le])}for(var Wt=new Array(Yt.length),Qt=0;Qt<Yt.length;Qt++)Wt[Qt]=l.collection(Zt[Yt[Qt]]);return Wt},yl={affinityPropagation:Lo,ap:Lo},ml=Re({root:void 0,directed:!1}),ji=function(){var t=this,e={},n=0,r=0,i=[],a=[],o={},l=function u(h,g,x){h===x&&(r+=1),e[g]={id:n,low:n++,cutVertex:!1};var D,m,T,_,L=t.getElementById(g).connectedEdges().intersection(t);0===L.size()?i.push(t.spawn(t.getElementById(g))):L.forEach(function(P){D=P.source().id(),m=P.target().id(),(T=D===g?m:D)!==x&&(_=P.id(),o[_]||(o[_]=!0,a.push({x:g,y:T,edge:P})),T in e?e[g].low=Math.min(e[g].low,e[T].id):(u(h,T,g),e[g].low=Math.min(e[g].low,e[T].low),e[g].id<=e[T].low&&(e[g].cutVertex=!0,function(C,V){for(var B=a.length-1,F=[],k=t.spawn();a[B].x!=C||a[B].y!=V;)F.push(a.pop().edge),B--;F.push(a.pop().edge),F.forEach(function(U){var $=U.connectedNodes().intersection(t);k.merge(U),$.forEach(function(Q){var it=Q.id(),ot=Q.connectedEdges().intersection(t);k.merge(Q),k.merge(e[it].cutVertex?ot.filter(function(st){return st.isLoop()}):ot)})}),i.push(k)}(g,T))))})};t.forEach(function(u){if(u.isNode()){var h=u.id();h in e||(r=0,l(h,h),e[h].cutVertex=r>1)}});var s=Object.keys(e).filter(function(u){return e[u].cutVertex}).map(function(u){return t.getElementById(u)});return{cut:t.spawn(s),components:i}},Wi=function(){var t=this,e={},n=0,r=[],i=[],a=t.spawn(t);return t.forEach(function(o){if(o.isNode()){var l=o.id();l in e||function s(u){if(i.push(u),e[u]={index:n,low:n++,explored:!1},t.getElementById(u).connectedEdges().intersection(t).forEach(function(m){var T=m.target().id();T!==u&&(T in e||s(T),e[T].explored||(e[u].low=Math.min(e[u].low,e[T].low)))}),e[u].index===e[u].low){for(var h=t.spawn();;){var g=i.pop();if(h.merge(t.getElementById(g)),e[g].low=e[u].index,e[g].explored=!0,g===u)break}var x=h.edgesWith(h),D=h.merge(x);r.push(D),a=a.difference(D)}}(l)}}),{cut:a,components:r}},To={};[Tn,ei,ni,La,Ia,Pa,Ca,Fa,lt,K,Ft,se,hl,fl,yl,{hierholzer:function(t){if(!A(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,a=ml(t),o=a.root,l=a.directed,s=this,u=!1;o&&(i=c(o)?this.filter(o)[0].id():o[0].id());var h={},g={};s.forEach(l?function(L){var P=L.id();if(L.isNode()){var C=L.indegree(!0),V=L.outdegree(!0),B=C-V,F=V-C;1==B?n?u=!0:n=P:1==F?r?u=!0:r=P:(F>1||B>1)&&(u=!0),h[P]=[],L.outgoers().forEach(function(k){k.isEdge()&&h[P].push(k.id())})}else g[P]=[void 0,L.target().id()]}:function(L){var P=L.id();L.isNode()?(L.degree(!0)%2&&(n?r?u=!0:r=P:n=P),h[P]=[],L.connectedEdges().forEach(function(C){return h[P].push(C.id())})):g[P]=[L.source().id(),L.target().id()]});var x={found:!1,trail:void 0};if(u)return x;if(r&&n)if(l){if(i&&r!=i)return x;i=r}else{if(i&&r!=i&&n!=i)return x;i||(i=r)}else i||(i=s[0].id());var D=function(L){for(var P,C,V,B=L,F=[L];h[B].length;)P=h[B].shift(),C=g[P][0],B!=(V=g[P][1])?(h[V]=h[V].filter(function(k){return k!=P}),B=V):l||B==C||(h[C]=h[C].filter(function(k){return k!=P}),B=C),F.unshift(P),F.unshift(B);return F},m=[],T=[];for(T=D(i);1!=T.length;)0==h[T[0]].length?(m.unshift(s.getElementById(T.shift())),m.unshift(s.getElementById(T.shift()))):T=D(T.shift()).concat(T);for(var _ in m.unshift(s.getElementById(T.shift())),h)if(h[_].length)return x;return x.found=!0,x.trail=this.spawn(m,!0),x}},{hopcroftTarjanBiconnected:ji,htbc:ji,htb:ji,hopcroftTarjanBiconnectedComponents:ji},{tarjanStronglyConnected:Wi,tsc:Wi,tscc:Wi,tarjanStronglyConnectedComponents:Wi}].forEach(function(t){W(To,t)});var Un=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Un.prototype={fulfill:function(t){return Io(this,1,"fulfillValue",t)},reject:function(t){return Io(this,2,"rejectReason",t)},then:function(t,e){var n=new Un;return this.onFulfilled.push(_o(t,n,"fulfill")),this.onRejected.push(_o(e,n,"reject")),So(this),n.proxy}};var Io=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,So(t)),t},So=function(t){1===t.state?Po(t,"onFulfilled",t.fulfillValue):2===t.state&&Po(t,"onRejected",t.rejectReason)},Po=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var a=0;a<r.length;a++)r[a](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},_o=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(a){return void e.reject(a)}bl(e,i)}}},bl=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===ht(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(a){return void e.reject(a)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,function(a){i||(i=!0,a===n?e.reject(new TypeError("circular thenable chain")):t(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};Un.all=function(t){return new Un(function(e,n){for(var r=new Array(t.length),i=0,a=function(l,s){r[l]=s,++i===t.length&&e(r)},o=0;o<t.length;o++)!function(l){var s=t[l];null!=s&&null!=s.then?s.then(function(u){a(l,u)},function(u){n(u)}):a(l,s)}(o)})},Un.resolve=function(t){return new Un(function(e,n){e(t)})},Un.reject=function(t){return new Un(function(e,n){n(t)})};var Or="undefined"!=typeof Promise?Promise:Un,Ya=function(t,e,n){var r=At(t),i=!r,a=this._private=W({duration:1e3},e,n);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&E(a.complete)&&a.completes.push(a.complete),i){var o=t.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(r){var l=t.pan();a.startPan={x:l.x,y:l.y},a.startZoom=t.zoom()}this.length=1,this[0]=this},wr=Ya.prototype;W(wr,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),X(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(l,s){var u=t[l];null!=u&&(t[l]=t[s],t[s]=u)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],a=i.name,o=t.startStyle[a];t.startStyle[a]=i,t.style[r]=o}return e&&this.play(),this},promise:function(t){var e,n=this._private;return e="frame"===t?n.frames:n.completes,new Or(function(r,i){e.push(function(){r()})})}}),wr.complete=wr.completed,wr.run=wr.play,wr.running=wr.playing;var xe={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,a=!n,o=!a;if(!i.styleEnabled())return this;var l=i.style();if(t=W({},t,e),0===Object.keys(t).length)return new Ya(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(o&&(t.style=l.getPropsList(t.style||t.css),t.css=void 0),o&&null!=t.renderedPosition){var s=t.renderedPosition,u=i.pan(),h=i.zoom();t.position=ii(s,h,u)}if(a&&null!=t.panBy){var g=t.panBy,x=i.pan();t.pan={x:x.x+g.x,y:x.y+g.y}}var D=t.center||t.centre;if(a&&null!=D){var m=i.getCenterPan(D.eles,t.zoom);null!=m&&(t.pan=m)}if(a&&null!=t.fit){var T=t.fit,_=i.getFitViewport(T.eles||T.boundingBox,T.padding);null!=_&&(t.pan=_.pan,t.zoom=_.zoom)}if(a&&A(t.zoom)){var L=i.getZoomedViewport(t.zoom);null!=L?(L.zoomed&&(t.zoom=L.zoom),L.panned&&(t.pan=L.pan)):t.zoom=null}return new Ya(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=W({},t,e));for(var r=0;r<n.length;r++){var i=n[r],a=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i]._private,o=a.animation.current,l=0;l<o.length;l++)e&&(o[l]._private.duration=0);t&&(a.animation.queue=[]),e||(a.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=W({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,n){},onSet:function(e){},canSet:function(e){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,a=i?this:[this],o=i?this[0]:this;if(c(e)){var l;if(r.allowGetting&&void 0===n)return o&&(r.beforeGet(o),l=o._private[r.field][e]),l;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var s=N({},e,n);r.beforeSet(this,s);for(var u=0,h=a.length;u<h;u++){var g=a[u];r.canSet(g)&&(g._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&A(e)){var x,D,m=e,T=Object.keys(m);r.beforeSet(this,m);for(var _=0;_<T.length;_++)if(D=m[x=T[_]],!r.immutableKeys[x])for(var L=0;L<a.length;L++){var P=a[L];r.canSet(P)&&(P._private[r.field][x]=D)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&E(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var V;return o&&(r.beforeGet(o),V=o._private[r.field]),V}return this}},removeData:function(t){return t=W({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(c(e)){for(var i=e.split(/\s+/),a=i.length,o=0;o<a;o++){var l=i[o];if(!Z(l)&&!n.immutableKeys[l])for(var s=0,u=r.length;s<u;s++)r[s]._private[n.field][l]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,g=r.length;h<g;h++)for(var x=r[h]._private[n.field],D=Object.keys(x),m=0;m<D.length;m++){var T=D[m];!n.immutableKeys[T]&&(x[T]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(n,r){var i=this,a=Array.prototype.slice.call(arguments,0);return new Or(function(o,l){var s=a.concat([function(h){i.off.apply(i,u),o(h)}]),u=s.concat([]);i.on.apply(i,s)})}}}].forEach(function(t){W(xe,t)});var xl={animate:xe.animate(),animation:xe.animation(),animated:xe.animated(),clearQueue:xe.clearQueue(),delay:xe.delay(),delayAnimation:xe.delayAnimation(),stop:xe.stop()},Ki={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach(function(g){return e.push(g)}),e}S(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new Kn(t),i=0;i<this.length;i++){for(var a=this[i],o=a._private,l=o.classes,s=!1,u=0;u<t.length;u++)if(!l.has(t[u])){s=!0;break}s||(s=l.size!==t.length),s&&(o.classes=r,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){S(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,a=this.length;i<a;i++)for(var o=this[i],l=o._private.classes,s=!1,u=0;u<t.length;u++){var h=t[u],g=l.has(h),x=!1;e||n&&!g?(l.add(h),x=!0):(!e||n&&g)&&(l.delete(h),x=!0),!s&&x&&(r.push(o),s=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};Ki.className=Ki.classNames=Ki.classes;var ge={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:bt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ge.variable="(?:[\\w-]|(?:\\\\"+ge.metaChar+"))+",ge.value=ge.string+"|"+ge.number,ge.className=ge.variable,ge.id=ge.variable,function(){var t,e,n;for(t=ge.comparatorOp.split("|"),n=0;n<t.length;n++)ge.comparatorOp+="|@"+(e=t[n]);for(t=ge.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(ge.comparatorOp+="|\\!"+e)}();var Ja=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return-1*Nt(t.selector,e.selector)}),wl=function(){for(var t,e={},n=0;n<Ja.length;n++)e[(t=Ja[n]).selector]=t.matches;return e}(),El="("+Ja.map(function(t){return t.selector}).join("|")+")",Rr=function(t){return t.replace(new RegExp("\\\\("+ge.metaChar+")","g"),function(e,n){return n})},tr=function(t,e,n){t[t.length-1]=n},to=[{name:"group",query:!0,regex:"("+ge.group+")",populate:function(t,e,n){var r=I(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:El,populate:function(t,e,n){var r=I(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+ge.id+")",populate:function(t,e,n){var r=I(n,1)[0];e.checks.push({type:8,value:Rr(r)})}},{name:"className",query:!0,regex:"\\.("+ge.className+")",populate:function(t,e,n){var r=I(n,1)[0];e.checks.push({type:9,value:Rr(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ge.variable+")\\s*\\]",populate:function(t,e,n){var r=I(n,1)[0];e.checks.push({type:4,field:Rr(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ge.variable+")\\s*("+ge.comparatorOp+")\\s*("+ge.value+")\\s*\\]",populate:function(t,e,n){var r=I(n,3),i=r[0],a=r[1],o=r[2];o=null!=new RegExp("^"+ge.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),e.checks.push({type:3,field:Rr(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ge.boolOp+")\\s*("+ge.variable+")\\s*\\]",populate:function(t,e,n){var r=I(n,2),i=r[0];e.checks.push({type:5,field:Rr(r[1]),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ge.meta+")\\s*("+ge.comparatorOp+")\\s*("+ge.number+")\\s*\\]\\]",populate:function(t,e,n){var r=I(n,3),a=r[1],o=r[2];e.checks.push({type:6,field:Rr(r[0]),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:ge.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,a=t[t.length-1];return null!=n&&(a.subject=n,t.currentSubject=null),a.edgeCount=r,a.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:ge.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:11,source:e,target:i}),tr(t,0,n),t.edgeCount++,i}var a={checks:[]},l={checks:[]};return a.checks.push({type:12,source:e,target:l}),tr(t,0,a),t.edgeCount++,l}},{name:"undirectedEdge",separator:!0,regex:ge.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:10,nodes:[e,i]}),tr(t,0,n),t.edgeCount++,i}var a={checks:[]},l={checks:[]};return a.checks.push({type:14,node:e,neighbor:l}),tr(t,0,a),l}},{name:"child",separator:!0,regex:ge.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),tr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},h={checks:[]};return a.checks.push({type:19,left:t[t.length-1],right:l,subject:s}),s.checks=e.checks,e.checks=[{type:20}],h.checks.push({type:20}),l.checks.push({type:17,parent:h,child:u}),tr(t,0,a),t.currentSubject=s,t.compoundCount++,u}var g={checks:[]},x={checks:[]},D=[{type:17,parent:g,child:x}];return g.checks=e.checks,e.checks=D,t.compoundCount++,x}},{name:"descendant",separator:!0,regex:ge.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),tr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},h={checks:[]};return a.checks.push({type:19,left:t[t.length-1],right:l,subject:s}),s.checks=e.checks,e.checks=[{type:20}],h.checks.push({type:20}),l.checks.push({type:18,ancestor:h,descendant:u}),tr(t,0,a),t.currentSubject=s,t.compoundCount++,u}var g={checks:[]},x={checks:[]},D=[{type:18,ancestor:g,descendant:x}];return g.checks=e.checks,e.checks=D,t.compoundCount++,x}},{name:"subject",modifier:!0,regex:ge.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return be("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];to.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Dl=function(t){for(var e,n,r,i=0;i<to.length;i++){var a=to[i],o=a.name,l=t.match(a.regexObj);if(null!=l){n=l,e=a,r=o,t=t.substring(l[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},Ll={parse:function(t){var u,h,e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,void 0,(h=(u=e).match(/^\s+/))&&(u=u.substring(h[0].length)),e=u;;){var r=Dl(e);if(null==r.expr)return be("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),a=r.expr.populate(this,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(e=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var l=0;l<this.length;l++){var s=this[l];if(s.compoundCount>0&&s.edgeCount>0)return be("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return be("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===s.edgeCount&&be("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(s){return null==s?"":s},e=function(s){return c(s)?'"'+s+'"':t(s)},n=function(s){return" "+s+" "},i=function(s,u){return s.checks.reduce(function(h,g,x){return h+(u===s&&0===x?"$":"")+function(s,u){var g=s.value;switch(s.type){case 0:var x=t(g);return x.substring(0,x.length-1);case 3:return"["+s.field+n(t(s.operator))+e(g)+"]";case 5:var _=s.field;return"["+t(s.operator)+_+"]";case 4:return"["+s.field+"]";case 6:return"[["+s.field+n(t(s.operator))+e(g)+"]]";case 7:return g;case 8:return"#"+g;case 9:return"."+g;case 17:case 15:return i(s.parent,u)+n(">")+i(s.child,u);case 18:case 16:return i(s.ancestor,u)+" "+i(s.descendant,u);case 19:var P=i(s.left,u),C=i(s.subject,u),V=i(s.right,u);return P+(P.length>0?" ":"")+C+V;case 20:return""}}(g,u)},"")},a="",o=0;o<this.length;o++){var l=this[o];a+=i(l,l.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},Mo=function(t,e,n){var r,i,a,o=c(t),l=M(t),s=c(n),u=!1,h=!1,g=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),h=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(o||s||u)&&(i=o||l?""+t:"",a=""+n),u&&(t=i=i.toLowerCase(),n=a=a.toLowerCase()),e){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=t===n;break;case">":g=!0,r=t>n;break;case">=":g=!0,r=t>=n;break;case"<":g=!0,r=t<n;break;case"<=":g=!0,r=t<=n;break;default:r=!1}return!h||null==t&&g||(r=!r),r},eo=function(t,e){return t.data(e)},Ne=[],Pe=function(t,e){return t.checks.every(function(n){return Ne[n.type](n,e)})};Ne[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},Ne[7]=function(t,e){return wl[t.value](e)},Ne[8]=function(t,e){var n=t.value;return e.id()===n},Ne[9]=function(t,e){return e.hasClass(t.value)},Ne[6]=function(t,e){var r=t.operator,i=t.value;return Mo(e[t.field](),r,i)},Ne[3]=function(t,e){var r=t.operator,i=t.value;return Mo(eo(e,t.field),r,i)},Ne[5]=function(t,e){var r=t.operator;return function(i,a){switch(a){case"?":return!!i;case"!":return!i;case"^":return void 0===i}}(eo(e,t.field),r)},Ne[4]=function(t,e){return void 0!==eo(e,t.field)},Ne[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),a=e.target();return Pe(n,i)&&Pe(r,a)||Pe(r,i)&&Pe(n,a)},Ne[14]=function(t,e){return Pe(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&Pe(t.neighbor,n)})},Ne[11]=function(t,e){return Pe(t.source,e.source())&&Pe(t.target,e.target())},Ne[12]=function(t,e){return Pe(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&Pe(t.target,n)})},Ne[13]=function(t,e){return Pe(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&Pe(t.source,n)})},Ne[15]=function(t,e){return Pe(t.child,e)&&Pe(t.parent,e.parent())},Ne[17]=function(t,e){return Pe(t.parent,e)&&e.children().some(function(n){return Pe(t.child,n)})},Ne[16]=function(t,e){return Pe(t.descendant,e)&&e.ancestors().some(function(n){return Pe(t.ancestor,n)})},Ne[18]=function(t,e){return Pe(t.ancestor,e)&&e.descendants().some(function(n){return Pe(t.descendant,n)})},Ne[19]=function(t,e){return Pe(t.subject,e)&&Pe(t.left,e)&&Pe(t.right,e)},Ne[20]=function(){return!0},Ne[1]=function(t,e){return t.value.has(e)},Ne[2]=function(t,e){return(0,t.value)(e)};var er=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||c(t)&&t.match(/^\s*$/)||(X(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):E(t)?this.addQuery({checks:[{type:2,value:t}]}):c(t)?this.parse(t)||(this.invalid=!0):_e("A selector must be created from a string; found "))},nr=er.prototype;[Ll,{matches:function(t){for(var e=0;e<this.length;e++)if(Pe(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(r){for(var i=0;i<e.length;i++)if(Pe(e[i],r))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach(function(t){return W(nr,t)}),nr.text=function(){return this.inputText},nr.size=function(){return this.length},nr.eq=function(t){return this[t]},nr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},nr.addQuery=function(t){this[this.length++]=t},nr.selector=nr.toString;var rr={allAre:function(t){var e=new er(t);return this.every(function(n){return e.matches(n)})},is:function(t){var e=new er(t);return this.some(function(n){return e.matches(n)})},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every(function(n){return t.hasElementWithId(n.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(n){return e.hasElementWithId(n.id())})},contains:function(t){t=this.cy().collection(t);var e=this;return t.every(function(n){return e.hasElementWithId(n.id())})}};rr.allAreNeighbours=rr.allAreNeighbors,rr.has=rr.contains,rr.equal=rr.equals=rr.same;var na,Oo,bn=function(t,e){return function(n,r,i,a){var o,l=n;if(null==l?o="":X(l)&&1===l.length&&(o=l.id()),1===this.length&&o){var s=this[0]._private,u=s.traversalCache=s.traversalCache||{},h=u[e]=u[e]||[],g=Fn(o);return h[g]||(h[g]=t.call(this,n,r,i,a))}return t.call(this,n,r,i,a)}},Fr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(e){return e.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(e){return e.isChild()}).filter(t)},children:bn(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function n(r){for(var i=0;i<r.length;i++){var a=r[i];e.push(a),a.children().nonempty()&&n(a.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function no(t,e,n,r){for(var i=[],a=new Kn,o=t.cy().hasCompoundNodes(),l=0;l<t.length;l++){var s=t[l];n?i.push(s):o&&r(i,a,s)}for(;i.length>0;){var u=i.shift();e(u),a.add(u.id()),o&&r(i,a,u)}return t}function Go(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];e.has(a.id())||t.push(a)}}function Ro(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function Tl(t,e,n){Ro(t,e,n),Go(t,e,n)}Fr.forEachDown=function(t){return no(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Go)},Fr.forEachUp=function(t){return no(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ro)},Fr.forEachUpAndDown=function(t){return no(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Tl)},Fr.ancestors=Fr.parents,(na=Oo={data:xe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:xe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:xe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:xe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:xe.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:xe.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=na.data,na.removeAttr=na.removeData;var Gn,Fo,Il=Oo,ra={};function ro(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,a=0;a<i.length;a++){var o=i[a];!e&&o.isLoop()||(n+=t(r,o))}return n}}}function Br(t,e){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][t](n);void 0===o||void 0!==r&&!e(o,r)||(r=o)}return r}}W(ra,{degree:ro(function(t,e){return e.source().same(e.target())?2:1}),indegree:ro(function(t,e){return e.target().same(t)?1:0}),outdegree:ro(function(t,e){return e.source().same(t)?1:0})}),W(ra,{minDegree:Br("degree",function(t,e){return t<e}),maxDegree:Br("degree",function(t,e){return t>e}),minIndegree:Br("indegree",function(t,e){return t<e}),maxIndegree:Br("indegree",function(t,e){return t>e}),minOutdegree:Br("outdegree",function(t,e){return t<e}),maxOutdegree:Br("outdegree",function(t,e){return t>e})}),W(ra,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var Bo=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var a=i._private.position,o={x:null!=e.x?e.x-a.x:0,y:null!=e.y?e.y-a.y:0};!i.isParent()||0===o.x&&0===o.y||i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Yo={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){Bo(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(Gn=Fo={position:xe.data(Yo),silentPosition:xe.data(W({},Yo,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){Bo(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(A(t))e?this.silentPosition(t):this.position(t);else if(E(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=n(o,i))&&(e?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(A(t)?(r={x:M(t.x)?t.x:0,y:M(t.y)?t.y:0},n=e):c(t)&&M(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],l=o.position(),s={x:l.x+r.x,y:l.y+r.y};n?o.silentPosition(s):o.position(s)}i.endBatch()}return this},silentShift:function(t,e){return A(t)?this.shift(t,!0):c(t)&&M(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=A(t)?t:void 0,l=void 0!==o||void 0!==e&&c(t);if(n&&n.isNode()){if(!l){var s=n.position();return o=vr(s,i,a),void 0===t?o:o[t]}for(var u=0;u<this.length;u++){var h=this[u];void 0!==e?h.position(t,(e-a[t])/i):void 0!==o&&h.position(ii(o,i,a))}}else if(!l)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=A(t)?t:void 0,a=void 0!==i||void 0!==e&&c(t),o=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var l=n.position(),s=o?n.parent():null,u=s&&s.length>0;u&&(s=s[0]);var g=u?s.position():{x:0,y:0};return i={x:l.x-g.x,y:l.y-g.y},void 0===t?i:i[t]}for(var x=0;x<this.length;x++){var D=this[x],m=o?D.parent():null,T=m&&m.length>0;T&&(m=m[0]);var L=T?m.position():{x:0,y:0};void 0!==e?D.position(t,e+L[t]):void 0!==i&&D.position({x:i.x+L.x,y:i.y+L.y})}}else if(!a)return;return this}}).modelPosition=Gn.point=Gn.position,Gn.modelPositions=Gn.points=Gn.positions,Gn.renderedPoint=Gn.renderedPosition,Gn.relativePoint=Gn.relativePosition;var Yr,ir,Sl=Fo;Yr=ir={},ir.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),a=e.x1*r+i.x,o=e.x2*r+i.x,l=e.y1*r+i.y,s=e.y2*r+i.y;return{x1:a,x2:o,y1:l,y2:s,w:o-a,h:s-l}},ir.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this):this},ir.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(o){if(o.isParent()){var l=o._private,s=o.children(),u="include"===o.pstyle("compound-sizing-wrt-labels").value,h={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},g=s.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),x=l.position;0!==g.w&&0!==g.h||((g={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue}).x1=x.x-g.w/2,g.x2=x.x+g.w/2,g.y1=x.y-g.h/2,g.y2=x.y+g.h/2);var D=h.width.left.value;"px"===h.width.left.units&&h.width.val>0&&(D=100*D/h.width.val);var m=h.width.right.value;"px"===h.width.right.units&&h.width.val>0&&(m=100*m/h.width.val);var T=h.height.top.value;"px"===h.height.top.units&&h.height.val>0&&(T=100*T/h.height.val);var _=h.height.bottom.value;"px"===h.height.bottom.units&&h.height.val>0&&(_=100*_/h.height.val);var L=k(h.width.val-g.w,D,m),P=L.biasDiff,C=L.biasComplementDiff,V=k(h.height.val-g.h,T,_),B=V.biasDiff,F=V.biasComplementDiff;l.autoPadding=function(U,$,Q,it){if("%"!==Q.units)return"px"===Q.units?Q.pfValue:0;switch(it){case"width":return U>0?Q.pfValue*U:0;case"height":return $>0?Q.pfValue*$:0;case"average":return U>0&&$>0?Q.pfValue*(U+$)/2:0;case"min":return U>0&&$>0?U>$?Q.pfValue*$:Q.pfValue*U:0;case"max":return U>0&&$>0?U>$?Q.pfValue*U:Q.pfValue*$:0;default:return 0}}(g.w,g.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),l.autoWidth=Math.max(g.w,h.width.val),x.x=(-P+g.x1+g.x2+C)/2,l.autoHeight=Math.max(g.h,h.height.val),x.y=(-B+g.y1+g.y2+F)/2}function k(U,$,Q){var it=0,ot=0,st=$+Q;return U>0&&st>0&&(it=$/st*U,ot=Q/st*U),{biasDiff:it,biasComplementDiff:ot}}}for(var r=0;r<this.length;r++){var i=this[r],a=i._private;a.compoundBoundsClean&&!t||(n(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var xn=function(t){return t===1/0||t===-1/0?0:t},Cn=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Er=function(t,e){return null==e?t:Cn(t,e.x1,e.y1,e.x2,e.y2)},fi=function(t,e,n){return dn(t,e,n)},ia=function(t,e,n){if(!e.cy().headless()){var r,i,a=e._private,o=a.rstyle,l=o.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var s=a.arrowBounds=a.arrowBounds||{},u=s[n]=s[n]||{};u.x1=r-l,u.y1=i-l,u.x2=r+l,u.y2=i+l,u.w=u.x2-u.x1,u.h=u.y2-u.y1,Xn(u,1),Cn(t,u.x1,u.y1,u.x2,u.y2)}}},io=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,a=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var o,l,s,u,h=e.pstyle("text-halign"),g=e.pstyle("text-valign"),x=fi(a,"labelWidth",n),D=fi(a,"labelHeight",n),m=fi(a,"labelX",n),T=fi(a,"labelY",n),_=e.pstyle(r+"text-margin-x").pfValue,L=e.pstyle(r+"text-margin-y").pfValue,P=e.isEdge(),C=e.pstyle(r+"text-rotation"),V=e.pstyle("text-outline-width").pfValue,B=e.pstyle("text-border-width").pfValue/2,F=e.pstyle("text-background-padding").pfValue,k=D,U=x,$=U/2,Q=k/2;if(P)o=m-$,l=m+$,s=T-Q,u=T+Q;else{switch(h.value){case"left":o=m-U,l=m;break;case"center":o=m-$,l=m+$;break;case"right":o=m,l=m+U}switch(g.value){case"top":s=T-k,u=T;break;case"center":s=T-Q,u=T+Q;break;case"bottom":s=T,u=T+k}}o+=_-Math.max(V,B)-F-2,l+=_+Math.max(V,B)+F+2,s+=L-Math.max(V,B)-F-2,u+=L+Math.max(V,B)+F+2;var it=n||"main",ot=i.labelBounds,st=ot[it]=ot[it]||{};st.x1=o,st.y1=s,st.x2=l,st.y2=u,st.w=l-o,st.h=u-s;var yt=P&&"autorotate"===C.strValue;if(yt||null!=C.pfValue&&0!==C.pfValue){var et=yt?fi(i.rstyle,"labelAngle",n):C.pfValue,Pt=Math.cos(et),Lt=Math.sin(et),mt=(o+l)/2,_t=(s+u)/2;if(!P){switch(h.value){case"left":mt=l;break;case"right":mt=o}switch(g.value){case"top":_t=u;break;case"bottom":_t=s}}var xt=function(Zt,ne){return{x:(Zt-=mt)*Pt-(ne-=_t)*Lt+mt,y:Zt*Lt+ne*Pt+_t}},Tt=xt(o,s),kt=xt(o,u),Bt=xt(l,s),Xt=xt(l,u);o=Math.min(Tt.x,kt.x,Bt.x,Xt.x),l=Math.max(Tt.x,kt.x,Bt.x,Xt.x),s=Math.min(Tt.y,kt.y,Bt.y,Xt.y),u=Math.max(Tt.y,kt.y,Bt.y,Xt.y)}var Yt=it+"Rot",jt=ot[Yt]=ot[Yt]||{};jt.x1=o,jt.y1=s,jt.x2=l,jt.y2=u,jt.w=l-o,jt.h=u-s,Cn(t,o,s,l,u),Cn(i.labelBounds.all,o,s,l,u)}return t}},zo=function(t){var e=0,n=function(i){return(i?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Xo=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(i){return Math.round(i)};return i=[r(e.x),r(e.y),r(n.x),r(n.y)],o={value:0,done:!1},l=0,s=i.length,jr({next:function(){return l<s?o.value=i[l++]:o.done=!0,o}},void 0)}var i,o,l,s;return 0},Ho=function(t,e){var n,r=t._private,i=t.isEdge(),a=(null==e?Vo:zo(e))===Vo,o=Xo(t),l=r.bbCachePosKey===o,s=e.useCache&&l,u=function(g){return null==g._private.bbCache||g._private.styleDirty};if(!s||u(t)||i&&u(t.source())||u(t.target())?(l||t.recalculateRenderedStyle(s),n=function(g,x){var D,m,T,_,L,P,C,V=g._private.cy,B=V.styleEnabled(),F=V.headless(),k=Je(),U=g._private,$=g.isNode(),Q=g.isEdge(),it=U.rstyle,ot=$&&B?g.pstyle("bounds-expansion").pfValue:[0],st=function(wt){return"none"!==wt.pstyle("display").value},yt=!B||st(g)&&(!Q||st(g.source())&&st(g.target()));if(yt){var pt=0;B&&x.includeOverlays&&0!==g.pstyle("overlay-opacity").value&&(pt=g.pstyle("overlay-padding").value);var et=0;if(B&&(et=g.pstyle("width").pfValue/2),$&&x.includeNodes){var Pt=g.position();L=Pt.x,P=Pt.y;var Lt=g.outerWidth()/2,mt=g.outerHeight()/2;Cn(k,D=L-Lt,T=P-mt,m=L+Lt,_=P+mt)}else if(Q&&x.includeEdges)if(B&&!F){var _t=g.pstyle("curve-style").strValue;if(D=Math.min(it.srcX,it.midX,it.tgtX),m=Math.max(it.srcX,it.midX,it.tgtX),T=Math.min(it.srcY,it.midY,it.tgtY),_=Math.max(it.srcY,it.midY,it.tgtY),Cn(k,D-=et,T-=et,m+=et,_+=et),"haystack"===_t){var xt=it.haystackPts;if(xt&&2===xt.length){if((D=xt[0].x)>(m=xt[1].x)){var Tt=D;D=m,m=Tt}if((T=xt[0].y)>(_=xt[1].y)){var kt=T;T=_,_=kt}Cn(k,D-et,T-et,m+et,_+et)}}else if("bezier"===_t||"unbundled-bezier"===_t||"segments"===_t||"taxi"===_t){var Bt;switch(_t){case"bezier":case"unbundled-bezier":Bt=it.bezierPts;break;case"segments":case"taxi":Bt=it.linePts}if(null!=Bt)for(var Xt=0;Xt<Bt.length;Xt++){var Yt=Bt[Xt];Cn(k,D=Yt.x-et,T=Yt.y-et,m=Yt.x+et,_=Yt.y+et)}}}else{var jt=g.source().position(),Zt=g.target().position();if((D=jt.x)>(m=Zt.x)){var ne=D;D=m,m=ne}if((T=jt.y)>(_=Zt.y)){var le=T;T=_,_=le}Cn(k,D-=et,T-=et,m+=et,_+=et)}if(B&&x.includeEdges&&Q&&(ia(k,g,"mid-source"),ia(k,g,"mid-target"),ia(k,g,"source"),ia(k,g,"target")),B&&"yes"===g.pstyle("ghost").value){var zt=g.pstyle("ghost-offset-x").pfValue,Wt=g.pstyle("ghost-offset-y").pfValue;Cn(k,k.x1+zt,k.y1+Wt,k.x2+zt,k.y2+Wt)}var Qt=U.bodyBounds=U.bodyBounds||{};Bi(Qt,k),oi(Qt,ot),Xn(Qt,1),B&&Cn(k,(D=k.x1)-pt,(T=k.y1)-pt,(m=k.x2)+pt,(_=k.y2)+pt);var z=U.overlayBounds=U.overlayBounds||{};Bi(z,k),oi(z,ot),Xn(z,1);var ut=U.labelBounds=U.labelBounds||{};null!=ut.all?((C=ut.all).x1=1/0,C.y1=1/0,C.x2=-1/0,C.y2=-1/0,C.w=0,C.h=0):ut.all=Je(),B&&x.includeLabels&&(x.includeMainLabels&&io(k,g,null),Q&&(x.includeSourceLabels&&io(k,g,"source"),x.includeTargetLabels&&io(k,g,"target")))}return k.x1=xn(k.x1),k.y1=xn(k.y1),k.x2=xn(k.x2),k.y2=xn(k.y2),k.w=xn(k.x2-k.x1),k.h=xn(k.y2-k.y1),k.w>0&&k.h>0&&yt&&(oi(k,ot),Xn(k,1)),k}(t,pi),r.bbCache=n,r.bbCachePosKey=o):n=r.bbCache,!a){var h=t.isNode();n=Je(),(e.includeNodes&&h||e.includeEdges&&!h)&&Er(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Er(n,r.labelBounds.all):(e.includeMainLabels&&Er(n,r.labelBounds.mainRot),e.includeSourceLabels&&Er(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Er(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},pi={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Vo=zo(pi),Uo=Re(pi);ir.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=Je();var n=Uo(t=t||pi);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],a=i._private,o=Xo(i);i.recalculateRenderedStyle(n.useCache&&a.bbCachePosKey===o&&!a.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var u=0;u<this.length;u++)Er(e,Ho(this[u],n))}else t=void 0===t?pi:Uo(t),e=Ho(this[0],t);return e.x1=xn(e.x1),e.y1=xn(e.y1),e.x2=xn(e.x2),e.y2=xn(e.y2),e.w=xn(e.x2-e.x1),e.h=xn(e.y2-e.y1),e},ir.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},ir.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),A(t)){var a=t;t=function(){return a}}n.startBatch(),e.forEach(function(l,s){return l._private.bbAtOldPos=t(l,s)}).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l,o={x1:(l=this.boundingBox({useCache:!1})).x1,x2:l.x2,w:l.w,y1:l.y1,y2:l.y2,h:l.h};return e.silentPositions(function(l){return l._private.bbAtOldPos}),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),o},Yr.boundingbox=Yr.bb=Yr.boundingBox,Yr.renderedBoundingbox=Yr.renderedBoundingBox;var gi,vi,Pl=ir;gi=vi={};var qo=function(t){t.uppercaseName=rt(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=rt(t.outerName),gi[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);return"label"===i.strValue?(e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0):i.pfValue}},gi["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},gi["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},gi["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};qo({name:"width"}),qo({name:"height"}),vi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},vi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},vi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var _l=vi,$o={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},Al=Object.keys($o).reduce(function(t,e){var i,n=$o[e],r="rendered"+(i=e)[0].toUpperCase()+i.substr(1);return t[e]=function(){return function(i,a){if(i.isEdge())return a(i)}(this,n.get)},t[r]=n.mult?function(){return function(i,a){if(i.isEdge()){var o=i.cy(),l=o.pan(),s=o.zoom();return a(i).map(function(u){return vr(u,s,l)})}}(this,n.get)}:function(){return function(i,a){if(i.isEdge()){var o=i.cy();return vr(a(i),o.zoom(),o.pan())}}(this,n.get)},t},{}),Cl=W({},Sl,Pl,_l,Al),Zo=function(t,e){this.recycle(t,e)};function yi(){return!1}function aa(){return!0}Zo.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=yi,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?aa:yi):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=aa;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=aa;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=aa,this.stopPropagation()},isDefaultPrevented:yi,isPropagationStopped:yi,isImmediatePropagationStopped:yi};var jo=/^([^.]+)(\.(?:[^.]+))?$/,Wo={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Ko=Object.keys(Wo),Nl={};function oa(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl,e=arguments.length>1?arguments[1]:void 0,n=0;n<Ko.length;n++){var r=Ko[n];this[r]=t[r]||Wo[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ar=oa.prototype,Qo=function(t,e,n,r,i,a,o){E(r)&&(i=r,r=null),o&&(a=null==a?o:W({},a,o));for(var l=S(n)?n:n.split(/\s+/),s=0;s<l.length;s++){var u=l[s];if(!Z(u)){var h=u.match(jo);if(h&&!1===e(t,u,h[1],h[2]?h[2]:null,r,i,a))break}}},Jo=function(t,e){return t.addEventFields(t.context,e),new Zo(e.type,e)};ar.on=ar.addListener=function(t,e,n,r,i){return Qo(this,function(a,o,l,s,u,h,g){E(h)&&a.listeners.push({event:o,callback:h,type:l,namespace:s,qualifier:u,conf:g})},t,e,n,r,i),this},ar.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ar.removeListener=ar.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(s){var u=a[s];Qo(i,function(h,g,x,D,m,T){if((u.type===x||"*"===t)&&(!D&&".*"!==u.namespace||u.namespace===D)&&(!m||h.qualifierCompare(u.qualifier,m))&&(!T||u.callback===T))return a.splice(s,1),!1},t,e,n,r)},l=a.length-1;l>=0;l--)o(l);return this},ar.removeAllListeners=function(){return this.removeListener("*")},ar.emit=ar.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,S(e)||(e=[e]),function(t,e,n){if("event"!==p(n))if(A(n))e(t,Jo(t,n));else for(var r=S(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!Z(a)){var o=a.match(jo);o&&e(t,Jo(t,{type:o[1],namespace:o[2]?o[2]:null,target:t.context}))}}else e(t,n)}(this,function(a,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var l=function(u){var h=r[u];if(h.type===o.type&&(!h.namespace||h.namespace===o.namespace||".*"===h.namespace)&&a.eventMatches(a.context,h,o)){var g=[o];null!=e&&function(m,T){for(var _=0;_<T.length;_++)m.push(T[_])}(g,e),a.beforeEmit(a.context,h,o),h.conf&&h.conf.one&&(a.listeners=a.listeners.filter(function(m){return m!==h}));var x=a.callbackContext(a.context,h,o),D=h.callback.apply(x,g);a.afterEmit(a.context,h,o),!1===D&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)l(s);a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},t),this.emitting--,this};var Ml={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},sa=function(t){return c(t)?new er(t):t},ts={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new oa(Ml,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=sa(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=sa(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=sa(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=sa(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};xe.eventAliasesOn(ts);var es={nodes:function(t){return this.filter(function(e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(e){return e.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(c(t)||X(t))return new er(t).filter(this);if(E(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(t){if(t){c(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(c(t))return this.filter(t);for(var n=this.spawn(),i=this.length<t.length,a=i?this:t,o=i?t:this,l=0;l<a.length;l++){var s=a[l];o.has(s)&&n.push(s)}return n},xor:function(t){var e=this._private.cy;c(t)&&(t=e.$(t));var n=this.spawn(),r=t,i=function(a,o){for(var l=0;l<a.length;l++){var s=a[l];o.hasElementWithId(s._private.data.id)||n.push(s)}};return i(this,r),i(r,this),n},diff:function(t){var e=this._private.cy;c(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),a=t,o=function(l,s,u){for(var h=0;h<l.length;h++){var g=l[h];s.hasElementWithId(g._private.data.id)?i.merge(g):u.push(g)}};return o(this,a,n),o(a,this,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(c(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var a=t[i];!this.has(a)&&r.push(a)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&c(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,a=0;a<t.length;a++){var o=t[a],l=o._private.data.id;if(!i.has(l)){var s=this.length++;this[s]=o,i.set(l,{ele:o,index:s})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[t]=a,n.set(o,{ele:a,index:t})}return this.length--,this},unmergeOne:function(t){var r=this._private.map.get((t=t[0])._private.data.id);return r?(this.unmergeAt(r.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&c(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(a)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var a=this[i],o=e?t.apply(e,[a,i,this]):t(a,i,this);o>r&&(r=o,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var a=this[i],o=e?t.apply(e,[a,i,this]):t(a,i,this);o<r&&(r=o,n=a)}return{value:r,ele:n}}},ve=es;ve.u=ve["|"]=ve["+"]=ve.union=ve.or=ve.add,ve["\\"]=ve["!"]=ve["-"]=ve.difference=ve.relativeComplement=ve.subtract=ve.not,ve.n=ve["&"]=ve["."]=ve.and=ve.intersection=ve.intersect,ve["^"]=ve["(+)"]=ve["(-)"]=ve.symmetricDifference=ve.symdiff=ve.xor,ve.fnFilter=ve.filterFn=ve.stdFilter=ve.filter,ve.complement=ve.abscomp=ve.absoluteComplement;var ns=function(t,e){var n=t.cy().hasCompoundNodes();function r(s){var u=s.pstyle("z-compound-depth");return"auto"===u.value?n?s.zDepth():0:"bottom"===u.value?-1:"top"===u.value?Wr:0}var i=r(t)-r(e);if(0!==i)return i;function a(s){return"auto"===s.pstyle("z-index-compare").value&&s.isNode()?1:0}var o=a(t)-a(e);if(0!==o)return o;var l=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==l?l:t.poolIndex()-e.poolIndex()},la={forEach:function(t,e){if(E(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!E(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(ns)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Wr-1}var i=e.target,a=e.source.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}};la.each=la.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":ht(Symbol))&&"undefined"!=ht(Symbol.iterator)&&(la[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return N({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,function(){return this})});var Ol=Re({nodeDimensionsIncludeLabels:!1}),ua={layoutDimensions:function(t){var e;if(t=Ol(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter(function(L){return!L.isParent()}),i=this.cy(),a=e.eles,o=function(L){return L.id()},l=O(n,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var s=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!s)return null;for(var L=Je(),P=0;P<r.length;P++){var V=l(r[P],P);Na(L,V.x,V.y)}return L}(),h=O(function(L,P){var V,B,F,k,U,C=l(L,P);return s&&(V=Math.abs(e.spacingFactor),C={x:(k=(B=u).x1+B.w/2)+((F=C).x-k)*V,y:(U=B.y1+B.h/2)+(F.y-U)*V}),null!=e.transform&&(C=e.transform(L,C)),C},o);if(e.animate){for(var g=0;g<r.length;g++){var x=r[g],D=h(x,g);if(null==e.animateFilter||e.animateFilter(x,g)){var m=x.animation({position:D,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(m)}else x.position(D)}if(e.fit){var T=i.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(T)}else if(void 0!==e.zoom&&void 0!==e.pan){var _=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(_)}t.animations.forEach(function(L){return L.play()}),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),Or.all(t.animations.map(function(L){return L.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else r.positions(h),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(W({},t,{eles:this}))}};function rs(t,e,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[t])?r:r=a[t]=e(n)}function ha(t,e){return t=Fn(t),function(n){return rs(t,e,n)}}function ca(t,e){t=Fn(t);var n=function(r){return e.call(r)};return function(){var r=this[0];if(r)return rs(t,n,r)}}ua.createLayout=ua.makeLayout=ua.layout;var $e={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(r){return r._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach(function(r){n(r),r.connectedEdges().forEach(n)}),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(i){return i._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(A(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(c(t)){if(void 0===e){var a=this[0];return a?r.getStylePropertyValue(a,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var a=0;a<this.length;a++)n.removeBypasses(this[a],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function ao(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function oo(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var l=a._private;if(!e(a))return!1;if(a.isNode())return!o||ao(a,r);var s=l.source,u=l.target;return n(s)&&(!o||ao(s,n))&&(s===u||n(u)&&(!o||ao(u,n)))}}}var zr=ha("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});$e.takesUpSpace=ca("takesUpSpace",oo({ok:zr}));var Gl=ha("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&zr(t)}),Rl=ha("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&zr(t)});$e.interactive=ca("interactive",oo({ok:Gl,parentOk:Rl,edgeOkViaNode:zr})),$e.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Fl=ha("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&zr(t)});$e.visible=ca("visible",oo({ok:Fl,edgeOkViaNode:zr})),$e.hidden=function(){var t=this[0];if(t)return!t.visible()},$e.isBundledBezier=ca("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),$e.bypass=$e.css=$e.style,$e.renderedCss=$e.renderedStyle,$e.removeBypass=$e.removeCss=$e.removeStyle,$e.pstyle=$e.parsedStyle;var or={};function is(t){return function(){var e=arguments,n=[];if(2===e.length)this.on(t.event,e[0],e[1]);else if(1===e.length&&E(e[0]))this.on(t.event,e[0]);else if(0===e.length||1===e.length&&S(e[0])){for(var o=1===e.length?e[0]:null,l=0;l<this.length;l++){var s=this[l],u=!t.ableField||s._private[t.ableField],h=s._private[t.field]!=t.value;if(t.overrideAble){var g=t.overrideAble(s);if(void 0!==g&&(u=g,!g))return this}u&&(s._private[t.field]=t.value,h&&n.push(s))}var x=this.spawn(n);x.updateStyle(),x.emit(t.event),o&&x.emit(o)}return this}}function Xr(t){or[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},or[t.on]=is({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),or[t.off]=is({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Xr({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Xr({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Xr({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Xr({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),or.deselect=or.unselect,or.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Xr({field:"active",on:"activate",off:"unactivate"}),Xr({field:"pannable",on:"panify",off:"unpanify"}),or.inactive=function(){var t=this[0];if(t)return!t._private.active};var en={},as=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),l=0;l<o.length;l++){var s=o[l],u=s.source(),h=s.target();if(t.noIncomingEdges&&h===i&&u!==i||t.noOutgoingEdges&&u===i&&h!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,!0).filter(e)}},os=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var l=a[o],s=l.source(),u=l.target();t.outgoing&&s===i?(n.push(l),n.push(u)):t.incoming&&u===i&&(n.push(l),n.push(s))}}return this.spawn(n,!0).filter(e)}},ss=function(t){return function(e){for(var n=this,r=[],i={};;){var a=t.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,l=0;l<a.length;l++){var s=a[l],u=s.id();i[u]||(i[u]=!0,r.push(s),o=!0)}if(!o)break;n=a}return this.spawn(r,!0).filter(e)}};function ls(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function us(t){return function(e){var n=[],r=this._private.cy,i=t||{};c(e)&&(e=r.$(e));for(var a=0;a<e.length;a++)for(var o=e[a]._private.edges,l=0;l<o.length;l++){var s=o[l],u=s._private.data,h=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),g=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(h||g){if((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!g))continue;n.push(s)}}return this.spawn(n,!0)}}function hs(t){return t=W({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,a=0;a<r.length;a++)for(var o=r[a]._private,l=o.source,s=l._private.data.id,u=o.data.target,h=l._private.edges,g=0;g<h.length;g++){var x=h[g],D=x._private.data,m=D.target,T=D.source,_=m===u&&T===s;(i.codirected&&_||!i.codirected&&(_||s===m&&u===T))&&n.push(x)}return this.spawn(n,!0).filter(e)}}en.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},W(en,{roots:as({noIncomingEdges:!0}),leaves:as({noOutgoingEdges:!0}),outgoers:bn(os({outgoing:!0}),"outgoers"),successors:ss({outgoing:!0}),incomers:bn(os({incoming:!0}),"incomers"),predecessors:ss({incoming:!0})}),W(en,{neighborhood:bn(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var l=a[o],s=l.source(),u=l.target(),h=i===s?u:s;h.length>0&&e.push(h[0]),e.push(l[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),en.neighbourhood=en.neighborhood,en.closedNeighbourhood=en.closedNeighborhood,en.openNeighbourhood=en.openNeighborhood,W(en,{source:bn(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:bn(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:ls({attr:"source"}),targets:ls({attr:"target"})}),W(en,{edgesWith:bn(us(),"edgesWith"),edgesTo:bn(us({thisIsSrc:!0}),"edgesTo")}),W(en,{connectedEdges:bn(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++)e.push(i[a])}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:bn(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:bn(hs(),"parallelEdges"),codirectedEdges:bn(hs({codirected:!0}),"codirectedEdges")}),W(en,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),a=[];null!=t&&i.empty()&&(i=t.sources());var o=function(s,u){r.merge(s),i.unmerge(s),u.merge(s)};if(i.empty())return e.spawn();var l=function(){var s=n.collection();a.push(s);var u=i[0];o(u,s),e.bfs({directed:!1,roots:u,visit:function(h){return o(h,s)}}),s.forEach(function(h){h.connectedEdges().forEach(function(g){e.has(g)&&s.has(g.source())&&s.has(g.target())&&s.merge(g)})})};do{l()}while(i.length>0);return a},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),en.componentsOf=en.components;var Ze=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var r=new Ve,i=!1;if(e){if(e.length>0&&A(e[0])&&!at(e[0])){i=!0;for(var a=[],o=new Kn,l=0,s=e.length;l<s;l++){var u=e[l];null==u.data&&(u.data={});var h=u.data;if(null==h.id)h.id=Oi();else if(t.hasElementWithId(h.id)||o.has(h.id))continue;var g=new fr(t,u,!1);a.push(g),o.add(h.id)}e=a}}else e=[];this.length=0;for(var x=0,D=e.length;x<D;x++){var m=e[x][0];if(null!=m){var T=m._private.data.id;n&&r.has(T)||(n&&r.set(T,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(_){this.lazyMap=_},rebuildMap:function(){for(var _=this.lazyMap=new Ve,L=this.eles,P=0;P<L.length;P++){var C=L[P];_.set(C.id(),{index:P,ele:C})}}},n&&(this._private.map=r),i&&this.restore()}else _e("A collection must have a reference to the core")},Ie=fr.prototype=Ze.prototype=Object.create(Array.prototype);Ie.instanceString=function(){return"collection"},Ie.spawn=function(t,e){return new Ze(this.cy(),t,e)},Ie.spawnSelf=function(){return this.spawn(this)},Ie.cy=function(){return this._private.cy},Ie.renderer=function(){return this._private.cy.renderer()},Ie.element=function(){return this[0]},Ie.collection=function(){return dt(this)?this:new Ze(this._private.cy,[this])},Ie.unique=function(){return new Ze(this._private.cy,this,!0)},Ie.hasElementWithId=function(t){return this._private.map.has(t=""+t)},Ie.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t=""+t);return n?n.ele:new Ze(e)},Ie.$id=Ie.getElementById,Ie.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Ie.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Ie.indexOfId=function(t){return this._private.map.get(t=""+t).index},Ie.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(A(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var a=!1,o={},l=t.data.source,s=t.data.target;null!=l&&l!=i.source&&(o.source=""+l,a=!0),null!=s&&s!=i.target&&(o.target=""+s,a=!0),a&&(e=e.move(o))}else{var h=t.data.parent;!("parent"in t.data)||null==h&&null==i.parent||h==i.parent||(void 0===h&&(h=null),null!=h&&(h=""+h),e=e.move({parent:h}))}}t.position&&e.position(t.position);var g=function(m,T,_){var L=t[m];null!=L&&L!==r[m]&&(L?e[T]():e[_]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),g("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var x={data:vn(r.data),position:vn(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:""},D=0;return r.classes.forEach(function(m){return x.classes+=0==D++?m:" "+m}),x}}},Ie.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Ie.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new fr(t,r,!1);e.push(i)}return new Ze(t,e)},Ie.copy=Ie.clone,Ie.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,a=i.cy(),o=a._private,l=[],s=[],u=0,h=i.length;u<h;u++){var g=i[u];r&&!g.removed()||(g.isNode()?l.push(g):s.push(g))}t=l.concat(s);var x=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var D=t[e],m=D._private,T=m.data;if(D.clearTraversalCache(),r||m.removed)if(void 0===T.id)T.id=Oi();else if(M(T.id))T.id=""+T.id;else{if(Z(T.id)||!c(T.id)){_e("Can not create element with invalid string ID `"+T.id+"`"),x();continue}if(a.hasElementWithId(T.id)){_e("Can not create second element with ID `"+T.id+"`"),x();continue}}var _=T.id;if(D.isNode()){var L=m.position;null==L.x&&(L.x=0),null==L.y&&(L.y=0)}if(D.isEdge()){for(var P=D,C=["source","target"],V=C.length,B=!1,F=0;F<V;F++){var k=C[F],U=T[k];M(U)&&(U=T[k]=""+T[k]),null==U||""===U?(_e("Can not create edge `"+_+"` with unspecified "+k),B=!0):a.hasElementWithId(U)||(_e("Can not create edge `"+_+"` with nonexistant "+k+" `"+U+"`"),B=!0)}if(B){x();continue}var $=a.getElementById(T.source),Q=a.getElementById(T.target);$.same(Q)?$._private.edges.push(P):($._private.edges.push(P),Q._private.edges.push(P)),P._private.source=$,P._private.target=Q}m.map=new Ve,m.map.set(_,{ele:D,index:0}),m.removed=!1,r&&a.addToPool(D)}for(var it=0;it<l.length;it++){var ot=l[it],st=ot._private.data;M(st.parent)&&(st.parent=""+st.parent);var yt=st.parent;if(null!=yt){var et=a.getElementById(yt);if(et.empty())st.parent=void 0;else{for(var Pt=!1,Lt=et;!Lt.empty();){if(ot.same(Lt)){Pt=!0,st.parent=void 0;break}Lt=Lt.parent()}Pt||(et[0]._private.children.push(ot),ot._private.parent=et[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var mt=t.length===i.length?i:new Ze(a,t),_t=0;_t<mt.length;_t++){var xt=mt[_t];xt.isNode()||(xt.parallelEdges().clearTraversalCache(),xt.source().clearTraversalCache(),xt.target().clearTraversalCache())}(o.hasCompoundNodes?a.collection().merge(mt).merge(mt.connectedNodes()).merge(mt.parent()):mt).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?mt.emitAndNotify("add"):r&&mt.emit("add")}return i},Ie.removed=function(){var t=this[0];return t&&t._private.removed},Ie.inside=function(){var t=this[0];return t&&!t._private.removed},Ie.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},a=n._private.cy;function o(yt){for(var pt=yt._private.edges,et=0;et<pt.length;et++)s(pt[et])}function l(yt){for(var pt=yt._private.children,et=0;et<pt.length;et++)s(pt[et])}function s(yt){var pt=i[yt.id()];e&&yt.removed()||pt||(i[yt.id()]=!0,yt.isNode()?(r.push(yt),o(yt),l(yt)):r.unshift(yt))}for(var u=0,h=n.length;u<h;u++)s(n[u]);function x(yt,pt){Ln(yt._private.edges,pt),yt.clearTraversalCache()}function D(yt){yt.clearTraversalCache()}var m=[];function T(yt,pt){pt=pt[0];var et=(yt=yt[0])._private.children,Pt=yt.id();Ln(et,pt),pt._private.parent=null,m.ids[Pt]||(m.ids[Pt]=!0,m.push(yt))}m.ids={},n.dirtyCompoundBoundsCache(),e&&a.removeFromPool(r);for(var _=0;_<r.length;_++){var L=r[_];if(L.isEdge()){var P=L.source()[0],C=L.target()[0];x(P,L),x(C,L);for(var V=L.parallelEdges(),B=0;B<V.length;B++){var F=V[B];D(F),F.isBundledBezier()&&F.dirtyBoundingBoxCache()}}else{var k=L.parent();0!==k.length&&T(k,L)}e&&(L._private.removed=!0)}var U=a._private.elements;a._private.hasCompoundNodes=!1;for(var $=0;$<U.length;$++)if(U[$].isParent()){a._private.hasCompoundNodes=!0;break}var it=new Ze(this.cy(),r);it.size()>0&&(t?it.emitAndNotify("remove"):e&&it.emit("remove"));for(var ot=0;ot<m.length;ot++){var st=m[ot];e&&st.removed()||st.updateStyle()}return it},Ie.move=function(t){var e=this._private.cy,n=this,r=function(h){return null==h?h:""+h};if(void 0!==t.source||void 0!==t.target){var i=r(t.source),a=r(t.target),o=null!=i&&e.hasElementWithId(i),l=null!=a&&e.hasElementWithId(a);(o||l)&&(e.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var g=n[h],x=g._private.data;g.isEdge()&&(o&&(x.source=i),l&&(x.target=a))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==t.parent){var s=r(t.parent);if(null===s||e.hasElementWithId(s)){var u=null===s?void 0:s;e.batch(function(){var h=n.remove(!1,!1);h.emitAndNotify("moveout");for(var g=0;g<n.length;g++){var x=n[g],D=x._private.data;x.isNode()&&(D.parent=u)}h.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[To,xl,Ki,rr,Fr,Il,ra,Cl,ts,es,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},la,ua,$e,or,en].forEach(function(t){W(Ie,t)});var Yl={add:function(t){var e,n=this;if(X(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],a=0;a<r.length;a++)i.push(r[a].json());e=new Ze(n,i)}}else if(S(t))e=new Ze(n,t);else if(A(t)&&(S(t.nodes)||S(t.edges))){for(var l=t,s=[],u=["nodes","edges"],h=0,g=u.length;h<g;h++){var x=u[h],D=l[x];if(S(D))for(var m=0,T=D.length;m<T;m++){var _=W({group:x},D[m]);s.push(_)}}e=new Ze(n,s)}else e=new fr(n,t).collection();return e},remove:function(t){return X(t)||c(t)&&(t=this.$(t)),t.remove()}},zl=function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,a){var o={x:r.x+a.dx*i,v:r.v+a.dv*i,tension:r.tension,friction:r.friction};return{dx:o.v,dv:t(o)}}function n(r,i){var a={dx:r.v,dv:t(r)},o=e(r,.5*i,a),l=e(r,.5*i,o),s=e(r,i,l),h=1/6*(a.dv+2*(o.dv+l.dv)+s.dv);return r.x=r.x+1/6*(a.dx+2*(o.dx+l.dx)+s.dx)*i,r.v=r.v+h*i,r}return function r(i,a,o){var l,s,u,h={x:-1,v:0,tension:null,friction:null},g=[0],x=0;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,h.tension=i,h.friction=a,s=(l=null!==o)?(x=r(i,a))/o*.016:.016;u=n(u||h,s),g.push(1+u.x),x+=16,Math.abs(u.x)>1e-4&&Math.abs(u.v)>1e-4;);return l?function(D){return g[D*(g.length-1)|0]}:x}}(),Se=function(t,e,n,r){var i=function(a,o,l,s){var u=4,h=.001,g=1e-7,x=10,D=11,m=1/(D-1),T="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var _=0;_<4;++_)if("number"!=typeof arguments[_]||isNaN(arguments[_])||!isFinite(arguments[_]))return!1;a=Math.min(a,1),l=Math.min(l,1),a=Math.max(a,0),l=Math.max(l,0);var L=T?new Float32Array(D):new Array(D);function P(pt,et){return 1-3*et+3*pt}function C(pt,et){return 3*et-6*pt}function V(pt){return 3*pt}function B(pt,et,Pt){return((P(et,Pt)*pt+C(et,Pt))*pt+V(et))*pt}function F(pt,et,Pt){return 3*P(et,Pt)*pt*pt+2*C(et,Pt)*pt+V(et)}function k(pt,et){for(var Pt=0;Pt<u;++Pt){var Lt=F(et,a,l);if(0===Lt)return et;et-=(B(et,a,l)-pt)/Lt}return et}function U(){for(var pt=0;pt<D;++pt)L[pt]=B(pt*m,a,l)}function $(pt,et,Pt){var Lt,mt,_t=0;do{(Lt=B(mt=et+(Pt-et)/2,a,l)-pt)>0?Pt=mt:et=mt}while(Math.abs(Lt)>g&&++_t<x);return mt}function Q(pt){for(var et=0,Pt=1,Lt=D-1;Pt!==Lt&&L[Pt]<=pt;++Pt)et+=m;--Pt;var mt=et+(pt-L[Pt])/(L[Pt+1]-L[Pt])*m,_t=F(mt,a,l);return _t>=h?k(pt,mt):0===_t?mt:$(pt,et,et+m)}var it=!1;function ot(){it=!0,a===o&&l===s||U()}var st=function(pt){return it||ot(),a===o&&l===s?pt:0===pt?0:1===pt?1:B(Q(pt),o,s)};st.getControlPoints=function(){return[{x:a,y:o},{x:l,y:s}]};var yt="generateBezier("+[a,o,l,s]+")";return st.toString=function(){return yt},st}(t,e,n,r);return function(a,o,l){return a+(o-a)*i(l)}},da={linear:function(t,e,n){return t+(e-t)*n},ease:Se(.25,.1,.25,1),"ease-in":Se(.42,0,1,1),"ease-out":Se(0,0,.58,1),"ease-in-out":Se(.42,0,.58,1),"ease-in-sine":Se(.47,0,.745,.715),"ease-out-sine":Se(.39,.575,.565,1),"ease-in-out-sine":Se(.445,.05,.55,.95),"ease-in-quad":Se(.55,.085,.68,.53),"ease-out-quad":Se(.25,.46,.45,.94),"ease-in-out-quad":Se(.455,.03,.515,.955),"ease-in-cubic":Se(.55,.055,.675,.19),"ease-out-cubic":Se(.215,.61,.355,1),"ease-in-out-cubic":Se(.645,.045,.355,1),"ease-in-quart":Se(.895,.03,.685,.22),"ease-out-quart":Se(.165,.84,.44,1),"ease-in-out-quart":Se(.77,0,.175,1),"ease-in-quint":Se(.755,.05,.855,.06),"ease-out-quint":Se(.23,1,.32,1),"ease-in-out-quint":Se(.86,0,.07,1),"ease-in-expo":Se(.95,.05,.795,.035),"ease-out-expo":Se(.19,1,.22,1),"ease-in-out-expo":Se(1,0,0,1),"ease-in-circ":Se(.6,.04,.98,.335),"ease-out-circ":Se(.075,.82,.165,1),"ease-in-out-circ":Se(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return da.linear;var r=zl(t,e,n);return function(i,a,o){return i+(a-i)*r(o)}},"cubic-bezier":Se};function cs(t,e,n,r,i){if(1===r||e===n)return n;var a=i(e,n,r);return null==t||((t.roundValue||t.color)&&(a=Math.round(a)),void 0!==t.min&&(a=Math.max(a,t.min)),void 0!==t.max&&(a=Math.min(a,t.max))),a}function ds(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Hr(t,e,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=ds(t,i),l=ds(e,i);if(M(o)&&M(l))return cs(a,o,l,n,r);if(S(o)&&S(l)){for(var s=[],u=0;u<l.length;u++){var h=o[u],g=l[u];if(null!=h&&null!=g){var x=cs(a,h,g,n,r);s.push(x)}else s.push(g)}return s}}function Xl(t,e,n,r){var i=!r,a=t._private,o=e._private,l=o.easing,s=o.startTime,u=(r?t:t.cy()).style();if(!o.easingImpl)if(null==l)o.easingImpl=da.linear;else{var h,g,x;h=c(l)?u.parse("transition-timing-function",l).value:l,c(h)?(g=h,x=[]):(g=h[1],x=h.slice(2).map(function(et){return+et})),x.length>0?("spring"===g&&x.push(o.duration),o.easingImpl=da[g].apply(null,x)):o.easingImpl=da[g]}var D,m=o.easingImpl;if(D=0===o.duration?1:(n-s)/o.duration,o.applying&&(D=o.progress),D<0?D=0:D>1&&(D=1),null==o.delay){var T=o.startPosition,_=o.position;if(_&&i&&!t.locked()){var L={};mi(T.x,_.x)&&(L.x=Hr(T.x,_.x,D,m)),mi(T.y,_.y)&&(L.y=Hr(T.y,_.y,D,m)),t.position(L)}var P=o.startPan,C=o.pan,V=a.pan,B=null!=C&&r;B&&(mi(P.x,C.x)&&(V.x=Hr(P.x,C.x,D,m)),mi(P.y,C.y)&&(V.y=Hr(P.y,C.y,D,m)),t.emit("pan"));var F=o.startZoom,k=o.zoom,U=null!=k&&r;U&&(mi(F,k)&&(a.zoom=yr(a.minZoom,Hr(F,k,D,m),a.maxZoom)),t.emit("zoom")),(B||U)&&t.emit("viewport");var $=o.style;if($&&$.length>0&&i){for(var Q=0;Q<$.length;Q++){var it=$[Q],ot=it.name,yt=o.startStyle[ot],pt=Hr(yt,it,D,m,u.properties[yt.name]);u.overrideBypass(t,ot,pt)}t.emit("style")}}return o.progress=D,D}function mi(t,e){return!(null==t||null==e||!(M(t)&&M(e)||t&&e))}function Hl(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function fs(t,e){var n=e._private.aniEles,r=[];function i(u,h){var g=u._private,x=g.animation.current,D=g.animation.queue,m=!1;if(0===x.length){var T=D.shift();T&&x.push(T)}for(var _=function(V){for(var B=V.length-1;B>=0;B--)(0,V[B])();V.splice(0,V.length)},L=x.length-1;L>=0;L--){var P=x[L],C=P._private;C.stopped?(x.splice(L,1),C.hooked=!1,C.playing=!1,C.started=!1,_(C.frames)):(C.playing||C.applying)&&(C.playing&&C.applying&&(C.applying=!1),C.started||Hl(0,P,t),Xl(u,P,t,h),C.applying&&(C.applying=!1),_(C.frames),null!=C.step&&C.step(t),P.completed()&&(x.splice(L,1),C.hooked=!1,C.playing=!1,C.started=!1,_(C.completes)),m=!0)}return h||0!==x.length||0!==D.length||r.push(u),m}for(var a=!1,o=0;o<n.length;o++){var l=i(n[o]);a=a||l}var s=i(e,!0);(a||s)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Vl={animate:xe.animate(),animation:xe.animation(),animated:xe.animated(),clearQueue:xe.clearQueue(),delay:xe.delay(),delayAnimation:xe.delayAnimation(),stop:xe.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(n,r){fs(r,t)},e.beforeRenderPriorities.animations):function n(){t._private.animationsRunning&&Wn(function(r){fs(r,t),n()})}()}}},Ul={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},fa=function(t){return c(t)?new er(t):t},ps={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new oa(Ul,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,fa(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,fa(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,fa(e),n),this},once:function(t,e,n){return this.emitter().one(t,fa(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};xe.eventAliasesOn(ps);var so={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};so.jpeg=so.jpg;var pa={layout:function(t){if(null!=t)if(null!=t.name){var r,e=t.name,n=this.extension("layout",e);if(null!=n)return r=c(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new n(W({},t,{cy:this,eles:r}));_e("No such layout `"+e+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else _e("A `name` must be specified to make a layout");else _e("Layout options must be specified to make a layout")}};pa.createLayout=pa.makeLayout=pa.layout;var ql={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];e.getElementById(i).data(a)}})}},$l=Re({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),lo={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&be("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=$l(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else _e("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var n=e._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};lo.invalidateDimensions=lo.resize;var ga={collection:function(t,e){return c(t)?this.$(t):X(t)?t.collection():S(t)?new Ze(this,t,e):new Ze(this)},nodes:function(t){var e=this.$(function(n){return n.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(n){return n.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};ga.elements=ga.filter=ga.$;var nn={apply:function(t){for(var e=this._private.cy.collection(),n=0;n<t.length;n++){var r=t[n],i=this.getContextMeta(r);if(!i.empty){var a=this.getContextStyle(i),o=this.applyContextStyle(i,a,r);r._private.appliedInitStyle?this.updateTransitions(r,o.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&e.push(r)}}return e},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var a=[],o={},l=0;l<this.length;l++){var s=this[l],h="t"===e[l],g="t"===t[l]!==h,x=s.mappedProperties.length>0;if(g||h&&x){var D=void 0;g&&x||g?D=s.properties:x&&(D=s.mappedProperties);for(var m=0;m<D.length;m++){for(var T=D[m],_=T.name,L=!1,P=l+1;P<this.length&&("t"!==e[P]||!(L=null!=this[P].properties[T.name]));P++);o[_]||L||(o[_]=!0,a.push(_))}}}return n[r]=a,a},getContextMeta:function(t){for(var e,n="",r=t._private.styleCxtKey||"",i=0;i<this.length;i++){var a=this[i];n+=a.selector&&a.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var a=this[i];if("t"===e[i])for(var o=0;o<a.properties.length;o++){var l=a.properties[o];r[l.name]=l}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var l=r[o],s=e[l],u=n.pstyle(l);if(!s){if(!u)continue;s=u.bypass?{name:l,deleteBypassed:!0}:{name:l,delete:!0}}if(u!==s){if(s.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===s.value){var h=u.mapping;if((h.fnValue=s.value(n))===h.prevFnValue)continue}var g=i[l]={prev:u};this.applyParsedProperty(n,s),g.next=n.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var r,e=t._private,n=this,i=n.propertyGroupKeys,a=function(Zt,ne,le){return n.getPropertiesHash(Zt,ne,le)},o=e.styleKey;if(t.removed())return!1;var Zt,ne,l="nodes"===e.group,s=t._private.style;r=Object.keys(s);for(var u=0;u<i.length;u++)e.styleKeys[i[u]]=[9261,5381];for(var g,x=function(Zt,ne){return e.styleKeys[ne][0]=cr(Zt,e.styleKeys[ne][0])},D=function(Zt,ne){return e.styleKeys[ne][1]=dr(Zt,e.styleKeys[ne][1])},T=function(Zt,ne){for(var le=0;le<Zt.length;le++){var zt=Zt.charCodeAt(le);x(zt,ne),D(zt,ne)}},_=0;_<r.length;_++){var L=r[_],P=s[L];if(null!=P){var C=this.properties[L],V=C.type,B=C.groupKey,F=void 0;null!=C.hashOverride?F=C.hashOverride(t,P):null!=P.pfValue&&(F=P.pfValue);var k=null==C.enums?P.value:null,U=null!=F,Q=P.units;!V.number||!U&&null==k||V.multiple?T(P.strValue,B):(Zt=-128<(g=U?F:k)&&g<128&&Math.floor(g)!==g?2e9-(1024*g|0):g,x(Zt,ne=B),D(Zt,ne),U||null==Q||T(Q,B))}}for(var st=[9261,5381],yt=0;yt<i.length;yt++){var et=e.styleKeys[i[yt]];st[0]=cr(et[0],st[0]),st[1]=dr(et[1],st[1])}e.styleKey=2097152*st[0]+st[1];var Pt=e.styleKeys;e.labelDimsKey=Dn(Pt.labelDimensions);var Lt=a(t,["label"],Pt.labelDimensions);if(e.labelKey=Dn(Lt),e.labelStyleKey=Dn(Cr(Pt.commonLabel,Lt)),!l){var mt=a(t,["source-label"],Pt.labelDimensions);e.sourceLabelKey=Dn(mt),e.sourceLabelStyleKey=Dn(Cr(Pt.commonLabel,mt));var _t=a(t,["target-label"],Pt.labelDimensions);e.targetLabelKey=Dn(_t),e.targetLabelStyleKey=Dn(Cr(Pt.commonLabel,_t))}if(l){var xt=e.styleKeys,Yt=xt.pie,jt=[xt.nodeBody,xt.nodeBorder,xt.backgroundImage,xt.compound,Yt].filter(function(Zt){return null!=Zt}).reduce(Cr,[9261,5381]);e.nodeKey=Dn(jt),e.hasPie=null!=Yt&&9261!==Yt[0]&&5381!==Yt[1]}return o!==e.styleKey},clearStyleHints:function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,a=t._private.style,o=r.types,l=r.properties[i.name].type,s=i.bypass,u=a[i.name],h=u&&u.bypass,g=t._private,x=function(mt){return null==mt?null:null!=mt.pfValue?mt.pfValue:mt.value},D=function(){var mt=x(u),_t=x(i);r.checkTriggers(t,i.name,mt,_t)};if(i&&"pie"===i.name.substr(0,3)&&be("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",s)),i.delete)return a[i.name]=void 0,D(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,D(),!0):(D(),!0);if(i.deleteBypass)return u?!!u.bypass&&(a[i.name]=u.bypassed,D(),!0):(D(),!0);var m=function(){be("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var T,_=i.field.split("."),L=g.data,P=0;P<_.length&&L;P++)L=L[_[P]];if(null==L)return m(),!1;if(!M(L))return be("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+L+"` for `"+t.id()+"` is non-numeric)"),!1;var C=i.fieldMax-i.fieldMin;if((T=0===C?0:(L-i.fieldMin)/C)<0?T=0:T>1&&(T=1),l.color){var V=i.valueMin[0],F=i.valueMin[1],k=i.valueMax[1],U=i.valueMin[2],$=i.valueMax[2],Q=null==i.valueMin[3]?1:i.valueMin[3],it=null==i.valueMax[3]?1:i.valueMax[3],ot=[Math.round(V+(i.valueMax[0]-V)*T),Math.round(F+(k-F)*T),Math.round(U+($-U)*T),Math.round(Q+(it-Q)*T)];n={bypass:i.bypass,name:i.name,value:ot,strValue:"rgb("+ot[0]+", "+ot[1]+", "+ot[2]+")"}}else{if(!l.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*T,i.bypass,"mapping")}if(!n)return m(),!1;n.mapping=i,i=n;break;case o.data:for(var yt=i.field.split("."),pt=g.data,et=0;et<yt.length&&pt;et++)pt=pt[yt[et]];if(null!=pt&&(n=this.parse(i.name,pt,i.bypass,"mapping")),!n)return m(),!1;n.mapping=i,i=n;break;case o.fn:var Lt=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=Lt,null==Lt)return be("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,Lt,i.bypass,"mapping")))return be("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=vn(i),i=n;break;case void 0:break;default:return!1}return s?(i.bypassed=h?u.bypassed:u,a[i.name]=i):h?u.bypassed=i:a[i.name]=i,D(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var l=a[o],s=i[l];null!=s&&(s.bypass?s.bypassed=null:i[l]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var l={},s=!1,u=0;u<i.length;u++){var h=i[u],g=t.pstyle(h),x=e[h];if(x){var D=x.prev,m=null!=x.next?x.next:g,T=!1,_=void 0;D&&(M(D.pfValue)&&M(m.pfValue)?_=D.pfValue+1e-6*(T=m.pfValue-D.pfValue):M(D.value)&&M(m.value)?_=D.value+1e-6*(T=m.value-D.value):S(D.value)&&S(m.value)&&(T=D.value[0]!==m.value[0]||D.value[1]!==m.value[1]||D.value[2]!==m.value[2],_=D.strValue),T&&(l[h]=m.strValue,this.applyBypass(t,h,_),s=!0))}}if(!s)return;r.transitioning=!0,new Or(function(L){o>0?t.delayAnimation(o).play().promise().then(L):L()}).then(function(){return t.animation({style:l,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,a){var o=this.properties[e],l=i(o);null!=l&&l(n,r)&&a(o)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"curve-style"!==e||"bezier"!==n&&"bezier"!==r||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()})})},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},Zl={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var l=this.parse(this.properties[a].name,n,!0);l&&i.push(l)}}else if(c(e)){var s=this.parse(e,n,!0);s&&i.push(s)}else{if(!A(e))return!1;var u=e;r=n;for(var h=Object.keys(u),g=0;g<h.length;g++){var x=h[g],D=u[x];if(void 0===D&&(D=u[j(x)]),void 0!==D){var m=this.parse(x,D,!0);m&&i.push(m)}}}if(0===i.length)return!1;for(var T=!1,_=0;_<t.length;_++){for(var L=t[_],P={},C=void 0,V=0;V<i.length;V++){var B=i[V];if(r){var F=L.pstyle(B.name);C=P[B.name]={prev:F}}T=this.applyParsedProperty(L,vn(B))||T,r&&(C.next=L.pstyle(B.name))}T&&this.updateStyleHints(L),r&&this.updateTransitions(L,P,!0)}return T},overrideBypass:function(t,e,n){e=H(e);for(var r=0;r<t.length;r++){var i=t[r],a=i._private.style[e],o=this.properties[e].type,l=o.color,s=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=l?"rgb("+n.join(",")+")":s?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],a={},o=0;o<e.length;o++){var l=e[o],s=this.properties[l],u=i.pstyle(s.name);if(u&&u.bypass){var h=this.parse(l,"",!0),g=a[s.name]={prev:u};this.applyParsedProperty(i,h),g.next=i.pstyle(s.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}}},jl={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(w&&e&&w.getComputedStyle)return w.getComputedStyle(e).getPropertyValue(t)}},uo={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],a=this.getStylePropertyValue(t,i.name,e);null!=a&&(n[i.name]=a,n[j(i.name)]=a)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,a=t.pstyle(r.name);if(a){var o=a.value,l=a.units,s=a.strValue;if(n&&i.number&&null!=o&&M(o)){var u=t.cy().zoom(),h=function(D){return D*u},g=function(D,m){return h(D)+m},x=S(o);return(x?l.every(function(D){return null!=D}):null!=l)?x?o.map(function(D,m){return g(D,l[m])}).join(" "):g(o,l):x?o.map(function(D){return c(D)?D:""+h(D)}).join(" "):""+h(o)}if(null!=s)return s}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,a=t.pstyle(i);void 0!==a&&(a=A(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],l=n[o],s=r[o]||r[H(o)],u=this.parse(s.name,l);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var i,a,o,l,s,u=n.slice();for(l=0;l<e.length;l++)if(null!=(i=t.pstyle(e[l],!1)))if(null!=i.pfValue)u[0]=cr(o,u[0]),u[1]=dr(o,u[1]);else for(a=i.strValue,s=0;s<a.length;s++)o=a.charCodeAt(s),u[0]=cr(o,u[0]),u[1]=dr(o,u[1]);return u}};uo.getPropertiesHash=uo.getNonDefaultPropertiesHash;var Wl={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,a=Object.keys(i);this.selector(r);for(var o=0;o<a.length;o++){var l=a[o];this.css(l,i[l])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var l=i[o];a[l.name]=l.strValue}t.push({selector:r?r.toString():"core",style:a})}return t}},Kl={appendFromString:function(t){var e,n,r,i=""+t;function a(){i=i.length>e.length?i.substr(e.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var l=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){be("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=l[0];var s=l[1];if("core"!==s&&new er(s).invalid)be("Skipping parsing of block: Invalid selector found in string stylesheet: "+s),a();else{var u=l[2],h=!1;n=u;for(var g=[];!n.match(/^\s*$/);){var x=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!x){be("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),h=!0;break}r=x[0];var D=x[1],m=x[2];this.properties[D]?this.parse(D,m)?(g.push({name:D,val:m}),o()):(be("Skipping property: Invalid property definition in: "+r),o()):(be("Skipping property: Invalid property name in: "+r),o())}if(h){a();break}this.selector(s);for(var T=0;T<g.length;T++){var _=g[T];this.css(_.name,_.val)}a()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},je={};(function(){var t=bt,e=function(Tt){return"^"+Tt+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(Tt){var kt=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Tt+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+kt+")\\s*\\,\\s*("+kt+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];je.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Tt,kt){switch(Tt.length){case 2:return"deg"!==kt[0]&&"rad"!==kt[0]&&"deg"!==kt[1]&&"rad"!==kt[1];case 1:return c(Tt[0])||"deg"===kt[0]||"rad"===kt[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Tt){var kt=Tt.length;return 1===kt||2===kt||4===kt}}};var i={zeroNonZero:function(Tt,kt){return(null==Tt||null==kt)&&Tt!==kt||0==Tt&&0!=kt||0!=Tt&&0==kt},any:function(Tt,kt){return Tt!=kt},emptyNonEmpty:function(Tt,kt){var Bt=Z(Tt),Xt=Z(kt);return Bt&&!Xt||!Bt&&Xt}},a=je.types,o=[{name:"label",type:a.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any}],l=[{name:"source-label",type:a.text,triggersBounds:i.any},{name:"source-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:a.size,triggersBounds:i.any}],s=[{name:"target-label",type:a.text,triggersBounds:i.any},{name:"target-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:a.size,triggersBounds:i.any}],u=[{name:"font-family",type:a.fontFamily,triggersBounds:i.any},{name:"font-style",type:a.fontStyle,triggersBounds:i.any},{name:"font-weight",type:a.fontWeight,triggersBounds:i.any},{name:"font-size",type:a.size,triggersBounds:i.any},{name:"text-transform",type:a.textTransform,triggersBounds:i.any},{name:"text-wrap",type:a.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:a.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:a.size,triggersBounds:i.any},{name:"text-outline-width",type:a.size,triggersBounds:i.any},{name:"line-height",type:a.positiveNumber,triggersBounds:i.any}],h=[{name:"text-valign",type:a.valign,triggersBounds:i.any},{name:"text-halign",type:a.halign,triggersBounds:i.any},{name:"color",type:a.color},{name:"text-outline-color",type:a.color},{name:"text-outline-opacity",type:a.zeroOneNumber},{name:"text-background-color",type:a.color},{name:"text-background-opacity",type:a.zeroOneNumber},{name:"text-background-padding",type:a.size,triggersBounds:i.any},{name:"text-border-opacity",type:a.zeroOneNumber},{name:"text-border-color",type:a.color},{name:"text-border-width",type:a.size,triggersBounds:i.any},{name:"text-border-style",type:a.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:a.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:a.justification}],g=[{name:"events",type:a.bool},{name:"text-events",type:a.bool}],x=[{name:"display",type:a.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:a.visibility,triggersZOrder:i.any},{name:"opacity",type:a.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:a.zeroOneNumber},{name:"min-zoomed-font-size",type:a.size},{name:"z-compound-depth",type:a.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:a.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:a.nonNegativeInt,triggersZOrder:i.any}],D=[{name:"overlay-padding",type:a.size,triggersBounds:i.any},{name:"overlay-color",type:a.color},{name:"overlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"overlay-shape",type:a.overlayShape,triggersBounds:i.any}],m=[{name:"underlay-padding",type:a.size,triggersBounds:i.any},{name:"underlay-color",type:a.color},{name:"underlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"underlay-shape",type:a.overlayShape,triggersBounds:i.any}],T=[{name:"transition-property",type:a.propList},{name:"transition-duration",type:a.time},{name:"transition-delay",type:a.time},{name:"transition-timing-function",type:a.easing}],_=function(Tt,kt){return"label"===kt.value?-Tt.poolIndex():kt.pfValue},L=[{name:"height",type:a.nodeSize,triggersBounds:i.any,hashOverride:_},{name:"width",type:a.nodeSize,triggersBounds:i.any,hashOverride:_},{name:"shape",type:a.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:a.polygonPointList,triggersBounds:i.any},{name:"background-color",type:a.color},{name:"background-fill",type:a.fill},{name:"background-opacity",type:a.zeroOneNumber},{name:"background-blacken",type:a.nOneOneNumber},{name:"background-gradient-stop-colors",type:a.colors},{name:"background-gradient-stop-positions",type:a.percentages},{name:"background-gradient-direction",type:a.gradientDirection},{name:"padding",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:a.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:a.boundsExpansion,triggersBounds:i.any}],P=[{name:"border-color",type:a.color},{name:"border-opacity",type:a.zeroOneNumber},{name:"border-width",type:a.size,triggersBounds:i.any},{name:"border-style",type:a.borderStyle}],C=[{name:"background-image",type:a.urls},{name:"background-image-crossorigin",type:a.bgCrossOrigin},{name:"background-image-opacity",type:a.zeroOneNumbers},{name:"background-image-containment",type:a.bgContainment},{name:"background-image-smoothing",type:a.bools},{name:"background-position-x",type:a.bgPos},{name:"background-position-y",type:a.bgPos},{name:"background-width-relative-to",type:a.bgRelativeTo},{name:"background-height-relative-to",type:a.bgRelativeTo},{name:"background-repeat",type:a.bgRepeat},{name:"background-fit",type:a.bgFit},{name:"background-clip",type:a.bgClip},{name:"background-width",type:a.bgWH},{name:"background-height",type:a.bgWH},{name:"background-offset-x",type:a.bgPos},{name:"background-offset-y",type:a.bgPos}],V=[{name:"position",type:a.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:a.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:a.size,triggersBounds:i.any},{name:"min-width-bias-left",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:a.size,triggersBounds:i.any},{name:"min-height-bias-top",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:a.sizeMaybePercent,triggersBounds:i.any}],B=[{name:"line-style",type:a.lineStyle},{name:"line-color",type:a.color},{name:"line-fill",type:a.fill},{name:"line-cap",type:a.lineCap},{name:"line-opacity",type:a.zeroOneNumber},{name:"line-dash-pattern",type:a.numbers},{name:"line-dash-offset",type:a.number},{name:"line-gradient-stop-colors",type:a.colors},{name:"line-gradient-stop-positions",type:a.percentages},{name:"curve-style",type:a.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:a.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:a.size,triggersBounds:i.any},{name:"control-point-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:a.numbers,triggersBounds:i.any},{name:"segment-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:a.numbers,triggersBounds:i.any},{name:"taxi-turn",type:a.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:a.size,triggersBounds:i.any},{name:"taxi-direction",type:a.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:a.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:a.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:a.angle,triggersBounds:i.any},{name:"loop-sweep",type:a.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:a.size,triggersBounds:i.any},{name:"target-distance-from-node",type:a.size,triggersBounds:i.any}],F=[{name:"ghost",type:a.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:a.zeroOneNumber}],k=[{name:"selection-box-color",type:a.color},{name:"selection-box-opacity",type:a.zeroOneNumber},{name:"selection-box-border-color",type:a.color},{name:"selection-box-border-width",type:a.size},{name:"active-bg-color",type:a.color},{name:"active-bg-opacity",type:a.zeroOneNumber},{name:"active-bg-size",type:a.size},{name:"outside-texture-bg-color",type:a.color},{name:"outside-texture-bg-opacity",type:a.zeroOneNumber}],U=[];je.pieBackgroundN=16,U.push({name:"pie-size",type:a.sizeMaybePercent});for(var $=1;$<=je.pieBackgroundN;$++)U.push({name:"pie-"+$+"-background-color",type:a.color}),U.push({name:"pie-"+$+"-background-size",type:a.percent}),U.push({name:"pie-"+$+"-background-opacity",type:a.zeroOneNumber});var Q=[],it=je.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:a.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:a.color},{name:"arrow-fill",type:a.arrowFill}].forEach(function(Tt){it.forEach(function(kt){Q.push({name:kt+"-"+Tt.name,type:Tt.type,triggersBounds:Tt.triggersBounds})})},{});var ot=je.properties=[].concat(g,T,x,D,m,F,h,u,o,l,s,L,P,C,U,V,B,Q,k),st=je.propertyGroups={behavior:g,transition:T,visibility:x,overlay:D,underlay:m,ghost:F,commonLabel:h,labelDimensions:u,mainLabel:o,sourceLabel:l,targetLabel:s,nodeBody:L,nodeBorder:P,backgroundImage:C,pie:U,compound:V,edgeLine:B,edgeArrow:Q,core:k},yt=je.propertyGroupNames={};(je.propertyGroupKeys=Object.keys(st)).forEach(function(Tt){yt[Tt]=st[Tt].map(function(kt){return kt.name}),st[Tt].forEach(function(kt){return kt.groupKey=Tt})});var pt=je.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];je.propertyNames=ot.map(function(Tt){return Tt.name});for(var et=0;et<ot.length;et++){var Pt=ot[et];ot[Pt.name]=Pt}for(var Lt=0;Lt<pt.length;Lt++){var mt=pt[Lt],xt={name:mt.name,alias:!0,pointsTo:ot[mt.pointsTo]};ot.push(xt),ot[mt.name]=xt}})(),je.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},je.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=W({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(s,u){for(var h=1;h<=je.pieBackgroundN;h++)s[u.name.replace("{{i}}",h)]=u.value;return s},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(s,u){return je.arrowPrefixes.forEach(function(h){s[h+"-"+u.name]=u.value}),s},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,l=this.parse(a,e[a]);n[a]=l}}return t.defaultProperties=n,t.defaultProperties},je.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var gs={parse:function(t,e,n,r){if(E(e))return this.parseImplWarn(t,e,n,r);var i,a=Ai(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=vn(i))&&(i.value=vn(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||be("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==e||be("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,n,r){t=H(t);var i=this.properties[t],a=e,o=this.types;if(!i||void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var l=c(e);l&&(e=e.trim());var s,u,h=i.type;if(!h)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(E(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:n};if(!(!l||r||e.length<7||"a"!==e[1])){if(e.length>=7&&"d"===e[0]&&(s=new RegExp(o.data.regex).exec(e)))return!n&&{name:t,value:s,strValue:""+e,mapped:o.data,field:s[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(u=new RegExp(o.mapData.regex).exec(e))){if(n||h.multiple)return!1;var x=o.mapData;if(!h.color&&!h.number)return!1;var D=this.parse(t,u[4]);if(!D||D.mapped)return!1;var m=this.parse(t,u[5]);if(!m||m.mapped)return!1;if(D.pfValue===m.pfValue||D.strValue===m.strValue)return be("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+D.strValue+"`"),this.parse(t,D.strValue);if(h.color){var T=D.value,_=m.value;if(!(T[0]!==_[0]||T[1]!==_[1]||T[2]!==_[2]||T[3]!==_[3]&&(null!=T[3]&&1!==T[3]||null!=_[3]&&1!==_[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:x,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:D.value,valueMax:m.value,bypass:n}}}if(h.multiple&&"multiple"!==r){var L;if(L=l?e.split(/\s+/):S(e)?e:[e],h.evenMultiple&&L.length%2!=0)return null;for(var P=[],C=[],V=[],B="",F=!1,k=0;k<L.length;k++){var U=this.parse(t,L[k],n,"multiple");F=F||c(U.value),P.push(U.value),V.push(null!=U.pfValue?U.pfValue:U.value),C.push(U.units),B+=(k>0?" ":"")+U.strValue}return h.validate&&!h.validate(P,C)?null:h.singleEnum&&F?1===P.length&&c(P[0])?{name:t,value:P[0],strValue:P[0],bypass:n}:null:{name:t,value:P,pfValue:V,strValue:B,bypass:n,units:C}}var Q,it=function(){for(var jt=0;jt<h.enums.length;jt++)if(h.enums[jt]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(h.number){var ot,st="px";if(h.units&&(ot=h.units),h.implicitUnits&&(st=h.implicitUnits),!h.unitless)if(l){var yt="px|em"+(h.allowPercent?"|\\%":"");ot&&(yt=ot);var pt=e.match("^("+bt+")("+yt+")?$");pt&&(e=pt[1],ot=pt[2]||st)}else ot&&!h.implicitUnits||(ot=st);if(e=parseFloat(e),isNaN(e)&&void 0===h.enums)return null;if(isNaN(e)&&void 0!==h.enums)return e=a,it();if(h.integer&&(!M(Q=e)||Math.floor(Q)!==Q)||void 0!==h.min&&(e<h.min||h.strictMin&&e===h.min)||void 0!==h.max&&(e>h.max||h.strictMax&&e===h.max))return null;var et={name:t,value:e,strValue:""+e+(ot||""),units:ot,bypass:n};return et.pfValue=h.unitless||"px"!==ot&&"em"!==ot?e:"px"!==ot&&ot?this.getEmSizeInPixels()*e:e,"ms"!==ot&&"s"!==ot||(et.pfValue="ms"===ot?e:1e3*e),"deg"!==ot&&"rad"!==ot||(et.pfValue="rad"===ot?e:Math.PI*e/180),"%"===ot&&(et.pfValue=e/100),et}if(h.propList){var Pt=[],Lt=""+e;if("none"!==Lt){for(var mt=Lt.split(/\s*,\s*|\s+/),_t=0;_t<mt.length;_t++){var xt=mt[_t].trim();this.properties[xt]?Pt.push(xt):be("`"+xt+"` is not a valid property name")}if(0===Pt.length)return null}return{name:t,value:Pt,strValue:0===Pt.length?"none":Pt.join(" "),bypass:n}}if(h.color){var Tt=function(t){return(S(t)?t:null)||ft[t.toLowerCase()]||function(e){var n,r,i;if((4===e.length||7===e.length)&&"#"===e[0])return 4===e.length?(n=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)):(n=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),i=parseInt(e[5]+e[6],16)),[n,r,i]}(t)||function(e){var n,r=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(r){n=[];for(var i=[],a=1;a<=3;a++){var o=r[a];if("%"===o[o.length-1]&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;n.push(Math.floor(o))}if((i[1]||i[2]||i[3])&&!(i[1]&&i[2]&&i[3]))return;var u=r[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;n.push(u)}}return n}(t)||function(e){var n,r,i,a,o,l,s,u;function h(m,T,_){return _<0&&(_+=1),_>1&&(_-=1),_<1/6?m+6*(T-m)*_:_<.5?T:_<2/3?m+(T-m)*(2/3-_)*6:m}var g=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(g){if((r=parseInt(g[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(g[2]))<0||i>100||(i/=100,(a=parseFloat(g[3]))<0||a>100)||(a/=100,void 0!==(o=g[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===i)l=s=u=Math.round(255*a);else{var x=a<.5?a*(1+i):a+i-a*i,D=2*a-x;l=Math.round(255*h(D,x,r+1/3)),s=Math.round(255*h(D,x,r)),u=Math.round(255*h(D,x,r-1/3))}n=[l,s,u,o]}return n}(t)}(e);return Tt?{name:t,value:Tt,pfValue:Tt,strValue:"rgb("+Tt[0]+","+Tt[1]+","+Tt[2]+")",bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var kt=it();if(kt)return kt}for(var Bt=h.regexes?h.regexes:[h.regex],Xt=0;Xt<Bt.length;Xt++){var Yt=new RegExp(Bt[Xt]).exec(e);if(Yt)return{name:t,value:h.singleRegexMatchValue?Yt[1]:Yt,strValue:""+e,bypass:n}}return null}return h.string?{name:t,value:""+e,strValue:""+e,bypass:n}:h.enums?it():null}},rn=function t(e){if(!(this instanceof t))return new t(e);At(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):_e("A style must have a core reference")},an=rn.prototype;an.instanceString=function(){return"style"},an.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach(function(r){var i=r[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this},an.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},an.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},an.selector=function(t){var e="core"===t?null:new er(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},an.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],a=n[i.name];void 0===a&&(a=n[j(i.name)]),void 0!==a&&this.cssRule(i.name,a)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},an.style=an.css,an.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},an.append=function(t){return q(t)?t.appendToStyle(this):S(t)?this.appendFromJson(t):c(t)&&this.appendFromString(t),this},rn.fromJson=function(t,e){var n=new rn(t);return n.fromJson(e),n},rn.fromString=function(t,e){return new rn(t).fromString(e)},[nn,Zl,jl,uo,Wl,Kl,je,gs].forEach(function(t){W(an,t)}),rn.types=an.types,rn.properties=an.properties,rn.propertyGroups=an.propertyGroups,rn.propertyGroupNames=an.propertyGroupNames,rn.propertyGroupKeys=an.propertyGroupKeys;var Ql={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=q(t)?t.generateStyle(this):S(t)?rn.fromJson(this,t):c(t)?rn.fromString(this,t):rn(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},Dr={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(c(a[0]))return o[t=a[0]];if(A(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,M(r)&&(o.x=r),M(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[1],"x"!==(t=a[0])&&"y"!==t||!M(e)||(o[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,a,o,l=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(l.length){case 1:A(t)&&(a=(i=l[0]).x,o=i.y,M(a)&&(s.x+=a),M(o)&&(s.y+=o),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!M(r)||(s[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(M(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(c(t)?t=this.$(t):A(r=t)&&M(r.x1)&&M(r.x2)&&M(r.y1)&&M(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):X(t)||(t=this.mutableElements()),!X(t)||!t.empty())){n=n||t.boundingBox();var o,l=this.width(),s=this.height();if(e=M(e)?e:0,!isNaN(l)&&!isNaN(s)&&l>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:o=(o=(o=Math.min((l-2*e)/n.w,(s-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(l-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return M(t)&&M(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):M(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:M(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,a=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),M(t)?n=t:A(t)&&(n=t.level,null!=t.position?e=vr(t.position,a,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!o&&M(n)&&n!==a&&(null==e||M(e.x)&&M(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/a*(e.x-i.x)+e.x,y:-n/a*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],a=!1,o=!1;if(!t)return this;if(M(t.zoom)||(n=!1),A(t.pan)||(r=!1),!n&&!r)return this;if(n){var l=t.zoom;l<e.minZoom||l>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=l,i.push("zoom"))}if(r&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var s=t.pan;M(s.x)&&(e.pan.x=s.x,o=!1),M(s.y)&&(e.pan.y=s.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(c(t)){var n=t;t=this.mutableElements().filter(n)}else X(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),a=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(a-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=w.getComputedStyle(r),{width:r.clientWidth-(e=function(i){return parseFloat(t.getPropertyValue(i))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Dr.centre=Dr.center,Dr.autolockNodes=Dr.autolock,Dr.autoungrabifyNodes=Dr.autoungrabify;var bi={data:xe.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:xe.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:xe.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:xe.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};bi.attr=bi.data,bi.removeAttr=bi.removeData;var xi=function(t){var e=this,n=(t=W({},t)).container;n&&!R(n)&&R(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var a=void 0!==w&&void 0!==n&&!t.headless,o=t;o.layout=W({name:a?"grid":"null"},o.layout),o.renderer=W({name:a?"canvas":"null"},o.renderer);var l=function(h,g,x){return void 0!==g?g:void 0!==x?x:h},s=this._private={container:n,ready:!1,options:o,elements:new Ze(this),listeners:[],aniEles:new Ze(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:M(o.zoom)?o.zoom:1,pan:{x:A(o.pan)&&M(o.pan.x)?o.pan.x:0,y:A(o.pan)&&M(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),s.styleEnabled&&e.setStyle([]);var u=W({},o,o.renderer);e.initRenderer(u),function(h,g){if(h.some(nt))return Or.all(h).then(g);g(h)}([o.style,o.elements],function(h){var g=h[0],x=h[1];s.styleEnabled&&e.style().append(g),function(D,m,T){e.notifications(!1);var _=e.mutableElements();_.length>0&&_.remove(),null!=D&&(A(D)||S(D))&&e.add(D),e.one("layoutready",function(P){e.notifications(!0),e.emit(P),e.one("load",m),e.emitAndNotify("load")}).one("layoutstop",function(){e.one("done",T),e.emit("done")});var L=W({},e._private.options.layout);L.eles=e.elements(),e.layout(L).run()}(x,function(){e.startAnimationLoop(),s.ready=!0,E(o.ready)&&e.on("ready",o.ready);for(var D=0;D<i.length;D++)e.on("ready",i[D]);r&&(r.readies=[]),e.emit("ready")},o.done)})},va=xi.prototype;W(va,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!R(t)&&R(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(W({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return vn(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(A(t)){if(e.startBatch(),t.elements){var i={},a=function(_,L){for(var P=[],C=[],V=0;V<_.length;V++){var B=_[V];if(B.data.id){var F=""+B.data.id,k=e.getElementById(F);i[F]=!0,0!==k.length?C.push({ele:k,json:B}):(L&&(B.group=L),P.push(B))}else be("cy.json() cannot handle elements without an ID attribute")}e.add(P);for(var U=0;U<C.length;U++){var $=C[U];$.ele.json($.json)}};if(S(t.elements))a(t.elements);else for(var o=["nodes","edges"],l=0;l<o.length;l++){var s=o[l],u=t.elements[s];S(u)&&a(u,s)}var h=e.collection();r.filter(function(_){return!i[_.id()]}).forEach(function(_){_.isParent()?h.merge(_):_.remove()}),h.forEach(function(_){return _.children().move({parent:null})}),h.forEach(function(_){return(L=_,e.getElementById(L.id())).remove();var L})}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],x=0;x<g.length;x++){var D=g[x];null!=t[D]&&e[D](t[D])}return e.endBatch(),this}var m={};t?m.elements=this.elements().map(function(_){return _.json()}):(m.elements={},r.forEach(function(_){var L=_.group();m.elements[L]||(m.elements[L]=[]),m.elements[L].push(_.json())})),this._private.styleEnabled&&(m.style=e.style().json()),m.data=vn(e.data());var T=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=vn(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=vn(T.renderer),m.hideEdgesOnViewport=T.hideEdgesOnViewport,m.textureOnViewport=T.textureOnViewport,m.wheelSensitivity=T.wheelSensitivity,m.motionBlur=T.motionBlur,m.multiClickDebounceTime=T.multiClickDebounceTime,m}}),va.$id=va.getElementById,[Yl,Vl,ps,so,pa,ql,lo,ga,Ql,Dr,bi].forEach(function(t){W(va,t)});var Jl={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},Vr=function(t){return t.scratch("breadthfirst")},vs=function(t,e){return t.scratch("breadthfirst",e)};function ys(t){this.options=W({},Jl,t)}ys.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,a=i.nodes().filter(function(zt){return!zt.isParent()}),o=i,l=n.directed,s=n.maximal||n.maximalAdjustments>0,u=Je(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(X(n.roots))t=n.roots;else if(S(n.roots)){for(var h=[],g=0;g<n.roots.length;g++){var D=r.getElementById(n.roots[g]);h.push(D)}t=r.collection(h)}else if(c(n.roots))t=r.$(n.roots);else if(l)t=a.roots();else{var m=i.components();t=r.collection();for(var T=function(zt){var Wt=m[zt],Qt=Wt.maxDegree(!1),z=Wt.filter(function(ut){return ut.degree(!1)===Qt});t=t.add(z)},_=0;_<m.length;_++)T(_)}var L=[],P={},C=function(zt,Wt){null==L[Wt]&&(L[Wt]=[]);var Qt=L[Wt].length;L[Wt].push(zt),vs(zt,{index:Qt,depth:Wt})};o.bfs({roots:t,directed:n.directed,visit:function(zt,Wt,Qt,z,ut){var wt=zt[0],Ct=wt.id();C(wt,ut),P[Ct]=!0}});for(var V=[],B=0;B<a.length;B++){var F=a[B];P[F.id()]||V.push(F)}var k=function(zt){for(var Wt=L[zt],Qt=0;Qt<Wt.length;Qt++){var z=Wt[Qt];null!=z?vs(z,{depth:zt,index:Qt}):(Wt.splice(Qt,1),Qt--)}},U=function(){for(var zt=0;zt<L.length;zt++)k(zt)},$=function(zt,Wt){for(var Qt=Vr(zt),z=zt.incomers().filter(function(Gt){return Gt.isNode()&&i.has(Gt)}),ut=-1,wt=zt.id(),Ct=0;Ct<z.length;Ct++){var Ht=Vr(z[Ct]);ut=Math.max(ut,Ht.depth)}return Qt.depth<=ut&&(Wt[wt]?null:(Kt=ut+1,ae=Vr(Gt=zt),L[ae.depth][ae.index]=null,C(Gt,Kt),Wt[wt]=!0,!0));var Gt,Kt,ae};if(l&&s){var Q=[],it={},ot=function(zt){return Q.push(zt)};for(a.forEach(function(zt){return Q.push(zt)});Q.length>0;){var st=Q.shift(),yt=$(st,it);if(yt)st.outgoers().filter(function(zt){return zt.isNode()&&i.has(zt)}).forEach(ot);else if(null===yt){be("Detected double maximal shift for node `"+st.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}U();var pt=0;if(n.avoidOverlap)for(var et=0;et<a.length;et++){var Pt=a[et].layoutDimensions(n);pt=Math.max(pt,Pt.w,Pt.h)}for(var _t={},xt=function(zt){if(_t[zt.id()])return _t[zt.id()];for(var Wt=Vr(zt).depth,Qt=zt.neighborhood(),z=0,ut=0,wt=0;wt<Qt.length;wt++){var Ct=Qt[wt];if(!Ct.isEdge()&&!Ct.isParent()&&a.has(Ct)){var Et=Vr(Ct);if(null!=Et){var Ht=Et.index,Gt=Et.depth;null!=Ht&&null!=Gt&&Gt<Wt&&(z+=Ht/L[Gt].length,ut++)}}}return z/=ut=Math.max(1,ut),0===ut&&(z=0),_t[zt.id()]=z,z},Tt=function(zt,Wt){var Qt=xt(zt)-xt(Wt);return 0===Qt?Nt(zt.id(),Wt.id()):Qt},kt=0;kt<L.length;kt++)L[kt].sort(Tt),k(kt);for(var Bt=[],Xt=0;Xt<V.length;Xt++)Bt.push(V[Xt]);L.unshift(Bt),U();for(var Yt=0,jt=0;jt<L.length;jt++)Yt=Math.max(L[jt].length,Yt);var Zt=u.x1+u.w/2,ne=u.x1+u.h/2,le=L.reduce(function(zt,Wt){return Math.max(zt,Wt.length)},0);return i.nodes().layoutPositions(this,n,function(zt){var Wt=Vr(zt),Qt=Wt.depth,z=Wt.index,ut=L[Qt].length,wt=Math.max(u.w/((n.grid?le:ut)+1),pt),Ct=Math.max(u.h/(L.length+1),pt),Et=Math.min(u.w/2/L.length,u.h/2/L.length);if(Et=Math.max(Et,pt),n.circle){var Ht=Et*Qt+Et-(L.length>0&&L[0].length<=3?Et/2:0),Gt=2*Math.PI/L[Qt].length*z;return 0===Qt&&1===L[0].length&&(Ht=1),{x:Zt+Ht*Math.cos(Gt),y:ne+Ht*Math.sin(Gt)}}return{x:Zt+(z+1-(ut+1)/2)*wt,y:(Qt+1)*Ct}}),this};var tu={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ms(t){this.options=W({},tu,t)}ms.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,a=r.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o,l=Je(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=l.x1+l.w/2,u=l.y1+l.h/2,h=(void 0===e.sweep?2*Math.PI-2*Math.PI/a.length:e.sweep)/Math.max(1,a.length-1),g=0,x=0;x<a.length;x++){var D=a[x].layoutDimensions(e);g=Math.max(g,D.w,D.h)}if(o=M(e.radius)?e.radius:a.length<=1?0:Math.min(l.h,l.w)/2-g,a.length>1&&e.avoidOverlap){g*=1.75;var _=Math.cos(h)-Math.cos(0),L=Math.sin(h)-Math.sin(0),P=Math.sqrt(g*g/(_*_+L*L));o=Math.max(P,o)}return r.nodes().layoutPositions(this,e,function(C,V){var B=e.startAngle+V*h*(i?1:-1),F=o*Math.cos(B),k=o*Math.sin(B);return{x:s+F,y:u+k}}),this};var bs,eu={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function xs(t){this.options=W({},eu,t)}xs.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,a=i.nodes().not(":parent"),o=Je(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=o.x1+o.w/2,s=o.y1+o.h/2,u=[],h=0,g=0;g<a.length;g++){var x,D=a[g];x=e.concentric(D),u.push({value:x,node:D}),D._private.scratch.concentric=x}a.updateStyle();for(var m=0;m<a.length;m++){var T=a[m].layoutDimensions(e);h=Math.max(h,T.w,T.h)}u.sort(function(zt,Wt){return Wt.value-zt.value});for(var _=e.levelWidth(a),L=[[]],P=L[0],C=0;C<u.length;C++){var V=u[C];P.length>0&&Math.abs(P[0].value-V.value)>=_&&L.push(P=[]),P.push(V)}var B=h+e.minNodeSpacing;if(!e.avoidOverlap){var F=L.length>0&&L[0].length>1,k=(Math.min(o.w,o.h)/2-B)/(L.length+F?1:0);B=Math.min(B,k)}for(var U=0,$=0;$<L.length;$++){var Q=L[$],it=void 0===e.sweep?2*Math.PI-2*Math.PI/Q.length:e.sweep,ot=Q.dTheta=it/Math.max(1,Q.length-1);if(Q.length>1&&e.avoidOverlap){var st=Math.cos(ot)-Math.cos(0),yt=Math.sin(ot)-Math.sin(0),pt=Math.sqrt(B*B/(st*st+yt*yt));U=Math.max(pt,U)}Q.r=U,U+=B}if(e.equidistant){for(var et=0,Pt=0,Lt=0;Lt<L.length;Lt++)et=Math.max(et,L[Lt].r-Pt);Pt=0;for(var _t=0;_t<L.length;_t++){var xt=L[_t];0===_t&&(Pt=xt.r),xt.r=Pt,Pt+=et}}for(var Tt={},kt=0;kt<L.length;kt++)for(var Bt=L[kt],Xt=Bt.dTheta,Yt=Bt.r,jt=0;jt<Bt.length;jt++){var Zt=Bt[jt],ne=e.startAngle+(n?1:-1)*Xt*jt,le={x:l+Yt*Math.cos(ne),y:s+Yt*Math.sin(ne)};Tt[Zt.node.id()]=le}return i.nodes().layoutPositions(this,e,function(zt){var Wt=zt.id();return Tt[Wt]}),this};var nu={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function ya(t){this.options=W({},nu,t),this.options.layout=this}ya.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),bs=!0===t.debug;var r=ru(e,n,t);bs&&(void 0)(r),t.randomize&&ou(r);var i=cn(),a=function(){su(r,e,t),!0===t.fit&&e.fit(t.padding)},o=function(h){return!(n.stopped||h>=t.numIter||(lu(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},l=function(){if(!0===t.animate||!1===t.animate)a(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var h=t.eles.nodes(),g=ws(r,t,h);h.layoutPositions(n,t,g)}},s=0,u=!0;if(!0===t.animate)!function h(){for(var g=0;u&&g<t.refresh;)u=o(s),s++,g++;u?(cn()-i>=t.animationThreshold&&a(),Wn(h)):(Ds(r,t),l())}();else{for(;u;)u=o(s),s++;Ds(r,t),l()}return this},ya.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},ya.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ru=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:Je(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},o=n.eles.components(),l={},s=0;s<o.length;s++)for(var u=o[s],h=0;h<u.length;h++)l[u[h].id()]=s;for(s=0;s<a.nodeSize;s++){var g=(_=i[s]).layoutDimensions(n);(et={}).isLocked=_.locked(),et.id=_.data("id"),et.parentId=_.data("parent"),et.cmptId=l[_.id()],et.children=[],et.positionX=_.position("x"),et.positionY=_.position("y"),et.offsetX=0,et.offsetY=0,et.height=g.w,et.width=g.h,et.maxX=et.positionX+et.width/2,et.minX=et.positionX-et.width/2,et.maxY=et.positionY+et.height/2,et.minY=et.positionY-et.height/2,et.padLeft=parseFloat(_.style("padding")),et.padRight=parseFloat(_.style("padding")),et.padTop=parseFloat(_.style("padding")),et.padBottom=parseFloat(_.style("padding")),et.nodeRepulsion=E(n.nodeRepulsion)?n.nodeRepulsion(_):n.nodeRepulsion,a.layoutNodes.push(et),a.idToIndex[et.id]=s}var x=[],D=0,m=-1,T=[];for(s=0;s<a.nodeSize;s++){var _,L=(_=a.layoutNodes[s]).parentId;null!=L?a.layoutNodes[a.idToIndex[L]].children.push(_.id):(x[++m]=_.id,T.push(_.id))}for(a.graphSet.push(T);D<=m;){var P=x[D++],V=a.layoutNodes[a.idToIndex[P]].children;if(V.length>0)for(a.graphSet.push(V),s=0;s<V.length;s++)x[++m]=V[s]}for(s=0;s<a.graphSet.length;s++){var B=a.graphSet[s];for(h=0;h<B.length;h++)a.indexToGraph[a.idToIndex[B[h]]]=s}for(s=0;s<a.edgeSize;s++){var k=r[s],U={};U.id=k.data("id"),U.sourceId=k.data("source"),U.targetId=k.data("target");var $=E(n.idealEdgeLength)?n.idealEdgeLength(k):n.idealEdgeLength,Q=E(n.edgeElasticity)?n.edgeElasticity(k):n.edgeElasticity,it=a.idToIndex[U.sourceId],ot=a.idToIndex[U.targetId];if(a.indexToGraph[it]!=a.indexToGraph[ot]){for(var st=iu(U.sourceId,U.targetId,a),yt=a.graphSet[st],pt=0,et=a.layoutNodes[it];-1===yt.indexOf(et.id);)et=a.layoutNodes[a.idToIndex[et.parentId]],pt++;for(et=a.layoutNodes[ot];-1===yt.indexOf(et.id);)et=a.layoutNodes[a.idToIndex[et.parentId]],pt++;$*=pt*n.nestingFactor}U.idealLength=$,U.elasticity=Q,a.layoutEdges.push(U)}return a},iu=function(t,e,n){var r=au(t,e,0,n);return 2>r.count?0:r.graph},au=function t(e,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(e)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,l=0;l<a.length;l++){var h=i.layoutNodes[i.idToIndex[a[l]]].children;if(0!==h.length){var g=t(e,n,i.indexToGraph[i.idToIndex[h[0]]],i);if(0!==g.count){if(1!==g.count)return g;if(2==++o)break}}}return{count:o,graph:r}},ou=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},ws=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach(function(a){var o=t.layoutNodes[t.idToIndex[a.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(a,o){var l=t.layoutNodes[t.idToIndex[a.data("id")]];return e.boundingBox?{x:r.x1+(l.positionX-i.x1)/i.w*r.w,y:r.y1+(l.positionY-i.y1)/i.h*r.h}:{x:l.positionX,y:l.positionY}}},su=function(t,e,n){var r=n.layout,i=n.eles.nodes(),a=ws(t,n,i);i.positions(a),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},lu=function(t,e,n){uu(t,e),du(t),fu(t,e),pu(t),gu(t)},uu=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;l<i;l++)hu(o,t.layoutNodes[t.idToIndex[r[l]]],t,e)},Es=function(t){return-t+2*t*Math.random()},hu=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,a=e.positionY-t.positionY;0===i&&0===a&&(i=Es(1),a=Es(1));var o=cu(t,e,i,a);if(o>0)var l=(u=r.nodeOverlap*o)*i/(T=Math.sqrt(i*i+a*a)),s=u*a/T;else{var u,h=ma(t,i,a),g=ma(e,-1*i,-1*a),x=g.x-h.x,D=g.y-h.y,m=x*x+D*D,T=Math.sqrt(m);l=(u=(t.nodeRepulsion+e.nodeRepulsion)/m)*x/T,s=u*D/T}t.isLocked||(t.offsetX-=l,t.offsetY-=s),e.isLocked||(e.offsetX+=l,e.offsetY+=s)}},cu=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var a=t.maxY-e.minY;else a=e.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},ma=function(t,e,n){var r=t.positionX,i=t.positionY,a=t.height||1,o=t.width||1,l=n/e,s=a/o,u={};return 0===e&&0<n||0===e&&0>n?(u.x=r,u.y=i+a/2,u):0<e&&-1*s<=l&&l<=s?(u.x=r+o/2,u.y=i+o*n/2/e,u):0>e&&-1*s<=l&&l<=s?(u.x=r-o/2,u.y=i-o*n/2/e,u):0<n&&(l<=-1*s||l>=s)?(u.x=r+a*e/2/n,u.y=i+a/2,u):(0>n&&(l<=-1*s||l>=s)&&(u.x=r-a*e/2/n,u.y=i-a/2),u)},du=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],a=t.layoutNodes[t.idToIndex[r.sourceId]],l=t.layoutNodes[t.idToIndex[r.targetId]],s=l.positionX-a.positionX,u=l.positionY-a.positionY;if(0!==s||0!==u){var h=ma(a,s,u),g=ma(l,-1*s,-1*u),x=g.x-h.x,D=g.y-h.y,m=Math.sqrt(x*x+D*D),T=Math.pow(r.idealLength-m,2)/r.elasticity;if(0!==m)var _=T*x/m,L=T*D/m;else _=0,L=0;a.isLocked||(a.offsetX+=_,a.offsetY+=L),l.isLocked||(l.offsetX-=_,l.offsetY-=L)}}},fu=function(t,e){if(0!==e.gravity)for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var a=t.clientHeight/2,o=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];a=s.positionX,o=s.positionY}for(var u=0;u<i;u++){var h=t.layoutNodes[t.idToIndex[r[u]]];if(!h.isLocked){var g=a-h.positionX,x=o-h.positionY,D=Math.sqrt(g*g+x*x);if(D>1){var T=e.gravity*x/D;h.offsetX+=e.gravity*g/D,h.offsetY+=T}}}}},pu=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var a=n[r++],l=t.layoutNodes[t.idToIndex[a]],s=l.children;if(0<s.length&&!l.isLocked){for(var u=l.offsetX,h=l.offsetY,g=0;g<s.length;g++){var x=t.layoutNodes[t.idToIndex[s[g]]];x.offsetX+=u,x.offsetY+=h,n[++i]=s[g]}l.offsetX=0,l.offsetY=0}}},gu=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=vu(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,yu(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},vu=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},yu=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a?t(i,n):void 0}},Ds=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}var l=0;for(i=0;i<r.length;i++)if(T=r[i]){T.x1=1/0,T.x2=-1/0,T.y1=1/0,T.y2=-1/0;for(var s=0;s<T.length;s++){var u=T[s];T.x1=Math.min(T.x1,u.positionX-u.width/2),T.x2=Math.max(T.x2,u.positionX+u.width/2),T.y1=Math.min(T.y1,u.positionY-u.height/2),T.y2=Math.max(T.y2,u.positionY+u.height/2)}T.w=T.x2-T.x1,T.h=T.y2-T.y1,l+=T.w*T.h}r.sort(function(_,L){return L.w*L.h-_.w*_.h});var h=0,g=0,x=0,D=0,m=Math.sqrt(l)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var T;if(T=r[i]){for(s=0;s<T.length;s++)(u=T[s]).isLocked||(u.positionX+=h-T.x1,u.positionY+=g-T.y1);h+=T.w+e.componentSpacing,x+=T.w+e.componentSpacing,D=Math.max(D,T.h),x>m&&(g+=D+e.componentSpacing,h=0,x=0,D=0)}}},mu={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ls(t){this.options=W({},mu,t)}Ls.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Je(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)r.nodes().layoutPositions(this,e,function(Tt){return{x:a.x1,y:a.y1}});else{var o=i.size(),l=Math.sqrt(o*a.h/a.w),s=Math.round(l),u=Math.round(a.w/a.h*l),h=function(Tt){if(null==Tt)return Math.min(s,u);Math.min(s,u)==s?s=Tt:u=Tt},g=function(Tt){if(null==Tt)return Math.max(s,u);Math.max(s,u)==s?s=Tt:u=Tt},x=e.rows,D=null!=e.cols?e.cols:e.columns;if(null!=x&&null!=D)s=x,u=D;else if(null!=x&&null==D)s=x,u=Math.ceil(o/s);else if(null==x&&null!=D)u=D,s=Math.ceil(o/u);else if(u*s>o){var m=h(),T=g();(m-1)*T>=o?h(m-1):(T-1)*m>=o&&g(T-1)}else for(;u*s<o;){var _=h(),L=g();(L+1)*_>=o?g(L+1):h(_+1)}var P=a.w/u,C=a.h/s;if(e.condense&&(P=0,C=0),e.avoidOverlap)for(var V=0;V<i.length;V++){var B=i[V],F=B._private.position;null!=F.x&&null!=F.y||(F.x=0,F.y=0);var k=B.layoutDimensions(e),U=e.avoidOverlapPadding,Q=k.h+U;P=Math.max(P,k.w+U),C=Math.max(C,Q)}for(var it={},ot=function(Tt,kt){return!!it["c-"+Tt+"-"+kt]},st=function(Tt,kt){it["c-"+Tt+"-"+kt]=!0},yt=0,pt=0,et=function(){++pt>=u&&(pt=0,yt++)},Pt={},Lt=0;Lt<i.length;Lt++){var mt=i[Lt],_t=e.position(mt);if(_t&&(void 0!==_t.row||void 0!==_t.col)){var xt={row:_t.row,col:_t.col};if(void 0===xt.col)for(xt.col=0;ot(xt.row,xt.col);)xt.col++;else if(void 0===xt.row)for(xt.row=0;ot(xt.row,xt.col);)xt.row++;Pt[mt.id()]=xt,st(xt.row,xt.col)}}i.layoutPositions(this,e,function(Tt,kt){var Bt,Xt;if(Tt.locked()||Tt.isParent())return!1;var Yt=Pt[Tt.id()];if(Yt)Bt=Yt.col*P+P/2+a.x1,Xt=Yt.row*C+C/2+a.y1;else{for(;ot(yt,pt);)et();Bt=pt*P+P/2+a.x1,Xt=yt*C+C/2+a.y1,st(yt,pt),et()}return{x:Bt,y:Xt}})}return this};var bu={ready:function(){},stop:function(){}};function ho(t){this.options=W({},bu,t)}ho.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},ho.prototype.stop=function(){return this};var xu={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ts(t){this.options=W({},xu,t)}Ts.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=E(t.positions);return e.layoutPositions(this,t,function(r,i){var a=function(o){if(null==t.positions)return{x:(s=o.position()).x,y:s.y};var s;if(n)return t.positions(o);var l=t.positions[o._private.data.id];return null==l?null:l}(r);return!r.locked()&&null!=a&&a}),this};var wu={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Is(t){this.options=W({},wu,t)}Is.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=Je(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.nodes().layoutPositions(this,t,function(i,a){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var Eu=[{name:"breadthfirst",impl:ys},{name:"circle",impl:ms},{name:"concentric",impl:xs},{name:"cose",impl:ya},{name:"grid",impl:Ls},{name:"null",impl:ho},{name:"preset",impl:Ts},{name:"random",impl:Is}];function Ss(t){this.options=t,this.notifications=0}var Ps=function(){},_s=function(){throw new Error("A headless instance can not render images")};Ss.prototype={recalculateRenderedStyle:Ps,notify:function(){this.notifications++},init:Ps,isHeadless:function(){return!0},png:_s,jpg:_s};var Du={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(s,u,h,g,x,D,m){return x.x-h/2-m<=s&&s<=x.x+h/2+m&&x.y-h/2-m<=u&&u<=x.y+h/2+m},r=function(s,u,h,g,x){var D=s*Math.cos(g)-u*Math.sin(g),m=(s*Math.sin(g)+u*Math.cos(g))*h;return{x:D*h+x.x,y:m+x.y}},i=function(s,u,h,g){for(var x=[],D=0;D<s.length;D+=2)x.push(r(s[D],s[D+1],u,h,g));return x},a=function(s){for(var u=[],h=0;h<s.length;h++){var g=s[h];u.push(g.x,g.y)}return u},o=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},l=function(s,u){c(u)&&(u=t[u]),t[s]=W({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,g,x,D,m,T){var _=a(i(this.points,x+2*T,D,m));return tn(h,g,_)},roughCollide:n,draw:function(h,g,x,D){var m=i(this.points,g,x,D);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:o},u)};l("none",{collide:Nr,roughCollide:Nr,draw:Kr,spacing:Mi,gap:Mi}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(s,u,h,g,x){var D=i(this.points,u,h,g),m=this.controlPoint,T=r(m[0],m[1],u,h,g);e.arrowShapeImpl(this.name)(s,D,T)},gap:function(s){return.8*o(s)}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,u,h,g,x,D,m){var T=a(i(this.points,h+2*m,g,x)),_=a(i(this.pointsTee,h+2*m,g,x));return tn(s,u,T)||tn(s,u,_)},draw:function(s,u,h,g,x){var D=i(this.points,u,h,g),m=i(this.pointsTee,u,h,g);e.arrowShapeImpl(this.name)(s,D,m)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,u,h,g,x,D,m){var T=x,_=Math.pow(T.x-s,2)+Math.pow(T.y-u,2)<=Math.pow((h+2*m)*this.radius,2),L=a(i(this.points,h+2*m,g,x));return tn(s,u,L)||_},draw:function(s,u,h,g,x){var D=i(this.pointsTr,u,h,g);e.arrowShapeImpl(this.name)(s,D,g.x,g.y,this.radius*u)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,u){var h=this.baseCrossLinePts.slice(),g=u/s;return h[3]=h[3]-g,h[5]=h[5]-g,h},collide:function(s,u,h,g,x,D,m){var T=a(i(this.points,h+2*m,g,x)),_=a(i(this.crossLinePts(h,D),h+2*m,g,x));return tn(s,u,T)||tn(s,u,_)},draw:function(s,u,h,g,x){var D=i(this.points,u,h,g),m=i(this.crossLinePts(u,x),u,h,g);e.arrowShapeImpl(this.name)(s,D,m)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return.525*o(s)}}),l("circle",{radius:.15,collide:function(s,u,h,g,x,D,m){var T=x;return Math.pow(T.x-s,2)+Math.pow(T.y-u,2)<=Math.pow((h+2*m)*this.radius,2)},draw:function(s,u,h,g,x){e.arrowShapeImpl(this.name)(s,g.x,g.y,this.radius*u)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return.95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})}},Lu={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],l=n.pan(),s=n.zoom();return[((t-i)/o-l.x)/s,((e-a)/o-l.y)/s]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=w.getComputedStyle(t),r=function(B){return parseFloat(n.getPropertyValue(B))},i=r("padding-left"),a=r("padding-right"),o=r("padding-top"),l=r("padding-bottom"),s=r("border-left-width"),u=r("border-right-width"),h=r("border-top-width"),g=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+s,e.top+o+h,g-(i+a),t.clientHeight-(o+l),e.width/(g+(s+u))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,a,o=this,l=this,s=l.getCachedZSortedEles(),u=[],h=l.cy.zoom(),g=l.cy.hasCompoundNodes(),x=(r?24:8)/h,D=(r?8:2)/h,m=(r?8:2)/h,T=1/0;function _(k,U){if(k.isNode()){if(a)return;a=k,u.push(k)}if(k.isEdge()&&(null==U||U<T))if(i){if(i.pstyle("z-compound-depth").value===k.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===k.pstyle("z-compound-depth").value)for(var $=0;$<u.length;$++)if(u[$].isEdge()){u[$]=k,i=k,T=null!=U?U:T;break}}else u.push(k),i=k,T=null!=U?U:T}function L(k){var U=k.outerWidth()+2*D,$=k.outerHeight()+2*D,Q=U/2,it=$/2,ot=k.position();if(ot.x-Q<=t&&t<=ot.x+Q&&ot.y-it<=e&&e<=ot.y+it&&l.nodeShapes[o.getNodeShape(k)].checkPoint(t,e,0,U,$,ot.x,ot.y))return _(k,0),!0}function P(k){var U,$=k._private,Q=$.rscratch,it=k.pstyle("width").pfValue,ot=k.pstyle("arrow-scale").value,st=it/2+x,yt=st*st,pt=2*st,et=$.source,Pt=$.target;if("segments"===Q.edgeType||"straight"===Q.edgeType||"haystack"===Q.edgeType){for(var Lt=Q.allpts,mt=0;mt+3<Lt.length;mt+=2)if(zi(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],pt)&&yt>(U=Ga(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3])))return _(k,U),!0}else if("bezier"===Q.edgeType||"multibezier"===Q.edgeType||"self"===Q.edgeType||"compound"===Q.edgeType)for(Lt=Q.allpts,mt=0;mt+5<Q.allpts.length;mt+=4)if(Ma(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],Lt[mt+4],Lt[mt+5],pt)&&yt>(U=Oa(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],Lt[mt+4],Lt[mt+5])))return _(k,U),!0;et=et||$.source,Pt=Pt||$.target;var _t=o.getArrowWidth(it,ot),xt=[{name:"source",x:Q.arrowStartX,y:Q.arrowStartY,angle:Q.srcArrowAngle},{name:"target",x:Q.arrowEndX,y:Q.arrowEndY,angle:Q.tgtArrowAngle},{name:"mid-source",x:Q.midX,y:Q.midY,angle:Q.midsrcArrowAngle},{name:"mid-target",x:Q.midX,y:Q.midY,angle:Q.midtgtArrowAngle}];for(mt=0;mt<xt.length;mt++){var Tt=xt[mt],kt=l.arrowShapes[k.pstyle(Tt.name+"-arrow-shape").value],Bt=k.pstyle("width").pfValue;if(kt.roughCollide(t,e,_t,Tt.angle,{x:Tt.x,y:Tt.y},Bt,x)&&kt.collide(t,e,_t,Tt.angle,{x:Tt.x,y:Tt.y},Bt,x))return _(k),!0}g&&u.length>0&&(L(et),L(Pt))}function C(k,U,$){return dn(k,U,$)}function V(k,U){var $,Q=k._private,it=m;$=U?U+"-":"",k.boundingBox();var ot=Q.labelBounds[U||"main"],st=k.pstyle($+"label").value;if("yes"===k.pstyle("text-events").strValue&&st){var yt=C(Q.rscratch,"labelX",U),pt=C(Q.rscratch,"labelY",U),et=C(Q.rscratch,"labelAngle",U),Pt=k.pstyle($+"text-margin-x").pfValue,Lt=k.pstyle($+"text-margin-y").pfValue,mt=ot.x1-it-Pt,_t=ot.x2+it-Pt,xt=ot.y1-it-Lt,Tt=ot.y2+it-Lt;if(et){var kt=Math.cos(et),Bt=Math.sin(et),Xt=function(zt,Wt){return{x:(zt-=yt)*kt-(Wt-=pt)*Bt+yt,y:zt*Bt+Wt*kt+pt}},Yt=Xt(mt,xt),jt=Xt(mt,Tt),Zt=Xt(_t,xt),ne=Xt(_t,Tt);if(tn(t,e,[Yt.x+Pt,Yt.y+Lt,Zt.x+Pt,Zt.y+Lt,ne.x+Pt,ne.y+Lt,jt.x+Pt,jt.y+Lt]))return _(k),!0}else if(Jn(ot,t,e))return _(k),!0}}n&&(s=s.interactive);for(var B=s.length-1;B>=0;B--){var F=s[B];F.isNode()?L(F)||V(F):P(F)||V(F)||V(F,"source")||V(F,"target")}return u},getAllInBox:function(t,e,n,r){for(var a,o=this.getCachedZSortedEles().interactive,l=[],s=Math.min(t,n),u=Math.max(t,n),h=Math.min(e,r),g=Math.max(e,r),x=Je({x1:t=s,y1:e=h,x2:n=u,y2:r=g}),D=0;D<o.length;D++){var m=o[D];if(m.isNode()){var T=m,_=T.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});si(x,_)&&!Yi(_,x)&&l.push(T)}else{var L=m,P=L._private,C=P.rscratch;if(null!=C.startX&&null!=C.startY&&!Jn(x,C.startX,C.startY)||null!=C.endX&&null!=C.endY&&!Jn(x,C.endX,C.endY))continue;if("bezier"===C.edgeType||"multibezier"===C.edgeType||"self"===C.edgeType||"compound"===C.edgeType||"segments"===C.edgeType||"haystack"===C.edgeType){for(var V=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts,B=!0,F=0;F<V.length;F++)if(!Jn(x,(a=V[F]).x,a.y)){B=!1;break}B&&l.push(L)}else"haystack"!==C.edgeType&&"straight"!==C.edgeType||l.push(L)}}return l}},co={calculateArrowAngles:function(t){var e,n,r,i,a,o,l=t._private.rscratch,s="haystack"===l.edgeType,u="bezier"===l.edgeType,h="multibezier"===l.edgeType,g="segments"===l.edgeType,x="compound"===l.edgeType,D="self"===l.edgeType;s?(r=l.haystackPts[0],i=l.haystackPts[1],a=l.haystackPts[2],o=l.haystackPts[3]):(r=l.arrowStartX,i=l.arrowStartY,a=l.arrowEndX,o=l.arrowEndY),T=l.midX,_=l.midY,g?(e=r-l.segpts[0],n=i-l.segpts[1]):h||x||D||u?(e=r-Oe((m=l.allpts)[0],m[2],m[4],.1),n=i-Oe(m[1],m[3],m[5],.1)):(e=r-T,n=i-_),l.srcArrowAngle=kr(e,n);var T=l.midX,_=l.midY;if(s&&(T=(r+a)/2,_=(i+o)/2),e=a-r,n=o-i,g)if((m=l.allpts).length/2%2==0){var L=(P=m.length/2)-2;e=m[P]-m[L],n=m[P+1]-m[L+1]}else{L=(P=m.length/2-1)-2;var P,C=P+2;e=m[P]-m[L],n=m[P+1]-m[L+1]}else if(h||x||D){var V,B,F,k,m=l.allpts;if(l.ctrlpts.length/2%2==0){var U=2+($=2+(Q=m.length/2-1));V=Oe(m[Q],m[$],m[U],0),B=Oe(m[Q+1],m[$+1],m[U+1],0),F=Oe(m[Q],m[$],m[U],1e-4),k=Oe(m[Q+1],m[$+1],m[U+1],1e-4)}else{var $,Q;U=2+($=m.length/2-1),V=Oe(m[Q=$-2],m[$],m[U],.4999),B=Oe(m[Q+1],m[$+1],m[U+1],.4999),F=Oe(m[Q],m[$],m[U],.5),k=Oe(m[Q+1],m[$+1],m[U+1],.5)}e=F-V,n=k-B}if(l.midtgtArrowAngle=kr(e,n),l.midDispX=e,l.midDispY=n,e*=-1,n*=-1,g&&((m=l.allpts).length/2%2==0||(e=-(m[C=2+(P=m.length/2-1)]-m[P]),n=-(m[C+1]-m[P+1]))),l.midsrcArrowAngle=kr(e,n),g)e=a-l.segpts[l.segpts.length-2],n=o-l.segpts[l.segpts.length-1];else if(h||x||D||u){var it=(m=l.allpts).length;e=a-Oe(m[it-6],m[it-4],m[it-2],.9),n=o-Oe(m[it-5],m[it-3],m[it-1],.9)}else e=a-T,n=o-_;l.tgtArrowAngle=kr(e,n)}};co.getArrowWidth=co.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var un={};function As(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}un.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,l=r.target,s=o.position(),u=l.position(),h=o.width(),g=l.width(),x=o.height(),D=l.height(),m=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*h*m+s.x,i.source.y*x*m+s.y,i.target.x*g*m+u.x,i.target.y*D*m+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},un.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,a=e.vectorNormInverse,o=t.pstyle("edge-distances").value,l=t.pstyle("segment-weights"),s=t.pstyle("segment-distances"),u=Math.min(l.pfValue.length,s.pfValue.length);n.edgeType="segments",n.segpts=[];for(var h=0;h<u;h++){var g=l.pfValue[h],x=s.pfValue[h],D=1-g,T="node-position"===o?r:i,_={x:T.x1*D+T.x2*g,y:T.y1*D+T.y2*g};n.segpts.push(_.x+a.x*x,_.y+a.y*x)}},un.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,a=e.dirCounts,o=e.srcPos,l=t.pstyle("control-point-distances"),s=l?l.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,h=t.pstyle("loop-sweep").pfValue,g=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var x=n,D=g;r&&(x=0,D=s);var m=u-Math.PI/2,T=m-h/2,_=m+h/2,L=String(u+"_"+h);x=void 0===a[L]?a[L]=0:++a[L],i.ctrlpts=[o.x+1.4*Math.cos(T)*D*(x/3+1),o.y+1.4*Math.sin(T)*D*(x/3+1),o.x+1.4*Math.cos(_)*D*(x/3+1),o.y+1.4*Math.sin(_)*D*(x/3+1)]},un.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,l=e.srcW,s=e.srcH,u=e.tgtW,h=e.tgtH,g=t.pstyle("control-point-step-size").pfValue,x=t.pstyle("control-point-distances"),m=n,T=g;r&&(m=0,T=x?x.pfValue[0]:void 0);var _={x:a.x-l/2,y:a.y-s/2},L={x:o.x-u/2,y:o.y-h/2},P={x:Math.min(_.x,L.x),y:Math.min(_.y,L.y)},C=Math.max(.5,Math.log(.01*l)),V=Math.max(.5,Math.log(.01*u));i.ctrlpts=[P.x,P.y-(1+Math.pow(50,1.12)/100)*T*(m/3+1)*C,P.x-(1+Math.pow(50,1.12)/100)*T*(m/3+1)*V,P.y]},un.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},un.findBezierPoints=function(t,e,n,r,i){var a=t._private.rscratch,o=e.vectorNormInverse,l=e.posPts,s=e.intersectionPts,u=t.pstyle("edge-distances").value,h=t.pstyle("control-point-step-size").pfValue,g=t.pstyle("control-point-distances"),x=t.pstyle("control-point-weights"),D=g&&x?Math.min(g.value.length,x.value.length):1,m=g?g.pfValue[0]:void 0,T=x.value[0],_=r;a.edgeType=_?"multibezier":"bezier",a.ctrlpts=[];for(var L=0;L<D;L++){var C,P=(.5-e.eles.length/2+n)*h*(i?-1:1),V=Ri(P);_&&(m=g?g.pfValue[L]:h,T=x.value[L]);var B=void 0!==(C=r?m:void 0!==m?V*m:void 0)?C:P,F=1-T,U="node-position"===u?l:s,$={x:U.x1*F+U.x2*T,y:U.y1*F+U.y2*T};a.ctrlpts.push($.x+o.x*B,$.y+o.y*B)}},un.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,a=e.srcH,o=e.tgtW,l=e.tgtH,s="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,h=u,g=t.pstyle("taxi-turn"),x="%"===g.units,D=g.pfValue,m=D<0,T=t.pstyle("taxi-turn-min-distance").pfValue,L=s?(a+l)/2:0,P=r.x2-r.x1,C=r.y2-r.y1,V=function(Ht,Gt){return Ht>0?Math.max(Ht-Gt,0):Math.min(Ht+Gt,0)},B=V(P,s?(i+o)/2:0),F=V(C,L),k=!1;"auto"===h?u=Math.abs(B)>Math.abs(F)?"horizontal":"vertical":"upward"===h||"downward"===h?(u="vertical",k=!0):"leftward"!==h&&"rightward"!==h||(u="horizontal",k=!0);var U,$="vertical"===u,Q=$?F:B,it=$?C:P,ot=Ri(it),st=!1;k&&(x||m)||!("downward"===h&&it<0||"upward"===h&&it>0||"leftward"===h&&it>0||"rightward"===h&&it<0)||(Q=(ot*=-1)*Math.abs(Q),st=!0);var yt=function(Ht){return Math.abs(Ht)<T||Math.abs(Ht)>=Math.abs(Q)},pt=yt(U=x?(D<0?1+D:D)*Q:(D<0?Q:0)+D*ot),et=yt(Math.abs(Q)-Math.abs(U));if(!pt&&!et||st)if($){var Qt=r.y1+U+(s?a/2*ot:0);n.segpts=[r.x1,Qt,r.x2,Qt]}else{var wt=r.x1+U+(s?i/2*ot:0);n.segpts=[wt,r.y1,wt,r.y2]}else if($){var Pt=Math.abs(it)<=a/2,Lt=Math.abs(P)<=o/2;if(Pt){var mt=(r.x1+r.x2)/2;n.segpts=[mt,r.y1,mt,r.y2]}else if(Lt){var Tt=(r.y1+r.y2)/2;n.segpts=[r.x1,Tt,r.x2,Tt]}else n.segpts=[r.x1,r.y2]}else{var Xt=Math.abs(it)<=i/2,Yt=Math.abs(C)<=l/2;if(Xt){var jt=(r.y1+r.y2)/2;n.segpts=[r.x1,jt,r.x2,jt]}else if(Yt){var le=(r.x1+r.x2)/2;n.segpts=[le,r.y1,le,r.y2]}else n.segpts=[r.x2,r.y1]}},un.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,l=e.tgtW,s=e.tgtH,u=e.srcShape,h=e.tgtShape,g=!M(n.startX)||!M(n.startY),x=!M(n.arrowStartX)||!M(n.arrowStartY),D=!M(n.endX)||!M(n.endY),m=!M(n.arrowEndX)||!M(n.arrowEndY),T=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,_=Yn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),L=_<T,P=Yn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),C=P<T,V=!1;if(g||x||L){V=!0;var B={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},F=Math.sqrt(B.x*B.x+B.y*B.y),k={x:B.x/F,y:B.y/F},U=Math.max(a,o),$={x:n.ctrlpts[0]+2*k.x*U,y:n.ctrlpts[1]+2*k.y*U},Q=u.intersectLine(r.x,r.y,a,o,$.x,$.y,0);L?(n.ctrlpts[0]=n.ctrlpts[0]+k.x*(T-_),n.ctrlpts[1]=n.ctrlpts[1]+k.y*(T-_)):(n.ctrlpts[0]=Q[0]+k.x*T,n.ctrlpts[1]=Q[1]+k.y*T)}if(D||m||C){V=!0;var it={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},ot=Math.sqrt(it.x*it.x+it.y*it.y),st={x:it.x/ot,y:it.y/ot},yt=Math.max(a,o),pt={x:n.ctrlpts[0]+2*st.x*yt,y:n.ctrlpts[1]+2*st.y*yt},et=h.intersectLine(i.x,i.y,l,s,pt.x,pt.y,0);C?(n.ctrlpts[0]=n.ctrlpts[0]+st.x*(T-P),n.ctrlpts[1]=n.ctrlpts[1]+st.y*(T-P)):(n.ctrlpts[0]=et[0]+st.x*T,n.ctrlpts[1]=et[1]+st.y*T)}V&&this.findEndpoints(t)}},un.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=Oe(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=Oe(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,a=i-2;e.midX=(e.segpts[a]+e.segpts[i])/2,e.midY=(e.segpts[a+1]+e.segpts[i+1])/2}else{var o=e.segpts.length/2-1;e.midX=e.segpts[o],e.midY=e.segpts[o+1]}},un.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||M(e.startX)&&M(e.startY)&&M(e.endX)&&M(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,be("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},un.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Ve,get:function(C){var V=this.map.get(C[0]);return null!=V?V.get(C[1]):null},set:function(C,V){var B=this.map.get(C[0]);null==B&&(B=new Ve,this.map.set(C[0],B)),B.set(C[1],V)}},a=[],o=[],l=0;l<t.length;l++){var s=t[l],u=s._private,h=s.pstyle("curve-style").value;if(!s.removed()&&s.takesUpSpace())if("haystack"!==h){var g="unbundled-bezier"===h||"segments"===h||"straight"===h||"straight-triangle"===h||"taxi"===h,x="unbundled-bezier"===h||"bezier"===h,m=u.target,T=[u.source.poolIndex(),m.poolIndex()].sort(),_=i.get(T);null==_&&(i.set(T,_={eles:[]}),a.push(T)),_.eles.push(s),g&&(_.hasUnbundled=!0),x&&(_.hasBezier=!0)}else o.push(s)}for(var L=function(C){var B=i.get(a[C]),F=void 0;if(!B.hasUnbundled){var k=B.eles[0].parallelEdges().filter(function(Ht){return Ht.isBundledBezier()});ti(B.eles),k.forEach(function(Ht){return B.eles.push(Ht)}),B.eles.sort(function(Ht,Gt){return Ht.poolIndex()-Gt.poolIndex()})}var U=B.eles[0],$=U.source(),Q=U.target();if($.poolIndex()>Q.poolIndex()){var it=$;$=Q,Q=it}var ot=B.srcPos=$.position(),st=B.tgtPos=Q.position(),yt=B.srcW=$.outerWidth(),pt=B.srcH=$.outerHeight(),et=B.tgtW=Q.outerWidth(),Pt=B.tgtH=Q.outerHeight(),Lt=B.srcShape=n.nodeShapes[e.getNodeShape($)],mt=B.tgtShape=n.nodeShapes[e.getNodeShape(Q)];B.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _t=0;_t<B.eles.length;_t++){var xt=B.eles[_t],Tt=xt[0]._private.rscratch,kt=xt.pstyle("curve-style").value,Bt="unbundled-bezier"===kt||"segments"===kt||"taxi"===kt,Xt=!$.same(xt.source());if(!B.calculatedIntersection&&$!==Q&&(B.hasBezier||B.hasUnbundled)){B.calculatedIntersection=!0;var Yt=Lt.intersectLine(ot.x,ot.y,yt,pt,st.x,st.y,0),jt=B.srcIntn=Yt,Zt=mt.intersectLine(st.x,st.y,et,Pt,ot.x,ot.y,0),ne=B.tgtIntn=Zt,le=B.intersectionPts={x1:Yt[0],x2:Zt[0],y1:Yt[1],y2:Zt[1]},zt=B.posPts={x1:ot.x,x2:st.x,y1:ot.y,y2:st.y},Wt=Zt[1]-Yt[1],Qt=Zt[0]-Yt[0],z=Math.sqrt(Qt*Qt+Wt*Wt),ut=B.vector={x:Qt,y:Wt},wt=B.vectorNorm={x:ut.x/z,y:ut.y/z},Ct={x:-wt.y,y:wt.x};B.nodesOverlap=!M(z)||mt.checkPoint(Yt[0],Yt[1],0,et,Pt,st.x,st.y)||Lt.checkPoint(Zt[0],Zt[1],0,yt,pt,ot.x,ot.y),B.vectorNormInverse=Ct,F={nodesOverlap:B.nodesOverlap,dirCounts:B.dirCounts,calculatedIntersection:!0,hasBezier:B.hasBezier,hasUnbundled:B.hasUnbundled,eles:B.eles,srcPos:st,tgtPos:ot,srcW:et,srcH:Pt,tgtW:yt,tgtH:pt,srcIntn:ne,tgtIntn:jt,srcShape:mt,tgtShape:Lt,posPts:{x1:zt.x2,y1:zt.y2,x2:zt.x1,y2:zt.y1},intersectionPts:{x1:le.x2,y1:le.y2,x2:le.x1,y2:le.y1},vector:{x:-ut.x,y:-ut.y},vectorNorm:{x:-wt.x,y:-wt.y},vectorNormInverse:{x:-Ct.x,y:-Ct.y}}}var Et=Xt?F:B;Tt.nodesOverlap=Et.nodesOverlap,Tt.srcIntn=Et.srcIntn,Tt.tgtIntn=Et.tgtIntn,r&&($.isParent()||$.isChild()||Q.isParent()||Q.isChild())&&($.parents().anySame(Q)||Q.parents().anySame($)||$.same(Q)&&$.isParent())?e.findCompoundLoopPoints(xt,Et,_t,Bt):$===Q?e.findLoopPoints(xt,Et,_t,Bt):"segments"===kt?e.findSegmentsPoints(xt,Et):"taxi"===kt?e.findTaxiPoints(xt,Et):"straight"===kt||!Bt&&B.eles.length%2==1&&_t===Math.floor(B.eles.length/2)?e.findStraightEdgePoints(xt):e.findBezierPoints(xt,Et,_t,Bt,Xt),e.findEndpoints(xt),e.tryToCorrectInvalidPoints(xt,Et),e.checkForInvalidEdgeWarning(xt),e.storeAllpts(xt),e.storeEdgeProjections(xt),e.calculateArrowAngles(xt),e.recalculateEdgeLabelProjections(xt),e.calculateLabelAngles(xt)}},P=0;P<a.length;P++)L(P);this.findHaystackPoints(o)}},un.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),As(e.segpts)},un.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),As(e.ctrlpts)},un.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Tu={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var a=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(a[0]=a[0]*r),"%"===e.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var o=e.pfValue[0];o=-Math.PI/2+o;var l=2*Math.max(r,i),s=[n.x+Math.cos(o)*l,n.y+Math.sin(o)*l];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,s[0],s[1],0)},findEndpoints:function(t){var e,n,r,i,a,o=this,l=t.source()[0],s=t.target()[0],u=l.position(),h=s.position(),g=t.pstyle("target-arrow-shape").value,x=t.pstyle("source-arrow-shape").value,D=t.pstyle("target-distance-from-node").pfValue,m=t.pstyle("source-distance-from-node").pfValue,T=t.pstyle("curve-style").value,_=t._private.rscratch,L=_.edgeType,P="self"===L||"compound"===L,C="bezier"===L||"multibezier"===L||P,V="bezier"!==L,B="straight"===L||"segments"===L,F="segments"===L,k=C||V||B,U=P||"taxi"===T,$=t.pstyle("source-endpoint"),Q=U?"outside-to-node":$.value,it=t.pstyle("target-endpoint"),ot=U?"outside-to-node":it.value;if(_.srcManEndpt=$,_.tgtManEndpt=it,C){var st=[_.ctrlpts[0],_.ctrlpts[1]];n=V?[_.ctrlpts[_.ctrlpts.length-2],_.ctrlpts[_.ctrlpts.length-1]]:st,r=st}else if(B){var yt=F?_.segpts.slice(0,2):[h.x,h.y];n=F?_.segpts.slice(_.segpts.length-2):[u.x,u.y],r=yt}if("inside-to-node"===ot)e=[h.x,h.y];else if(it.units)e=this.manualEndptToPx(s,it);else if("outside-to-line"===ot)e=_.tgtIntn;else if("outside-to-node"===ot||"outside-to-node-or-label"===ot?i=n:"outside-to-line"!==ot&&"outside-to-line-or-label"!==ot||(i=[u.x,u.y]),e=o.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===ot||"outside-to-line-or-label"===ot){var pt=s._private.rscratch,Lt=pt.labelX,mt=pt.labelY,_t=pt.labelWidth/2,xt=pt.labelHeight/2,Tt=s.pstyle("text-valign").value;"top"===Tt?mt-=xt:"bottom"===Tt&&(mt+=xt);var kt=s.pstyle("text-halign").value;"left"===kt?Lt-=_t:"right"===kt&&(Lt+=_t);var Bt=br(i[0],i[1],[Lt-_t,mt-xt,Lt+_t,mt-xt,Lt+_t,mt+xt,Lt-_t,mt+xt],h.x,h.y);if(Bt.length>0){var Xt=u,Yt=zn(Xt,Bn(e)),jt=zn(Xt,Bn(Bt)),Zt=Yt;jt<Yt&&(e=Bt,Zt=jt),Bt.length>2&&zn(Xt,{x:Bt[2],y:Bt[3]})<Zt&&(e=[Bt[2],Bt[3]])}}var ne=Mr(e,n,o.arrowShapes[g].spacing(t)+D),le=Mr(e,n,o.arrowShapes[g].gap(t)+D);if(_.endX=le[0],_.endY=le[1],_.arrowEndX=ne[0],_.arrowEndY=ne[1],"inside-to-node"===Q)e=[u.x,u.y];else if($.units)e=this.manualEndptToPx(l,$);else if("outside-to-line"===Q)e=_.srcIntn;else if("outside-to-node"===Q||"outside-to-node-or-label"===Q?a=r:"outside-to-line"!==Q&&"outside-to-line-or-label"!==Q||(a=[h.x,h.y]),e=o.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===Q||"outside-to-line-or-label"===Q){var zt=l._private.rscratch,z=zt.labelX,ut=zt.labelY,wt=zt.labelWidth/2,Ct=zt.labelHeight/2,Et=l.pstyle("text-valign").value;"top"===Et?ut-=Ct:"bottom"===Et&&(ut+=Ct);var Ht=l.pstyle("text-halign").value;"left"===Ht?z-=wt:"right"===Ht&&(z+=wt);var Gt=br(a[0],a[1],[z-wt,ut-Ct,z+wt,ut-Ct,z+wt,ut+Ct,z-wt,ut+Ct],u.x,u.y);if(Gt.length>0){var Kt=h,ae=zn(Kt,Bn(e)),ue=zn(Kt,Bn(Gt)),ce=ae;ue<ae&&(e=[Gt[0],Gt[1]],ce=ue),Gt.length>2&&zn(Kt,{x:Gt[2],y:Gt[3]})<ce&&(e=[Gt[2],Gt[3]])}}var re=Mr(e,r,o.arrowShapes[x].spacing(t)+m),fe=Mr(e,r,o.arrowShapes[x].gap(t)+m);_.startX=fe[0],_.startY=fe[1],_.arrowStartX=re[0],_.arrowStartY=re[1],k&&(_.badLine=!(M(_.startX)&&M(_.startY)&&M(_.endX)&&M(_.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},fo={};function Iu(t,e,n){for(var r=function(l,s,u,h){return Oe(l,s,u,h)},i=e._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var o=t.bezierProjPcts[a];i.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}fo.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)Iu(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var a=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var o=n.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},fo.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var qn={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!Z(e)){var n,r,i=t._private,a=t.width(),o=t.height(),l=t.padding(),s=t.position(),u=t.pstyle("text-halign").strValue,h=t.pstyle("text-valign").strValue,g=i.rscratch,x=i.rstyle;switch(u){case"left":n=s.x-a/2-l;break;case"right":n=s.x+a/2+l;break;default:n=s.x}switch(h){case"top":r=s.y-o/2-l;break;case"bottom":r=s.y+o/2+l;break;default:r=s.y}g.labelX=n,g.labelY=r,x.labelX=n,x.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},Cs=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},Ns=function(t,e){return Cs(e.x-t.x,e.y-t.y)};qn.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){var o=function(u,h,g){kn(n.rscratch,u,h,g),kn(n.rstyle,u,h,g)};o("labelX",null,(e={x:r.midX,y:r.midY}).x),o("labelY",null,e.y);var l=Cs(r.midDispX,r.midDispY);o("labelAutoAngle",null,l);var s=function(u){var h,mt,_t,xt,Tt,kt,Bt,Xt,Yt,g="source"===u;if(a[u]){var x=t.pstyle(u+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var D,m=function mt(){if(mt.cache)return mt.cache;for(var _t=[],xt=0;xt+5<r.allpts.length;xt+=4)_t.push({p0:{x:r.allpts[xt],y:r.allpts[xt+1]},p1:{x:r.allpts[xt+2],y:r.allpts[xt+3]},p2:{x:r.allpts[xt+4],y:r.allpts[xt+5]},startDist:0,length:0,segments:[]});var Xt=n.rstyle.bezierPts,Yt=i.bezierProjPcts.length;function jt(Wt,Qt,z,ut,wt){var Ct=Yn(Qt,z),Et=Wt.segments[Wt.segments.length-1];Wt.segments.push({p0:Qt,p1:z,t0:ut,t1:wt,startDist:Et?Et.startDist+Et.length:0,length:Ct}),Wt.length+=Ct}for(var Zt=0;Zt<_t.length;Zt++){var ne=_t[Zt],le=_t[Zt-1];le&&(ne.startDist=le.startDist+le.length),jt(ne,ne.p0,Xt[Zt*Yt],0,i.bezierProjPcts[0]);for(var zt=0;zt<Yt-1;zt++)jt(ne,Xt[Zt*Yt+zt],Xt[Zt*Yt+zt+1],i.bezierProjPcts[zt],i.bezierProjPcts[zt+1]);jt(ne,Xt[Zt*Yt+Yt-1],ne.p2,i.bezierProjPcts[Yt-1],1)}return mt.cache=_t}(),T=0,_=0,L=0;L<m.length;L++){for(var P=m[g?L:m.length-1-L],C=0;C<P.segments.length;C++){var V=P.segments[g?C:P.segments.length-1-C];if(T=_,(_+=V.length)>=x||L===m.length-1&&C===P.segments.length-1){D={cp:P,segment:V};break}}if(D)break}var F=D.cp,k=D.segment,U=(x-T)/k.length,$=k.t1-k.t0,Q=g?k.t0+$*U:k.t1-$*U;Q=yr(0,Q,1),e=Qn(F.p0,F.p1,F.p2,Q),mt=F.p0,_t=F.p1,xt=F.p2,kt=yr(0,(Tt=Q)-.001,1),Bt=yr(0,Tt+.001,1),Xt=Qn(mt,_t,xt,kt),Yt=Qn(mt,_t,xt,Bt),h=Ns(Xt,Yt);break;case"straight":case"segments":case"haystack":for(var it,ot,st,yt,pt=0,et=r.allpts.length,Pt=0;Pt+3<et&&(g?(st={x:r.allpts[Pt],y:r.allpts[Pt+1]},yt={x:r.allpts[Pt+2],y:r.allpts[Pt+3]}):(st={x:r.allpts[et-2-Pt],y:r.allpts[et-1-Pt]},yt={x:r.allpts[et-4-Pt],y:r.allpts[et-3-Pt]}),ot=pt,!((pt+=it=Yn(st,yt))>=x));Pt+=2);var Lt=(x-ot)/it;Lt=yr(0,Lt,1),e=function(mt,_t,xt,Tt){var kt=_t.x-mt.x,Bt=_t.y-mt.y,Xt=Yn(mt,_t);return xt=null==xt?0:xt,{x:mt.x+kt/Xt*(Tt=null!=Tt?Tt:xt*Xt),y:mt.y+Bt/Xt*Tt}}(st,yt,Lt),h=Ns(st,yt)}o("labelX",u,e.x),o("labelY",u,e.y),o("labelAutoAngle",u,h)}};s("source"),s("target"),this.applyLabelDimensions(t)}},qn.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},qn.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,l=dn(n.rscratch,"labelWrapCachedLines",e)||[],s="wrap"!==o?1:Math.max(l.length,1),u=i.height/s,h=u*a,g=i.width,x=i.height+(s-1)*(a-1)*u;kn(n.rstyle,"labelWidth",e,g),kn(n.rscratch,"labelWidth",e,g),kn(n.rstyle,"labelHeight",e,x),kn(n.rscratch,"labelHeight",e,x),kn(n.rscratch,"labelLineHeight",e,h)},qn.getLabelText=function(t,e){var n=t._private,i=t.pstyle((e?e+"-":"")+"label").strValue,a=t.pstyle("text-transform").value,o=function(ot,st){return st?(kn(n.rscratch,ot,e,st),st):dn(n.rscratch,ot,e)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=t.pstyle("text-wrap").value;if("wrap"===l){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var u=i.split("\n"),h=t.pstyle("text-max-width").pfValue,g="anywhere"===t.pstyle("text-overflow-wrap").value,x=[],D=/[\s\u200b]+/,m=g?"":" ",T=0;T<u.length;T++){var _=u[T],L=this.calculateLabelDimensions(t,_).width;if(g){var P=_.split("").join("\u200b");_=P}if(L>h){for(var C=_.split(D),V="",B=0;B<C.length;B++){var F=C[B];this.calculateLabelDimensions(t,0===V.length?F:V+m+F).width<=h?V+=F+m:(V&&x.push(V),V=F+m)}V.match(/^[\s\u200b]+$/)||x.push(V)}else x.push(_)}o("labelWrapCachedLines",x),i=o("labelWrapCachedText",x.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===l){var U=t.pstyle("text-max-width").pfValue,$="",Q=!1;if(this.calculateLabelDimensions(t,i).width<U)return i;for(var it=0;it<i.length&&!(this.calculateLabelDimensions(t,$+i[it]+"\u2026").width>U);it++)$+=i[it],it===i.length-1&&(Q=!0);return Q||($+="\u2026"),$}return i},qn.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},qn.calculateLabelDimensions=function(t,e){var n=Fn(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var a=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,u=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=u.getContext("2d");var g=u.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}h.font="".concat(a," ").concat(s," ").concat(o,"px ").concat(l);for(var x=0,D=0,m=e.split("\n"),T=0;T<m.length;T++){var L=h.measureText(m[T]),P=Math.ceil(L.width),C=o;x=Math.max(P,x),D+=C}return r[n]={width:x+=0,height:D+=0}},qn.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),a=t.pstyle((e?e+"-":"")+"text-rotation"),o=a.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:a.pfValue},qn.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var ks={},Ms=!1;ks.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return Ms||(be("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Ms=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var Os={};[Lu,co,un,Tu,fo,qn,ks,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(a),o)for(var l=0;l<a.length;l++){var h=a[l]._private.rstyle;h.clean=!1,h.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(a){r(a.target)}).on("style.* background.*",function(a){r(a.target,!1)});var i=function(a){if(a){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var s=e[l],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(o)for(var h=0;h<o.length;h++)(0,o[h])(a,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(L){return L._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var a=0;a<t.length;a++){var o=t[a],l=o._private,s=l.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(s.clean=!1),e&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===l.group?i.push(o):r.push(o),s.clean=!0)}for(var u=0;u<i.length;u++){var h=i[u],g=h._private.rstyle,x=h.position();this.recalculateNodeLabelProjection(h),g.nodeX=x.x,g.nodeY=x.y,g.nodeW=h.pstyle("width").pfValue,g.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var D=0;D<r.length;D++){var m=r[D]._private,T=m.rstyle,_=m.rscratch;T.srcX=_.arrowStartX,T.srcY=_.arrowStartY,T.tgtX=_.arrowEndX,T.tgtY=_.arrowEndY,T.midX=_.midX,T.midY=_.midY,T.labelAngle=_.labelAngle,T.sourceLabelAngle=_.sourceLabelAngle,T.targetLabelAngle=_.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(ns),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach(function(t){W(Os,t)});var _u={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[t]=r[t]||{}).image=new Image;return a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0}),"data:"===t.substring(0,"data:".length).toLowerCase()||(a.crossOrigin=e),a.src=t,a}},wi={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(t);return a.on.apply(a,i)},binder:function(t){var n=this,r=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==n.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});window.addEventListener("test",null,a)}catch(l){}n.supportsPassiveEvents=i}var o=function(l,s,u){var h=Array.prototype.slice.call(arguments);return r&&n.supportsPassiveEvents&&(h[2]={capture:null!=u&&u,passive:!1,once:!1}),n.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(z){return z.selected()},n=function(z,ut,wt,Ct){null==z&&(z=t.cy);for(var Et=0;Et<ut.length;Et++)z.emit({originalEvent:wt,type:ut[Et],position:Ct})},r=function(z){return z.shiftKey||z.metaKey||z.ctrlKey},i=function(z,ut){var wt=!0;if(t.cy.hasCompoundNodes()&&z&&z.pannable()){for(var Ct=0;ut&&Ct<ut.length;Ct++)if((z=ut[Ct]).isNode()&&z.isParent()&&!z.pannable()){wt=!1;break}}else wt=!0;return wt},a=function(z){z[0]._private.rscratch.inDragLayer=!0},o=function(z){z[0]._private.rscratch.isGrabTarget=!0},l=function(z,ut){var wt=ut.addToList;wt.has(z)||(wt.merge(z),z[0]._private.grabbed=!0)},s=function(z,ut){ut=ut||{};var wt=z.cy().hasCompoundNodes();ut.inDragLayer&&(z.forEach(a),z.neighborhood().stdFilter(function(Ct){return!wt||Ct.isEdge()}).forEach(a)),ut.addToList&&z.forEach(function(Ct){l(Ct,ut)}),function(Ct,Et){if(Ct.cy().hasCompoundNodes()&&(null!=Et.inDragLayer||null!=Et.addToList)){var Ht=Ct.descendants();Et.inDragLayer&&(Ht.forEach(a),Ht.connectedEdges().forEach(a)),Et.addToList&&Et.addToList.unmerge(Ht)}}(z,ut),g(z,{inDragLayer:ut.inDragLayer}),t.updateCachedGrabbedEles()},u=s,h=function(z){z&&(t.getCachedZSortedEles().forEach(function(ut){ut[0]._private.grabbed=!1,ut[0]._private.rscratch.inDragLayer=!1,function(wt){wt[0]._private.rscratch.isGrabTarget=!1}(ut)}),t.updateCachedGrabbedEles())},g=function(z,ut){if((null!=ut.inDragLayer||null!=ut.addToList)&&z.cy().hasCompoundNodes()){var wt=z.ancestors().orphans();if(!wt.same(z)){var Ct=wt.descendants().spawnSelf().merge(wt).unmerge(z).unmerge(z.descendants()),Et=Ct.connectedEdges();ut.inDragLayer&&(Et.forEach(a),Ct.forEach(a)),ut.addToList&&Ct.forEach(function(Ht){l(Ht,ut)})}}},x=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},D="undefined"!=typeof MutationObserver,m="undefined"!=typeof ResizeObserver;D?(t.removeObserver=new MutationObserver(function(z){for(var ut=0;ut<z.length;ut++){var wt=z[ut].removedNodes;if(wt)for(var Ct=0;Ct<wt.length;Ct++)if(wt[Ct]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(z){t.destroy()});var T=Ge(function(){t.cy.resize()},100);D&&(t.styleObserver=new MutationObserver(T),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",T),m&&(t.resizeObserver=new ResizeObserver(T),t.resizeObserver.observe(t.container));var _=function(){t.invalidateContainerClientCoordsCache()};(function(z,ut){for(;null!=z;)ut(z),z=z.parentNode})(t.container,function(z){t.registerBinding(z,"transitionend",_),t.registerBinding(z,"animationend",_),t.registerBinding(z,"scroll",_)}),t.registerBinding(t.container,"contextmenu",function(z){z.preventDefault()});var L,P,C,V=function(z){for(var ut=t.findContainerClientCoords(),wt=ut[0],Ct=ut[1],Et=ut[2],Ht=ut[3],Gt=z.touches?z.touches:[z],Kt=!1,ae=0;ae<Gt.length;ae++){var ue=Gt[ae];if(wt<=ue.clientX&&ue.clientX<=wt+Et&&Ct<=ue.clientY&&ue.clientY<=Ct+Ht){Kt=!0;break}}if(!Kt)return!1;for(var ce=t.container,re=z.target.parentNode,fe=!1;re;){if(re===ce){fe=!0;break}re=re.parentNode}return!!fe};t.registerBinding(t.container,"mousedown",function(z){if(V(z)){z.preventDefault(),x(),t.hoverData.capture=!0,t.hoverData.which=z.which;var ut=t.cy,wt=[z.clientX,z.clientY],Ct=t.projectIntoViewport(wt[0],wt[1]),Et=t.selection,Ht=t.findNearestElements(Ct[0],Ct[1],!0,!1),Gt=Ht[0],Kt=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=Ct,t.hoverData.mdownGPos=wt,3==z.which){t.hoverData.cxtStarted=!0;var ae={originalEvent:z,type:"cxttapstart",position:{x:Ct[0],y:Ct[1]}};Gt?(Gt.activate(),Gt.emit(ae),t.hoverData.down=Gt):ut.emit(ae),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==z.which){if(Gt&&Gt.activate(),null!=Gt&&t.nodeIsGrabbable(Gt)){var ue=function(re){return{originalEvent:z,type:re,position:{x:Ct[0],y:Ct[1]}}};if(o(Gt),Gt.selected()){Kt=t.dragData.possibleDragElements=ut.collection();var ce=ut.$(function(re){return re.isNode()&&re.selected()&&t.nodeIsGrabbable(re)});s(ce,{addToList:Kt}),Gt.emit(ue("grabon")),ce.forEach(function(re){re.emit(ue("grab"))})}else Kt=t.dragData.possibleDragElements=ut.collection(),u(Gt,{addToList:Kt}),Gt.emit(ue("grabon")).emit(ue("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Gt,t.hoverData.downs=Ht,t.hoverData.downTime=(new Date).getTime(),n(Gt,["mousedown","tapstart","vmousedown"],z,{x:Ct[0],y:Ct[1]}),null==Gt?(Et[4]=1,t.data.bgActivePosistion={x:Ct[0],y:Ct[1]},t.redrawHint("select",!0),t.redraw()):Gt.pannable()&&(Et[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var re=t.hoverData.down;re?re.emit({originalEvent:z,type:"taphold",position:{x:Ct[0],y:Ct[1]}}):ut.emit({originalEvent:z,type:"taphold",position:{x:Ct[0],y:Ct[1]}})}},t.tapholdDuration)}Et[0]=Et[2]=Ct[0],Et[1]=Et[3]=Ct[1]}},!1),t.registerBinding(window,"mousemove",function(z){if(t.hoverData.capture||V(z)){var ut=!1,wt=t.cy,Ct=wt.zoom(),Et=[z.clientX,z.clientY],Ht=t.projectIntoViewport(Et[0],Et[1]),Gt=t.hoverData.mdownPos,Kt=t.hoverData.mdownGPos,ae=t.selection,ue=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(ue=t.findNearestElement(Ht[0],Ht[1],!0,!1));var ce,re=t.hoverData.last,fe=t.hoverData.down,ke=[Ht[0]-ae[2],Ht[1]-ae[3]],Ke=t.dragData.possibleDragElements;if(Kt){var wn=Et[0]-Kt[0],pn=Et[1]-Kt[1];t.hoverData.isOverThresholdDrag=ce=wn*wn+pn*pn>=t.desktopTapThreshold2}var ur=r(z);ce&&(t.hoverData.tapholdCancelled=!0),ut=!0,n(ue,["mousemove","vmousemove","tapdrag"],z,{x:Ht[0],y:Ht[1]});var hr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||wt.emit({originalEvent:z,type:"boxstart",position:{x:Ht[0],y:Ht[1]}}),ae[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(ce){var gn={originalEvent:z,type:"cxtdrag",position:{x:Ht[0],y:Ht[1]}};fe?fe.emit(gn):wt.emit(gn),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&ue===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:Ht[0],y:Ht[1]}}),t.hoverData.cxtOver=ue,ue&&ue.emit({originalEvent:z,type:"cxtdragover",position:{x:Ht[0],y:Ht[1]}}))}}else if(t.hoverData.dragging){if(ut=!0,wt.panningEnabled()&&wt.userPanningEnabled()){var En;if(t.hoverData.justStartedPan){var Ti=t.hoverData.mdownPos;En={x:(Ht[0]-Ti[0])*Ct,y:(Ht[1]-Ti[1])*Ct},t.hoverData.justStartedPan=!1}else En={x:ke[0]*Ct,y:ke[1]*Ct};wt.panBy(En),wt.emit("dragpan"),t.hoverData.dragged=!0}Ht=t.projectIntoViewport(z.clientX,z.clientY)}else if(1!=ae[4]||null!=fe&&!fe.pannable()){if(fe&&fe.pannable()&&fe.active()&&fe.unactivate(),fe&&fe.grabbed()||ue==re||(re&&n(re,["mouseout","tapdragout"],z,{x:Ht[0],y:Ht[1]}),ue&&n(ue,["mouseover","tapdragover"],z,{x:Ht[0],y:Ht[1]}),t.hoverData.last=ue),fe)if(ce){if(wt.boxSelectionEnabled()&&ur)fe&&fe.grabbed()&&(h(Ke),fe.emit("freeon"),Ke.emit("free"),t.dragData.didDrag&&(fe.emit("dragfreeon"),Ke.emit("dragfree"))),hr();else if(fe&&fe.grabbed()&&t.nodeIsDraggable(fe)){var Sr=!t.dragData.didDrag;Sr&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var Ii=wt.collection();t.hoverData.draggingEles||s(Ke,{inDragLayer:!0});var Pr={x:0,y:0};if(M(ke[0])&&M(ke[1])&&(Pr.x+=ke[0],Pr.y+=ke[1],Sr)){var _r=t.hoverData.dragDelta;_r&&M(_r[0])&&M(_r[1])&&(Pr.x+=_r[0],Pr.y+=_r[1])}for(var Si=0;Si<Ke.length;Si++){var $n=Ke[Si];t.nodeIsDraggable($n)&&$n.grabbed()&&Ii.push($n)}t.hoverData.draggingEles=!0,Ii.silentShift(Pr).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else 0===(Zn=t.hoverData.dragDelta=t.hoverData.dragDelta||[]).length?(Zn.push(ke[0]),Zn.push(ke[1])):(Zn[0]+=ke[0],Zn[1]+=ke[1]);ut=!0}else ce&&(t.hoverData.dragging||!wt.boxSelectionEnabled()||!ur&&wt.panningEnabled()&&wt.userPanningEnabled()?!t.hoverData.selecting&&wt.panningEnabled()&&wt.userPanningEnabled()&&i(fe,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,ae[4]=0,t.data.bgActivePosistion=Bn(Gt),t.redrawHint("select",!0),t.redraw()):hr(),fe&&fe.pannable()&&fe.active()&&fe.unactivate());return ae[2]=Ht[0],ae[3]=Ht[1],ut?(z.stopPropagation&&z.stopPropagation(),z.preventDefault&&z.preventDefault(),!1):void 0}var Zn},!1),t.registerBinding(window,"mouseup",function(z){if(t.hoverData.capture){t.hoverData.capture=!1;var ut=t.cy,wt=t.projectIntoViewport(z.clientX,z.clientY),Ct=t.selection,Et=t.findNearestElement(wt[0],wt[1],!0,!1),Ht=t.dragData.possibleDragElements,Gt=t.hoverData.down,Kt=r(z);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Gt&&Gt.unactivate(),3===t.hoverData.which){var ae={originalEvent:z,type:"cxttapend",position:{x:wt[0],y:wt[1]}};if(Gt?Gt.emit(ae):ut.emit(ae),!t.hoverData.cxtDragged){var ue={originalEvent:z,type:"cxttap",position:{x:wt[0],y:wt[1]}};Gt?Gt.emit(ue):ut.emit(ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(Et,["mouseup","tapend","vmouseup"],z,{x:wt[0],y:wt[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(n(Gt,["click","tap","vclick"],z,{x:wt[0],y:wt[1]}),P=!1,z.timeStamp-C<=ut.multiClickDebounceTime()?(L&&clearTimeout(L),P=!0,C=null,n(Gt,["dblclick","dbltap","vdblclick"],z,{x:wt[0],y:wt[1]})):(L=setTimeout(function(){P||n(Gt,["oneclick","onetap","voneclick"],z,{x:wt[0],y:wt[1]})},ut.multiClickDebounceTime()),C=z.timeStamp)),null!=Gt||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(z)||(ut.$(e).unselect(["tapunselect"]),Ht.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Ht=ut.collection()),Et!=Gt||t.dragData.didDrag||t.hoverData.selecting||null!=Et&&Et._private.selectable&&(t.hoverData.dragging||("additive"===ut.selectionType()||Kt?Et.selected()?Et.unselect(["tapunselect"]):Et.select(["tapselect"]):Kt||(ut.$(e).unmerge(Et).unselect(["tapunselect"]),Et.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var ce=ut.collection(t.getAllInBox(Ct[0],Ct[1],Ct[2],Ct[3]));t.redrawHint("select",!0),ce.length>0&&t.redrawHint("eles",!0),ut.emit({type:"boxend",originalEvent:z,position:{x:wt[0],y:wt[1]}});"additive"===ut.selectionType()||Kt||ut.$(e).unmerge(ce).unselect(),ce.emit("box").stdFilter(function(ke){return ke.selectable()&&!ke.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Ct[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var fe=Gt&&Gt.grabbed();h(Ht),fe&&(Gt.emit("freeon"),Ht.emit("free"),t.dragData.didDrag&&(Gt.emit("dragfreeon"),Ht.emit("dragfree")))}}Ct[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var B,F,k,U,$,Q,it,ot,st,yt,pt,et,Pt,Lt=function(z){if(!t.scrollingPage){var ut=t.cy,wt=ut.zoom(),Ct=ut.pan(),Et=t.projectIntoViewport(z.clientX,z.clientY),Ht=[Et[0]*wt+Ct.x,Et[1]*wt+Ct.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])z.preventDefault();else if(ut.panningEnabled()&&ut.userPanningEnabled()&&ut.zoomingEnabled()&&ut.userZoomingEnabled()){var Gt;z.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),Gt=null!=z.deltaY?z.deltaY/-250:null!=z.wheelDeltaY?z.wheelDeltaY/1e3:z.wheelDelta/1e3,Gt*=t.wheelSensitivity,1===z.deltaMode&&(Gt*=33);var Kt=ut.zoom()*Math.pow(10,Gt);"gesturechange"===z.type&&(Kt=t.gestureStartZoom*z.scale),ut.zoom({level:Kt,renderedPosition:{x:Ht[0],y:Ht[1]}}),ut.emit("gesturechange"===z.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",Lt,!0),t.registerBinding(window,"scroll",function(z){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(z){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||z.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(z){t.hasTouchStarted||Lt(z)},!0),t.registerBinding(t.container,"mouseout",function(z){var ut=t.projectIntoViewport(z.clientX,z.clientY);t.cy.emit({originalEvent:z,type:"mouseout",position:{x:ut[0],y:ut[1]}})},!1),t.registerBinding(t.container,"mouseover",function(z){var ut=t.projectIntoViewport(z.clientX,z.clientY);t.cy.emit({originalEvent:z,type:"mouseover",position:{x:ut[0],y:ut[1]}})},!1);var mt,_t,xt,Tt,kt,Bt,Xt,Yt=function(z,ut,wt,Ct){return Math.sqrt((wt-z)*(wt-z)+(Ct-ut)*(Ct-ut))},jt=function(z,ut,wt,Ct){return(wt-z)*(wt-z)+(Ct-ut)*(Ct-ut)};if(t.registerBinding(t.container,"touchstart",mt=function(z){if(t.hasTouchStarted=!0,V(z)){x(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var ut=t.cy,wt=t.touchData.now,Ct=t.touchData.earlier;if(z.touches[0]){var Et=t.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);wt[0]=Et[0],wt[1]=Et[1]}if(z.touches[1]&&(Et=t.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),wt[2]=Et[0],wt[3]=Et[1]),z.touches[2]&&(Et=t.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),wt[4]=Et[0],wt[5]=Et[1]),z.touches[1]){t.touchData.singleTouchMoved=!0,h(t.dragData.touchDragEles);var Ht=t.findContainerClientCoords();pt=Ht[2],et=Ht[3],F=z.touches[0].clientY-(yt=Ht[1]),k=z.touches[1].clientX-(st=Ht[0]),U=z.touches[1].clientY-yt,Pt=0<=(B=z.touches[0].clientX-st)&&B<=pt&&0<=k&&k<=pt&&0<=F&&F<=et&&0<=U&&U<=et;var Gt=ut.pan(),Kt=ut.zoom();if($=Yt(B,F,k,U),Q=jt(B,F,k,U),ot=[((it=[(B+k)/2,(F+U)/2])[0]-Gt.x)/Kt,(it[1]-Gt.y)/Kt],Q<4e4&&!z.touches[2]){var ae=t.findNearestElement(wt[0],wt[1],!0,!0),ue=t.findNearestElement(wt[2],wt[3],!0,!0);return ae&&ae.isNode()?(ae.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:wt[0],y:wt[1]}}),t.touchData.start=ae):ue&&ue.isNode()?(ue.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:wt[0],y:wt[1]}}),t.touchData.start=ue):ut.emit({originalEvent:z,type:"cxttapstart",position:{x:wt[0],y:wt[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(z.touches[2])ut.boxSelectionEnabled()&&z.preventDefault();else if(!z.touches[1]&&z.touches[0]){var ce=t.findNearestElements(wt[0],wt[1],!0,!0),re=ce[0];if(null!=re&&(re.activate(),t.touchData.start=re,t.touchData.starts=ce,t.nodeIsGrabbable(re))){var fe=t.dragData.touchDragEles=ut.collection(),ke=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),re.selected()?(ke=ut.$(function(Ye){return Ye.selected()&&t.nodeIsGrabbable(Ye)}),s(ke,{addToList:fe})):u(re,{addToList:fe}),o(re);var Ke=function(Ye){return{originalEvent:z,type:Ye,position:{x:wt[0],y:wt[1]}}};re.emit(Ke("grabon")),ke?ke.forEach(function(Ye){Ye.emit(Ke("grab"))}):re.emit(Ke("grab"))}n(re,["touchstart","tapstart","vmousedown"],z,{x:wt[0],y:wt[1]}),null==re&&(t.data.bgActivePosistion={x:Et[0],y:Et[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],z,{x:wt[0],y:wt[1]})},t.tapholdDuration)}if(z.touches.length>=1){for(var wn=t.touchData.startPosition=[],on=0;on<wt.length;on++)wn[on]=Ct[on]=wt[on];var pn=z.touches[0];t.touchData.startGPosition=[pn.clientX,pn.clientY]}}},!1),t.registerBinding(window,"touchmove",_t=function(z){var ut=t.touchData.capture;if(ut||V(z)){var wt=t.selection,Ct=t.cy,Et=t.touchData.now,Ht=t.touchData.earlier,Gt=Ct.zoom();if(z.touches[0]){var Kt=t.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);Et[0]=Kt[0],Et[1]=Kt[1]}z.touches[1]&&(Kt=t.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),Et[2]=Kt[0],Et[3]=Kt[1]),z.touches[2]&&(Kt=t.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),Et[4]=Kt[0],Et[5]=Kt[1]);var ae,ue=t.touchData.startGPosition;if(ut&&z.touches[0]&&ue){for(var ce=[],re=0;re<Et.length;re++)ce[re]=Et[re]-Ht[re];var fe=z.touches[0].clientX-ue[0],Ke=z.touches[0].clientY-ue[1];ae=fe*fe+Ke*Ke>=t.touchTapThreshold2}if(ut&&t.touchData.cxt){z.preventDefault();var wn=z.touches[0].clientX-st,on=z.touches[0].clientY-yt,pn=z.touches[1].clientX-st,Ye=z.touches[1].clientY-yt,ur=jt(wn,on,pn,Ye);if(ur/Q>=2.25||ur>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var hr={originalEvent:z,type:"cxttapend",position:{x:Et[0],y:Et[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(hr),t.touchData.start=null):Ct.emit(hr)}}if(ut&&t.touchData.cxt){hr={originalEvent:z,type:"cxtdrag",position:{x:Et[0],y:Et[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(hr):Ct.emit(hr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var gn=t.findNearestElement(Et[0],Et[1],!0,!0);t.touchData.cxtOver&&gn===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:Et[0],y:Et[1]}}),t.touchData.cxtOver=gn,gn&&gn.emit({originalEvent:z,type:"cxtdragover",position:{x:Et[0],y:Et[1]}}))}else if(ut&&z.touches[2]&&Ct.boxSelectionEnabled())z.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Ct.emit({originalEvent:z,type:"boxstart",position:{x:Et[0],y:Et[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,wt[4]=1,wt&&0!==wt.length&&void 0!==wt[0]?(wt[2]=(Et[0]+Et[2]+Et[4])/3,wt[3]=(Et[1]+Et[3]+Et[5])/3):(wt[0]=(Et[0]+Et[2]+Et[4])/3,wt[1]=(Et[1]+Et[3]+Et[5])/3,wt[2]=(Et[0]+Et[2]+Et[4])/3+1,wt[3]=(Et[1]+Et[3]+Et[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(ut&&z.touches[1]&&!t.touchData.didSelect&&Ct.zoomingEnabled()&&Ct.panningEnabled()&&Ct.userZoomingEnabled()&&Ct.userPanningEnabled()){if(z.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),jn=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var En=0;En<jn.length;En++){var Ti=jn[En]._private;Ti.grabbed=!1,Ti.rscratch.inDragLayer=!1}}var Sr=t.touchData.start,Ii=Yt(wn=z.touches[0].clientX-st,on=z.touches[0].clientY-yt,pn=z.touches[1].clientX-st,Ye=z.touches[1].clientY-yt),Pr=Ii/$;if(Pt){var _r=(wn-B+(pn-k))/2,Si=(on-F+(Ye-U))/2,$n=Ct.zoom(),Zn=$n*Pr,ba=Ct.pan(),al=ot[0]*$n+ba.x,ol=ot[1]*$n+ba.y,Wu={x:-Zn/$n*(al-ba.x-_r)+al,y:-Zn/$n*(ol-ba.y-Si)+ol};if(Sr&&Sr.active()){var jn=t.dragData.touchDragEles;h(jn),t.redrawHint("drag",!0),t.redrawHint("eles",!0),Sr.unactivate().emit("freeon"),jn.emit("free"),t.dragData.didDrag&&(Sr.emit("dragfreeon"),jn.emit("dragfree"))}Ct.viewport({zoom:Zn,pan:Wu,cancelOnFailedZoom:!0}),Ct.emit("pinchzoom"),$=Ii,B=wn,F=on,k=pn,U=Ye,t.pinching=!0}z.touches[0]&&(Kt=t.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY),Et[0]=Kt[0],Et[1]=Kt[1]),z.touches[1]&&(Kt=t.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),Et[2]=Kt[0],Et[3]=Kt[1]),z.touches[2]&&(Kt=t.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),Et[4]=Kt[0],Et[5]=Kt[1])}else if(z.touches[0]&&!t.touchData.didSelect){var Nn=t.touchData.start,mo=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(gn=t.findNearestElement(Et[0],Et[1],!0,!0)),ut&&null!=Nn&&z.preventDefault(),ut&&null!=Nn&&t.nodeIsDraggable(Nn))if(ae){jn=t.dragData.touchDragEles;var sl=!t.dragData.didDrag;sl&&s(jn,{inDragLayer:!0}),t.dragData.didDrag=!0;var Pi={x:0,y:0};M(ce[0])&&M(ce[1])&&(Pi.x+=ce[0],Pi.y+=ce[1],sl&&(t.redrawHint("eles",!0),(Rn=t.touchData.dragDelta)&&M(Rn[0])&&M(Rn[1])&&(Pi.x+=Rn[0],Pi.y+=Rn[1]))),t.hoverData.draggingEles=!0,jn.silentShift(Pi).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ht[0]&&t.touchData.startPosition[1]==Ht[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Rn;0===(Rn=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(Rn.push(ce[0]),Rn.push(ce[1])):(Rn[0]+=ce[0],Rn[1]+=ce[1])}if(n(Nn||gn,["touchmove","tapdrag","vmousemove"],z,{x:Et[0],y:Et[1]}),Nn&&Nn.grabbed()||gn==mo||(mo&&mo.emit({originalEvent:z,type:"tapdragout",position:{x:Et[0],y:Et[1]}}),gn&&gn.emit({originalEvent:z,type:"tapdragover",position:{x:Et[0],y:Et[1]}})),t.touchData.last=gn,ut)for(En=0;En<Et.length;En++)Et[En]&&t.touchData.startPosition[En]&&ae&&(t.touchData.singleTouchMoved=!0);ut&&(null==Nn||Nn.pannable())&&Ct.panningEnabled()&&Ct.userPanningEnabled()&&(i(Nn,t.touchData.starts)&&(z.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Bn(t.touchData.startPosition)),t.swipePanning?(Ct.panBy({x:ce[0]*Gt,y:ce[1]*Gt}),Ct.emit("dragpan")):ae&&(t.swipePanning=!0,Ct.panBy({x:fe*Gt,y:Ke*Gt}),Ct.emit("dragpan"),Nn&&(Nn.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),Kt=t.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY),Et[0]=Kt[0],Et[1]=Kt[1])}for(re=0;re<Et.length;re++)Ht[re]=Et[re];ut&&z.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",xt=function(z){var ut=t.touchData.start;t.touchData.capture=!1,ut&&ut.unactivate()}),t.registerBinding(window,"touchend",Tt=function(z){var ut=t.touchData.start;if(t.touchData.capture){0===z.touches.length&&(t.touchData.capture=!1),z.preventDefault();var wt=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Ct,Et=t.cy,Ht=Et.zoom(),Gt=t.touchData.now,Kt=t.touchData.earlier;if(z.touches[0]){var ae=t.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);Gt[0]=ae[0],Gt[1]=ae[1]}if(z.touches[1]&&(ae=t.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY),Gt[2]=ae[0],Gt[3]=ae[1]),z.touches[2]&&(ae=t.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY),Gt[4]=ae[0],Gt[5]=ae[1]),ut&&ut.unactivate(),t.touchData.cxt){if(Ct={originalEvent:z,type:"cxttapend",position:{x:Gt[0],y:Gt[1]}},ut?ut.emit(Ct):Et.emit(Ct),!t.touchData.cxtDragged){var ue={originalEvent:z,type:"cxttap",position:{x:Gt[0],y:Gt[1]}};ut?ut.emit(ue):Et.emit(ue)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!z.touches[2]&&Et.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var ce=Et.collection(t.getAllInBox(wt[0],wt[1],wt[2],wt[3]));wt[0]=void 0,wt[1]=void 0,wt[2]=void 0,wt[3]=void 0,wt[4]=0,t.redrawHint("select",!0),Et.emit({type:"boxend",originalEvent:z,position:{x:Gt[0],y:Gt[1]}}),ce.emit("box").stdFilter(function(ur){return ur.selectable()&&!ur.selected()}).select().emit("boxselect"),ce.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=ut&&ut.unactivate(),z.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!z.touches[1]&&!z.touches[0]&&!z.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var re=t.dragData.touchDragEles;if(null!=ut){var fe=ut._private.grabbed;h(re),t.redrawHint("drag",!0),t.redrawHint("eles",!0),fe&&(ut.emit("freeon"),re.emit("free"),t.dragData.didDrag&&(ut.emit("dragfreeon"),re.emit("dragfree"))),n(ut,["touchend","tapend","vmouseup","tapdragout"],z,{x:Gt[0],y:Gt[1]}),ut.unactivate(),t.touchData.start=null}else{var ke=t.findNearestElement(Gt[0],Gt[1],!0,!0);n(ke,["touchend","tapend","vmouseup","tapdragout"],z,{x:Gt[0],y:Gt[1]})}var Ke=t.touchData.startPosition[0]-Gt[0],on=t.touchData.startPosition[1]-Gt[1],pn=(Ke*Ke+on*on)*Ht*Ht;t.touchData.singleTouchMoved||(ut||Et.$(":selected").unselect(["tapunselect"]),n(ut,["tap","vclick"],z,{x:Gt[0],y:Gt[1]}),kt=!1,z.timeStamp-Xt<=Et.multiClickDebounceTime()?(Bt&&clearTimeout(Bt),kt=!0,Xt=null,n(ut,["dbltap","vdblclick"],z,{x:Gt[0],y:Gt[1]})):(Bt=setTimeout(function(){kt||n(ut,["onetap","voneclick"],z,{x:Gt[0],y:Gt[1]})},Et.multiClickDebounceTime()),Xt=z.timeStamp)),null!=ut&&!t.dragData.didDrag&&ut._private.selectable&&pn<t.touchTapThreshold2&&!t.pinching&&("single"===Et.selectionType()?(Et.$(e).unmerge(ut).unselect(["tapunselect"]),ut.select(["tapselect"])):ut.selected()?ut.unselect(["tapunselect"]):ut.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var Ye=0;Ye<Gt.length;Ye++)Kt[Ye]=Gt[Ye];t.dragData.didDrag=!1,0===z.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),z.touches.length<2&&(1===z.touches.length&&(t.touchData.startGPosition=[z.touches[0].clientX,z.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var Zt=[],ne=function(z){return{clientX:z.clientX,clientY:z.clientY,force:1,identifier:z.pointerId,pageX:z.pageX,pageY:z.pageY,radiusX:z.width/2,radiusY:z.height/2,screenX:z.screenX,screenY:z.screenY,target:z.target}},zt=function(z){for(var ut=0;ut<Zt.length;ut++)if(Zt[ut].event.pointerId===z.pointerId)return void Zt.splice(ut,1)},Wt=function(z){z.touches=Zt.map(function(ut){return ut.touch})},Qt=function(z){return"mouse"===z.pointerType||4===z.pointerType};t.registerBinding(t.container,"pointerdown",function(z){Qt(z)||(z.preventDefault(),function(z){var ut;Zt.push({event:ut=z,touch:ne(ut)})}(z),Wt(z),mt(z))}),t.registerBinding(t.container,"pointerup",function(z){Qt(z)||(zt(z),Wt(z),Tt(z))}),t.registerBinding(t.container,"pointercancel",function(z){Qt(z)||(zt(z),Wt(z),xt())}),t.registerBinding(t.container,"pointermove",function(z){var ut,wt;Qt(z)||(z.preventDefault(),ut=z,(wt=Zt.filter(function(Ct){return Ct.event.pointerId===ut.pointerId})[0]).event=ut,wt.touch=ne(ut),Wt(z),_t(z))})}}},sr={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,r,i,a,o){this.renderer.nodeShapeImpl("polygon",n,r,i,a,o,this.points)},intersectLine:function(n,r,i,a,o,l,s){return br(o,l,this.points,n,r,i/2,a/2,s)},checkPoint:function(n,r,i,a,o,l,s){return In(n,r,this.points,l,s,a,o,[0,-1],i)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return function(l,s,u,h,g,x){var D=u-l,m=h-s;D/=g,m/=x;var T=Math.sqrt(D*D+m*m),_=T-1;if(_<0)return[];var L=_/T;return[(u-l)*L+l,(h-s)*L+s]}(i,a,t,e,n/2+o,r/2+o)},checkPoint:function(t,e,n,r,i,a,o){return Hn(t,e,r,i,a,o,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var a,i=2*r;a=r<e.length/2-1?2*(r+1):0,n[4*r]=e[i],n[4*r+1]=e[i+1];var o=e[a]-e[i],l=e[a+1]-e[i+1],s=Math.sqrt(o*o+l*l);n[4*r+2]=o/s,n[4*r+3]=l/s}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(u,h,g,x,D){this.renderer.nodeShapeImpl("round-polygon",u,h,g,x,D,this.points)},intersectLine:function(u,h,g,x,D,m,T){return function(_,L,P,C,V,B,F,k){for(var U,$=[],Q=new Array(P.length),it=B/2,ot=F/2,st=hi(B,F),yt=0;yt<P.length/4;yt++){var pt,et;et=0===yt?P.length-2:4*yt-2,pt=4*yt+2;var Pt=C+it*P[4*yt],Lt=V+ot*P[4*yt+1],_t=st/Math.tan(Math.acos(-P[et]*P[pt]-P[et+1]*P[pt+1])/2),xt=Pt-_t*P[et],Tt=Lt-_t*P[et+1],kt=Pt+_t*P[pt],Bt=Lt+_t*P[pt+1];0===yt?(Q[P.length-2]=xt,Q[P.length-1]=Tt):(Q[4*yt-2]=xt,Q[4*yt-1]=Tt),Q[4*yt]=kt,Q[4*yt+1]=Bt;var Xt=P[et+1],Yt=-P[et];Xt*P[pt]+Yt*P[pt+1]<0&&(Xt*=-1,Yt*=-1),0!==(U=mr(_,L,C,V,xt+Xt*st,Tt+Yt*st,st)).length&&$.push(U[0],U[1])}for(var jt=0;jt<Q.length/4;jt++)0!==(U=Mn(_,L,C,V,Q[4*jt],Q[4*jt+1],Q[4*jt+2],Q[4*jt+3],!1)).length&&$.push(U[0],U[1]);if($.length>2){for(var Zt=[$[0],$[1]],ne=Math.pow(Zt[0]-_,2)+Math.pow(Zt[1]-L,2),le=1;le<$.length/2;le++){var zt=Math.pow($[2*le]-_,2)+Math.pow($[2*le+1]-L,2);zt<=ne&&(Zt[0]=$[2*le],Zt[1]=$[2*le+1],ne=zt)}return Zt}return $}(D,m,this.points,u,h,g,x)},checkPoint:function(u,h,g,x,D,m,T){return function(_,L,P,C,V,B,F){for(var k=new Array(P.length),U=B/2,$=F/2,Q=hi(B,F),it=Q*Q,ot=0;ot<P.length/4;ot++){var st,yt;yt=0===ot?P.length-2:4*ot-2,st=4*ot+2;var pt=C+U*P[4*ot],et=V+$*P[4*ot+1],Lt=Q/Math.tan(Math.acos(-P[yt]*P[st]-P[yt+1]*P[st+1])/2),mt=pt-Lt*P[yt],_t=et-Lt*P[yt+1],xt=pt+Lt*P[st],Tt=et+Lt*P[st+1];k[4*ot]=mt,k[4*ot+1]=_t,k[4*ot+2]=xt,k[4*ot+3]=Tt;var kt=P[yt+1],Bt=-P[yt];kt*P[st]+Bt*P[st+1]<0&&(kt*=-1,Bt*=-1);var Yt=_t+Bt*Q;if(Math.pow(mt+kt*Q-_,2)+Math.pow(Yt-L,2)<=it)return!0}return tn(_,L,k)}(u,h,this.points,m,T,x,D)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return ka(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var l=xr(r,i),s=2*l;return!!(In(t,e,this.points,a,o,r,i-s,[0,-1],n)||In(t,e,this.points,a,o,r-s,i,[0,-1],n)||Hn(t,e,s,s,a-r/2+l,o-i/2+l,n)||Hn(t,e,s,s,a+r/2-l,o-i/2+l,n)||Hn(t,e,s,s,a+r/2-l,o+i/2-l,n)||Hn(t,e,s,s,a-r/2+l,o+i/2-l,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,a=e/2,o=t/2,l=n-o,s=n+o,u=r-a,h=r+a;return{topLeft:[l,u+i,l+i,u,l+i,u+i],topRight:[s-i,u,s,u+i,s-i,u+i],bottomRight:[s,h-i,s-i,h,s-i,h-i],bottomLeft:[l+i,h,l,h-i,l+i,h-i]}},intersectLine:function(t,e,n,r,i,a,o){var l=this.generateCutTrianglePts(n+2*o,r+2*o,t,e),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return br(i,a,s,t,e)},checkPoint:function(t,e,n,r,i,a,o){if(In(t,e,this.points,a,o,r,i-2*this.cornerLength,[0,-1],n)||In(t,e,this.points,a,o,r-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(r,i,a,o);return tn(t,e,l.topLeft)||tn(t,e,l.topRight)||tn(t,e,l.bottomRight)||tn(t,e,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var l=this.generateBarrelBezierPts(n+2*o,r+2*o,t,e),s=function(h){var g=Qn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.15),x=Qn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.5),D=Qn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.85);return[h[0],h[1],g.x,g.y,x.x,x.y,D.x,D.y,h[4],h[5]]},u=[].concat(s(l.topLeft),s(l.topRight),s(l.bottomRight),s(l.bottomLeft));return br(i,a,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,a=t/2,o=n-a,l=n+a,s=r-i,u=r+i,h=Ui(t,e),g=h.heightOffset,x=h.widthOffset,D=h.ctrlPtOffsetPct*t,m={topLeft:[o,s+g,o+D,s,o+x,s],topRight:[l-x,s,l-D,s,l,s+g],bottomRight:[l,u-g,l-D,u,l-x,u],bottomLeft:[o+x,u,o+D,u,o,u-g]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(t,e,n,r,i,a,o){var l=Ui(r,i),u=l.widthOffset;if(In(t,e,this.points,a,o,r,i-2*l.heightOffset,[0,-1],n)||In(t,e,this.points,a,o,r-2*u,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,a,o),g=function(V,B,F){var k,U,$=F[4],Q=F[2],it=F[0],ot=F[5],st=F[1],yt=Math.min($,it),pt=Math.max($,it),et=Math.min(ot,st),Pt=Math.max(ot,st);if(yt<=V&&V<=pt&&et<=B&&B<=Pt){var Lt=[(k=$)-2*(U=Q)+it,2*(U-k),k],mt=function(_t,xt,Tt,kt){var Bt=xt*xt-4*_t*(Tt-=kt);if(Bt<0)return[];var Xt=Math.sqrt(Bt),Yt=2*_t;return[(-xt+Xt)/Yt,(-xt-Xt)/Yt]}(Lt[0],Lt[1],Lt[2],V).filter(function(_t){return 0<=_t&&_t<=1});if(mt.length>0)return mt[0]}return null},x=Object.keys(h),D=0;D<x.length;D++){var m=h[x[D]],T=g(t,e,m);if(null!=T){var C=Oe(m[5],m[3],m[1],T);if(m.isTop&&C<=e||m.isBottom&&e<=C)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var l=e-(r/2+o),s=Mn(i,a,t,e,t-(n/2+o),l,t+(n/2+o),l,!1);return s.length>0?s:ka(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var l=xr(r,i),s=2*l;if(In(t,e,this.points,a,o,r,i-s,[0,-1],n)||In(t,e,this.points,a,o,r-s,i,[0,-1],n))return!0;var u=r/2+2*n,h=i/2+2*n;return!!tn(t,e,[a-u,o-h,a-u,o,a+u,o,a+u,o-h])||!!Hn(t,e,s,s,a+r/2-l,o+i/2-l,n)||!!Hn(t,e,s,s,a-r/2+l,o+i/2-l,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Ue(3,0)),this.generateRoundPolygon("round-triangle",Ue(3,0)),this.generatePolygon("rectangle",Ue(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Ue(5,0)),this.generateRoundPolygon("round-pentagon",Ue(5,0)),this.generatePolygon("hexagon",Ue(6,0)),this.generateRoundPolygon("round-hexagon",Ue(6,0)),this.generatePolygon("heptagon",Ue(7,0)),this.generateRoundPolygon("round-heptagon",Ue(7,0)),this.generatePolygon("octagon",Ue(8,0)),this.generateRoundPolygon("round-octagon",Ue(8,0));var r=new Array(20),i=ui(5,0),a=ui(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var l=0;l<a.length/2;l++)a[2*l]*=o,a[2*l+1]*=o;for(l=0;l<5;l++)r[4*l]=i[2*l],r[4*l+1]=i[2*l+1],r[4*l+2]=a[2*l],r[4*l+3]=a[2*l+1];r=Vi(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s),t.makePolygon=function(u){var h,g="polygon-"+u.join("$");return(h=this[g])?h:e.generatePolygon(g,u)}}},Gs={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Jr();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&_e("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}}},Rs=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};Gs.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,Wn(function n(r){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Rs(t,!0,r);var i=cn();t.render(t.renderOptions);var a=t.lastDrawTime=cn();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var o=a-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Rs(t,!1,r);t.skipFrame=!1,Wn(n)}}))};var Fs=function(t){this.init(t)},Ur=Fs.prototype;Ur.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Ur.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(w){var r=w.document,i=r.head,a="__________cytoscape_container",o=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!o){var l=r.createElement("style");l.id="__________cytoscape_stylesheet",l.innerHTML="."+a+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===w.getComputedStyle(n).getPropertyValue("position")&&be("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=M(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Ur.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Ur.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(i){}},Ur.isHeadless=function(){return!1},[Du,Os,_u,wi,sr,Gs].forEach(function(t){W(Ur,t)});var Bs=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=Ge(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold);n.beforeRender(function(a,o){var l=cn(),s=n.averageRedrawTime,u=n.lastRedrawTime,h=[],g=n.cy.extent(),x=n.getPixelRatio();for(a||n.flushRenderedStyleQueue();;){var D=cn(),m=D-l,T=D-o;if(u<1e3/60){if(T>=t.deqFastCost*(1e3/60-(a?s:0)))break}else if(a){if(m>=t.deqCost*u||m>=t.deqAvgCost*s)break}else if(T>=t.deqNoDrawCost*(1e3/60))break;var L=t.deq(e,x,g);if(!(L.length>0))break;for(var P=0;P<L.length;P++)h.push(L[P])}h.length>0&&(t.onDeqd(e,h),!a&&t.shouldRedraw(e,h,x,g)&&r())},(t.priority||Kr)(e))}}},Au=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nr;ct(this,t),this.idsByKey=new Ve,this.keyForId=new Ve,this.cachesByLvl=new Ve,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return G(t,[{key:"getIdsFor",value:function(e){null==e&&_e("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new Kn,n.set(e,r)),r}},{key:"addIdForKey",value:function(e,n){null!=e&&this.getIdsFor(e).add(n)}},{key:"deleteIdForKey",value:function(e,n){null!=e&&this.getIdsFor(e).delete(n)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var n=e.id(),r=this.keyForId.get(n),i=this.getKey(e);this.deleteIdForKey(r,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(e){var n=e.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(e){var n=e.id();return this.keyForId.get(n)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var n=this.cachesByLvl,r=this.lvls,i=n.get(e);return i||(i=new Ve,n.set(e,i),r.push(e)),i}},{key:"getCache",value:function(e,n){return this.getCachesAt(n).get(e)}},{key:"get",value:function(e,n){var r=this.getKey(e),i=this.getCache(r,n);return null!=i&&this.updateKeyMappingFor(e),i}},{key:"getForCachedKey",value:function(e,n){var r=this.keyForId.get(e.id());return this.getCache(r,n)}},{key:"hasCache",value:function(e,n){return this.getCachesAt(n).has(e)}},{key:"has",value:function(e,n){var r=this.getKey(e);return this.hasCache(r,n)}},{key:"setCache",value:function(e,n,r){r.key=e,this.getCachesAt(n).set(e,r)}},{key:"set",value:function(e,n,r){var i=this.getKey(e);this.setCache(i,n,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,n){this.getCachesAt(n).delete(e)}},{key:"delete",value:function(e,n){var r=this.getKey(e);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(e){var n=this;this.lvls.forEach(function(r){return n.deleteCache(e,r)})}},{key:"invalidate",value:function(e){var n=e.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(e);var i=this.doesEleInvalidateKey(e);return i&&this.invalidateKey(r),i||0===this.getNumberOfIdsForKey(r)}}]),t}(),qr={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Cu=Re({getKey:null,doesEleInvalidateKey:Nr,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ki,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ei=function(t,e){this.renderer=t,this.onDequeues=[];var n=Cu(e);W(this,n),this.lookup=new Au(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},Be=Ei.prototype;Be.reasons=qr,Be.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},Be.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},Be.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new gr(function(t,e){return e.reqs-t.reqs})},Be.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Be.getElement=function(t,e,n,r,i){var a=this,o=this.renderer,l=o.cy.zoom(),s=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(ai(l*n))),r<-4)r=-4;else if(l>=7.99||r>3)return null;var u=Math.pow(2,r),h=e.h*u,g=e.w*u,x=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,x))return null;var D,m=s.get(t,r);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;if(D=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||g>1024)return null;var T=a.getTextureQueue(D),_=T[T.length-2],L=function(){return a.recycleTexture(D,g)||a.addTexture(D,g)};_||(_=T[T.length-1]),_||(_=L()),_.width-_.usedWidth<g&&(_=L());for(var P,C=function(pt){return pt&&pt.scaledLabelShown===x},V=i&&i===qr.dequeue,B=i&&i===qr.highQuality,F=i&&i===qr.downscale,k=r+1;k<=3;k++){var U=s.get(t,k);if(U){P=U;break}}var $=P&&P.level===r+1?P:null,Q=function(){_.context.drawImage($.texture.canvas,$.x,0,$.width,$.height,_.usedWidth,0,g,h)};if(_.context.setTransform(1,0,0,1,0,0),_.context.clearRect(_.usedWidth,0,g,D),C($))Q();else if(C(P)){if(!B)return a.queueElement(t,P.level-1),P;for(var it=P.level;it>r;it--)$=a.getElement(t,e,n,it,qr.downscale);Q()}else{var ot;if(!V&&!B&&!F)for(var st=r-1;st>=-4;st--){var yt=s.get(t,st);if(yt){ot=yt;break}}if(C(ot))return a.queueElement(t,r),ot;_.context.translate(_.usedWidth,0),_.context.scale(u,u),this.drawElement(_.context,t,e,x,!1),_.context.scale(1/u,1/u),_.context.translate(-_.usedWidth,0)}return m={x:_.usedWidth,texture:_,level:r,scale:u,width:g,height:h,scaledLabelShown:x},_.usedWidth+=Math.ceil(g+8),_.eleCaches.push(m),s.set(t,r,m),a.checkTextureFullness(_),m},Be.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Be.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var a=0;a<n.length;a++){var o=n[a],l=o.texture;l.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(l)}this.removeFromQueue(t)}},Be.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Be.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Ln(e,t):t.fullnessChecks++},Be.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Ln(n,t),t.retired=!0;for(var i=t.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}ti(i),this.getRetiredTextureQueue(e).push(t)},Be.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},Be.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var a=r[i];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,ti(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Ln(r,a),n.push(a),a}},Be.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),a=r[i];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,n.updateItem(a);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),r[i]=o}},Be.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,a=0;a<1&&e.size()>0;a++){var o=e.pop(),l=o.key,s=o.eles[0],u=i.hasCache(s,o.level);if(n[l]=null,!u){r.push(o);var h=this.getBoundingBox(s);this.getElement(s,h,t,o.level,qr.dequeue)}}return r},Be.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=Wr,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},Be.onDequeue=function(t){this.onDequeues.push(t)},Be.offDequeue=function(t){Ln(this.onDequeues,t)},Be.setupDequeueing=Bs({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var a=e[i].eles,o=0;o<a.length;o++){var l=a[o].boundingBox();if(si(l,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Ys=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=cn()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=Ge(function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)},50),n.beforeRender(function(i,a){e.skipping=a-e.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new gr(function(i,a){return a.reqs-i.reqs}),e.setupDequeueing()},We=Ys.prototype,zs=0,Nu=Math.pow(2,53)-1;We.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:zs=++zs%Nu,bb:t,level:e,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=o.context,s=-o.bb.x1,u=-o.bb.y1;return l.scale(n,n),l.translate(s,u),o},We.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),a=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(ai(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var o,l,s=r.layersByLevel,u=Math.pow(2,n),h=s[n]=s[n]||[];if(r.levelIsComplete(n,t))return h;!function(){var V=function(U){if(r.validateLayersElesOrdering(U,t),r.levelIsComplete(U,t))return l=s[U],!0},B=function(U){if(!l)for(var $=n+U;-4<=$&&$<=2&&!V($);$+=U);};B(1),B(-1);for(var F=h.length-1;F>=0;F--){var k=h[F];k.invalid&&Ln(h,k)}}();var g=function(V){var B=(V=V||{}).after;if(function(){if(!o){o=Je();for(var U=0;U<t.length;U++)$=o,Q=t[U].boundingBox(),$.x1=Math.min($.x1,Q.x1),$.x2=Math.max($.x2,Q.x2),$.w=$.x2-$.x1,$.y1=Math.min($.y1,Q.y1),$.y2=Math.max($.y2,Q.y2),$.h=$.y2-$.y1}var $,Q}(),o.w*u*(o.h*u)>16e6)return null;var F=r.makeLayer(o,n);if(null!=B){var k=h.indexOf(B)+1;h.splice(k,0,F)}else(void 0===V.insert||V.insert)&&h.unshift(F);return F};if(r.skipping&&!a)return null;for(var x=null,D=t.length/1,m=!a,T=0;T<t.length;T++){var _=t[T],L=_._private.rscratch,P=L.imgLayerCaches=L.imgLayerCaches||{},C=P[n];if(C)x=C;else{if((!x||x.eles.length>=D||!Yi(x.bb,_.boundingBox()))&&!(x=g({insert:!0,after:x})))return null;l||m?r.queueLayer(x,_):r.drawEleInLayer(x,_,n,e),x.eles.push(_),P[n]=x}}return l||(m?null:h)},We.getEleLevelForLayerLevel=function(t,e){return t},We.drawEleInLayer=function(t,e,n,r){var i=this.renderer,a=t.context,o=e.boundingBox();0!==o.w&&0!==o.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,e,null,null,n,!0),i.setImgSmoothing(a,!0))},We.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0||a.invalid)return!1;r+=a.eles.length}return r===e.length},We.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var l=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==e[l+o]){this.invalidateLayer(i);break}}}},We.updateElementsInLayers=function(t,e){for(var n=at(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],a=n?t[r]:t[r].ele,o=a._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},s=-4;s<=2;s++){var u=l[s];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,a,i))}},We.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},We.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=cn(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(n,r,i){e.invalidateLayer(n)}))},We.invalidateLayer=function(t){if(this.lastInvalidationTime=cn(),!t.invalid){var e=t.level,n=t.eles;Ln(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var a=n[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},We.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,r,i){var a=n.replacement;if(a||((a=n.replacement=e.makeLayer(n.bb,n.level)).replaces=n,a.eles=n.eles),!a.reqs)for(var o=0;o<a.eles.length;o++)e.queueLayer(a,a.eles[o])})},We.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},We.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},We.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},We.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var a=t.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[t.level]=t)}this.requestRedraw()}},We.requestRedraw=Ge(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),We.setupDequeueing=Bs({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:Kr,shouldRedraw:ki,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Xs,Hs={};function ku(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function Mu(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i];0===i&&(r=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function Vs(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var a=r[i];t.lineTo(a.x,a.y)}var o=n,l=n[0];for(t.moveTo(l.x,l.y),i=1;i<o.length;i++)t.lineTo((a=o[i]).x,a.y);t.closePath&&t.closePath()}function Ou(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var a=e,o=a[0];t.moveTo(o.x,o.y);for(var l=0;l<a.length;l++){var s=a[l];t.lineTo(s.x,s.y)}t.closePath&&t.closePath()}function Gu(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Hs.arrowShapeImpl=function(t){return(Xs||(Xs={polygon:ku,"triangle-backcurve":Mu,"triangle-tee":Vs,"circle-triangle":Ou,"triangle-cross":Vs,circle:Gu}))[t]};var $r={drawElement:function(t,e,n,r,i,a){e.isNode()?this.drawNode(t,e,n,r,i,a):this.drawEdge(t,e,n,r,i,a)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){e.isNode()?this.drawNodeUnderlay(t,e):this.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,a,o,l){var s=this,u=n.getBoundingBox(e);if(0!==u.w&&0!==u.h){var h=n.getElement(e,u,r,i,a);if(null!=h){var g=l(s,e);if(0===g)return;var x,D,m,T,_,L,P=o(s,e),C=u.x1,V=u.y1,B=u.w,F=u.h;if(0!==P){var k=n.getRotationPoint(e);t.translate(m=k.x,T=k.y),t.rotate(P),(_=s.getImgSmoothing(t))||s.setImgSmoothing(t,!0);var U=n.getRotationOffset(e);x=U.x,D=U.y}else x=C,D=V;1!==g&&(t.globalAlpha=(L=t.globalAlpha)*g),t.drawImage(h.texture.canvas,h.x,0,h.width,h.height,x,D,B,F),1!==g&&(t.globalAlpha=L),0!==P&&(t.rotate(-P),t.translate(-m,-T),_||s.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Ru=function(){return 0},Fu=function(t,e){return t.getTextAngle(e,null)},Bu=function(t,e){return t.getTextAngle(e,"source")},Yu=function(t,e){return t.getTextAngle(e,"target")},zu=function(t,e){return e.effectiveOpacity()},po=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};$r.drawCachedElement=function(t,e,n,r,i,a){var o=this,l=o.data,s=l.eleTxrCache,u=l.lblTxrCache,h=l.slbTxrCache,g=l.tlbTxrCache,x=e.boundingBox(),D=!0===a?s.reasons.highQuality:null;if(0!==x.w&&0!==x.h&&e.visible()&&(!r||si(x,r))){var m=e.isEdge(),T=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,s,n,i,D,Ru,zu),m&&T||o.drawCachedElementPortion(t,e,u,n,i,D,Fu,po),m&&!T&&(o.drawCachedElementPortion(t,e,h,n,i,D,Bu,po),o.drawCachedElementPortion(t,e,g,n,i,D,Yu,po)),o.drawElementOverlay(t,e)}},$r.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},$r.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},$r.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var a=e[i];a.isNode()&&this.drawCachedElement(t,a,n,r)}},$r.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],l=o.bb;0!==l.w&&0!==l.h&&t.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else this.drawCachedElements(t,e,n,r)};var lr={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,l=e._private.rscratch;if((!a||e.visible())&&!l.badLine&&null!=l.allpts&&!isNaN(l.allpts[0])){var s;n&&t.translate(-(s=n).x1,-s.y1);var u=a?e.pstyle("opacity").value:1,h=a?e.pstyle("line-opacity").value:1,g=e.pstyle("curve-style").value,x=e.pstyle("line-style").value,D=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,T=u*h,_=u*h,L=function(){var it=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;"straight-triangle"===g?(o.eleStrokeStyle(t,e,it),o.drawEdgeTrianglePath(e,t,l.allpts)):(t.lineWidth=D,t.lineCap=m,o.eleStrokeStyle(t,e,it),o.drawEdgePath(e,t,l.allpts,x),t.lineCap="butt")},P=function(){i&&o.drawEdgeOverlay(t,e)},C=function(){i&&o.drawEdgeUnderlay(t,e)},V=function(){o.drawArrowheads(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:_)},B=function(){o.drawElementText(t,e,null,r)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var k=e.pstyle("ghost-offset-x").pfValue,U=e.pstyle("ghost-offset-y").pfValue,$=e.pstyle("ghost-opacity").value,Q=T*$;t.translate(k,U),L(Q),V(Q),t.translate(-k,-U)}C(),L(),V(),P(),B(),n&&t.translate(s.x1,s.y1)}}},Us=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n){if(n.visible()){var r=n.pstyle("".concat(t,"-opacity")).value;if(0!==r){var i=this,a=i.usePaths(),o=n._private.rscratch,l=2*n.pstyle("".concat(t,"-padding")).pfValue,s=n.pstyle("".concat(t,"-color")).value;e.lineWidth=l,e.lineCap="self"!==o.edgeType||a?"round":"butt",i.colorStrokeStyle(e,s[0],s[1],s[2],r),i.drawEdgePath(n,e,o.allpts,"solid")}}}};lr.drawEdgeOverlay=Us("overlay"),lr.drawEdgeUnderlay=Us("underlay"),lr.drawEdgePath=function(t,e,n,r){var i,a=t._private.rscratch,o=e,l=!1,s=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,h=t.pstyle("line-dash-offset").pfValue;if(s){var g=n.join("$");a.pathCacheKey&&a.pathCacheKey===g?(i=e=a.pathCache,l=!0):(i=e=new Path2D,a.pathCacheKey=g,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=h;break;case"solid":o.setLineDash([])}if(!l&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var x=2;x+3<n.length;x+=4)e.quadraticCurveTo(n[x],n[x+1],n[x+2],n[x+3]);break;case"straight":case"segments":case"haystack":for(var D=2;D+1<n.length;D+=2)e.lineTo(n[D],n[D+1])}e=o,s?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},lr.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var a=[n[i+2]-n[i],n[i+3]-n[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=[a[1]/o,-a[0]/o],s=[l[0]*r/2,l[1]*r/2];e.beginPath(),e.moveTo(n[i]-s[0],n[i+1]-s[1]),e.lineTo(n[i]+s[0],n[i+1]+s[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}},lr.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},lr.drawArrowhead=function(t,e,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var l=e.pstyle(n+"-arrow-shape").value;if("none"!==l){var s="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle("opacity").value;void 0===o&&(o=g);var x=t.globalCompositeOperation;1===o&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,s,h,l,r,i,a),t.globalCompositeOperation=x);var D=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,D[0],D[1],D[2],o),this.colorStrokeStyle(t,D[0],D[1],D[2],o),this.drawArrowShape(e,t,u,h,l,r,i,a)}}},lr.drawArrowShape=function(t,e,n,r,i,a,o,l){var s,u=this,h=this.usePaths()&&"triangle-cross"!==i,g=!1,x=e,D={x:a,y:o},m=t.pstyle("arrow-scale").value,T=this.getArrowWidth(r,m),_=u.arrowShapes[i];if(h){var L=u.arrowPathCache=u.arrowPathCache||[],P=Fn(i),C=L[P];null!=C?(s=e=C,g=!0):(s=e=new Path2D,L[P]=s)}g||(e.beginPath&&e.beginPath(),h?_.draw(e,1,0,{x:0,y:0},1):_.draw(e,T,l,D,r),e.closePath&&e.closePath()),e=x,h&&(e.translate(a,o),e.rotate(l),e.scale(T,T)),"filled"!==n&&"both"!==n||(h?e.fill(s):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(_.matchEdgeWidth?r:1)/(h?T:1),e.lineJoin="miter",h?e.stroke(s):e.stroke()),h&&(e.scale(1/T,1/T),e.rotate(-l),e.translate(-a,-o))};var Xu={safeDrawImage:function(t,e,n,r,i,a,o,l,s,u){i<=0||a<=0||s<=0||u<=0||t.drawImage(e,n,r,i,a,o,l,s,u)},drawInscribedImage:function(t,e,n,r,i){var a=this,o=n.position(),l=o.x,s=o.y,u=n.cy().style(),h=u.getIndexedStyle.bind(u),g=h(n,"background-fit","value",r),x=h(n,"background-repeat","value",r),D=n.width(),m=n.height(),T=2*n.padding(),_=D+("inner"===h(n,"background-width-relative-to","value",r)?0:T),L=m+("inner"===h(n,"background-height-relative-to","value",r)?0:T),P=n._private.rscratch,C="node"===h(n,"background-clip","value",r),V=h(n,"background-image-opacity","value",r)*i,B=h(n,"background-image-smoothing","value",r),F=e.width||e.cachedW,k=e.height||e.cachedH;null!=F&&null!=k||(document.body.appendChild(e),F=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var U=F,$=k;if("auto"!==h(n,"background-width","value",r)&&(U="%"===h(n,"background-width","units",r)?h(n,"background-width","pfValue",r)*_:h(n,"background-width","pfValue",r)),"auto"!==h(n,"background-height","value",r)&&($="%"===h(n,"background-height","units",r)?h(n,"background-height","pfValue",r)*L:h(n,"background-height","pfValue",r)),0!==U&&0!==$){if("contain"===g)U*=Q=Math.min(_/U,L/$),$*=Q;else if("cover"===g){var Q;U*=Q=Math.max(_/U,L/$),$*=Q}var it=l-_/2,ot=h(n,"background-position-x","units",r),st=h(n,"background-position-x","pfValue",r);it+="%"===ot?(_-U)*st:st;var yt=h(n,"background-offset-x","units",r),pt=h(n,"background-offset-x","pfValue",r);it+="%"===yt?(_-U)*pt:pt;var et=s-L/2,Pt=h(n,"background-position-y","units",r),Lt=h(n,"background-position-y","pfValue",r);et+="%"===Pt?(L-$)*Lt:Lt;var mt=h(n,"background-offset-y","units",r),_t=h(n,"background-offset-y","pfValue",r);et+="%"===mt?(L-$)*_t:_t,P.pathCache&&(it-=l,et-=s,l=0,s=0);var xt=t.globalAlpha;t.globalAlpha=V;var Tt=a.getImgSmoothing(t),kt=!1;if("no"===B&&Tt?(a.setImgSmoothing(t,!1),kt=!0):"yes"!==B||Tt||(a.setImgSmoothing(t,!0),kt=!0),"no-repeat"===x)C&&(t.save(),P.pathCache?t.clip(P.pathCache):(a.nodeShapes[a.getNodeShape(n)].draw(t,l,s,_,L),t.clip())),a.safeDrawImage(t,e,0,0,F,k,it,et,U,$),C&&t.restore();else{var Bt=t.createPattern(e,x);t.fillStyle=Bt,a.nodeShapes[a.getNodeShape(n)].draw(t,l,s,_,L),t.translate(it,et),t.fill(),t.translate(-it,-et)}t.globalAlpha=xt,kt&&a.setImgSmoothing(t,Tt)}}},Lr={};function Hu(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill()}Lr.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(ai(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Lr.drawElementText=function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==r){if(a&&!o.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var s=o.getLabelJustification(e);t.textAlign=s,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,h=e.pstyle("label"),g=e.pstyle("source-label"),x=e.pstyle("target-label");if(u||(!h||!h.value)&&(!g||!g.value)&&(!x||!x.value))return;t.textAlign="center",t.textBaseline="bottom"}var D,m=!n;n&&t.translate(-(D=n).x1,-D.y1),null==i?(o.drawText(t,e,null,m,a),e.isEdge()&&(o.drawText(t,e,"source",m,a),o.drawText(t,e,"target",m,a))):o.drawText(t,e,i,m,a),n&&t.translate(D.x1,D.y1)},Lr.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},Lr.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,l=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,s=e.pstyle("text-outline-opacity").value*l,u=e.pstyle("color").value,h=e.pstyle("text-outline-color").value;t.font=r+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],l),this.colorStrokeStyle(t,h[0],h[1],h[2],s)},Lr.getTextAngle=function(t,e){var n=t._private.rscratch,i=t.pstyle((e?e+"-":"")+"text-rotation"),a=dn(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},Lr.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,l=i?e.effectiveOpacity():1;if(!i||0!==l&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,h=dn(o,"labelX",n),g=dn(o,"labelY",n),x=this.getLabelText(e,n);if(null!=x&&""!==x&&!isNaN(h)&&!isNaN(g)){this.setupTextStyle(t,e,i);var D,m=n?n+"-":"",T=dn(o,"labelWidth",n),_=dn(o,"labelHeight",n),L=e.pstyle(m+"text-margin-x").pfValue,P=e.pstyle(m+"text-margin-y").pfValue,C=e.isEdge(),V=e.pstyle("text-halign").value,B=e.pstyle("text-valign").value;switch(C&&(V="center",B="center"),h+=L,g+=P,0!==(D=r?this.getTextAngle(e,n):0)&&(t.translate(s=h,u=g),t.rotate(D),h=0,g=0),B){case"top":break;case"center":g+=_/2;break;case"bottom":g+=_}var F=e.pstyle("text-background-opacity").value,k=e.pstyle("text-border-opacity").value,U=e.pstyle("text-border-width").pfValue,$=e.pstyle("text-background-padding").pfValue;if(F>0||U>0&&k>0){var Q=h-$;switch(V){case"left":Q-=T;break;case"center":Q-=T/2}var it=g-_-$,ot=T+2*$,st=_+2*$;if(F>0){var yt=t.fillStyle,pt=e.pstyle("text-background-color").value;t.fillStyle="rgba("+pt[0]+","+pt[1]+","+pt[2]+","+F*l+")",0===e.pstyle("text-background-shape").strValue.indexOf("round")?Hu(t,Q,it,ot,st,2):t.fillRect(Q,it,ot,st),t.fillStyle=yt}if(U>0&&k>0){var Pt=t.strokeStyle,Lt=t.lineWidth,mt=e.pstyle("text-border-color").value,_t=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+mt[0]+","+mt[1]+","+mt[2]+","+k*l+")",t.lineWidth=U,t.setLineDash)switch(_t){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=U/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(Q,it,ot,st),"double"===_t){var xt=U/2;t.strokeRect(Q+xt,it+xt,ot-2*xt,st-2*xt)}t.setLineDash&&t.setLineDash([]),t.lineWidth=Lt,t.strokeStyle=Pt}}var Tt=2*e.pstyle("text-outline-width").pfValue;if(Tt>0&&(t.lineWidth=Tt),"wrap"===e.pstyle("text-wrap").value){var kt=dn(o,"labelWrapCachedLines",n),Bt=dn(o,"labelLineHeight",n),Xt=T/2,Yt=this.getLabelJustification(e);switch("auto"===Yt||("left"===V?"left"===Yt?h+=-T:"center"===Yt&&(h+=-Xt):"center"===V?"left"===Yt?h+=-Xt:"right"===Yt&&(h+=Xt):"right"===V&&("center"===Yt?h+=Xt:"right"===Yt&&(h+=T))),B){case"top":case"center":case"bottom":g-=(kt.length-1)*Bt}for(var jt=0;jt<kt.length;jt++)Tt>0&&t.strokeText(kt[jt],h,g),t.fillText(kt[jt],h,g),g+=Bt}else Tt>0&&t.strokeText(x,h,g),t.fillText(x,h,g);0!==D&&(t.rotate(-D),t.translate(-s,-u))}}};var Di={drawNode:function(t,e,n){var r,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,u=e._private,h=u.rscratch,g=e.position();if(M(g.x)&&M(g.y)&&(!l||e.visible())){var x,D,m=l?e.effectiveOpacity():1,T=s.usePaths(),_=!1,L=e.padding();r=e.width()+2*L,i=e.height()+2*L,n&&t.translate(-(D=n).x1,-D.y1);for(var C=e.pstyle("background-image").value,V=new Array(C.length),B=new Array(C.length),F=0,k=0;k<C.length;k++){var U=C[k];if(V[k]=null!=U&&"none"!==U){var Q=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",k);F++,B[k]=s.getCachedImage(U,Q,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var it=e.pstyle("background-blacken").value,ot=e.pstyle("border-width").pfValue,st=e.pstyle("background-opacity").value*m,yt=e.pstyle("border-color").value,pt=e.pstyle("border-style").value,et=e.pstyle("border-opacity").value*m;t.lineJoin="miter";var Pt=function(){s.eleFillStyle(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:st)},Lt=function(){s.colorStrokeStyle(t,yt[0],yt[1],yt[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:et)},mt=e.pstyle("shape").strValue,_t=e.pstyle("shape-polygon-points").pfValue;if(T){t.translate(g.x,g.y);var xt=s.nodePathCache=s.nodePathCache||[],Tt=Ai("polygon"===mt?mt+","+_t.join(","):mt,""+i,""+r),kt=xt[Tt];null!=kt?(_=!0,h.pathCache=x=kt):(x=new Path2D,xt[Tt]=h.pathCache=x)}var Bt=function(){if(!_){var Ct=g;T&&(Ct={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(x||t,Ct.x,Ct.y,r,i)}T?t.fill(x):t.fill()},Xt=function(){for(var Ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,Et=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ht=u.backgrounding,Gt=0,Kt=0;Kt<B.length;Kt++){var ae=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Kt);Et&&"over"===ae||!Et&&"inside"===ae?Gt++:V[Kt]&&B[Kt].complete&&!B[Kt].error&&(Gt++,s.drawInscribedImage(t,B[Kt],e,Kt,Ct))}u.backgrounding=Gt!==F,Ht!==u.backgrounding&&e.updateStyle(!1)},Yt=function(){var Ct=arguments.length>0&&void 0!==arguments[0]&&arguments[0],Et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;s.hasPie(e)&&(s.drawPie(t,e,Et),Ct&&(T||s.nodeShapes[s.getNodeShape(e)].draw(t,g.x,g.y,r,i)))},jt=function(){var Ht=it>0?0:255;0!==it&&(s.colorFillStyle(t,Ht,Ht,Ht,(it>0?it:-it)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m)),T?t.fill(x):t.fill())},Zt=function(){if(ot>0){if(t.lineWidth=ot,t.lineCap="butt",t.setLineDash)switch(pt){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(T?t.stroke(x):t.stroke(),"double"===pt){t.lineWidth=ot/3;var Ct=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",T?t.stroke(x):t.stroke(),t.globalCompositeOperation=Ct}t.setLineDash&&t.setLineDash([])}},ne=function(){o&&s.drawNodeOverlay(t,e,g,r,i)},le=function(){o&&s.drawNodeUnderlay(t,e,g,r,i)},zt=function(){s.drawElementText(t,e,null,a)};if("yes"===e.pstyle("ghost").value){var Qt=e.pstyle("ghost-offset-x").pfValue,z=e.pstyle("ghost-offset-y").pfValue,ut=e.pstyle("ghost-opacity").value,wt=ut*m;t.translate(Qt,z),Pt(ut*st),Bt(),Xt(wt,!0),Lt(ut*et),Zt(),Yt(0!==it||0!==ot),Xt(wt,!1),jt(wt),t.translate(-Qt,-z)}T&&t.translate(-g.x,-g.y),le(),T&&t.translate(g.x,g.y),Pt(),Bt(),Xt(m,!0),Lt(),Zt(),Yt(0!==it||0!==ot),Xt(m,!1),jt(),T&&t.translate(-g.x,-g.y),zt(),ne(),n&&t.translate(D.x1,D.y1)}}},qs=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n,r,i,a){if(n.visible()){var o=n.pstyle("".concat(t,"-padding")).pfValue,l=n.pstyle("".concat(t,"-opacity")).value,s=n.pstyle("".concat(t,"-color")).value,u=n.pstyle("".concat(t,"-shape")).value;if(l>0){if(r=r||n.position(),null==i||null==a){var h=n.padding();i=n.width()+2*h,a=n.height()+2*h}this.colorFillStyle(e,s[0],s[1],s[2],l),this.nodeShapes[u].draw(e,r.x,r.y,i+2*o,a+2*o),e.fill()}}}};Di.drawNodeOverlay=qs("overlay"),Di.drawNodeUnderlay=qs("underlay"),Di.hasPie=function(t){return(t=t[0])._private.hasPie},Di.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=r.x,l=r.y,s=e.width(),u=e.height(),h=Math.min(s,u)/2,g=0;this.usePaths()&&(o=0,l=0),"%"===a.units?h*=a.pfValue:void 0!==a.pfValue&&(h=a.pfValue/2);for(var x=1;x<=i.pieBackgroundN;x++){var D=e.pstyle("pie-"+x+"-background-size").value,m=e.pstyle("pie-"+x+"-background-color").value,T=e.pstyle("pie-"+x+"-background-opacity").value*n,_=D/100;_+g>1&&(_=1-g);var L=1.5*Math.PI+2*Math.PI*g,P=L+2*Math.PI*_;0===D||g>=1||g+_>1||(t.beginPath(),t.moveTo(o,l),t.arc(o,l,h,L,P),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],T),t.fill(),g+=_)}};for(var fn={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var a,o=this.usePaths(),l=n.pstyle(e+"-gradient-stop-colors").value,s=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),h=n.targetEndpoint(),g=n.midpoint(),x=Yn(u,g),D=Yn(h,g);a=t.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(x,D))}else{var m=o?{x:0,y:0}:n.position(),T=n.paddedWidth(),_=n.paddedHeight();a=t.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(T,_))}else if(n.isEdge()){var L=n.sourceEndpoint(),P=n.targetEndpoint();a=t.createLinearGradient(L.x,L.y,P.x,P.y)}else{var C=o?{x:0,y:0}:n.position(),V=n.paddedWidth()/2,B=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=t.createLinearGradient(C.x,C.y-B,C.x,C.y+B);break;case"to-top":a=t.createLinearGradient(C.x,C.y+B,C.x,C.y-B);break;case"to-left":a=t.createLinearGradient(C.x+V,C.y,C.x-V,C.y);break;case"to-right":a=t.createLinearGradient(C.x-V,C.y,C.x+V,C.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(C.x-V,C.y-B,C.x+V,C.y+B);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(C.x-V,C.y+B,C.x+V,C.y-B);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(C.x+V,C.y-B,C.x-V,C.y+B);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(C.x+V,C.y+B,C.x-V,C.y-B)}}if(!a)return null;for(var F=s.length===l.length,k=l.length,U=0;U<k;U++)a.addColorStop(F?s[U]:U/(k-1),"rgba("+l[U][0]+","+l[U][1]+","+l[U][2]+","+i+")");return a},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],a=r[3],o=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(o=e.motionBlurPxRatio);var s,u=i*o,h=a*o;if(u!==e.canvasWidth||h!==e.canvasHeight){e.fontCaches=null;var g=n.canvasContainer;g.style.width=i+"px",g.style.height=a+"px";for(var x=0;x<e.CANVAS_LAYERS;x++)(s=n.canvases[x]).width=u,s.height=h,s.style.width=i+"px",s.style.height=a+"px";for(x=0;x<e.BUFFER_COUNT;x++)(s=n.bufferCanvases[x]).width=u,s.height=h,s.style.width=i+"px",s.style.height=a+"px";e.textureMult=1,o<=1&&(s=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,s.width=u*e.textureMult,s.height=h*e.textureMult),e.canvasWidth=u,e.canvasHeight=h}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||Jr()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,a=t.forcedPan,o=this,l=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,s=o.cy,u=o.data,h=u.canvasNeedsRedraw,g=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),x=void 0!==t.motionBlur?t.motionBlur:o.motionBlur,D=o.motionBlurPxRatio,m=s.hasCompoundNodes(),T=o.hoverData.draggingEles,L=x=x&&!e&&o.motionBlurEnabled&&!(o.hoverData.selecting||o.touchData.selecting);e||(o.prevPxRatio!==l&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=l),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),x&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(L=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!g&&(h[o.NODE]=!0,h[o.SELECT_BOX]=!0);var P=s.style(),C=s.zoom(),V=void 0!==i?i:C,B=s.pan(),F={x:B.x,y:B.y},k={zoom:C,pan:{x:B.x,y:B.y}},U=o.prevViewport;void 0===U||k.zoom!==U.zoom||k.pan.x!==U.pan.x||k.pan.y!==U.pan.y||T&&!m||(o.motionBlurPxRatio=1),a&&(F=a),V*=l,F.x*=l,F.y*=l;var $=o.getCachedZSortedEles();function Q(zt,Wt,Qt,z,ut){var wt=zt.globalCompositeOperation;zt.globalCompositeOperation="destination-out",o.colorFillStyle(zt,255,255,255,o.motionBlurTransparency),zt.fillRect(Wt,Qt,z,ut),zt.globalCompositeOperation=wt}function it(zt,Wt){var Qt,z,ut,wt;o.clearingMotionBlur||zt!==u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&zt!==u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(Qt=F,z=V,ut=o.canvasWidth,wt=o.canvasHeight):(Qt={x:B.x*D,y:B.y*D},z=C*D,ut=o.canvasWidth*D,wt=o.canvasHeight*D),zt.setTransform(1,0,0,1,0,0),"motionBlur"===Wt?Q(zt,0,0,ut,wt):e||void 0!==Wt&&!Wt||zt.clearRect(0,0,ut,wt),n||(zt.translate(Qt.x,Qt.y),zt.scale(z,z)),a&&zt.translate(a.x,a.y),i&&zt.scale(i,i)}if(g||(o.textureDrawLastFrame=!1),g){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=s.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var ot=o.data.bufferContexts[o.TEXTURE_BUFFER];ot.setTransform(1,0,0,1,0,0),ot.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:ot,drawOnlyNodeLayer:!0,forcedPxRatio:l*o.textureMult}),(k=o.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}h[o.DRAG]=!1,h[o.NODE]=!1;var st=u.contexts[o.NODE],yt=o.textureCache.texture;k=o.textureCache.viewport,st.setTransform(1,0,0,1,0,0),x?Q(st,0,0,k.width,k.height):st.clearRect(0,0,k.width,k.height);var pt=P.core("outside-texture-bg-color").value,et=P.core("outside-texture-bg-opacity").value;o.colorFillStyle(st,pt[0],pt[1],pt[2],et),st.fillRect(0,0,k.width,k.height),C=s.zoom(),it(st,!1),st.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l),st.drawImage(yt,k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l)}else o.textureOnViewport&&!e&&(o.textureCache=null);var Pt=s.extent(),Lt=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),mt=o.hideEdgesOnViewport&&Lt,_t=[];if(_t[o.NODE]=!h[o.NODE]&&x&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,_t[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),_t[o.DRAG]=!h[o.DRAG]&&x&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,_t[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),h[o.NODE]||n||r||_t[o.NODE]){var xt=x&&!_t[o.NODE]&&1!==D;it(st=e||(xt?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),x&&!xt?"motionBlur":void 0),mt?o.drawCachedNodes(st,$.nondrag,l,Pt):o.drawLayeredElements(st,$.nondrag,l,Pt),o.debug&&o.drawDebugPoints(st,$.nondrag),n||x||(h[o.NODE]=!1)}if(!r&&(h[o.DRAG]||n||_t[o.DRAG])&&(xt=x&&!_t[o.DRAG]&&1!==D,it(st=e||(xt?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]),x&&!xt?"motionBlur":void 0),mt?o.drawCachedNodes(st,$.drag,l,Pt):o.drawCachedElements(st,$.drag,l,Pt),o.debug&&o.drawDebugPoints(st,$.drag),n||x||(h[o.DRAG]=!1)),o.showFps||!r&&h[o.SELECT_BOX]&&!n){if(it(st=e||u.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){C=o.cy.zoom();var Tt=P.core("selection-box-border-width").value/C;st.lineWidth=Tt,st.fillStyle="rgba("+P.core("selection-box-color").value[0]+","+P.core("selection-box-color").value[1]+","+P.core("selection-box-color").value[2]+","+P.core("selection-box-opacity").value+")",st.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),Tt>0&&(st.strokeStyle="rgba("+P.core("selection-box-border-color").value[0]+","+P.core("selection-box-border-color").value[1]+","+P.core("selection-box-border-color").value[2]+","+P.core("selection-box-opacity").value+")",st.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){C=o.cy.zoom();var kt=u.bgActivePosistion;st.fillStyle="rgba("+P.core("active-bg-color").value[0]+","+P.core("active-bg-color").value[1]+","+P.core("active-bg-color").value[2]+","+P.core("active-bg-opacity").value+")",st.beginPath(),st.arc(kt.x,kt.y,P.core("active-bg-size").pfValue/C,0,2*Math.PI),st.fill()}var Bt=o.lastRedrawTime;if(o.showFps&&Bt){Bt=Math.round(Bt);var Xt=Math.round(1e3/Bt);st.setTransform(1,0,0,1,0,0),st.fillStyle="rgba(255, 0, 0, 0.75)",st.strokeStyle="rgba(255, 0, 0, 0.75)",st.lineWidth=1,st.fillText("1 frame = "+Bt+" ms = "+Xt+" fps",0,20),st.strokeRect(0,30,250,20),st.fillRect(0,30,250*Math.min(Xt/60,1),20)}n||(h[o.SELECT_BOX]=!1)}if(x&&1!==D){var Zt=u.contexts[o.DRAG],ne=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],le=function(zt,Wt,Qt){zt.setTransform(1,0,0,1,0,0),Qt||!L?zt.clearRect(0,0,o.canvasWidth,o.canvasHeight):Q(zt,0,0,o.canvasWidth,o.canvasHeight),zt.drawImage(Wt,0,0,o.canvasWidth*D,o.canvasHeight*D,0,0,o.canvasWidth,o.canvasHeight)};(h[o.NODE]||_t[o.NODE])&&(le(u.contexts[o.NODE],o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],_t[o.NODE]),h[o.NODE]=!1),(h[o.DRAG]||_t[o.DRAG])&&(le(Zt,ne,_t[o.DRAG]),h[o.DRAG]=!1)}o.prevViewport=k,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),x&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!g,o.mbFrames=0,h[o.NODE]=!0,h[o.DRAG]=!0,o.redraw()},100)),e||s.emit("render")}},$s={drawPolygonPath:function(t,e,n,r,i,a){var o=r/2,l=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],n+l*a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(e+o*a[2*s],n+l*a[2*s+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,a){var o=r/2,l=i/2,s=hi(r,i);t.beginPath&&t.beginPath();for(var u=0;u<a.length/4;u++){var h,g;g=0===u?a.length-2:4*u-2,h=4*u+2;var x=e+o*a[4*u],D=n+l*a[4*u+1],T=s/Math.tan(Math.acos(-a[g]*a[h]-a[g+1]*a[h+1])/2),_=x-T*a[g],L=D-T*a[g+1],P=x+T*a[h],C=D+T*a[h+1];0===u?t.moveTo(_,L):t.lineTo(_,L),t.arcTo(x,D,P,C,s)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,l=xr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.arcTo(e+a,n-o,e+a,n,l),t.arcTo(e+a,n+o,e,n+o,l),t.arcTo(e-a,n+o,e-a,n,l),t.arcTo(e-a,n-o,e,n-o,l),t.lineTo(e,n-o),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,l=xr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.lineTo(e+a,n-o),t.lineTo(e+a,n),t.arcTo(e+a,n+o,e,n+o,l),t.arcTo(e-a,n+o,e-a,n,l),t.lineTo(e-a,n-o),t.lineTo(e,n-o),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-a+8,n-o),t.lineTo(e+a-8,n-o),t.lineTo(e+a,n-o+8),t.lineTo(e+a,n+o-8),t.lineTo(e+a-8,n+o),t.lineTo(e-a+8,n+o),t.lineTo(e-a,n+o-8),t.lineTo(e-a,n-o+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var a=r/2,o=i/2,l=e-a,s=e+a,u=n-o,h=n+o,g=Ui(r,i),x=g.widthOffset,D=g.heightOffset,m=g.ctrlPtOffsetPct*x;t.beginPath&&t.beginPath(),t.moveTo(l,u+D),t.lineTo(l,h-D),t.quadraticCurveTo(l+m,h,l+x,h),t.lineTo(s-x,h),t.quadraticCurveTo(s-m,h,s,h-D),t.lineTo(s,u+D),t.quadraticCurveTo(s-m,u,s-x,u),t.lineTo(l+x,u),t.quadraticCurveTo(l+m,u,l,u+D),t.closePath()}},Zs=Math.sin(0),js=Math.cos(0),go={},vo={},Ws=Math.PI/40,Zr=0*Math.PI;Zr<2*Math.PI;Zr+=Ws)go[Zr]=Math.sin(Zr),vo[Zr]=Math.cos(Zr);$s.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,l=r/2,s=i/2,u=0*Math.PI;u<2*Math.PI;u+=Ws)a=e-l*go[u]*Zs+l*vo[u]*js,o=n+s*vo[u]*Zs+s*go[u]*js,0===u?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var Li={};function Ks(t){var e=t.indexOf(",");return t.substr(e+1)}function Qs(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Or(function(i,a){try{e.toBlob(function(o){null!=o?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(o){a(o)}});case"blob":return function(i,a){for(var o=atob(i),l=new ArrayBuffer(o.length),s=new Uint8Array(l),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return new Blob([l],{type:a})}(Ks(r()),n);case"base64":return Ks(r());default:return r()}}Li.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Li.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],a=t.full?Math.ceil(n.h):r[3],o=M(t.maxWidth)||M(t.maxHeight),l=this.getPixelRatio(),s=1;if(void 0!==t.scale)i*=t.scale,a*=t.scale,s=t.scale;else if(o){var u=1/0,h=1/0;M(t.maxWidth)&&(u=s*t.maxWidth/i),M(t.maxHeight)&&(h=s*t.maxHeight/a),i*=s=Math.min(u,h),a*=s}o||(i*=l,a*=l,s*=l);var g=document.createElement("canvas");g.width=i,g.height=a,g.style.width=i+"px",g.style.height=a+"px";var x=g.getContext("2d");if(i>0&&a>0){x.clearRect(0,0,i,a),x.globalCompositeOperation="source-over";var D=this.getCachedZSortedEles();if(t.full)x.translate(-n.x1*s,-n.y1*s),x.scale(s,s),this.drawElements(x,D),x.scale(1/s,1/s),x.translate(n.x1*s,n.y1*s);else{var m=e.pan(),T={x:m.x*s,y:m.y*s};s*=e.zoom(),x.translate(T.x,T.y),x.scale(s,s),this.drawElements(x,D),x.scale(1/s,1/s),x.translate(-T.x,-T.y)}t.bg&&(x.globalCompositeOperation="destination-over",x.fillStyle=t.bg,x.rect(0,0,i,a),x.fill())}return g},Li.png=function(t){return Qs(t,this.bufferCanvasImage(t),"image/png")},Li.jpg=function(t){return Qs(t,this.bufferCanvasImage(t),"image/jpeg")};var Uu=Js,ye=Js.prototype;function Js(t){var e=this;e.data={canvases:new Array(ye.CANVAS_LAYERS),contexts:new Array(ye.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ye.CANVAS_LAYERS),bufferCanvases:new Array(ye.BUFFER_COUNT),bufferContexts:new Array(ye.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};b&&b.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var a=0;a<ye.CANVAS_LAYERS;a++){var o=e.data.canvases[a]=document.createElement("canvas");e.data.contexts[a]=o.getContext("2d"),Object.keys(i).forEach(function(F){o.style[F]=i[F]}),o.style.position="absolute",o.setAttribute("data-id","layer"+a),o.style.zIndex=String(ye.CANVAS_LAYERS-a),e.data.canvasContainer.appendChild(o),e.data.canvasNeedsRedraw[a]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[ye.NODE].setAttribute("data-id","layer"+ye.NODE+"-node"),e.data.canvases[ye.SELECT_BOX].setAttribute("data-id","layer"+ye.SELECT_BOX+"-selectbox"),e.data.canvases[ye.DRAG].setAttribute("data-id","layer"+ye.DRAG+"-drag"),a=0;a<ye.BUFFER_COUNT;a++)e.data.bufferCanvases[a]=document.createElement("canvas"),e.data.bufferContexts[a]=e.data.bufferCanvases[a].getContext("2d"),e.data.bufferCanvases[a].style.position="absolute",e.data.bufferCanvases[a].setAttribute("data-id","buffer"+a),e.data.bufferCanvases[a].style.zIndex=String(-a-1),e.data.bufferCanvases[a].style.visibility="hidden";e.pathsEnabled=!0;var l=Je(),s=function(F){return{x:-F.w/2,y:-F.h/2}},u=function(F){return F.boundingBox(),F[0]._private.bodyBounds},h=function(F){return F.boundingBox(),F[0]._private.labelBounds.main||l},g=function(F){return F.boundingBox(),F[0]._private.labelBounds.source||l},x=function(F){return F.boundingBox(),F[0]._private.labelBounds.target||l},D=function(F,k){return k},m=function(F,k,U){var $=F?F+"-":"";return{x:k.x+U.pstyle($+"text-margin-x").pfValue,y:k.y+U.pstyle($+"text-margin-y").pfValue}},T=function(F,k,U){var $=F[0]._private.rscratch;return{x:$[k],y:$[U]}},_=e.data.eleTxrCache=new Ei(e,{getKey:function(F){return F[0]._private.nodeKey},doesEleInvalidateKey:function(F){var k=F[0]._private;return k.oldBackgroundTimestamp!==k.backgroundTimestamp},drawElement:function(F,k,U,$,Q){return e.drawElement(F,k,U,!1,!1,Q)},getBoundingBox:u,getRotationPoint:function(F){return{x:((k=u(F)).x1+k.x2)/2,y:(k.y1+k.y2)/2};var k},getRotationOffset:function(F){return s(u(F))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),L=e.data.lblTxrCache=new Ei(e,{getKey:function(F){return F[0]._private.labelStyleKey},drawElement:function(F,k,U,$,Q){return e.drawElementText(F,k,U,$,"main",Q)},getBoundingBox:h,getRotationPoint:function(F){return m("",T(F,"labelX","labelY"),F)},getRotationOffset:function(F){var k=h(F),U=s(h(F));if(F.isNode()){switch(F.pstyle("text-halign").value){case"left":U.x=-k.w;break;case"right":U.x=0}switch(F.pstyle("text-valign").value){case"top":U.y=-k.h;break;case"bottom":U.y=0}}return U},isVisible:D}),P=e.data.slbTxrCache=new Ei(e,{getKey:function(F){return F[0]._private.sourceLabelStyleKey},drawElement:function(F,k,U,$,Q){return e.drawElementText(F,k,U,$,"source",Q)},getBoundingBox:g,getRotationPoint:function(F){return m("source",T(F,"sourceLabelX","sourceLabelY"),F)},getRotationOffset:function(F){return s(g(F))},isVisible:D}),C=e.data.tlbTxrCache=new Ei(e,{getKey:function(F){return F[0]._private.targetLabelStyleKey},drawElement:function(F,k,U,$,Q){return e.drawElementText(F,k,U,$,"target",Q)},getBoundingBox:x,getRotationPoint:function(F){return m("target",T(F,"targetLabelX","targetLabelY"),F)},getRotationOffset:function(F){return s(x(F))},isVisible:D}),V=e.data.lyrTxrCache=new Ys(e);e.onUpdateEleCalcs(function(F,k){_.invalidateElements(k),L.invalidateElements(k),P.invalidateElements(k),C.invalidateElements(k),V.invalidateElements(k);for(var U=0;U<k.length;U++){var $=k[U]._private;$.oldBackgroundTimestamp=$.backgroundTimestamp}});var B=function(F){for(var k=0;k<F.length;k++)V.enqueueElementRefinement(F[k].ele)};_.onDequeue(B),L.onDequeue(B),P.onDequeue(B),C.onDequeue(B)}ye.CANVAS_LAYERS=3,ye.SELECT_BOX=0,ye.DRAG=1,ye.NODE=2,ye.BUFFER_COUNT=3,ye.TEXTURE_BUFFER=0,ye.MOTIONBLUR_BUFFER_NODE=1,ye.MOTIONBLUR_BUFFER_DRAG=2,ye.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[ye.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[ye.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[ye.SELECT_BOX]=e}};var qu="undefined"!=typeof Path2D;ye.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},ye.usePaths=function(){return qu&&this.pathsEnabled},ye.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},ye.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},ye.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":ht(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[Hs,$r,lr,Xu,Lr,Di,fn,$s,Li,{nodeShapeImpl:function(t,e,n,r,i,a,o){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,a);case"polygon":return this.drawPolygonPath(e,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,a);case"barrel":return this.drawBarrelPath(e,n,r,i,a)}}}].forEach(function(t){W(ye,t)});var $u=[{type:"layout",extensions:Eu},{type:"renderer",extensions:[{name:"null",impl:Ss},{name:"base",impl:Fs},{name:"canvas",impl:Uu}]}],tl={},el={};function nl(t,e,n){var r=n,i=function(F){be("Can not register `"+e+"` for `"+t+"` since `"+F+"` already exists in the prototype and can not be overridden")};if("core"===t){if(xi.prototype[e])return i(e);xi.prototype[e]=n}else if("collection"===t){if(Ze.prototype[e])return i(e);Ze.prototype[e]=n}else if("layout"===t){for(var a=function(F){this.options=F,n.call(this,F),A(this._private)||(this._private={}),this._private.cy=F.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),l=[],s=0;s<l.length;s++){var u=l[s];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var h=n.prototype.stop;o.stop=function(){var F=this.options;if(F&&F.animate){var k=this.animations;if(k)for(var U=0;U<k.length;U++)k[U].stop()}return h?h.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var g=function(F){return F._private.cy},x={addEventFields:function(F,k){k.layout=F,k.cy=g(F),k.target=F},bubble:function(){return!0},parent:function(F){return g(F)}};W(o,{createEmitter:function(){return this._private.emitter=new oa(x,this),this},emitter:function(){return this._private.emitter},on:function(F,k){return this.emitter().on(F,k),this},one:function(F,k){return this.emitter().one(F,k),this},once:function(F,k){return this.emitter().one(F,k),this},removeListener:function(F,k){return this.emitter().removeListener(F,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(F,k){return this.emitter().emit(F,k),this}}),xe.eventAliasesOn(o),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var D=rl("renderer","base"),m=D.prototype,T=n,_=n.prototype,L=function(){D.apply(this,arguments),T.apply(this,arguments)},P=L.prototype;for(var C in m){var V=m[C];if(null!=_[C])return i(C);P[C]=V}for(var B in _)P[B]=_[B];m.clientFunctions.forEach(function(F){P[F]=P[F]||function(){_e("Renderer does not implement `renderer."+F+"()` on its prototype")}}),r=L}return Dt({map:tl,keys:[t,e],value:r})}function rl(t,e){return Ot({map:tl,keys:[t,e]})}function Zu(t,e,n,r,i){return Dt({map:el,keys:[t,e,n,r],value:i})}function ju(t,e,n,r){return Ot({map:el,keys:[t,e,n,r]})}var yo=function(){return 2===arguments.length?rl.apply(null,arguments):3===arguments.length?nl.apply(null,arguments):4===arguments.length?ju.apply(null,arguments):5===arguments.length?Zu.apply(null,arguments):void _e("Invalid extension access syntax")};xi.prototype.extension=yo,$u.forEach(function(t){t.extensions.forEach(function(e){nl(t.type,e.name,e.impl)})});var il=function t(){if(!(this instanceof t))return new t;this.length=0},Tr=il.prototype;Tr.instanceString=function(){return"stylesheet"},Tr.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Tr.css=function(t,e){var n=this.length-1;if(c(t))this[n].properties.push({name:t,value:e});else if(A(t))for(var r=t,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],l=r[o];if(null!=l){var s=rn.properties[o]||rn.properties[j(o)];null!=s&&this[n].properties.push({name:s.name,value:l})}}return this},Tr.style=Tr.css,Tr.generateStyle=function(t){var e=new rn(t);return this.appendToStyle(e)},Tr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],i=n.properties;t.selector(n.selector);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var Ir=function(t){return void 0===t&&(t={}),A(t)?new xi(t):c(t)?yo.apply(yo,arguments):void 0};return Ir.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ir),t.apply(null,e),this},Ir.warnings=function(t){return Qr(t)},Ir.version="3.20.0",Ir.stylesheet=Ir.Stylesheet=il,Ir}()},5805:function(we){we.exports=function(ht){var ct={};function gt(G){if(ct[G])return ct[G].exports;var N=ct[G]={i:G,l:!1,exports:{}};return ht[G].call(N.exports,N,N.exports,gt),N.l=!0,N.exports}return gt.m=ht,gt.c=ct,gt.i=function(G){return G},gt.d=function(G,N,I){gt.o(G,N)||Object.defineProperty(G,N,{configurable:!1,enumerable:!0,get:I})},gt.n=function(G){var N=G&&G.__esModule?function(){return G.default}:function(){return G};return gt.d(N,"a",N),N},gt.o=function(G,N){return Object.prototype.hasOwnProperty.call(G,N)},gt.p="",gt(gt.s=26)}([function(ht,ct,gt){"use strict";function G(){}G.QUALITY=1,G.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,G.DEFAULT_INCREMENTAL=!1,G.DEFAULT_ANIMATION_ON_LAYOUT=!0,G.DEFAULT_ANIMATION_DURING_LAYOUT=!1,G.DEFAULT_ANIMATION_PERIOD=50,G.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,G.DEFAULT_GRAPH_MARGIN=15,G.NODE_DIMENSIONS_INCLUDE_LABELS=!1,G.SIMPLE_NODE_HALF_SIZE=(G.SIMPLE_NODE_SIZE=40)/2,G.EMPTY_COMPOUND_NODE_SIZE=40,G.MIN_EDGE_LENGTH=1,G.INITIAL_WORLD_BOUNDARY=(G.WORLD_BOUNDARY=1e6)/1e3,G.WORLD_CENTER_X=1200,G.WORLD_CENTER_Y=900,ht.exports=G},function(ht,ct,gt){"use strict";var G=gt(2),N=gt(8),I=gt(9);function w(v,f,y){G.call(this,y),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=y,this.bendpoints=[],this.source=v,this.target=f}for(var b in w.prototype=Object.create(G.prototype),G)w[b]=G[b];w.prototype.getSource=function(){return this.source},w.prototype.getTarget=function(){return this.target},w.prototype.isInterGraph=function(){return this.isInterGraph},w.prototype.getLength=function(){return this.length},w.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},w.prototype.getBendpoints=function(){return this.bendpoints},w.prototype.getLca=function(){return this.lca},w.prototype.getSourceInLca=function(){return this.sourceInLca},w.prototype.getTargetInLca=function(){return this.targetInLca},w.prototype.getOtherEnd=function(v){if(this.source===v)return this.target;if(this.target===v)return this.source;throw"Node is not incident with this edge"},w.prototype.getOtherEndInGraph=function(v,f){for(var y=this.getOtherEnd(v),d=f.getGraphManager().getRoot();;){if(y.getOwner()==f)return y;if(y.getOwner()==d)break;y=y.getOwner().getParent()}return null},w.prototype.updateLength=function(){var v=new Array(4);this.isOverlapingSourceAndTarget=N.getIntersection(this.target.getRect(),this.source.getRect(),v),this.isOverlapingSourceAndTarget||(this.lengthX=v[0]-v[2],this.lengthY=v[1]-v[3],Math.abs(this.lengthX)<1&&(this.lengthX=I.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=I.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},w.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=I.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=I.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},ht.exports=w},function(ht,ct,gt){"use strict";ht.exports=function(N){this.vGraphObject=N}},function(ht,ct,gt){"use strict";var G=gt(2),N=gt(10),I=gt(13),w=gt(0),b=gt(16),v=gt(4);function f(d,p,c,E){null==c&&null==E&&(E=p),G.call(this,E),null!=d.graphManager&&(d=d.graphManager),this.estimatedSize=N.MIN_VALUE,this.inclusionTreeDepth=N.MAX_VALUE,this.vGraphObject=E,this.edges=[],this.graphManager=d,this.rect=null!=c&&null!=p?new I(p.x,p.y,c.width,c.height):new I}for(var y in f.prototype=Object.create(G.prototype),G)f[y]=G[y];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new v(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new v(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,p){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=p.width,this.rect.height=p.height},f.prototype.setCenter=function(d,p){this.rect.x=d-this.rect.width/2,this.rect.y=p-this.rect.height/2},f.prototype.setLocation=function(d,p){this.rect.x=d,this.rect.y=p},f.prototype.moveBy=function(d,p){this.rect.x+=d,this.rect.y+=p},f.prototype.getEdgeListToNode=function(d){var p=[],E=this;return E.edges.forEach(function(S){if(S.target==d){if(S.source!=E)throw"Incorrect edge source!";p.push(S)}}),p},f.prototype.getEdgesBetween=function(d){var p=[],E=this;return E.edges.forEach(function(S){if(S.source!=E&&S.target!=E)throw"Incorrect edge source and/or target";(S.target==d||S.source==d)&&p.push(S)}),p},f.prototype.getNeighborsList=function(){var d=new Set,p=this;return p.edges.forEach(function(c){if(c.source==p)d.add(c.target);else{if(c.target!=p)throw"Incorrect incidency!";d.add(c.source)}}),d},f.prototype.withChildren=function(){var d=new Set;if(d.add(this),null!=this.child)for(var E=this.child.getNodes(),S=0;S<E.length;S++)E[S].withChildren().forEach(function(A){d.add(A)});return d},f.prototype.getNoOfChildren=function(){var d=0;if(null==this.child)d=1;else for(var c=this.child.getNodes(),E=0;E<c.length;E++)d+=c[E].getNoOfChildren();return 0==d&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==N.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,p,c=-w.INITIAL_WORLD_BOUNDARY,E=w.INITIAL_WORLD_BOUNDARY;d=w.WORLD_CENTER_X+b.nextDouble()*(E-c)+c;var S=-w.INITIAL_WORLD_BOUNDARY,A=w.INITIAL_WORLD_BOUNDARY;p=w.WORLD_CENTER_Y+b.nextDouble()*(A-S)+S,this.rect.x=d,this.rect.y=p},f.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),w.NODE_DIMENSIONS_INCLUDE_LABELS){var p=d.getRight()-d.getLeft(),c=d.getBottom()-d.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>c&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-c)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-c),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==N.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var p=this.rect.x;p>w.WORLD_BOUNDARY?p=w.WORLD_BOUNDARY:p<-w.WORLD_BOUNDARY&&(p=-w.WORLD_BOUNDARY);var c=this.rect.y;c>w.WORLD_BOUNDARY?c=w.WORLD_BOUNDARY:c<-w.WORLD_BOUNDARY&&(c=-w.WORLD_BOUNDARY);var E=new v(p,c),S=d.inverseTransformPoint(E);this.setLocation(S.x,S.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},ht.exports=f},function(ht,ct,gt){"use strict";function G(N,I){null==N&&null==I?(this.x=0,this.y=0):(this.x=N,this.y=I)}G.prototype.getX=function(){return this.x},G.prototype.getY=function(){return this.y},G.prototype.setX=function(N){this.x=N},G.prototype.setY=function(N){this.y=N},G.prototype.getDifference=function(N){return new DimensionD(this.x-N.x,this.y-N.y)},G.prototype.getCopy=function(){return new G(this.x,this.y)},G.prototype.translate=function(N){return this.x+=N.width,this.y+=N.height,this},ht.exports=G},function(ht,ct,gt){"use strict";var G=gt(2),N=gt(10),I=gt(0),w=gt(6),b=gt(3),v=gt(1),f=gt(13),y=gt(12),d=gt(11);function p(E,S,A){G.call(this,A),this.estimatedSize=N.MIN_VALUE,this.margin=I.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=E,null!=S&&S instanceof w?this.graphManager=S:null!=S&&S instanceof Layout&&(this.graphManager=S.graphManager)}for(var c in p.prototype=Object.create(G.prototype),G)p[c]=G[c];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(E,S,A){if(null==S&&null==A){var M=E;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(M)>-1)throw"Node already in graph!";return M.owner=this,this.getNodes().push(M),M}var R=E;if(!(this.getNodes().indexOf(S)>-1&&this.getNodes().indexOf(A)>-1))throw"Source or target not in graph!";if(S.owner!=A.owner||S.owner!=this)throw"Both owners must be this graph!";return S.owner!=A.owner?null:(R.source=S,R.target=A,R.isInterGraph=!1,this.getEdges().push(R),S.edges.push(R),A!=S&&A.edges.push(R),R)},p.prototype.remove=function(E){var S=E;if(E instanceof b){if(null==S)throw"Node is null!";if(null==S.owner||S.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var A=S.edges.slice(),R=A.length,X=0;X<R;X++)(M=A[X]).isInterGraph?this.graphManager.remove(M):M.source.owner.remove(M);if(-1==(at=this.nodes.indexOf(S)))throw"Node not in owner node list!";this.nodes.splice(at,1)}else if(E instanceof v){var M;if(null==(M=E))throw"Edge is null!";if(null==M.source||null==M.target)throw"Source and/or target is null!";if(null==M.source.owner||null==M.target.owner||M.source.owner!=this||M.target.owner!=this)throw"Source and/or target owner is invalid!";var at,dt=M.source.edges.indexOf(M),At=M.target.edges.indexOf(M);if(!(dt>-1&&At>-1))throw"Source and/or target doesn't know this edge!";if(M.source.edges.splice(dt,1),M.target!=M.source&&M.target.edges.splice(At,1),-1==(at=M.source.owner.getEdges().indexOf(M)))throw"Not in owner's edge list!";M.source.owner.getEdges().splice(at,1)}},p.prototype.updateLeftTop=function(){for(var A,M,R,E=N.MAX_VALUE,S=N.MAX_VALUE,X=this.getNodes(),at=X.length,dt=0;dt<at;dt++){var At=X[dt];E>(A=At.getTop())&&(E=A),S>(M=At.getLeft())&&(S=M)}return E==N.MAX_VALUE?null:(R=null!=X[0].getParent().paddingLeft?X[0].getParent().paddingLeft:this.margin,this.left=S-R,this.top=E-R,new y(this.left,this.top))},p.prototype.updateBounds=function(E){for(var X,at,dt,At,q,S=N.MAX_VALUE,A=-N.MAX_VALUE,M=N.MAX_VALUE,R=-N.MAX_VALUE,Z=this.nodes,nt=Z.length,O=0;O<nt;O++){var H=Z[O];E&&null!=H.child&&H.updateBounds(),S>(X=H.getLeft())&&(S=X),A<(at=H.getRight())&&(A=at),M>(dt=H.getTop())&&(M=dt),R<(At=H.getBottom())&&(R=At)}var j=new f(S,M,A-S,R-M);S==N.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),q=null!=Z[0].getParent().paddingLeft?Z[0].getParent().paddingLeft:this.margin,this.left=j.x-q,this.right=j.x+j.width+q,this.top=j.y-q,this.bottom=j.y+j.height+q},p.calculateBounds=function(E){for(var X,at,dt,At,S=N.MAX_VALUE,A=-N.MAX_VALUE,M=N.MAX_VALUE,R=-N.MAX_VALUE,q=E.length,Z=0;Z<q;Z++){var nt=E[Z];S>(X=nt.getLeft())&&(S=X),A<(at=nt.getRight())&&(A=at),M>(dt=nt.getTop())&&(M=dt),R<(At=nt.getBottom())&&(R=At)}return new f(S,M,A-S,R-M)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==N.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var E=0,S=this.nodes,A=S.length,M=0;M<A;M++)E+=S[M].calcEstimatedSize();return this.estimatedSize=0==E?I.EMPTY_COMPOUND_NODE_SIZE:E/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var E=this;if(0!=this.nodes.length){var R,X,S=new d,A=new Set,M=this.nodes[0];for(M.withChildren().forEach(function(O){S.push(O),A.add(O)});0!==S.length;)for(var dt=(R=(M=S.shift()).getEdges()).length,At=0;At<dt;At++)null==(X=R[At].getOtherEndInGraph(M,this))||A.has(X)||X.withChildren().forEach(function(O){S.push(O),A.add(O)});if(this.isConnected=!1,A.size>=this.nodes.length){var nt=0;A.forEach(function(O){O.owner==E&&nt++}),nt==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},ht.exports=p},function(ht,ct,gt){"use strict";var G,N=gt(1);function I(w){G=gt(5),this.layout=w,this.graphs=[],this.edges=[]}I.prototype.addRoot=function(){var w=this.layout.newGraph(),b=this.layout.newNode(null),v=this.add(w,b);return this.setRootGraph(v),this.rootGraph},I.prototype.add=function(w,b,v,f,y){if(null==v&&null==f&&null==y){if(null==w)throw"Graph is null!";if(null==b)throw"Parent node is null!";if(this.graphs.indexOf(w)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(w),null!=w.parent)throw"Already has a parent!";if(null!=b.child)throw"Already has a child!";return w.parent=b,b.child=w,w}y=v,v=w;var d=(f=b).getOwner(),p=y.getOwner();if(null==d||d.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==p||p.getGraphManager()!=this)throw"Target not in this graph mgr!";if(d==p)return v.isInterGraph=!1,d.add(v,f,y);if(v.isInterGraph=!0,v.source=f,v.target=y,this.edges.indexOf(v)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(v),null==v.source||null==v.target)throw"Edge source and/or target is null!";if(-1!=v.source.edges.indexOf(v)||-1!=v.target.edges.indexOf(v))throw"Edge already in source and/or target incidency list!";return v.source.edges.push(v),v.target.edges.push(v),v},I.prototype.remove=function(w){if(w instanceof G){var b=w;if(b.getGraphManager()!=this)throw"Graph not in this graph mgr";if(b!=this.rootGraph&&(null==b.parent||b.parent.graphManager!=this))throw"Invalid parent node!";for(var f,v=[],y=(v=v.concat(b.getEdges())).length,d=0;d<y;d++)b.remove(f=v[d]);var p=[];for(y=(p=p.concat(b.getNodes())).length,d=0;d<y;d++)b.remove(p[d]);b==this.rootGraph&&this.setRootGraph(null);var E=this.graphs.indexOf(b);this.graphs.splice(E,1),b.parent=null}else if(w instanceof N){if(null==(f=w))throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(null==f.source||null==f.target)throw"Source and/or target is null!";if(-1==f.source.edges.indexOf(f)||-1==f.target.edges.indexOf(f))throw"Source and/or target doesn't know this edge!";if(E=f.source.edges.indexOf(f),f.source.edges.splice(E,1),E=f.target.edges.indexOf(f),f.target.edges.splice(E,1),null==f.source.owner||null==f.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==f.source.owner.getGraphManager().edges.indexOf(f))throw"Not in owner graph manager's edge list!";E=f.source.owner.getGraphManager().edges.indexOf(f),f.source.owner.getGraphManager().edges.splice(E,1)}},I.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},I.prototype.getGraphs=function(){return this.graphs},I.prototype.getAllNodes=function(){if(null==this.allNodes){for(var w=[],b=this.getGraphs(),v=b.length,f=0;f<v;f++)w=w.concat(b[f].getNodes());this.allNodes=w}return this.allNodes},I.prototype.resetAllNodes=function(){this.allNodes=null},I.prototype.resetAllEdges=function(){this.allEdges=null},I.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},I.prototype.getAllEdges=function(){if(null==this.allEdges){for(var w=[],b=this.getGraphs(),f=0;f<b.length;f++)w=w.concat(b[f].getEdges());w=w.concat(this.edges),this.allEdges=w}return this.allEdges},I.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},I.prototype.setAllNodesToApplyGravitation=function(w){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=w},I.prototype.getRoot=function(){return this.rootGraph},I.prototype.setRootGraph=function(w){if(w.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=w,null==w.parent&&(w.parent=this.layout.newNode("Root node"))},I.prototype.getLayout=function(){return this.layout},I.prototype.isOneAncestorOfOther=function(w,b){if(null==w||null==b)throw"assert failed";if(w==b)return!0;for(var f,v=w.getOwner();null!=(f=v.getParent());){if(f==b)return!0;if(null==(v=f.getOwner()))break}for(v=b.getOwner();null!=(f=v.getParent());){if(f==w)return!0;if(null==(v=f.getOwner()))break}return!1},I.prototype.calcLowestCommonAncestors=function(){for(var w,b,v,f,y,d=this.getAllEdges(),p=d.length,c=0;c<p;c++)if(b=(w=d[c]).source,v=w.target,w.lca=null,w.sourceInLca=b,w.targetInLca=v,b!=v){for(f=b.getOwner();null==w.lca;){for(w.targetInLca=v,y=v.getOwner();null==w.lca;){if(y==f){w.lca=y;break}if(y==this.rootGraph)break;if(null!=w.lca)throw"assert failed";w.targetInLca=y.getParent(),y=w.targetInLca.getOwner()}if(f==this.rootGraph)break;null==w.lca&&(w.sourceInLca=f.getParent(),f=w.sourceInLca.getOwner())}if(null==w.lca)throw"assert failed"}else w.lca=b.getOwner()},I.prototype.calcLowestCommonAncestor=function(w,b){if(w==b)return w.getOwner();for(var v=w.getOwner();null!=v;){for(var f=b.getOwner();null!=f;){if(f==v)return f;f=f.getParent().getOwner()}v=v.getParent().getOwner()}return v},I.prototype.calcInclusionTreeDepths=function(w,b){null==w&&null==b&&(w=this.rootGraph,b=1);for(var v,f=w.getNodes(),y=f.length,d=0;d<y;d++)(v=f[d]).inclusionTreeDepth=b,null!=v.child&&this.calcInclusionTreeDepths(v.child,b+1)},I.prototype.includesInvalidEdge=function(){for(var w,b=this.edges.length,v=0;v<b;v++)if(this.isOneAncestorOfOther((w=this.edges[v]).source,w.target))return!0;return!1},ht.exports=I},function(ht,ct,gt){"use strict";var G=gt(0);function N(){}for(var I in G)N[I]=G[I];N.MAX_ITERATIONS=2500,N.DEFAULT_EDGE_LENGTH=50,N.DEFAULT_SPRING_STRENGTH=.45,N.DEFAULT_REPULSION_STRENGTH=4500,N.DEFAULT_GRAVITY_STRENGTH=.4,N.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,N.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,N.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,N.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,N.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,N.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,N.COOLING_ADAPTATION_FACTOR=.33,N.ADAPTATION_LOWER_NODE_LIMIT=1e3,N.ADAPTATION_UPPER_NODE_LIMIT=5e3,N.MAX_NODE_DISPLACEMENT=3*(N.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),N.MIN_REPULSION_DIST=N.DEFAULT_EDGE_LENGTH/10,N.CONVERGENCE_CHECK_PERIOD=100,N.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,N.MIN_EDGE_LENGTH=1,N.GRID_CALCULATION_CHECK_PERIOD=10,ht.exports=N},function(ht,ct,gt){"use strict";var G=gt(12);function N(){}N.calcSeparationAmount=function(I,w,b,v){if(!I.intersects(w))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(I,w,f),b[0]=Math.min(I.getRight(),w.getRight())-Math.max(I.x,w.x),b[1]=Math.min(I.getBottom(),w.getBottom())-Math.max(I.y,w.y),I.getX()<=w.getX()&&I.getRight()>=w.getRight()?b[0]+=Math.min(w.getX()-I.getX(),I.getRight()-w.getRight()):w.getX()<=I.getX()&&w.getRight()>=I.getRight()&&(b[0]+=Math.min(I.getX()-w.getX(),w.getRight()-I.getRight())),I.getY()<=w.getY()&&I.getBottom()>=w.getBottom()?b[1]+=Math.min(w.getY()-I.getY(),I.getBottom()-w.getBottom()):w.getY()<=I.getY()&&w.getBottom()>=I.getBottom()&&(b[1]+=Math.min(I.getY()-w.getY(),w.getBottom()-I.getBottom()));var y=Math.abs((w.getCenterY()-I.getCenterY())/(w.getCenterX()-I.getCenterX()));w.getCenterY()===I.getCenterY()&&w.getCenterX()===I.getCenterX()&&(y=1);var d=y*b[0],p=b[1]/y;b[0]<p?p=b[0]:d=b[1],b[0]=-1*f[0]*(p/2+v),b[1]=-1*f[1]*(d/2+v)},N.decideDirectionsForOverlappingNodes=function(I,w,b){b[0]=I.getCenterX()<w.getCenterX()?-1:1,b[1]=I.getCenterY()<w.getCenterY()?-1:1},N.getIntersection2=function(I,w,b){var v=I.getCenterX(),f=I.getCenterY(),y=w.getCenterX(),d=w.getCenterY();if(I.intersects(w))return b[0]=v,b[1]=f,b[2]=y,b[3]=d,!0;var p=I.getX(),c=I.getY(),E=I.getRight(),S=I.getX(),A=I.getBottom(),M=I.getRight(),R=I.getWidthHalf(),X=I.getHeightHalf(),at=w.getX(),dt=w.getY(),At=w.getRight(),q=w.getX(),Z=w.getBottom(),nt=w.getRight(),O=w.getWidthHalf(),H=w.getHeightHalf(),j=!1,J=!1;if(v===y){if(f>d)return b[0]=v,b[1]=c,b[2]=y,b[3]=Z,!1;if(f<d)return b[0]=v,b[1]=A,b[2]=y,b[3]=dt,!1}else if(f===d){if(v>y)return b[0]=p,b[1]=f,b[2]=At,b[3]=d,!1;if(v<y)return b[0]=E,b[1]=f,b[2]=at,b[3]=d,!1}else{var rt=I.height/I.width,bt=w.height/w.width,Nt=(d-f)/(y-v),W=void 0,tt=void 0,Dt=void 0,It=void 0;if(-rt===Nt?v>y?(b[0]=S,b[1]=A,j=!0):(b[0]=E,b[1]=c,j=!0):rt===Nt&&(v>y?(b[0]=p,b[1]=c,j=!0):(b[0]=M,b[1]=A,j=!0)),-bt===Nt?y>v?(b[2]=q,b[3]=Z,J=!0):(b[2]=At,b[3]=dt,J=!0):bt===Nt&&(y>v?(b[2]=at,b[3]=dt,J=!0):(b[2]=nt,b[3]=Z,J=!0)),j&&J)return!1;if(v>y?f>d?(W=this.getCardinalDirection(rt,Nt,4),tt=this.getCardinalDirection(bt,Nt,2)):(W=this.getCardinalDirection(-rt,Nt,3),tt=this.getCardinalDirection(-bt,Nt,1)):f>d?(W=this.getCardinalDirection(-rt,Nt,1),tt=this.getCardinalDirection(-bt,Nt,3)):(W=this.getCardinalDirection(rt,Nt,2),tt=this.getCardinalDirection(bt,Nt,4)),!j)switch(W){case 1:Dt=c,b[0]=v+-X/Nt,b[1]=Dt;break;case 2:Dt=f+R*Nt,b[0]=M,b[1]=Dt;break;case 3:Dt=A,b[0]=v+X/Nt,b[1]=Dt;break;case 4:Dt=f+-R*Nt,b[0]=S,b[1]=Dt}if(!J)switch(tt){case 1:It=dt,b[2]=y+-H/Nt,b[3]=It;break;case 2:It=d+O*Nt,b[2]=nt,b[3]=It;break;case 3:It=Z,b[2]=y+H/Nt,b[3]=It;break;case 4:It=d+-O*Nt,b[2]=q,b[3]=It}}return!1},N.getCardinalDirection=function(I,w,b){return I>w?b:1+b%4},N.getIntersection=function(I,w,b,v){if(null==v)return this.getIntersection2(I,w,b);var X,at,dt,At,q,Z,nt,f=I.x,y=I.y,d=w.x,p=w.y,c=b.x,E=b.y,S=v.x,A=v.y;return q=d*y-f*p,Z=S*E-c*A,0==(nt=(X=p-y)*(At=c-S)-(at=A-E)*(dt=f-d))?null:new G((dt*Z-At*q)/nt,(at*q-X*Z)/nt)},N.angleOfVector=function(I,w,b,v){var f=void 0;return I!==b?(f=Math.atan((v-w)/(b-I)),b<I?f+=Math.PI:v<w&&(f+=this.TWO_PI)):f=v<w?this.ONE_AND_HALF_PI:this.HALF_PI,f},N.doIntersect=function(I,w,b,v){var f=I.x,y=I.y,d=w.x,p=w.y,c=b.x,E=b.y,S=v.x,A=v.y,M=(d-f)*(A-E)-(S-c)*(p-y);if(0===M)return!1;var R=((A-E)*(S-f)+(c-S)*(A-y))/M,X=((y-p)*(S-f)+(d-f)*(A-y))/M;return 0<R&&R<1&&0<X&&X<1},N.HALF_PI=.5*Math.PI,N.ONE_AND_HALF_PI=1.5*Math.PI,N.TWO_PI=2*Math.PI,N.THREE_PI=3*Math.PI,ht.exports=N},function(ht,ct,gt){"use strict";function G(){}G.sign=function(N){return N>0?1:N<0?-1:0},G.floor=function(N){return N<0?Math.ceil(N):Math.floor(N)},G.ceil=function(N){return N<0?Math.floor(N):Math.ceil(N)},ht.exports=G},function(ht,ct,gt){"use strict";function G(){}G.MAX_VALUE=2147483647,G.MIN_VALUE=-2147483648,ht.exports=G},function(ht,ct,gt){"use strict";var G=function(){function f(y,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(y,c.key,c)}}return function(y,d,p){return d&&f(y.prototype,d),p&&f(y,p),y}}();var I=function(y){return{value:y,next:null,prev:null}},w=function(y,d,p,c){return null!==y?y.next=d:c.head=d,null!==p?p.prev=d:c.tail=d,d.prev=y,d.next=p,c.length++,d},b=function(y,d){var p=y.prev,c=y.next;return null!==p?p.next=c:d.head=c,null!==c?c.prev=p:d.tail=p,y.prev=y.next=null,d.length--,y},v=function(){function f(y){var d=this;(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.length=0,this.head=null,this.tail=null,null!=y&&y.forEach(function(p){return d.push(p)})}return G(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,p){return w(p.prev,I(d),p,this)}},{key:"insertAfter",value:function(d,p){return w(p,I(d),p.next,this)}},{key:"insertNodeBefore",value:function(d,p){return w(p.prev,d,p,this)}},{key:"insertNodeAfter",value:function(d,p){return w(p,d,p.next,this)}},{key:"push",value:function(d){return w(this.tail,I(d),null,this)}},{key:"unshift",value:function(d){return w(null,I(d),this.head,this)}},{key:"remove",value:function(d){return b(d,this)}},{key:"pop",value:function(){return b(this.tail,this).value}},{key:"popNode",value:function(){return b(this.tail,this)}},{key:"shift",value:function(){return b(this.head,this).value}},{key:"shiftNode",value:function(){return b(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var p=1,c=this.head;p<d;)c=c.next,p++;return c.value}}},{key:"set_object_at",value:function(d,p){if(d<=this.length()){for(var c=1,E=this.head;c<d;)E=E.next,c++;E.value=p}}}]),f}();ht.exports=v},function(ht,ct,gt){"use strict";function G(N,I,w){this.x=null,this.y=null,null==N&&null==I&&null==w?(this.x=0,this.y=0):"number"==typeof N&&"number"==typeof I&&null==w?(this.x=N,this.y=I):"Point"==N.constructor.name&&null==I&&null==w&&(this.x=(w=N).x,this.y=w.y)}G.prototype.getX=function(){return this.x},G.prototype.getY=function(){return this.y},G.prototype.getLocation=function(){return new G(this.x,this.y)},G.prototype.setLocation=function(N,I,w){"Point"==N.constructor.name&&null==I&&null==w?this.setLocation((w=N).x,w.y):"number"==typeof N&&"number"==typeof I&&null==w&&(parseInt(N)==N&&parseInt(I)==I?this.move(N,I):(this.x=Math.floor(N+.5),this.y=Math.floor(I+.5)))},G.prototype.move=function(N,I){this.x=N,this.y=I},G.prototype.translate=function(N,I){this.x+=N,this.y+=I},G.prototype.equals=function(N){return"Point"==N.constructor.name?this.x==N.x&&this.y==N.y:this==N},G.prototype.toString=function(){return(new G).constructor.name+"[x="+this.x+",y="+this.y+"]"},ht.exports=G},function(ht,ct,gt){"use strict";function G(N,I,w,b){this.x=0,this.y=0,this.width=0,this.height=0,null!=N&&null!=I&&null!=w&&null!=b&&(this.x=N,this.y=I,this.width=w,this.height=b)}G.prototype.getX=function(){return this.x},G.prototype.setX=function(N){this.x=N},G.prototype.getY=function(){return this.y},G.prototype.setY=function(N){this.y=N},G.prototype.getWidth=function(){return this.width},G.prototype.setWidth=function(N){this.width=N},G.prototype.getHeight=function(){return this.height},G.prototype.setHeight=function(N){this.height=N},G.prototype.getRight=function(){return this.x+this.width},G.prototype.getBottom=function(){return this.y+this.height},G.prototype.intersects=function(N){return!(this.getRight()<N.x||this.getBottom()<N.y||N.getRight()<this.x||N.getBottom()<this.y)},G.prototype.getCenterX=function(){return this.x+this.width/2},G.prototype.getMinX=function(){return this.getX()},G.prototype.getMaxX=function(){return this.getX()+this.width},G.prototype.getCenterY=function(){return this.y+this.height/2},G.prototype.getMinY=function(){return this.getY()},G.prototype.getMaxY=function(){return this.getY()+this.height},G.prototype.getWidthHalf=function(){return this.width/2},G.prototype.getHeightHalf=function(){return this.height/2},ht.exports=G},function(ht,ct,gt){"use strict";var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I};function N(){}N.lastID=0,N.createID=function(I){return N.isPrimitive(I)?I:(null!=I.uniqueID||(I.uniqueID=N.getString(),N.lastID++),I.uniqueID)},N.getString=function(I){return null==I&&(I=N.lastID),"Object#"+I},N.isPrimitive=function(I){var w=void 0===I?"undefined":G(I);return null==I||"object"!=w&&"function"!=w},ht.exports=N},function(ht,ct,gt){"use strict";function G(c){if(Array.isArray(c)){for(var E=0,S=Array(c.length);E<c.length;E++)S[E]=c[E];return S}return Array.from(c)}var N=gt(0),I=gt(6),w=gt(3),b=gt(1),v=gt(5),f=gt(4),y=gt(17),d=gt(27);function p(c){d.call(this),this.layoutQuality=N.QUALITY,this.createBendsAsNeeded=N.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=N.DEFAULT_INCREMENTAL,this.animationOnLayout=N.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=N.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=N.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=N.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new I(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=c&&(this.isRemoteUse=c)}p.RANDOM_SEED=1,(p.prototype=Object.create(d.prototype)).getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var c=new I(this);return this.graphManager=c,c},p.prototype.newGraph=function(c){return new v(null,this.graphManager,c)},p.prototype.newNode=function(c){return new w(this.graphManager,c)},p.prototype.newEdge=function(c){return new b(null,null,c)},p.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var c;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),c=!this.checkLayoutSuccess()&&this.layout(),"during"!==N.ANIMATE&&(c&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,c)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var E=this.graphManager.getAllEdges(),S=0;S<E.length;S++);var M=this.graphManager.getRoot().getNodes();for(S=0;S<M.length;S++);this.update(this.graphManager.getRoot())}},p.prototype.update=function(c){if(null==c)this.update2();else if(c instanceof w){var E=c;if(null!=E.getChild())for(var S=E.getChild().getNodes(),A=0;A<S.length;A++)update(S[A]);null!=E.vGraphObject&&E.vGraphObject.update(E)}else c instanceof b?null!=c.vGraphObject&&c.vGraphObject.update(c):c instanceof v&&null!=c.vGraphObject&&c.vGraphObject.update(c)},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=N.QUALITY,this.animationDuringLayout=N.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=N.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=N.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=N.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=N.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=N.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(c){if(null==c)this.transform(new f(0,0));else{var E=new y,S=this.graphManager.getRoot().updateLeftTop();if(null!=S){E.setWorldOrgX(c.x),E.setWorldOrgY(c.y),E.setDeviceOrgX(S.x),E.setDeviceOrgY(S.y);for(var A=this.getAllNodes(),R=0;R<A.length;R++)A[R].transform(E)}}},p.prototype.positionNodesRandomly=function(c){if(null==c)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var E,S,A=c.getNodes(),M=0;M<A.length;M++)null==(S=(E=A[M]).getChild())||0==S.getNodes().length?E.scatter():(this.positionNodesRandomly(S),E.updateBounds())},p.prototype.getFlatForest=function(){for(var c=[],E=!0,S=this.graphManager.getRoot().getNodes(),A=!0,M=0;M<S.length;M++)null!=S[M].getChild()&&(A=!1);if(!A)return c;var R=new Set,X=[],at=new Map,dt=[];for(dt=dt.concat(S);dt.length>0&&E;){for(X.push(dt[0]);X.length>0&&E;){var At=X[0];X.splice(0,1),R.add(At);var q=At.getEdges();for(M=0;M<q.length;M++){var Z=q[M].getOtherEnd(At);if(at.get(At)!=Z){if(R.has(Z)){E=!1;break}X.push(Z),at.set(Z,At)}}}if(E){var nt=[].concat(G(R));for(c.push(nt),M=0;M<nt.length;M++){var H=dt.indexOf(nt[M]);H>-1&&dt.splice(H,1)}R=new Set,at=new Map}else c=[]}return c},p.prototype.createDummyNodesForBendpoints=function(c){for(var E=[],S=c.source,A=this.graphManager.calcLowestCommonAncestor(c.source,c.target),M=0;M<c.bendpoints.length;M++){var R=this.newNode(null);R.setRect(new Point(0,0),new Dimension(1,1)),A.add(R);var X=this.newEdge(null);this.graphManager.add(X,S,R),E.add(R),S=R}return X=this.newEdge(null),this.graphManager.add(X,S,c.target),this.edgeToDummyNodes.set(c,E),c.isInterGraph()?this.graphManager.remove(c):A.remove(c),E},p.prototype.createBendpointsFromDummyNodes=function(){var c=[];c=c.concat(this.graphManager.getAllEdges()),c=[].concat(G(this.edgeToDummyNodes.keys())).concat(c);for(var E=0;E<c.length;E++){var S=c[E];if(S.bendpoints.length>0){for(var A=this.edgeToDummyNodes.get(S),M=0;M<A.length;M++){var R=A[M],X=new f(R.getCenterX(),R.getCenterY()),at=S.bendpoints.get(M);at.x=X.x,at.y=X.y,R.getOwner().remove(R)}this.graphManager.add(S,S.source,S.target)}}},p.transform=function(c,E,S,A){if(null!=S&&null!=A){var M=E;return c<=50?M-=(E-E/S)/50*(50-c):M+=(E*A-E)/50*(c-50),M}var at,dt;return c<=50?(at=9*E/500,dt=E/10):(at=9*E/50,dt=-8*E),at*c+dt},p.findCenterOfTree=function(c){var E=[];E=E.concat(c);var S=[],A=new Map,M=!1,R=null;(1==E.length||2==E.length)&&(M=!0,R=E[0]);for(var X=0;X<E.length;X++){var dt=(at=E[X]).getNeighborsList().size;A.set(at,at.getNeighborsList().size),1==dt&&S.push(at)}var At=[];for(At=At.concat(S);!M;){var q=[];for(q=q.concat(At),At=[],X=0;X<E.length;X++){var at,Z=E.indexOf(at=E[X]);Z>=0&&E.splice(Z,1),at.getNeighborsList().forEach(function(j){if(S.indexOf(j)<0){var rt=A.get(j)-1;1==rt&&At.push(j),A.set(j,rt)}})}S=S.concat(At),(1==E.length||2==E.length)&&(M=!0,R=E[0])}return R},p.prototype.setGraphManager=function(c){this.graphManager=c},ht.exports=p},function(ht,ct,gt){"use strict";function G(){}G.seed=1,G.x=0,G.nextDouble=function(){return(G.x=1e4*Math.sin(G.seed++))-Math.floor(G.x)},ht.exports=G},function(ht,ct,gt){"use strict";var G=gt(4);function N(I,w){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}N.prototype.getWorldOrgX=function(){return this.lworldOrgX},N.prototype.setWorldOrgX=function(I){this.lworldOrgX=I},N.prototype.getWorldOrgY=function(){return this.lworldOrgY},N.prototype.setWorldOrgY=function(I){this.lworldOrgY=I},N.prototype.getWorldExtX=function(){return this.lworldExtX},N.prototype.setWorldExtX=function(I){this.lworldExtX=I},N.prototype.getWorldExtY=function(){return this.lworldExtY},N.prototype.setWorldExtY=function(I){this.lworldExtY=I},N.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},N.prototype.setDeviceOrgX=function(I){this.ldeviceOrgX=I},N.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},N.prototype.setDeviceOrgY=function(I){this.ldeviceOrgY=I},N.prototype.getDeviceExtX=function(){return this.ldeviceExtX},N.prototype.setDeviceExtX=function(I){this.ldeviceExtX=I},N.prototype.getDeviceExtY=function(){return this.ldeviceExtY},N.prototype.setDeviceExtY=function(I){this.ldeviceExtY=I},N.prototype.transformX=function(I){var w=0,b=this.lworldExtX;return 0!=b&&(w=this.ldeviceOrgX+(I-this.lworldOrgX)*this.ldeviceExtX/b),w},N.prototype.transformY=function(I){var w=0,b=this.lworldExtY;return 0!=b&&(w=this.ldeviceOrgY+(I-this.lworldOrgY)*this.ldeviceExtY/b),w},N.prototype.inverseTransformX=function(I){var w=0,b=this.ldeviceExtX;return 0!=b&&(w=this.lworldOrgX+(I-this.ldeviceOrgX)*this.lworldExtX/b),w},N.prototype.inverseTransformY=function(I){var w=0,b=this.ldeviceExtY;return 0!=b&&(w=this.lworldOrgY+(I-this.ldeviceOrgY)*this.lworldExtY/b),w},N.prototype.inverseTransformPoint=function(I){return new G(this.inverseTransformX(I.x),this.inverseTransformY(I.y))},ht.exports=N},function(ht,ct,gt){"use strict";var N=gt(15),I=gt(7),w=gt(0),b=gt(8),v=gt(9);function f(){N.call(this),this.useSmartIdealEdgeLengthCalculation=I.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=I.DEFAULT_EDGE_LENGTH,this.springConstant=I.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=I.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=I.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=I.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=I.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=I.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*I.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=I.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=I.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=I.MAX_ITERATIONS}for(var y in f.prototype=Object.create(N.prototype),N)f[y]=N[y];f.prototype.initParameters=function(){N.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=I.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,p,c,E,S,A,M=this.getGraphManager().getAllEdges(),R=0;R<M.length;R++)(d=M[R]).idealLength=this.idealEdgeLength,d.isInterGraph&&(c=d.getSource(),E=d.getTarget(),S=d.getSourceInLca().getEstimatedSize(),A=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=S+A-2*w.SIMPLE_NODE_SIZE),p=d.getLca().getInclusionTreeDepth(),d.idealLength+=I.DEFAULT_EDGE_LENGTH*I.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+E.getInclusionTreeDepth()-2*p))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>I.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*I.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-I.ADAPTATION_LOWER_NODE_LIMIT)/(I.ADAPTATION_UPPER_NODE_LIMIT-I.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-I.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=I.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=d>I.ADAPTATION_LOWER_NODE_LIMIT?Math.max(I.COOLING_ADAPTATION_FACTOR,1-(d-I.ADAPTATION_LOWER_NODE_LIMIT)/(I.ADAPTATION_UPPER_NODE_LIMIT-I.ADAPTATION_LOWER_NODE_LIMIT)*(1-I.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=I.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var p,d=this.getAllEdges(),c=0;c<d.length;c++)this.calcSpringForce(p=d[c],p.idealLength)},f.prototype.calcRepulsionForces=function(){var c,E,S,A,R,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%I.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),R=new Set,c=0;c<M.length;c++)this.calculateRepulsionForceOfANode(S=M[c],R,d,p),R.add(S);else for(c=0;c<M.length;c++)for(S=M[c],E=c+1;E<M.length;E++)A=M[E],S.getOwner()==A.getOwner()&&this.calcRepulsionForce(S,A)},f.prototype.calcGravitationalForces=function(){for(var p=this.getAllNodesToApplyGravitation(),c=0;c<p.length;c++)this.calcGravitationalForce(p[c])},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),c=0;c<d.length;c++)d[c].move()},f.prototype.calcSpringForce=function(d,p){var S,A,M,R,c=d.getSource(),E=d.getTarget();if(this.uniformLeafNodeSizes&&null==c.getChild()&&null==E.getChild())d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;0!=(S=d.getLength())&&(R=(A=this.springConstant*(S-p))*(d.lengthY/S),c.springForceX+=M=A*(d.lengthX/S),c.springForceY+=R,E.springForceX-=M,E.springForceY-=R)},f.prototype.calcRepulsionForce=function(d,p){var M,R,X,at,dt,At,q,c=d.getRect(),E=p.getRect(),S=new Array(2),A=new Array(4);if(c.intersects(E)){b.calcSeparationAmount(c,E,S,I.DEFAULT_EDGE_LENGTH/2),q=2*S[1];var Z=d.noOfChildren*p.noOfChildren/(d.noOfChildren+p.noOfChildren);d.repulsionForceX-=Z*(At=2*S[0]),d.repulsionForceY-=Z*q,p.repulsionForceX+=Z*At,p.repulsionForceY+=Z*q}else this.uniformLeafNodeSizes&&null==d.getChild()&&null==p.getChild()?(M=E.getCenterX()-c.getCenterX(),R=E.getCenterY()-c.getCenterY()):(b.getIntersection(c,E,A),M=A[2]-A[0],R=A[3]-A[1]),Math.abs(M)<I.MIN_REPULSION_DIST&&(M=v.sign(M)*I.MIN_REPULSION_DIST),Math.abs(R)<I.MIN_REPULSION_DIST&&(R=v.sign(R)*I.MIN_REPULSION_DIST),X=M*M+R*R,at=Math.sqrt(X),q=(dt=this.repulsionConstant*d.noOfChildren*p.noOfChildren/X)*R/at,d.repulsionForceX-=At=dt*M/at,d.repulsionForceY-=q,p.repulsionForceX+=At,p.repulsionForceY+=q},f.prototype.calcGravitationalForce=function(d){var p,c,E,S,A,M,R,X;c=((p=d.getOwner()).getRight()+p.getLeft())/2,E=(p.getTop()+p.getBottom())/2,S=d.getCenterX()-c,A=d.getCenterY()-E,M=Math.abs(S)+d.getWidth()/2,R=Math.abs(A)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(M>(X=p.getEstimatedSize()*this.gravityRangeFactor)||R>X)&&(d.gravitationForceX=-this.gravityConstant*S,d.gravitationForceY=-this.gravityConstant*A):(M>(X=p.getEstimatedSize()*this.compoundGravityRangeFactor)||R>X)&&(d.gravitationForceX=-this.gravityConstant*S*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*A*this.compoundGravityConstant)},f.prototype.isConverged=function(){var d,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||p},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,p=this.graphManager.getAllNodes(),c=0;c<p.length;c++)(d=p[c]).noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var p,c;p=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),c=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var E=new Array(p),S=0;S<p;S++)E[S]=new Array(c);for(S=0;S<p;S++)for(var A=0;A<c;A++)E[S][A]=new Array;return E},f.prototype.addNodeToGrid=function(d,p,c){var E,S,A,M;E=parseInt(Math.floor((d.getRect().x-p)/this.repulsionRange)),S=parseInt(Math.floor((d.getRect().width+d.getRect().x-p)/this.repulsionRange)),A=parseInt(Math.floor((d.getRect().y-c)/this.repulsionRange)),M=parseInt(Math.floor((d.getRect().height+d.getRect().y-c)/this.repulsionRange));for(var R=E;R<=S;R++)for(var X=A;X<=M;X++)this.grid[R][X].push(d),d.setGridCoordinates(E,S,A,M)},f.prototype.updateGrid=function(){var d,c=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<c.length;d++)this.addNodeToGrid(c[d],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,p,c,E){if(this.totalIterations%I.GRID_CALCULATION_CHECK_PERIOD==1&&c||E){var S=new Set;d.surrounding=new Array;for(var A,M=this.grid,R=d.startX-1;R<d.finishX+2;R++)for(var X=d.startY-1;X<d.finishY+2;X++)if(!(R<0||X<0||R>=M.length||X>=M[0].length))for(var at=0;at<M[R][X].length;at++)if(A=M[R][X][at],d.getOwner()==A.getOwner()&&d!=A&&!p.has(A)&&!S.has(A)){var dt=Math.abs(d.getCenterX()-A.getCenterX())-(d.getWidth()/2+A.getWidth()/2),At=Math.abs(d.getCenterY()-A.getCenterY())-(d.getHeight()/2+A.getHeight()/2);dt<=this.repulsionRange&&At<=this.repulsionRange&&S.add(A)}d.surrounding=[].concat(function(d){if(Array.isArray(d)){for(var p=0,c=Array(d.length);p<d.length;p++)c[p]=d[p];return c}return Array.from(d)}(S))}for(R=0;R<d.surrounding.length;R++)this.calcRepulsionForce(d,d.surrounding[R])},f.prototype.calcRepulsionRange=function(){return 0},ht.exports=f},function(ht,ct,gt){"use strict";var G=gt(1),N=gt(7);function I(b,v,f){G.call(this,b,v,f),this.idealLength=N.DEFAULT_EDGE_LENGTH}for(var w in I.prototype=Object.create(G.prototype),G)I[w]=G[w];ht.exports=I},function(ht,ct,gt){"use strict";var G=gt(3);function N(w,b,v,f){G.call(this,w,b,v,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var I in N.prototype=Object.create(G.prototype),G)N[I]=G[I];N.prototype.setGridCoordinates=function(w,b,v,f){this.startX=w,this.finishX=b,this.startY=v,this.finishY=f},ht.exports=N},function(ht,ct,gt){"use strict";function G(N,I){this.width=0,this.height=0,null!==N&&null!==I&&(this.height=I,this.width=N)}G.prototype.getWidth=function(){return this.width},G.prototype.setWidth=function(N){this.width=N},G.prototype.getHeight=function(){return this.height},G.prototype.setHeight=function(N){this.height=N},ht.exports=G},function(ht,ct,gt){"use strict";var G=gt(14);function N(){this.map={},this.keys=[]}N.prototype.put=function(I,w){var b=G.createID(I);this.contains(b)||(this.map[b]=w,this.keys.push(I))},N.prototype.contains=function(I){return G.createID(I),null!=this.map[I]},N.prototype.get=function(I){var w=G.createID(I);return this.map[w]},N.prototype.keySet=function(){return this.keys},ht.exports=N},function(ht,ct,gt){"use strict";var G=gt(14);function N(){this.set={}}N.prototype.add=function(I){var w=G.createID(I);this.contains(w)||(this.set[w]=I)},N.prototype.remove=function(I){delete this.set[G.createID(I)]},N.prototype.clear=function(){this.set={}},N.prototype.contains=function(I){return this.set[G.createID(I)]==I},N.prototype.isEmpty=function(){return 0===this.size()},N.prototype.size=function(){return Object.keys(this.set).length},N.prototype.addAllTo=function(I){for(var w=Object.keys(this.set),b=w.length,v=0;v<b;v++)I.push(this.set[w[v]])},N.prototype.size=function(){return Object.keys(this.set).length},N.prototype.addAll=function(I){for(var w=I.length,b=0;b<w;b++)this.add(I[b])},ht.exports=N},function(ht,ct,gt){"use strict";var G=function(){function b(v,f){for(var y=0;y<f.length;y++){var d=f[y];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,f,y){return f&&b(v.prototype,f),y&&b(v,y),v}}();var I=gt(11),w=function(){function b(v,f){(function(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")})(this,b),(null!==f||void 0!==f)&&(this.compareFunction=this._defaultCompareFunction);var y;y=v instanceof I?v.size():v.length,this._quicksort(v,0,y-1)}return G(b,[{key:"_quicksort",value:function(f,y,d){if(y<d){var p=this._partition(f,y,d);this._quicksort(f,y,p),this._quicksort(f,p+1,d)}}},{key:"_partition",value:function(f,y,d){for(var p=this._get(f,y),c=y,E=d;;){for(;this.compareFunction(p,this._get(f,E));)E--;for(;this.compareFunction(this._get(f,c),p);)c++;if(!(c<E))return E;this._swap(f,c,E),c++,E--}}},{key:"_get",value:function(f,y){return f instanceof I?f.get_object_at(y):f[y]}},{key:"_set",value:function(f,y,d){f instanceof I?f.set_object_at(y,d):f[y]=d}},{key:"_swap",value:function(f,y,d){var p=this._get(f,y);this._set(f,y,this._get(f,d)),this._set(f,d,p)}},{key:"_defaultCompareFunction",value:function(f,y){return y>f}}]),b}();ht.exports=w},function(ht,ct,gt){"use strict";var G=function(){function w(b,v){for(var f=0;f<v.length;f++){var y=v[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,v,f){return v&&w(b.prototype,v),f&&w(b,f),b}}();function N(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}var I=function(){function w(b,v){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;N(this,w),this.sequence1=b,this.sequence2=v,this.match_score=f,this.mismatch_penalty=y,this.gap_penalty=d,this.iMax=b.length+1,this.jMax=v.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.grid[p][c]=0}this.tracebackGrid=new Array(this.iMax);for(var E=0;E<this.iMax;E++){this.tracebackGrid[E]=new Array(this.jMax);for(var S=0;S<this.jMax;S++)this.tracebackGrid[E][S]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return G(w,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var v=1;v<this.jMax;v++)this.grid[0][v]=this.grid[0][v-1]+this.gap_penalty,this.tracebackGrid[0][v]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var y=1;y<this.iMax;y++)for(var d=1;d<this.jMax;d++){var S=[this.sequence1[y-1]===this.sequence2[d-1]?this.grid[y-1][d-1]+this.match_score:this.grid[y-1][d-1]+this.mismatch_penalty,this.grid[y-1][d]+this.gap_penalty,this.grid[y][d-1]+this.gap_penalty],A=this.arrayAllMaxIndexes(S);this.grid[y][d]=S[A[0]],this.tracebackGrid[y][d]=[A.includes(0),A.includes(1),A.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var v=[];for(v.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});v[0];){var f=v[0],y=this.tracebackGrid[f.pos[0]][f.pos[1]];y[0]&&v.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),y[1]&&v.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),y[2]&&v.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),0===f.pos[0]&&0===f.pos[1]&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),v.shift()}return this.alignments}},{key:"getAllIndexes",value:function(v,f){for(var y=[],d=-1;-1!==(d=v.indexOf(f,d+1));)y.push(d);return y}},{key:"arrayAllMaxIndexes",value:function(v){return this.getAllIndexes(v,Math.max.apply(null,v))}}]),w}();ht.exports=I},function(ht,ct,gt){"use strict";var G=function(){};G.FDLayout=gt(18),G.FDLayoutConstants=gt(7),G.FDLayoutEdge=gt(19),G.FDLayoutNode=gt(20),G.DimensionD=gt(21),G.HashMap=gt(22),G.HashSet=gt(23),G.IGeometry=gt(8),G.IMath=gt(9),G.Integer=gt(10),G.Point=gt(12),G.PointD=gt(4),G.RandomSeed=gt(16),G.RectangleD=gt(13),G.Transform=gt(17),G.UniqueIDGeneretor=gt(14),G.Quicksort=gt(24),G.LinkedList=gt(11),G.LGraphObject=gt(2),G.LGraph=gt(5),G.LEdge=gt(1),G.LGraphManager=gt(6),G.LNode=gt(3),G.Layout=gt(15),G.LayoutConstants=gt(0),G.NeedlemanWunsch=gt(25),ht.exports=G},function(ht,ct,gt){"use strict";function G(){this.listeners=[]}var N=G.prototype;N.addListener=function(I,w){this.listeners.push({event:I,callback:w})},N.removeListener=function(I,w){for(var b=this.listeners.length;b>=0;b--){var v=this.listeners[b];v.event===I&&v.callback===w&&this.listeners.splice(b,1)}},N.emit=function(I,w){for(var b=0;b<this.listeners.length;b++){var v=this.listeners[b];I===v.event&&v.callback(w)}},ht.exports=G}])},2103:(we,ht,ct)=>{"use strict";function gt(G){for(var N in G)ht.hasOwnProperty(N)||(ht[N]=G[N])}Object.defineProperty(ht,"__esModule",{value:!0}),gt(ct(7100)),gt(ct(1213)),gt(ct(6400)),gt(ct(6542)),gt(ct(4308)),gt(ct(7109)),gt(ct(5581)),gt(ct(8453)),gt(ct(5302)),gt(ct(1703)),gt(ct(7992)),gt(ct(4655)),gt(ct(1182)),gt(ct(1717)),gt(ct(9474)),gt(ct(6482))},7100:function(we,ht,ct){"use strict";var w,gt=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ht,"__esModule",{value:!0});var G=ct(5581),N=function(w){function b(v){var f=w.call(this)||this,d=v;return d.trigger&&(f.trigger=d.trigger),d.kick&&(f.kick=d.kick),d.drag&&(f.drag=d.drag),d.on&&(f.on=d.on),f.dragstart=f.dragStart=G.Layout.dragStart,f.dragend=f.dragEnd=G.Layout.dragEnd,f}return gt(b,w),b.prototype.trigger=function(v){},b.prototype.kick=function(){},b.prototype.drag=function(){},b.prototype.on=function(v,f){return this},b}(G.Layout);ht.LayoutAdaptor=N,ht.adaptor=function(w){return new N(w)}},6482:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var gt=ct(5581),G=ct(4308);ht.gridify=function(b,v,f,y){b.cola.start(0,0,0,10,!1);var d=function(b,v,f,y){b.forEach(function(p){p.routerNode={name:p.name,bounds:p.bounds.inflate(-f)}}),v.forEach(function(p){p.routerNode={bounds:p.bounds.inflate(-y),children:(void 0!==p.groups?p.groups.map(function(c){return b.length+c.id}):[]).concat(void 0!==p.leaves?p.leaves.map(function(c){return c.index}):[])}});var d=b.concat(v).map(function(p,c){return p.routerNode.id=c,p.routerNode});return new G.GridRouter(d,{getChildren:function(p){return p.children},getBounds:function(p){return p.bounds}},f-y)}(b.cola.nodes(),b.cola.groups(),f,y);return d.routeEdges(b.powerGraph.powerEdges,v,function(p){return p.source.routerNode.id},function(p){return p.target.routerNode.id})},ht.powerGraphGridLayout=function(b,v,f){var y;b.nodes.forEach(function(E,S){return E.index=S}),(new gt.Layout).avoidOverlaps(!1).nodes(b.nodes).links(b.links).powerGraphGroups(function(E){(y=E).groups.forEach(function(S){return S.padding=f})});var d=b.nodes.length,p=[],c=b.nodes.slice(0);return c.forEach(function(E,S){return E.index=S}),y.groups.forEach(function(E){var S=E.index=E.id+d;c.push(E),void 0!==E.leaves&&E.leaves.forEach(function(A){return p.push({source:S,target:A.index})}),void 0!==E.groups&&E.groups.forEach(function(A){return p.push({source:S,target:A.id+d})})}),y.powerEdges.forEach(function(E){p.push({source:E.source.index,target:E.target.index})}),(new gt.Layout).size(v).nodes(c).links(p).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new gt.Layout).convergenceThreshold(.001).size(v).avoidOverlaps(!0).nodes(b.nodes).links(b.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(E){(y=E).groups.forEach(function(S){S.padding=f})}).start(50,0,100,0,!1),powerGraph:y}}},1213:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var gt=ct(2297),G=ct(4850);ht.d3adaptor=function(w){return!w||function(w){return w.version&&null!==w.version.match(/^3\./)}(w)?new gt.D3StyleLayoutAdaptor:new G.D3StyleLayoutAdaptor(w)}},2297:function(we,ht,ct){"use strict";var w,gt=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ht,"__esModule",{value:!0});var G=ct(5581),N=function(w){function b(){var v=w.call(this)||this;v.event=d3.dispatch(G.EventType[G.EventType.start],G.EventType[G.EventType.tick],G.EventType[G.EventType.end]);var f=v;return v.drag=function(){if(!d)var d=d3.behavior.drag().origin(G.Layout.dragOrigin).on("dragstart.d3adaptor",G.Layout.dragStart).on("drag.d3adaptor",function(p){G.Layout.drag(p,d3.event),f.resume()}).on("dragend.d3adaptor",G.Layout.dragEnd);if(!arguments.length)return d;this.call(d)},v}return gt(b,w),b.prototype.trigger=function(v){var f={type:G.EventType[v.type],alpha:v.alpha,stress:v.stress};this.event[f.type](f)},b.prototype.kick=function(){var v=this;d3.timer(function(){return w.prototype.tick.call(v)})},b.prototype.on=function(v,f){return this.event.on("string"==typeof v?v:G.EventType[v],f),this},b}(G.Layout);ht.D3StyleLayoutAdaptor=N,ht.d3adaptor=function(){return new N}},4850:function(we,ht,ct){"use strict";var I,gt=this&&this.__extends||(I=function(w,b){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,f){v.__proto__=f}||function(v,f){for(var y in f)f.hasOwnProperty(y)&&(v[y]=f[y])})(w,b)},function(w,b){function v(){this.constructor=w}I(w,b),w.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)});Object.defineProperty(ht,"__esModule",{value:!0});var G=ct(5581),N=function(I){function w(b){var v=I.call(this)||this;v.d3Context=b,v.event=b.dispatch(G.EventType[G.EventType.start],G.EventType[G.EventType.tick],G.EventType[G.EventType.end]);var f=v;return v.drag=function(){if(!d)var d=b.drag().subject(G.Layout.dragOrigin).on("start.d3adaptor",G.Layout.dragStart).on("drag.d3adaptor",function(p){G.Layout.drag(p,b.event),f.resume()}).on("end.d3adaptor",G.Layout.dragEnd);if(!arguments.length)return d;arguments[0].call(d)},v}return gt(w,I),w.prototype.trigger=function(b){var v={type:G.EventType[b.type],alpha:b.alpha,stress:b.stress};this.event.call(v.type,v)},w.prototype.kick=function(){var b=this,v=this.d3Context.timer(function(){return I.prototype.tick.call(b)&&v.stop()})},w.prototype.on=function(b,v){return this.event.on("string"==typeof b?b:G.EventType[b],v),this},w}(G.Layout);ht.D3StyleLayoutAdaptor=N},6400:(we,ht)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var ct=function(){function N(){this.locks={}}return N.prototype.add=function(I,w){this.locks[I]=w},N.prototype.clear=function(){this.locks={}},N.prototype.isEmpty=function(){for(var I in this.locks)return!1;return!0},N.prototype.apply=function(I){for(var w in this.locks)I(Number(w),this.locks[w])},N}();ht.Locks=ct;var gt=function(){function N(I,w,b){void 0===b&&(b=null),this.D=w,this.G=b,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new G,this.project=null,this.x=I,this.k=I.length;var v=this.n=I[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new ct,this.minD=Number.MAX_VALUE;for(var y,f=v;f--;)for(y=v;--y>f;){var d=w[f][y];d>0&&d<this.minD&&(this.minD=d)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),f=this.k;f--;){for(this.g[f]=new Array(v),this.H[f]=new Array(v),y=v;y--;)this.H[f][y]=new Array(v);this.Hd[f]=new Array(v),this.a[f]=new Array(v),this.b[f]=new Array(v),this.c[f]=new Array(v),this.d[f]=new Array(v),this.e[f]=new Array(v),this.ia[f]=new Array(v),this.ib[f]=new Array(v),this.xtmp[f]=new Array(v)}}return N.createSquareMatrix=function(I,w){for(var b=new Array(I),v=0;v<I;++v){b[v]=new Array(I);for(var f=0;f<I;++f)b[v][f]=w(v,f)}return b},N.prototype.offsetDir=function(){for(var I=this,w=new Array(this.k),b=0,v=0;v<this.k;++v){var f=w[v]=this.random.getNextBetween(.01,1)-.5;b+=f*f}return b=Math.sqrt(b),w.map(function(y){return y*(I.minD/b)})},N.prototype.computeDerivatives=function(I){var w=this,b=this.n;if(!(b<1)){for(var v,f=new Array(this.k),y=new Array(this.k),d=new Array(this.k),p=0,c=0;c<b;++c){for(v=0;v<this.k;++v)d[v]=this.g[v][c]=0;for(var E=0;E<b;++E)if(c!==E){for(var S=b;S--;){var A=0;for(v=0;v<this.k;++v){var M=f[v]=I[v][c]-I[v][E];A+=y[v]=M*M}if(A>1e-9)break;var R=this.offsetDir();for(v=0;v<this.k;++v)I[v][E]+=R[v]}var X=Math.sqrt(A),at=this.D[c][E],dt=null!=this.G?this.G[c][E]:1;if(dt>1&&X>at||!isFinite(at)){for(v=0;v<this.k;++v)this.H[v][c][E]=0;continue}dt>1&&(dt=1);var At=at*at,q=2*dt*(X-at)/(At*X),Z=X*X*X,nt=2*-dt/(At*Z);for(isFinite(q)||console.log(q),v=0;v<this.k;++v)this.g[v][c]+=f[v]*q,d[v]-=this.H[v][c][E]=nt*(Z+at*(y[v]-A)+X*A)}for(v=0;v<this.k;++v)p=Math.max(p,this.H[v][c][c]=d[v])}var O=this.snapGridSize/2,H=this.snapGridSize,J=this.snapStrength/(O*O),rt=this.numGridSnapNodes;for(c=0;c<rt;++c)for(v=0;v<this.k;++v){var bt=this.x[v][c],Nt=bt/H,W=Nt%1,tt=Nt-W;-O<(M=Math.abs(W)<=.5?bt-tt*H:bt>0?bt-(tt+1)*H:bt-(tt-1)*H)&&M<=O&&(this.scaleSnapByMaxH?(this.g[v][c]+=p*J*M,this.H[v][c][c]+=p*J):(this.g[v][c]+=J*M,this.H[v][c][c]+=J))}this.locks.isEmpty()||this.locks.apply(function(Dt,Ot){for(v=0;v<w.k;++v)w.H[v][Dt][Dt]+=p,w.g[v][Dt]-=p*(Ot[v]-I[v][Dt])})}},N.dotProd=function(I,w){for(var b=0,v=I.length;v--;)b+=I[v]*w[v];return b},N.rightMultiply=function(I,w,b){for(var v=I.length;v--;)b[v]=N.dotProd(I[v],w)},N.prototype.computeStepSize=function(I){for(var w=0,b=0,v=0;v<this.k;++v)w+=N.dotProd(this.g[v],I[v]),N.rightMultiply(this.H[v],I[v],this.Hd[v]),b+=N.dotProd(I[v],this.Hd[v]);return 0!==b&&isFinite(b)?1*w/b:0},N.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var I=this.computeStepSize(this.g),w=0;w<this.k;++w)this.takeDescentStep(this.x[w],this.g[w],I);return this.computeStress()},N.copy=function(I,w){for(var b=I.length,v=w[0].length,f=0;f<b;++f)for(var y=0;y<v;++y)w[f][y]=I[f][y]},N.prototype.stepAndProject=function(I,w,b,v){N.copy(I,w),this.takeDescentStep(w[0],b[0],v),this.project&&this.project[0](I[0],I[1],w[0]),this.takeDescentStep(w[1],b[1],v),this.project&&this.project[1](w[0],I[1],w[1]);for(var f=2;f<this.k;f++)this.takeDescentStep(w[f],b[f],v)},N.mApply=function(I,w,b){for(var v=I;v-- >0;)for(var f=w;f-- >0;)b(v,f)},N.prototype.matrixApply=function(I){N.mApply(this.k,this.n,I)},N.prototype.computeNextPosition=function(I,w){var b=this;this.computeDerivatives(I);var v=this.computeStepSize(this.g);if(this.stepAndProject(I,w,this.g,v),this.project){this.matrixApply(function(y,d){return b.e[y][d]=I[y][d]-w[y][d]});var f=this.computeStepSize(this.e);f=Math.max(.2,Math.min(f,1)),this.stepAndProject(I,w,this.e,f)}},N.prototype.run=function(I){for(var w=Number.MAX_VALUE,b=!1;!b&&I-- >0;){var v=this.rungeKutta();b=Math.abs(w/v-1)<this.threshold,w=v}return w},N.prototype.rungeKutta=function(){var I=this;this.computeNextPosition(this.x,this.a),N.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),N.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var w=0;return this.matrixApply(function(b,v){var f=(I.a[b][v]+2*I.b[b][v]+2*I.c[b][v]+I.d[b][v])/6,y=I.x[b][v]-f;w+=y*y,I.x[b][v]=f}),w},N.mid=function(I,w,b){N.mApply(I.length,I[0].length,function(v,f){return b[v][f]=I[v][f]+(w[v][f]-I[v][f])/2})},N.prototype.takeDescentStep=function(I,w,b){for(var v=0;v<this.n;++v)I[v]=I[v]-b*w[v]},N.prototype.computeStress=function(){for(var I=0,w=0,b=this.n-1;w<b;++w)for(var v=w+1,f=this.n;v<f;++v){for(var y=0,d=0;d<this.k;++d){var p=this.x[d][w]-this.x[d][v];y+=p*p}y=Math.sqrt(y);var c=this.D[w][v];if(isFinite(c)){var E=c-y;I+=E*E/(c*c)}}return I},N.zeroDistance=1e-10,N}();ht.Descent=gt;var G=function(){function N(I){void 0===I&&(I=1),this.seed=I,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return N.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},N.prototype.getNextBetween=function(I,w){return I+this.getNext()*(w-I)},N}();ht.PseudoRandom=G},6542:function(we,ht,ct){"use strict";var W,gt=this&&this.__extends||(W=function(tt,ft){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dt,Ot){Dt.__proto__=Ot}||function(Dt,Ot){for(var It in Ot)Ot.hasOwnProperty(It)&&(Dt[It]=Ot[It])})(tt,ft)},function(tt,ft){function Dt(){this.constructor=tt}W(tt,ft),tt.prototype=null===ft?Object.create(ft):(Dt.prototype=ft.prototype,new Dt)});Object.defineProperty(ht,"__esModule",{value:!0});var G=ct(1182),N=function(){};ht.Point=N;var I=function(tt,ft,Dt,Ot){this.x1=tt,this.y1=ft,this.x2=Dt,this.y2=Ot};ht.LineSegment=I;var w=function(W){function tt(){return null!==W&&W.apply(this,arguments)||this}return gt(tt,W),tt}(N);function b(W,tt,ft){return(tt.x-W.x)*(ft.y-W.y)-(ft.x-W.x)*(tt.y-W.y)}function v(W,tt,ft){return b(W,tt,ft)>0}function f(W,tt,ft){return b(W,tt,ft)<0}function E(W,tt){var ft=tt.slice(0);return ft.push(tt[0]),{rtan:S(W,ft),ltan:A(W,ft)}}function S(W,tt){var Dt,Ot,It,Vt,ft=tt.length-1;if(f(W,tt[1],tt[0])&&!v(W,tt[ft-1],tt[0]))return 0;for(Dt=0,Ot=ft;;){if(Ot-Dt==1)return v(W,tt[Dt],tt[Ot])?Dt:Ot;if((Vt=f(W,tt[(It=Math.floor((Dt+Ot)/2))+1],tt[It]))&&!v(W,tt[It-1],tt[It]))return It;v(W,tt[Dt+1],tt[Dt])?Vt||v(W,tt[Dt],tt[It])?Ot=It:Dt=It:Vt&&f(W,tt[Dt],tt[It])?Ot=It:Dt=It}}function A(W,tt){var Dt,Ot,It,Vt,ft=tt.length-1;if(v(W,tt[ft-1],tt[0])&&!f(W,tt[1],tt[0]))return 0;for(Dt=0,Ot=ft;;){if(Ot-Dt==1)return f(W,tt[Dt],tt[Ot])?Dt:Ot;if(Vt=f(W,tt[(It=Math.floor((Dt+Ot)/2))+1],tt[It]),v(W,tt[It-1],tt[It])&&!Vt)return It;f(W,tt[Dt+1],tt[Dt])?Vt?f(W,tt[Dt],tt[It])?Ot=It:Dt=It:Ot=It:Vt?Dt=It:v(W,tt[Dt],tt[It])?Ot=It:Dt=It}}function M(W,tt,ft,Dt,Ot,It){var Rt,Vt;Vt=Dt(W[Rt=ft(tt[0],W)],tt);for(var te=!1;!te;){for(te=!0;Rt===W.length-1&&(Rt=0),!Ot(tt[Vt],W[Rt],W[Rt+1]);)++Rt;for(;0===Vt&&(Vt=tt.length-1),!It(W[Rt],tt[Vt],tt[Vt-1]);)--Vt,te=!1}return{t1:Rt,t2:Vt}}function X(W,tt){return M(W,tt,S,A,v,f)}ht.PolyPoint=w,ht.isLeft=b,ht.ConvexHull=function(W){var Dt,tt=W.slice(0).sort(function(Ee,De){return Ee.x!==De.x?De.x-Ee.x:De.y-Ee.y}),ft=W.length,It=tt[0].x;for(Dt=1;Dt<ft&&tt[Dt].x===It;++Dt);var Rt=Dt-1,Vt=[];if(Vt.push(tt[0]),Rt===ft-1)tt[Rt].y!==tt[0].y&&Vt.push(tt[Rt]);else{var te,he=ft-1,de=tt[ft-1].x;for(Dt=ft-2;Dt>=0&&tt[Dt].x===de;Dt--);for(te=Dt+1,Dt=Rt;++Dt<=te;)if(!(b(tt[0],tt[te],tt[Dt])>=0&&Dt<te)){for(;Vt.length>1&&!(b(Vt[Vt.length-2],Vt[Vt.length-1],tt[Dt])>0);)Vt.length-=1;0!=Dt&&Vt.push(tt[Dt])}he!=te&&Vt.push(tt[he]);var oe=Vt.length;for(Dt=te;--Dt>=Rt;)if(!(b(tt[he],tt[Rt],tt[Dt])>=0&&Dt>Rt)){for(;Vt.length>oe&&!(b(Vt[Vt.length-2],Vt[Vt.length-1],tt[Dt])>0);)Vt.length-=1;0!=Dt&&Vt.push(tt[Dt])}}return Vt},ht.clockwiseRadialSweep=function(W,tt,ft){tt.slice(0).sort(function(Dt,Ot){return Math.atan2(Dt.y-W.y,Dt.x-W.x)-Math.atan2(Ot.y-W.y,Ot.x-W.x)}).forEach(ft)},ht.tangent_PolyPolyC=M,ht.LRtangent_PolyPolyC=function(W,tt){var ft=X(tt,W);return{t1:ft.t2,t2:ft.t1}},ht.RLtangent_PolyPolyC=X,ht.LLtangent_PolyPolyC=function(W,tt){return M(W,tt,A,A,f,f)},ht.RRtangent_PolyPolyC=function(W,tt){return M(W,tt,S,S,v,v)};var At=function(tt,ft){this.t1=tt,this.t2=ft};ht.BiTangent=At;var q=function(){};ht.BiTangents=q;var Z=function(W){function tt(){return null!==W&&W.apply(this,arguments)||this}return gt(tt,W),tt}(N);ht.TVGPoint=Z;var nt=function(tt,ft,Dt,Ot){this.id=tt,this.polyid=ft,this.polyvertid=Dt,this.p=Ot,Ot.vv=this};ht.VisibilityVertex=nt;var O=function(){function W(tt,ft){this.source=tt,this.target=ft}return W.prototype.length=function(){var tt=this.source.p.x-this.target.p.x,ft=this.source.p.y-this.target.p.y;return Math.sqrt(tt*tt+ft*ft)},W}();ht.VisibilityEdge=O;var H=function(){function W(tt,ft){if(this.P=tt,this.V=[],this.E=[],ft)this.V=ft.V.slice(0),this.E=ft.E.slice(0);else{for(var Dt=tt.length,Ot=0;Ot<Dt;Ot++){for(var It=tt[Ot],Rt=0;Rt<It.length;++Rt){var te=new nt(this.V.length,Ot,Rt,It[Rt]);this.V.push(te),Rt>0&&this.E.push(new O(It[Rt-1].vv,te))}It.length>1&&this.E.push(new O(It[0].vv,It[It.length-1].vv))}for(Ot=0;Ot<Dt-1;Ot++){var he=tt[Ot];for(Rt=Ot+1;Rt<Dt;Rt++){var de=tt[Rt],oe=J(he,de);for(var Ee in oe){var De=oe[Ee];this.addEdgeIfVisible(he[De.t1],de[De.t2],Ot,Rt)}}}}}return W.prototype.addEdgeIfVisible=function(tt,ft,Dt,Ot){this.intersectsPolys(new I(tt.x,tt.y,ft.x,ft.y),Dt,Ot)||this.E.push(new O(tt.vv,ft.vv))},W.prototype.addPoint=function(tt,ft){var Dt=this.P.length;this.V.push(new nt(this.V.length,Dt,0,tt));for(var Ot=0;Ot<Dt;++Ot)if(Ot!==ft){var It=this.P[Ot],Rt=E(tt,It);this.addEdgeIfVisible(tt,It[Rt.ltan],ft,Ot),this.addEdgeIfVisible(tt,It[Rt.rtan],ft,Ot)}return tt.vv},W.prototype.intersectsPolys=function(tt,ft,Dt){for(var Ot=0,It=this.P.length;Ot<It;++Ot)if(Ot!=ft&&Ot!=Dt&&j(tt,this.P[Ot]).length>0)return!0;return!1},W}();function j(W,tt){for(var ft=[],Dt=1,Ot=tt.length;Dt<Ot;++Dt){var It=G.Rectangle.lineIntersection(W.x1,W.y1,W.x2,W.y2,tt[Dt-1].x,tt[Dt-1].y,tt[Dt].x,tt[Dt].y);It&&ft.push(It)}return ft}function J(W,tt){for(var ft=W.length-1,Dt=tt.length-1,Ot=new q,It=0;It<ft;++It)for(var Rt=0;Rt<Dt;++Rt){var Vt=W[0==It?ft-1:It-1],te=W[It],he=W[It+1],de=tt[0==Rt?Dt-1:Rt-1],oe=tt[Rt],Ee=tt[Rt+1],De=b(Vt,te,oe),Ut=b(te,de,oe),Jt=b(te,oe,Ee),ie=b(de,oe,te),pe=b(oe,Vt,te),me=b(oe,te,he);De>=0&&Ut>=0&&Jt<0&&ie>=0&&pe>=0&&me<0?Ot.ll=new At(It,Rt):De<=0&&Ut<=0&&Jt>0&&ie<=0&&pe<=0&&me>0?Ot.rr=new At(It,Rt):De<=0&&Ut>0&&Jt<=0&&ie>=0&&pe<0&&me>=0?Ot.rl=new At(It,Rt):De>=0&&Ut<0&&Jt>=0&&ie<=0&&pe>0&&me<=0&&(Ot.lr=new At(It,Rt))}return Ot}function bt(W,tt){return!W.every(function(ft){return!function(W,tt){for(var ft=1,Dt=tt.length;ft<Dt;++ft)if(f(tt[ft-1],tt[ft],W))return!1;return!0}(ft,tt)})}ht.TangentVisibilityGraph=H,ht.tangents=J,ht.polysOverlap=function(W,tt){if(bt(W,tt)||bt(tt,W))return!0;for(var ft=1,Dt=W.length;ft<Dt;++ft){var Ot=W[ft],It=W[ft-1];if(j(new I(It.x,It.y,Ot.x,Ot.y),tt).length>0)return!0}return!1}},4308:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var gt=ct(1182),G=ct(9474),N=ct(1717),I=function(y,d,p){this.id=y,this.rect=d,this.children=p,this.leaf=void 0===p||0===p.length};ht.NodeWrapper=I;var w=function(y,d,p,c,E){void 0===c&&(c=null),void 0===E&&(E=null),this.id=y,this.x=d,this.y=p,this.node=c,this.line=E};ht.Vert=w;var b=function(){function f(y,d){this.s=y,this.t=d;var p=f.findMatch(y,d),c=d.slice(0).reverse(),E=f.findMatch(y,c);p.length>=E.length?(this.length=p.length,this.si=p.si,this.ti=p.ti,this.reversed=!1):(this.length=E.length,this.si=E.si,this.ti=d.length-E.ti-E.length,this.reversed=!0)}return f.findMatch=function(y,d){for(var p=y.length,c=d.length,E={length:0,si:-1,ti:-1},S=new Array(p),A=0;A<p;A++){S[A]=new Array(c);for(var M=0;M<c;M++)if(y[A]===d[M]){var R=S[A][M]=0===A||0===M?1:S[A-1][M-1]+1;R>E.length&&(E.length=R,E.si=A-R+1,E.ti=M-R+1)}else S[A][M]=0}return E},f.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},f}();ht.LongestCommonSubsequence=b;var v=function(){function f(y,d,p){var c=this;void 0===p&&(p=12),this.originalnodes=y,this.groupPadding=p,this.leaves=null,this.nodes=y.map(function(Z,nt){return new I(nt,d.getBounds(Z),d.getChildren(Z))}),this.leaves=this.nodes.filter(function(Z){return Z.leaf}),this.groups=this.nodes.filter(function(Z){return!Z.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(Z){return Z.children.forEach(function(nt){return c.nodes[nt].parent=Z})}),this.root={children:[]},this.nodes.forEach(function(Z){void 0===Z.parent&&(Z.parent=c.root,c.root.children.push(Z.id)),Z.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(Z,nt){return c.getDepth(Z)-c.getDepth(nt)}),this.backToFront.slice(0).reverse().filter(function(Z){return!Z.leaf}).forEach(function(Z){var nt=gt.Rectangle.empty();Z.children.forEach(function(O){return nt=nt.union(c.nodes[O].rect)}),Z.rect=nt.inflate(c.groupPadding)});var S=this.midPoints(this.cols.map(function(Z){return Z.pos})),A=this.midPoints(this.rows.map(function(Z){return Z.pos})),M=S[0],R=S[S.length-1],X=A[0],at=A[A.length-1],dt=this.rows.map(function(Z){return{x1:M,x2:R,y1:Z.pos,y2:Z.pos}}).concat(A.map(function(Z){return{x1:M,x2:R,y1:Z,y2:Z}})),At=this.cols.map(function(Z){return{x1:Z.pos,x2:Z.pos,y1:X,y2:at}}).concat(S.map(function(Z){return{x1:Z,x2:Z,y1:X,y2:at}})),q=dt.concat(At);q.forEach(function(Z){return Z.verts=[]}),this.verts=[],this.edges=[],dt.forEach(function(Z){return At.forEach(function(nt){var O=new w(c.verts.length,nt.x1,Z.y1);Z.verts.push(O),nt.verts.push(O),c.verts.push(O);for(var H=c.backToFront.length;H-- >0;){var j=c.backToFront[H],J=j.rect,rt=Math.abs(O.x-J.cx()),bt=Math.abs(O.y-J.cy());if(rt<J.width()/2&&bt<J.height()/2){O.node=j;break}}})}),q.forEach(function(Z,nt){c.nodes.forEach(function(bt,Nt){bt.rect.lineIntersections(Z.x1,Z.y1,Z.x2,Z.y2).forEach(function(W,tt){var ft=new w(c.verts.length,W.x,W.y,bt,Z);c.verts.push(ft),Z.verts.push(ft),bt.ports.push(ft)})});var O=Math.abs(Z.y1-Z.y2)<.1,H=function(bt,Nt){return O?Nt.x-bt.x:Nt.y-bt.y};Z.verts.sort(H);for(var j=1;j<Z.verts.length;j++){var J=Z.verts[j-1],rt=Z.verts[j];J.node&&J.node===rt.node&&J.node.leaf||c.edges.push({source:J.id,target:rt.id,length:Math.abs(H(J,rt))})}})}return f.prototype.avg=function(y){return y.reduce(function(d,p){return d+p})/y.length},f.prototype.getGridLines=function(y){for(var d=[],p=this.leaves.slice(0,this.leaves.length);p.length>0;){var c=p.filter(function(S){return S.rect["overlap"+y.toUpperCase()](p[0].rect)}),E={nodes:c,pos:this.avg(c.map(function(S){return S.rect["c"+y]()}))};d.push(E),E.nodes.forEach(function(S){return p.splice(p.indexOf(S),1)})}return d.sort(function(S,A){return S.pos-A.pos}),d},f.prototype.getDepth=function(y){for(var d=0;y.parent!==this.root;)d++,y=y.parent;return d},f.prototype.midPoints=function(y){for(var d=y[1]-y[0],p=[y[0]-d/2],c=1;c<y.length;c++)p.push((y[c]+y[c-1])/2);return p.push(y[y.length-1]+d/2),p},f.prototype.findLineage=function(y){var d=[y];do{d.push(y=y.parent)}while(y!==this.root);return d.reverse()},f.prototype.findAncestorPathBetween=function(y,d){for(var p=this.findLineage(y),c=this.findLineage(d),E=0;p[E]===c[E];)E++;return{commonAncestor:p[E-1],lineages:p.slice(E).concat(c.slice(E))}},f.prototype.siblingObstacles=function(y,d){var p=this,c=this.findAncestorPathBetween(y,d),E={};c.lineages.forEach(function(A){return E[A.id]={}});var S=c.commonAncestor.children.filter(function(A){return!(A in E)});return c.lineages.filter(function(A){return A.parent!==c.commonAncestor}).forEach(function(A){return S=S.concat(A.parent.children.filter(function(M){return M!==A.id}))}),S.map(function(A){return p.nodes[A]})},f.getSegmentSets=function(y,d,p){for(var c=[],E=0;E<y.length;E++)for(var S=y[E],A=0;A<S.length;A++)(M=S[A]).edgeid=E,M.i=A,Math.abs(M[1][d]-M[0][d])<.1&&c.push(M);c.sort(function(At,q){return At[0][d]-q[0][d]});for(var X=[],at=null,dt=0;dt<c.length;dt++){var M=c[dt];(!at||Math.abs(M[0][d]-at.pos)>.1)&&X.push(at={pos:M[0][d],segments:[]}),at.segments.push(M)}return X},f.nudgeSegs=function(y,d,p,c,E,S){var A=c.length;if(!(A<=1)){for(var M=c.map(function(j){return new G.Variable(j[0][y])}),R=[],X=0;X<A;X++)for(var at=0;at<A;at++)if(X!==at){var dt=c[X],q=dt.edgeid,Z=c[at].edgeid,nt=-1,O=-1;"x"==y?E(q,Z)&&(dt[0][d]<dt[1][d]?(nt=at,O=X):(nt=X,O=at)):E(q,Z)&&(dt[0][d]<dt[1][d]?(nt=X,O=at):(nt=at,O=X)),nt>=0&&R.push(new G.Constraint(M[nt],M[O],S))}new G.Solver(M,R).solve(),M.forEach(function(j,J){var rt=c[J],bt=j.position();rt[0][y]=rt[1][y]=bt;var Nt=p[rt.edgeid];rt.i>0&&(Nt[rt.i-1][1][y]=bt),rt.i<Nt.length-1&&(Nt[rt.i+1][0][y]=bt)})}},f.nudgeSegments=function(y,d,p,c,E){for(var S=f.getSegmentSets(y,d,p),A=0;A<S.length;A++){for(var M=S[A],R=[],X=0;X<M.segments.length;X++){var at=M.segments[X];R.push({type:0,s:at,pos:Math.min(at[0][p],at[1][p])}),R.push({type:1,s:at,pos:Math.max(at[0][p],at[1][p])})}R.sort(function(q,Z){return q.pos-Z.pos+q.type-Z.type});var dt=[],At=0;R.forEach(function(q){0===q.type?(dt.push(q.s),At++):At--,0==At&&(f.nudgeSegs(d,p,y,dt,c,E),dt=[])})}},f.prototype.routeEdges=function(y,d,p,c){var E=this,S=y.map(function(R){return E.route(p(R),c(R))}),A=f.orderEdges(S),M=S.map(function(R){return f.makeSegments(R)});return f.nudgeSegments(M,"x","y",A,d),f.nudgeSegments(M,"y","x",A,d),f.unreverseEdges(M,S),M},f.unreverseEdges=function(y,d){y.forEach(function(p,c){d[c].reversed&&(p.reverse(),p.forEach(function(S){S.reverse()}))})},f.angleBetween2Lines=function(y,d){var p=Math.atan2(y[0].y-y[1].y,y[0].x-y[1].x),c=Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x),E=p-c;return(E>Math.PI||E<-Math.PI)&&(E=c-p),E},f.isLeft=function(y,d,p){return(d.x-y.x)*(p.y-y.y)-(d.y-y.y)*(p.x-y.x)<=0},f.getOrder=function(y){for(var d={},p=0;p<y.length;p++){var c=y[p];void 0===d[c.l]&&(d[c.l]={}),d[c.l][c.r]=!0}return function(E,S){return void 0!==d[E]&&d[E][S]}},f.orderEdges=function(y){for(var d=[],p=0;p<y.length-1;p++)for(var c=p+1;c<y.length;c++){var M,R,X,E=y[p],S=y[c],A=new b(E,S);if(0!==A.length){if(A.reversed&&(S.reverse(),S.reversed=!0,A=new b(E,S)),(A.si<=0||A.ti<=0)&&(A.si+A.length>=E.length||A.ti+A.length>=S.length)){d.push({l:p,r:c});continue}A.si+A.length>=E.length||A.ti+A.length>=S.length?(M=E[A.si+1],X=E[A.si-1],R=S[A.ti-1]):(M=E[A.si+A.length-2],R=E[A.si+A.length],X=S[A.ti+A.length]),f.isLeft(M,R,X)?d.push({l:c,r:p}):d.push({l:p,r:c})}}return f.getOrder(d)},f.makeSegments=function(y){function d(R){return{x:R.x,y:R.y}}for(var c=[],E=d(y[0]),S=1;S<y.length;S++){var A=d(y[S]),M=S<y.length-1?y[S+1]:null;(!M||(R=E,X=A,at=M,!(Math.abs((X.x-R.x)*(at.y-R.y)-(X.y-R.y)*(at.x-R.x))<.001)))&&(c.push([E,A]),E=A)}var R,X,at;return c},f.prototype.route=function(y,d){var p=this,c=this.nodes[y],E=this.nodes[d];this.obstacles=this.siblingObstacles(c,E);var S={};this.obstacles.forEach(function(O){return S[O.id]=O}),this.passableEdges=this.edges.filter(function(O){var H=p.verts[O.source],j=p.verts[O.target];return!(H.node&&H.node.id in S||j.node&&j.node.id in S)});for(var A=1;A<c.ports.length;A++)this.passableEdges.push({source:c.ports[0].id,target:c.ports[A].id,length:0});for(A=1;A<E.ports.length;A++)this.passableEdges.push({source:E.ports[0].id,target:E.ports[A].id,length:0});var nt=new N.Calculator(this.verts.length,this.passableEdges,function(O){return O.source},function(O){return O.target},function(O){return O.length}).PathFromNodeToNodeWithPrevCost(c.ports[0].id,E.ports[0].id,function(O,H,j){var J=p.verts[O],rt=p.verts[H],bt=p.verts[j],Nt=Math.abs(bt.x-J.x),W=Math.abs(bt.y-J.y);return J.node===c&&J.node===rt.node||rt.node===E&&rt.node===bt.node?0:Nt>1&&W>1?1e3:0}).reverse().map(function(O){return p.verts[O]});return nt.push(this.nodes[E.id].ports[0]),nt.filter(function(O,H){return!(H<nt.length-1&&nt[H+1].node===c&&O.node===c||H>0&&O.node===E&&nt[H-1].node===E)})},f.getRoutePath=function(y,d,p,c){var A,M,R,Nt,W,E={routepath:"M "+y[0][0].x+" "+y[0][0].y+" ",arrowpath:""};if(y.length>1)for(var S=0;S<y.length;S++){var X=(M=(A=y[S])[1].x)-A[0].x,at=(R=A[1].y)-A[0].y;if(S<y.length-1){Math.abs(X)>0?M-=X/Math.abs(X)*d:R-=at/Math.abs(at)*d,E.routepath+="L "+M+" "+R+" ";var dt=y[S+1],At=dt[0].x,q=dt[0].y;X=dt[1].x-At,at=dt[1].y-q;var H,j,O=f.angleBetween2Lines(A,dt)<0?1:0;Math.abs(X)>0?(H=At+X/Math.abs(X)*d,j=q):(H=At,j=q+at/Math.abs(at)*d);var J=Math.abs(H-M),rt=Math.abs(j-R);E.routepath+="A "+J+" "+rt+" 0 0 "+O+" "+H+" "+j+" "}else{var bt=[M,R];Math.abs(X)>0?(Nt=[M-=X/Math.abs(X)*c,R+p],W=[M,R-p]):(Nt=[M+p,R-=at/Math.abs(at)*c],W=[M-p,R]),E.routepath+="L "+M+" "+R+" ",c>0&&(E.arrowpath="M "+bt[0]+" "+bt[1]+" L "+Nt[0]+" "+Nt[1]+" L "+W[0]+" "+W[1])}}else X=(M=(A=y[0])[1].x)-A[0].x,at=(R=A[1].y)-A[0].y,bt=[M,R],Math.abs(X)>0?(Nt=[M-=X/Math.abs(X)*c,R+p],W=[M,R-p]):(Nt=[M+p,R-=at/Math.abs(at)*c],W=[M-p,R]),E.routepath+="L "+M+" "+R+" ",c>0&&(E.arrowpath="M "+bt[0]+" "+bt[1]+" L "+Nt[0]+" "+Nt[1]+" L "+W[0]+" "+W[1]);return E},f}();ht.GridRouter=v},7109:(we,ht)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var ct_GOLDEN_SECTION=(1+Math.sqrt(5))/2;ht.applyPacking=function(N,I,w,b,v,f){void 0===v&&(v=1),void 0===f&&(f=!0);var p=I,c=w,E=(v=void 0!==v?v:1,b=void 0!==b?b:0,0),S=0,A=0,M=0,R=[];function At(O,H){R=[],E=0,S=0,M=0;for(var j=0;j<O.length;j++)q(O[j],H);return Math.abs(E/S-v)}function q(O,H){for(var j=void 0,J=0;J<R.length;J++)if(R[J].space_left>=O.height&&R[J].x+R[J].width+O.width+10-H<=1e-4){j=R[J];break}R.push(O),void 0!==j?(O.x=j.x+j.width+10,O.y=j.bottom,O.space_left=O.height,O.bottom=O.y,j.space_left-=O.height+10,j.bottom+=O.height+10):(O.y=M,M+=O.height+10,O.x=0,O.bottom=O.y,O.space_left=O.height),O.y+O.height-S>-1e-4&&(S=O.y+O.height-0),O.x+O.width-E>-1e-4&&(E=O.x+O.width-0)}0!=N.length&&(N.forEach(function(j){!function(j){var J=Number.MAX_VALUE,rt=Number.MAX_VALUE,bt=0,Nt=0;j.array.forEach(function(W){var tt=void 0!==W.width?W.width:b,ft=void 0!==W.height?W.height:b;tt/=2,ft/=2,bt=Math.max(W.x+tt,bt),J=Math.min(W.x-tt,J),Nt=Math.max(W.y+ft,Nt),rt=Math.min(W.y-ft,rt)}),j.width=bt-J,j.height=Nt-rt}(j)}),function(O,H){var j=Number.POSITIVE_INFINITY,J=0;O.sort(function(Vt,te){return te.height-Vt.height});for(var rt=It=A=O.reduce(function(Vt,te){return Vt.width<te.width?Vt.width:te.width}),bt=Rt=function(O){var H=0;return O.forEach(function(j){return H+=j.width+10}),H}(O),Nt=0,W=Number.MAX_VALUE,tt=Number.MAX_VALUE,ft=-1,Dt=Number.MAX_VALUE,Ot=Number.MAX_VALUE;Dt>A||Ot>1e-4;){if(1!=ft){var It=bt-(bt-rt)/ct_GOLDEN_SECTION;W=At(O,It)}if(0!=ft){var Rt=rt+(bt-rt)/ct_GOLDEN_SECTION;tt=At(O,Rt)}if(Dt=Math.abs(It-Rt),Ot=Math.abs(W-tt),W<j&&(j=W,J=It),tt<j&&(j=tt,J=Rt),W>tt?(rt=It,It=Rt,W=tt,ft=1):(bt=Rt,Rt=It,tt=W,ft=0),Nt++>100)break}At(O,J)}(N),f&&N.forEach(function(H){var j={x:0,y:0};H.array.forEach(function(bt){j.x+=bt.x,j.y+=bt.y}),j.x/=H.array.length,j.y/=H.array.length;var rt_x=H.x-(j.x-H.width/2)+p/2-E/2,rt_y=H.y-(j.y-H.height/2)+c/2-S/2;H.array.forEach(function(bt){bt.x+=rt_x,bt.y+=rt_y})}))},ht.separateGraphs=function(N,I){for(var w={},b={},v=[],f=0,y=0;y<I.length;y++){var d=I[y],p=d.source,c=d.target;b[p.index]?b[p.index].push(c):b[p.index]=[c],b[c.index]?b[c.index].push(p):b[c.index]=[p]}for(y=0;y<N.length;y++){var E=N[y];w[E.index]||S(E,!0)}function S(A,M){if(void 0===w[A.index]){M&&(f++,v.push({array:[]})),w[A.index]=f,v[f-1].array.push(A);var R=b[A.index];if(R)for(var X=0;X<R.length;X++)S(R[X],!1)}}return v}},5581:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var f,p,gt=ct(1703),G=ct(5302),N=ct(6400),I=ct(1182),w=ct(1717),b=ct(6542),v=ct(7109);function y(p){return void 0!==p.leaves||void 0!==p.groups}(p=f=ht.EventType||(ht.EventType={}))[p.start=0]="start",p[p.tick=1]="tick",p[p.end=2]="end";var d=function(){function p(){var c=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:p.getSourceIndex,getTargetIndex:p.getTargetIndex,setLength:p.setLinkLength,getType:function(E){return"function"==typeof c._linkType?c._linkType(E):0}}}return p.prototype.on=function(c,E){return this.event||(this.event={}),"string"==typeof c?this.event[f[c]]=E:this.event[c]=E,this},p.prototype.trigger=function(c){this.event&&void 0!==this.event[c.type]&&this.event[c.type](c)},p.prototype.kick=function(){for(;!this.tick(););},p.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:f.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var S,A,c=this._nodes.length;for(this._descent.locks.clear(),A=0;A<c;++A)(S=this._nodes[A]).fixed&&((void 0===S.px||void 0===S.py)&&(S.px=S.x,S.py=S.y),this._descent.locks.add(A,[S.px,S.py]));var R=this._descent.rungeKutta();return 0===R?this._alpha=0:void 0!==this._lastStress&&(this._alpha=R),this._lastStress=R,this.updateNodePositions(),this.trigger({type:f.tick,alpha:this._alpha,stress:this._lastStress}),!1},p.prototype.updateNodePositions=function(){for(var S,c=this._descent.x[0],E=this._descent.x[1],A=this._nodes.length;A--;)(S=this._nodes[A]).x=c[A],S.y=E[A]},p.prototype.nodes=function(c){if(!c){if(0===this._nodes.length&&this._links.length>0){var E=0;this._links.forEach(function(A){E=Math.max(E,A.source,A.target)}),this._nodes=new Array(++E);for(var S=0;S<E;++S)this._nodes[S]={}}return this._nodes}return this._nodes=c,this},p.prototype.groups=function(c){var E=this;return c?(this._groups=c,this._rootGroup={},this._groups.forEach(function(S){void 0===S.padding&&(S.padding=1),void 0!==S.leaves&&S.leaves.forEach(function(A,M){"number"==typeof A&&((S.leaves[M]=E._nodes[A]).parent=S)}),void 0!==S.groups&&S.groups.forEach(function(A,M){"number"==typeof A&&((S.groups[M]=E._groups[A]).parent=S)})}),this._rootGroup.leaves=this._nodes.filter(function(S){return void 0===S.parent}),this._rootGroup.groups=this._groups.filter(function(S){return void 0===S.parent}),this):this._groups},p.prototype.powerGraphGroups=function(c){var E=gt.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(E.groups),c(E),this},p.prototype.avoidOverlaps=function(c){return arguments.length?(this._avoidOverlaps=c,this):this._avoidOverlaps},p.prototype.handleDisconnected=function(c){return arguments.length?(this._handleDisconnected=c,this):this._handleDisconnected},p.prototype.flowLayout=function(c,E){return arguments.length||(c="y"),this._directedLinkConstraints={axis:c,getMinSeparation:"number"==typeof E?function(){return E}:E},this},p.prototype.links=function(c){return arguments.length?(this._links=c,this):this._links},p.prototype.constraints=function(c){return arguments.length?(this._constraints=c,this):this._constraints},p.prototype.distanceMatrix=function(c){return arguments.length?(this._distanceMatrix=c,this):this._distanceMatrix},p.prototype.size=function(c){return c?(this._canvasSize=c,this):this._canvasSize},p.prototype.defaultNodeSize=function(c){return c?(this._defaultNodeSize=c,this):this._defaultNodeSize},p.prototype.groupCompactness=function(c){return c?(this._groupCompactness=c,this):this._groupCompactness},p.prototype.linkDistance=function(c){return c?(this._linkDistance="function"==typeof c?c:+c,this._linkLengthCalculator=null,this):this._linkDistance},p.prototype.linkType=function(c){return this._linkType=c,this},p.prototype.convergenceThreshold=function(c){return c?(this._threshold="function"==typeof c?c:+c,this):this._threshold},p.prototype.alpha=function(c){return arguments.length?(c=+c,this._alpha?this._alpha=c>0?c:0:c>0&&(this._running||(this._running=!0,this.trigger({type:f.start,alpha:this._alpha=c}),this.kick())),this):this._alpha},p.prototype.getLinkLength=function(c){return"function"==typeof this._linkDistance?+this._linkDistance(c):this._linkDistance},p.setLinkLength=function(c,E){c.length=E},p.prototype.getLinkType=function(c){return"function"==typeof this._linkType?this._linkType(c):0},p.prototype.symmetricDiffLinkLengths=function(c,E){var S=this;return void 0===E&&(E=1),this.linkDistance(function(A){return c*A.length}),this._linkLengthCalculator=function(){return G.symmetricDiffLinkLengths(S._links,S.linkAccessor,E)},this},p.prototype.jaccardLinkLengths=function(c,E){var S=this;return void 0===E&&(E=1),this.linkDistance(function(A){return c*A.length}),this._linkLengthCalculator=function(){return G.jaccardLinkLengths(S._links,S.linkAccessor,E)},this},p.prototype.start=function(c,E,S,A,M,R){var X=this;void 0===c&&(c=0),void 0===E&&(E=0),void 0===S&&(S=0),void 0===A&&(A=0),void 0===M&&(M=!0),void 0===R&&(R=!0);var bt,At=this.nodes().length,q=At+2*this._groups.length,nt=this._canvasSize[0],O=this._canvasSize[1],H=new Array(q),j=new Array(q),J=null,rt=this._avoidOverlaps;this._nodes.forEach(function(It,Rt){It.index=Rt,void 0===It.x&&(It.x=nt/2,It.y=O/2),H[Rt]=It.x,j[Rt]=It.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?bt=this._distanceMatrix:(bt=new w.Calculator(q,this._links,p.getSourceIndex,p.getTargetIndex,function(It){return X.getLinkLength(It)}).DistanceMatrix(),J=N.Descent.createSquareMatrix(q,function(){return 2}),this._links.forEach(function(It){"number"==typeof It.source&&(It.source=X._nodes[It.source]),"number"==typeof It.target&&(It.target=X._nodes[It.target])}),this._links.forEach(function(It){var Rt=p.getSourceIndex(It),Vt=p.getTargetIndex(It);J[Rt][Vt]=J[Vt][Rt]=It.weight||1}));var Nt=N.Descent.createSquareMatrix(q,function(It,Rt){return bt[It][Rt]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var at=At;this._groups.forEach(function(Rt){(function(Rt,Vt,te,he){J[Rt][Vt]=J[Vt][Rt]=te,Nt[Rt][Vt]=Nt[Vt][Rt]=.1})(at,at+1,X._groupCompactness),H[at]=0,j[at++]=0,H[at]=0,j[at++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var tt=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,tt=tt.concat(G.generateDirectedEdgeConstraints(At,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new N.Descent([H,j],Nt),this._descent.locks.clear(),at=0;at<At;++at){var ft=this._nodes[at];ft.fixed&&(ft.px=ft.x,ft.py=ft.y,this._descent.locks.add(at,[ft.x,ft.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(c,H,j),tt.length>0&&(this._descent.project=new I.Projection(this._nodes,this._groups,this._rootGroup,tt).projectFunctions()),this._descent.run(E),this.separateOverlappingComponents(nt,O,R),this.avoidOverlaps(rt),rt&&(this._nodes.forEach(function(It,Rt){It.x=H[Rt],It.y=j[Rt]}),this._descent.project=new I.Projection(this._nodes,this._groups,this._rootGroup,tt,!0).projectFunctions(),this._nodes.forEach(function(It,Rt){H[Rt]=It.x,j[Rt]=It.y})),this._descent.G=J,this._descent.run(S),A){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=At,this._descent.scaleSnapByMaxH=At!=q;var Ot=N.Descent.createSquareMatrix(q,function(It,Rt){return It>=At||Rt>=At?J[It][Rt]:0});this._descent.G=Ot,this._descent.run(A)}return this.updateNodePositions(),this.separateOverlappingComponents(nt,O,R),M?this.resume():this},p.prototype.initialLayout=function(c,E,S){if(this._groups.length>0&&c>0){var A=this._nodes.length,M=this._links.map(function(X){return{source:X.source.index,target:X.target.index}}),R=this._nodes.map(function(X){return{index:X.index}});this._groups.forEach(function(X,at){R.push({index:X.index=A+at})}),this._groups.forEach(function(X,at){void 0!==X.leaves&&X.leaves.forEach(function(dt){return M.push({source:X.index,target:dt.index})}),void 0!==X.groups&&X.groups.forEach(function(dt){return M.push({source:X.index,target:dt.index})})}),(new p).size(this.size()).nodes(R).links(M).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(c,0,0,0,!1),this._nodes.forEach(function(X){E[X.index]=R[X.index].x,S[X.index]=R[X.index].y})}else this._descent.run(c)},p.prototype.separateOverlappingComponents=function(c,E,S){var A=this;if(void 0===S&&(S=!0),!this._distanceMatrix&&this._handleDisconnected){var M=this._descent.x[0],R=this._descent.x[1];this._nodes.forEach(function(at,dt){at.x=M[dt],at.y=R[dt]});var X=v.separateGraphs(this._nodes,this._links);v.applyPacking(X,c,E,this._defaultNodeSize,1,S),this._nodes.forEach(function(at,dt){A._descent.x[0][dt]=at.x,A._descent.x[1][dt]=at.y,at.bounds&&(at.bounds.setXCentre(at.x),at.bounds.setYCentre(at.y))})}},p.prototype.resume=function(){return this.alpha(.1)},p.prototype.stop=function(){return this.alpha(0)},p.prototype.prepareEdgeRouting=function(c){void 0===c&&(c=0),this._visibilityGraph=new b.TangentVisibilityGraph(this._nodes.map(function(E){return E.bounds.inflate(-c).vertices()}))},p.prototype.routeEdge=function(c,E,S){void 0===E&&(E=5);var A=[],M=new b.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),R={x:c.source.x,y:c.source.y},X={x:c.target.x,y:c.target.y},at=M.addPoint(R,c.source.index),dt=M.addPoint(X,c.target.index);M.addEdgeIfVisible(R,X,c.source.index,c.target.index),void 0!==S&&S(M);var O=new w.Calculator(M.V.length,M.E,function(Nt){return Nt.source.id},function(Nt){return Nt.target.id},function(Nt){return Nt.length()}).PathFromNodeToNode(at.id,dt.id);if(1===O.length||O.length===M.V.length){var H=I.makeEdgeBetween(c.source.innerBounds,c.target.innerBounds,E);A=[H.sourceIntersection,H.arrowStart]}else{for(var j=O.length-2,J=M.V[O[j]].p,rt=M.V[O[0]].p,bt=(A=[c.source.innerBounds.rayIntersection(J.x,J.y)],j);bt>=0;--bt)A.push(M.V[O[bt]].p);A.push(I.makeEdgeTo(rt,c.target.innerBounds,E))}return A},p.getSourceIndex=function(c){return"number"==typeof c.source?c.source:c.source.index},p.getTargetIndex=function(c){return"number"==typeof c.target?c.target:c.target.index},p.linkId=function(c){return p.getSourceIndex(c)+"-"+p.getTargetIndex(c)},p.dragStart=function(c){y(c)?p.storeOffset(c,p.dragOrigin(c)):(p.stopNode(c),c.fixed|=2)},p.stopNode=function(c){c.px=c.x,c.py=c.y},p.storeOffset=function(c,E){void 0!==c.leaves&&c.leaves.forEach(function(S){S.fixed|=2,p.stopNode(S),S._dragGroupOffsetX=S.x-E.x,S._dragGroupOffsetY=S.y-E.y}),void 0!==c.groups&&c.groups.forEach(function(S){return p.storeOffset(S,E)})},p.dragOrigin=function(c){return y(c)?{x:c.bounds.cx(),y:c.bounds.cy()}:c},p.drag=function(c,E){y(c)?(void 0!==c.leaves&&c.leaves.forEach(function(S){c.bounds.setXCentre(E.x),c.bounds.setYCentre(E.y),S.px=S._dragGroupOffsetX+E.x,S.py=S._dragGroupOffsetY+E.y}),void 0!==c.groups&&c.groups.forEach(function(S){return p.drag(S,E)})):(c.px=E.x,c.py=E.y)},p.dragEnd=function(c){y(c)?(void 0!==c.leaves&&c.leaves.forEach(function(E){p.dragEnd(E),delete E._dragGroupOffsetX,delete E._dragGroupOffsetY}),void 0!==c.groups&&c.groups.forEach(p.dragEnd)):c.fixed&=-7},p.mouseOver=function(c){c.fixed|=4,c.px=c.x,c.py=c.y},p.mouseOut=function(c){c.fixed&=-5},p}();ht.Layout=d},8453:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var gt=ct(1717),G=ct(6400),N=ct(1182),I=ct(5302),w=function(){function y(d,p){this.source=d,this.target=p}return y.prototype.actualLength=function(d){var p=this;return Math.sqrt(d.reduce(function(c,E){var S=E[p.target]-E[p.source];return c+S*S},0))},y}();ht.Link3D=w,ht.Node3D=function(d,p,c){void 0===d&&(d=0),void 0===p&&(p=0),void 0===c&&(c=0),this.x=d,this.y=p,this.z=c};var v=function(){function y(d,p,c){var E=this;void 0===c&&(c=1),this.nodes=d,this.links=p,this.idealLinkLength=c,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(y.k);for(var S=0;S<y.k;++S)this.result[S]=new Array(d.length);d.forEach(function(A,M){for(var R=0,X=y.dims;R<X.length;R++){var at=X[R];void 0===A[at]&&(A[at]=Math.random())}E.result[0][M]=A.x,E.result[1][M]=A.y,E.result[2][M]=A.z})}return y.prototype.linkLength=function(d){return d.actualLength(this.result)},y.prototype.start=function(d){var p=this;void 0===d&&(d=100);var c=this.nodes.length,E=new f;this.useJaccardLinkLengths&&I.jaccardLinkLengths(this.links,E,1.5),this.links.forEach(function(at){return at.length*=p.idealLinkLength});var S=new gt.Calculator(c,this.links,function(at){return at.source},function(at){return at.target},function(at){return at.length}).DistanceMatrix(),A=G.Descent.createSquareMatrix(c,function(at,dt){return S[at][dt]}),M=G.Descent.createSquareMatrix(c,function(){return 2});this.links.forEach(function(at){var dt=at.source,At=at.target;return M[dt][At]=M[At][dt]=1}),this.descent=new G.Descent(this.result,A),this.descent.threshold=.001,this.descent.G=M,this.constraints&&(this.descent.project=new N.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var R=0;R<this.nodes.length;R++){var X=this.nodes[R];X.fixed&&this.descent.locks.add(R,[X.x,X.y,X.z])}return this.descent.run(d),this},y.prototype.tick=function(){this.descent.locks.clear();for(var d=0;d<this.nodes.length;d++){var p=this.nodes[d];p.fixed&&this.descent.locks.add(d,[p.x,p.y,p.z])}return this.descent.rungeKutta()},y.k=(y.dims=["x","y","z"]).length,y}();ht.Layout3D=v;var f=function(){function y(){}return y.prototype.getSourceIndex=function(d){return d.source},y.prototype.getTargetIndex=function(d){return d.target},y.prototype.getLength=function(d){return d.length},y.prototype.setLength=function(d,p){d.length=p},y}()},5302:(we,ht)=>{"use strict";function ct(f,y){var d={};for(var p in f)d[p]={};for(var p in y)d[p]={};return Object.keys(d).length}function gt(f,y){var d=0;for(var p in f)void 0!==y[p]&&++d;return d}function N(f,y,d,p){var c=function(f,y){var d={},p=function(c,E){void 0===d[c]&&(d[c]={}),d[c][E]={}};return f.forEach(function(c){var E=y.getSourceIndex(c),S=y.getTargetIndex(c);p(E,S),p(S,E)}),d}(f,p);f.forEach(function(E){var S=c[p.getSourceIndex(E)],A=c[p.getTargetIndex(E)];p.setLength(E,1+y*d(S,A))})}function v(f,y,d){var p=[],c=0,E=[],S=[];function A(O){O.index=O.lowlink=c++,E.push(O),O.onStack=!0;for(var H=0,j=O.out;H<j.length;H++){var J=j[H];void 0===J.index?(A(J),O.lowlink=Math.min(O.lowlink,J.lowlink)):J.onStack&&(O.lowlink=Math.min(O.lowlink,J.index))}if(O.lowlink===O.index){for(var rt=[];E.length&&((J=E.pop()).onStack=!1,rt.push(J),J!==O););S.push(rt.map(function(bt){return bt.id}))}}for(var M=0;M<f;M++)p.push({id:M,out:[]});for(var R=0,X=y;R<X.length;R++){var at=X[R],dt=p[d.getSourceIndex(at)],At=p[d.getTargetIndex(at)];dt.out.push(At)}for(var q=0,Z=p;q<Z.length;q++){var nt=Z[q];void 0===nt.index&&A(nt)}return S}Object.defineProperty(ht,"__esModule",{value:!0}),ht.symmetricDiffLinkLengths=function(f,y,d){void 0===d&&(d=1),N(f,d,function(p,c){return Math.sqrt(ct(p,c)-gt(p,c))},y)},ht.jaccardLinkLengths=function(f,y,d){void 0===d&&(d=1),N(f,d,function(p,c){return Math.min(Object.keys(p).length,Object.keys(c).length)<1.1?0:gt(p,c)/ct(p,c)},y)},ht.generateDirectedEdgeConstraints=function(f,y,d,p){var c=v(f,y,p),E={};c.forEach(function(A,M){return A.forEach(function(R){return E[R]=M})});var S=[];return y.forEach(function(A){var M=p.getSourceIndex(A),R=p.getTargetIndex(A);E[M]!==E[R]&&S.push({axis:d,left:M,right:R,gap:p.getMinSeparation(A)})}),S},ht.stronglyConnectedComponents=v},1703:(we,ht)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var ct=function(d,p,c){this.source=d,this.target=p,this.type=c};ht.PowerEdge=ct;var gt=function(){function y(d,p,c,E){var S=this;if(this.linkAccessor=c,this.modules=new Array(d),this.roots=[],E)this.initModulesFromGroup(E);else{this.roots.push(new w);for(var A=0;A<d;++A)this.roots[0].add(this.modules[A]=new N(A))}this.R=p.length,p.forEach(function(M){var R=S.modules[c.getSourceIndex(M)],X=S.modules[c.getTargetIndex(M)],at=c.getType(M);R.outgoing.add(at,X),X.incoming.add(at,R)})}return y.prototype.initModulesFromGroup=function(d){var p=new w;this.roots.push(p);for(var c=0;c<d.leaves.length;++c){var E=d.leaves[c],S=new N(E.id);this.modules[E.id]=S,p.add(S)}if(d.groups)for(var A=0;A<d.groups.length;++A){var M=d.groups[A],R={};for(var X in M)"leaves"!==X&&"groups"!==X&&M.hasOwnProperty(X)&&(R[X]=M[X]);p.add(new N(-1-A,new b,new b,this.initModulesFromGroup(M),R))}return p},y.prototype.merge=function(d,p,c){void 0===c&&(c=0);var E=d.incoming.intersection(p.incoming),S=d.outgoing.intersection(p.outgoing),A=new w;A.add(d),A.add(p);var M=new N(this.modules.length,S,E,A);this.modules.push(M);var R=function(X,at,dt){X.forAll(function(At,q){At.forAll(function(Z){var nt=Z[at];nt.add(q,M),nt.remove(q,d),nt.remove(q,p),d[dt].remove(q,Z),p[dt].remove(q,Z)})})};return R(S,"incoming","outgoing"),R(E,"outgoing","incoming"),this.R-=E.count()+S.count(),this.roots[c].remove(d),this.roots[c].remove(p),this.roots[c].add(M),M},y.prototype.rootMerges=function(d){void 0===d&&(d=0);for(var p=this.roots[d].modules(),c=p.length,E=new Array(c*(c-1)),S=0,A=0,M=c-1;A<M;++A)for(var R=A+1;R<c;++R){var X=p[A],at=p[R];E[S]={id:S,nEdges:this.nEdges(X,at),a:X,b:at},S++}return E},y.prototype.greedyMerge=function(){for(var d=0;d<this.roots.length;++d)if(!(this.roots[d].modules().length<2)){var c=this.rootMerges(d).sort(function(E,S){return E.nEdges==S.nEdges?E.id-S.id:E.nEdges-S.nEdges})[0];if(!(c.nEdges>=this.R))return this.merge(c.a,c.b,d),!0}},y.prototype.nEdges=function(d,p){var c=d.incoming.intersection(p.incoming),E=d.outgoing.intersection(p.outgoing);return this.R-c.count()-E.count()},y.prototype.getGroupHierarchy=function(d){var p=this,c=[];return G(this.roots[0],{},c),this.allEdges().forEach(function(A){var M=p.modules[A.source],R=p.modules[A.target];d.push(new ct(void 0===M.gid?A.source:c[M.gid],void 0===R.gid?A.target:c[R.gid],A.type))}),c},y.prototype.allEdges=function(){var d=[];return y.getEdges(this.roots[0],d),d},y.getEdges=function(d,p){d.forAll(function(c){c.getEdges(p),y.getEdges(c.children,p)})},y}();function G(y,d,p){y.forAll(function(c){if(c.isLeaf())d.leaves||(d.leaves=[]),d.leaves.push(c.id);else{var E=d;if(c.gid=p.length,!c.isIsland()||c.isPredefined()){if(E={id:c.gid},c.isPredefined())for(var S in c.definition)E[S]=c.definition[S];d.groups||(d.groups=[]),d.groups.push(c.gid),p.push(E)}G(c.children,E,p)}})}ht.Configuration=gt;var N=function(){function y(d,p,c,E,S){void 0===p&&(p=new b),void 0===c&&(c=new b),void 0===E&&(E=new w),this.id=d,this.outgoing=p,this.incoming=c,this.children=E,this.definition=S}return y.prototype.getEdges=function(d){var p=this;this.outgoing.forAll(function(c,E){c.forAll(function(S){d.push(new ct(p.id,S.id,E))})})},y.prototype.isLeaf=function(){return 0===this.children.count()},y.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},y.prototype.isPredefined=function(){return void 0!==this.definition},y}();ht.Module=N;var w=function(){function y(){this.table={}}return y.prototype.count=function(){return Object.keys(this.table).length},y.prototype.intersection=function(d){var p=new y;return p.table=function(y,d){var p={};for(var c in y)c in d&&(p[c]=y[c]);return p}(this.table,d.table),p},y.prototype.intersectionCount=function(d){return this.intersection(d).count()},y.prototype.contains=function(d){return d in this.table},y.prototype.add=function(d){this.table[d.id]=d},y.prototype.remove=function(d){delete this.table[d.id]},y.prototype.forAll=function(d){for(var p in this.table)d(this.table[p])},y.prototype.modules=function(){var d=[];return this.forAll(function(p){p.isPredefined()||d.push(p)}),d},y}();ht.ModuleSet=w;var b=function(){function y(){this.sets={},this.n=0}return y.prototype.count=function(){return this.n},y.prototype.contains=function(d){var p=!1;return this.forAllModules(function(c){!p&&c.id==d&&(p=!0)}),p},y.prototype.add=function(d,p){(d in this.sets?this.sets[d]:this.sets[d]=new w).add(p),++this.n},y.prototype.remove=function(d,p){var c=this.sets[d];c.remove(p),0===c.count()&&delete this.sets[d],--this.n},y.prototype.forAll=function(d){for(var p in this.sets)d(this.sets[p],Number(p))},y.prototype.forAllModules=function(d){this.forAll(function(p,c){return p.forAll(d)})},y.prototype.intersection=function(d){var p=new y;return this.forAll(function(c,E){if(E in d.sets){var S=c.intersection(d.sets[E]),A=S.count();A>0&&(p.sets[E]=S,p.n+=A)}}),p},y}();ht.LinkSets=b,ht.getGroups=function(y,d,p,c){for(var S=new gt(y.length,d,p,c);S.greedyMerge(););var A=[],M=S.getGroupHierarchy(A);return A.forEach(function(R){var X=function(at){var dt=R[at];"number"==typeof dt&&(R[at]=y[dt])};X("source"),X("target")}),{groups:M,powerEdges:A}}},7992:(we,ht)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var ct=function(){function G(N){this.elem=N,this.subheaps=[]}return G.prototype.toString=function(N){for(var I="",w=!1,b=0;b<this.subheaps.length;++b){var v=this.subheaps[b];v.elem?(w&&(I+=","),I+=v.toString(N),w=!0):w=!1}return""!==I&&(I="("+I+")"),(this.elem?N(this.elem):"")+I},G.prototype.forEach=function(N){this.empty()||(N(this.elem,this),this.subheaps.forEach(function(I){return I.forEach(N)}))},G.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(N,I){return N+I.count()},0)},G.prototype.min=function(){return this.elem},G.prototype.empty=function(){return null==this.elem},G.prototype.contains=function(N){if(this===N)return!0;for(var I=0;I<this.subheaps.length;I++)if(this.subheaps[I].contains(N))return!0;return!1},G.prototype.isHeap=function(N){var I=this;return this.subheaps.every(function(w){return N(I.elem,w.elem)&&w.isHeap(N)})},G.prototype.insert=function(N,I){return this.merge(new G(N),I)},G.prototype.merge=function(N,I){return this.empty()?N:N.empty()?this:I(this.elem,N.elem)?(this.subheaps.push(N),this):(N.subheaps.push(this),N)},G.prototype.removeMin=function(N){return this.empty()?null:this.mergePairs(N)},G.prototype.mergePairs=function(N){if(0==this.subheaps.length)return new G(null);if(1==this.subheaps.length)return this.subheaps[0];var I=this.subheaps.pop().merge(this.subheaps.pop(),N),w=this.mergePairs(N);return I.merge(w,N)},G.prototype.decreaseKey=function(N,I,w,b){var v=N.removeMin(b);N.elem=v.elem,N.subheaps=v.subheaps,null!==w&&null!==v.elem&&w(N.elem,N);var f=new G(I);return null!==w&&w(I,f),this.merge(f,b)},G}();ht.PairingHeap=ct;var gt=function(){function G(N){this.lessThan=N}return G.prototype.top=function(){return this.empty()?null:this.root.elem},G.prototype.push=function(){for(var N=[],I=0;I<arguments.length;I++)N[I]=arguments[I];for(var w,v,b=0;v=N[b];++b)w=new ct(v),this.root=this.empty()?w:this.root.merge(w,this.lessThan);return w},G.prototype.empty=function(){return!this.root||!this.root.elem},G.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},G.prototype.forEach=function(N){this.root.forEach(N)},G.prototype.pop=function(){if(this.empty())return null;var N=this.root.min();return this.root=this.root.removeMin(this.lessThan),N},G.prototype.reduceKey=function(N,I,w){void 0===w&&(w=null),this.root=this.root.decreaseKey(N,I,w,this.lessThan)},G.prototype.toString=function(N){return this.root.toString(N)},G.prototype.count=function(){return this.root.count()},G}();ht.PriorityQueue=gt},4655:function(we,ht){"use strict";var w,ct=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ht,"__esModule",{value:!0});var gt=function(){function w(){this.findIter=function(b){for(var v=this._root,f=this.iterator();null!==v;){var y=this._comparator(b,v.data);if(0===y)return f._cursor=v,f;f._ancestors.push(v),v=v.get_child(y>0)}return null}}return w.prototype.clear=function(){this._root=null,this.size=0},w.prototype.find=function(b){for(var v=this._root;null!==v;){var f=this._comparator(b,v.data);if(0===f)return v.data;v=v.get_child(f>0)}return null},w.prototype.lowerBound=function(b){return this._bound(b,this._comparator)},w.prototype.upperBound=function(b){var v=this._comparator;return this._bound(b,function(y,d){return v(d,y)})},w.prototype.min=function(){var b=this._root;if(null===b)return null;for(;null!==b.left;)b=b.left;return b.data},w.prototype.max=function(){var b=this._root;if(null===b)return null;for(;null!==b.right;)b=b.right;return b.data},w.prototype.iterator=function(){return new G(this)},w.prototype.each=function(b){for(var f,v=this.iterator();null!==(f=v.next());)b(f)},w.prototype.reach=function(b){for(var f,v=this.iterator();null!==(f=v.prev());)b(f)},w.prototype._bound=function(b,v){for(var f=this._root,y=this.iterator();null!==f;){var d=this._comparator(b,f.data);if(0===d)return y._cursor=f,y;y._ancestors.push(f),f=f.get_child(d>0)}for(var p=y._ancestors.length-1;p>=0;--p)if(v(b,(f=y._ancestors[p]).data)>0)return y._cursor=f,y._ancestors.length=p,y;return y._ancestors.length=0,y},w}();ht.TreeBase=gt;var G=function(){function w(b){this._tree=b,this._ancestors=[],this._cursor=null}return w.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},w.prototype.next=function(){if(null===this._cursor){var b=this._tree._root;null!==b&&this._minNode(b)}else if(null===this._cursor.right){var v;do{if(v=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===v)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},w.prototype.prev=function(){if(null===this._cursor){var b=this._tree._root;null!==b&&this._maxNode(b)}else if(null===this._cursor.left){var v;do{if(v=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===v)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},w.prototype._minNode=function(b){for(;null!==b.left;)this._ancestors.push(b),b=b.left;this._cursor=b},w.prototype._maxNode=function(b){for(;null!==b.right;)this._ancestors.push(b),b=b.right;this._cursor=b},w}();ht.Iterator=G;var N=function(){function w(b){this.data=b,this.left=null,this.right=null,this.red=!0}return w.prototype.get_child=function(b){return b?this.right:this.left},w.prototype.set_child=function(b,v){b?this.right=v:this.left=v},w}(),I=function(w){function b(v){var f=w.call(this)||this;return f._root=null,f._comparator=v,f.size=0,f}return ct(b,w),b.prototype.insert=function(v){var f=!1;if(null===this._root)this._root=new N(v),f=!0,this.size++;else{var y=new N(void 0),d=!1,p=!1,c=null,E=y,S=null,A=this._root;for(E.right=this._root;;){if(null===A?(A=new N(v),S.set_child(d,A),f=!0,this.size++):b.is_red(A.left)&&b.is_red(A.right)&&(A.red=!0,A.left.red=!1,A.right.red=!1),b.is_red(A)&&b.is_red(S)){var M=E.right===c;A===S.get_child(p)?E.set_child(M,b.single_rotate(c,!p)):E.set_child(M,b.double_rotate(c,!p))}var R=this._comparator(A.data,v);if(0===R)break;p=d,null!==c&&(E=c),c=S,S=A,A=A.get_child(d=R<0)}this._root=y.right}return this._root.red=!1,f},b.prototype.remove=function(v){if(null===this._root)return!1;var f=new N(void 0),y=f;y.right=this._root;for(var d=null,p=null,c=null,E=!0;null!==y.get_child(E);){var S=E;p=d,d=y,y=y.get_child(E);var A=this._comparator(v,y.data);if(E=A>0,0===A&&(c=y),!b.is_red(y)&&!b.is_red(y.get_child(E)))if(b.is_red(y.get_child(!E))){var M=b.single_rotate(y,E);d.set_child(S,M),d=M}else if(!b.is_red(y.get_child(!E))){var R=d.get_child(!S);if(null!==R)if(b.is_red(R.get_child(!S))||b.is_red(R.get_child(S))){var X=p.right===d;b.is_red(R.get_child(S))?p.set_child(X,b.double_rotate(d,S)):b.is_red(R.get_child(!S))&&p.set_child(X,b.single_rotate(d,S));var at=p.get_child(X);at.red=!0,y.red=!0,at.left.red=!1,at.right.red=!1}else d.red=!1,R.red=!0,y.red=!0}}return null!==c&&(c.data=y.data,d.set_child(d.right===y,y.get_child(null===y.left)),this.size--),this._root=f.right,null!==this._root&&(this._root.red=!1),null!==c},b.is_red=function(v){return null!==v&&v.red},b.single_rotate=function(v,f){var y=v.get_child(!f);return v.set_child(!f,y.get_child(f)),y.set_child(f,v),v.red=!0,y.red=!1,y},b.double_rotate=function(v,f){return v.set_child(!f,b.single_rotate(v.get_child(!f),!f)),b.single_rotate(v,f)},b}(gt);ht.RBTree=I},1182:function(we,ht,ct){"use strict";var O,gt=this&&this.__extends||(O=function(H,j){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,rt){J.__proto__=rt}||function(J,rt){for(var bt in rt)rt.hasOwnProperty(bt)&&(J[bt]=rt[bt])})(H,j)},function(H,j){function J(){this.constructor=H}O(H,j),H.prototype=null===j?Object.create(j):(J.prototype=j.prototype,new J)});Object.defineProperty(ht,"__esModule",{value:!0});var G=ct(9474),N=ct(4655);function I(O){return O.bounds=void 0!==O.leaves?O.leaves.reduce(function(H,j){return j.bounds.union(H)},w.empty()):w.empty(),void 0!==O.groups&&(O.bounds=O.groups.reduce(function(H,j){return I(j).union(H)},O.bounds)),O.bounds=O.bounds.inflate(O.padding),O.bounds}ht.computeGroupBounds=I;var w=function(){function O(H,j,J,rt){this.x=H,this.X=j,this.y=J,this.Y=rt}return O.empty=function(){return new O(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},O.prototype.cx=function(){return(this.x+this.X)/2},O.prototype.cy=function(){return(this.y+this.Y)/2},O.prototype.overlapX=function(H){var j=this.cx(),J=H.cx();return j<=J&&H.x<this.X?this.X-H.x:J<=j&&this.x<H.X?H.X-this.x:0},O.prototype.overlapY=function(H){var j=this.cy(),J=H.cy();return j<=J&&H.y<this.Y?this.Y-H.y:J<=j&&this.y<H.Y?H.Y-this.y:0},O.prototype.setXCentre=function(H){var j=H-this.cx();this.x+=j,this.X+=j},O.prototype.setYCentre=function(H){var j=H-this.cy();this.y+=j,this.Y+=j},O.prototype.width=function(){return this.X-this.x},O.prototype.height=function(){return this.Y-this.y},O.prototype.union=function(H){return new O(Math.min(this.x,H.x),Math.max(this.X,H.X),Math.min(this.y,H.y),Math.max(this.Y,H.Y))},O.prototype.lineIntersections=function(H,j,J,rt){for(var bt=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],Nt=[],W=0;W<4;++W){var tt=O.lineIntersection(H,j,J,rt,bt[W][0],bt[W][1],bt[W][2],bt[W][3]);null!==tt&&Nt.push({x:tt.x,y:tt.y})}return Nt},O.prototype.rayIntersection=function(H,j){var J=this.lineIntersections(this.cx(),this.cy(),H,j);return J.length>0?J[0]:null},O.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},O.lineIntersection=function(H,j,J,rt,bt,Nt,W,tt){var ft=J-H,Dt=W-bt,Ot=rt-j,It=tt-Nt,Rt=It*ft-Dt*Ot;if(0==Rt)return null;var Vt=H-bt,te=j-Nt,de=(Dt*te-It*Vt)/Rt,Ee=(ft*te-Ot*Vt)/Rt;return de>=0&&de<=1&&Ee>=0&&Ee<=1?{x:H+de*ft,y:j+de*Ot}:null},O.prototype.inflate=function(H){return new O(this.x-H,this.X+H,this.y-H,this.Y+H)},O}();ht.Rectangle=w,ht.makeEdgeBetween=function(O,H,j){var J=O.rayIntersection(H.cx(),H.cy())||{x:O.cx(),y:O.cy()},rt=H.rayIntersection(O.cx(),O.cy())||{x:H.cx(),y:H.cy()},bt=rt.x-J.x,Nt=rt.y-J.y,W=Math.sqrt(bt*bt+Nt*Nt),tt=W-j;return{sourceIntersection:J,targetIntersection:rt,arrowStart:{x:J.x+tt*bt/W,y:J.y+tt*Nt/W}}},ht.makeEdgeTo=function(O,H,j){var J=H.rayIntersection(O.x,O.y);J||(J={x:H.cx(),y:H.cy()});var rt=J.x-O.x,bt=J.y-O.y,Nt=Math.sqrt(rt*rt+bt*bt);return{x:J.x-j*rt/Nt,y:J.y-j*bt/Nt}};var f=function(H,j,J){this.v=H,this.r=j,this.pos=J,this.prev=p(),this.next=p()},y=function(H,j,J){this.isOpen=H,this.v=j,this.pos=J};function d(O,H){return O.pos>H.pos?1:O.pos<H.pos||O.isOpen?-1:H.isOpen?1:0}function p(){return new N.RBTree(function(O,H){return O.pos-H.pos})}var c={getCentre:function(O){return O.cx()},getOpen:function(O){return O.y},getClose:function(O){return O.Y},getSize:function(O){return O.width()},makeRect:function(O,H,j,J){return new w(j-J/2,j+J/2,O,H)},findNeighbours:function(O,H){var j=function(J,rt){for(var Nt,bt=H.findIter(O);null!==(Nt=bt[J]());){var W=Nt.r.overlapX(O.r);if((W<=0||W<=Nt.r.overlapY(O.r))&&(O[J].insert(Nt),Nt[rt].insert(O)),W<=0)break}};j("next","prev"),j("prev","next")}},E={getCentre:function(O){return O.cy()},getOpen:function(O){return O.x},getClose:function(O){return O.X},getSize:function(O){return O.height()},makeRect:function(O,H,j,J){return new w(O,H,j-J/2,j+J/2)},findNeighbours:function(O,H){var j=function(J,rt){var bt=H.findIter(O)[J]();null!==bt&&bt.r.overlapX(O.r)>0&&(O[J].insert(bt),bt[rt].insert(O))};j("next","prev"),j("prev","next")}};function S(O,H,j,J){void 0===J&&(J=!1);var rt=O.padding,bt=void 0!==O.groups?O.groups.length:0,Nt=void 0!==O.leaves?O.leaves.length:0,W=bt?O.groups.reduce(function(Ut,Jt){return Ut.concat(S(Jt,H,j,!0))},[]):[],tt=(J?2:0)+Nt+bt,ft=new Array(tt),Dt=new Array(tt),Ot=0,It=function(Ut,Jt){Dt[Ot]=Ut,ft[Ot++]=Jt};if(J){var Rt=O.bounds,Vt=H.getCentre(Rt),te=H.getSize(Rt)/2,he=H.getOpen(Rt),de=H.getClose(Rt),oe=Vt-te+rt/2,Ee=Vt+te-rt/2;O.minVar.desiredPosition=oe,It(H.makeRect(he,de,oe,rt),O.minVar),O.maxVar.desiredPosition=Ee,It(H.makeRect(he,de,Ee,rt),O.maxVar)}Nt&&O.leaves.forEach(function(Ut){return It(Ut.bounds,Ut.variable)}),bt&&O.groups.forEach(function(Ut){var Jt=Ut.bounds;It(H.makeRect(H.getOpen(Jt),H.getClose(Jt),H.getCentre(Jt),H.getSize(Jt)),Ut.minVar)});var De=A(Dt,ft,H,j);return bt&&(ft.forEach(function(Ut){Ut.cOut=[],Ut.cIn=[]}),De.forEach(function(Ut){Ut.left.cOut.push(Ut),Ut.right.cIn.push(Ut)}),O.groups.forEach(function(Ut){var Jt=(Ut.padding-H.getSize(Ut.bounds))/2;Ut.minVar.cIn.forEach(function(ie){return ie.gap+=Jt}),Ut.minVar.cOut.forEach(function(ie){ie.left=Ut.maxVar,ie.gap+=Jt})})),W.concat(De)}function A(O,H,j,J){var rt,bt=O.length,Nt=2*bt;console.assert(H.length>=bt);var W=new Array(Nt);for(rt=0;rt<bt;++rt){var tt=O[rt],ft=new f(H[rt],tt,j.getCentre(tt));W[rt]=new y(!0,ft,j.getOpen(tt)),W[rt+bt]=new y(!1,ft,j.getClose(tt))}W.sort(d);var Dt=new Array,Ot=p();for(rt=0;rt<Nt;++rt){var It=W[rt];if(ft=It.v,It.isOpen)Ot.insert(ft),j.findNeighbours(ft,Ot);else{Ot.remove(ft);var Rt=function(he,de){var oe=(j.getSize(he.r)+j.getSize(de.r))/2+J;Dt.push(new G.Constraint(he.v,de.v,oe))},Vt=function(he,de,oe){for(var Ee,De=ft[he].iterator();null!==(Ee=De[he]());)oe(Ee,ft),Ee[de].remove(ft)};Vt("prev","next",function(he,de){return Rt(he,de)}),Vt("next","prev",function(he,de){return Rt(de,he)})}}return console.assert(0===Ot.size),Dt}function X(O,H){return A(O,H,c,1e-6)}function at(O,H){return A(O,H,E,1e-6)}function dt(O){return S(O,c,1e-6)}function At(O){return S(O,E,1e-6)}ht.generateXConstraints=X,ht.generateYConstraints=at,ht.generateXGroupConstraints=dt,ht.generateYGroupConstraints=At,ht.removeOverlaps=function(O){var H=O.map(function(rt){return new G.Variable(rt.cx())}),j=X(O,H),J=new G.Solver(H,j);J.solve(),H.forEach(function(rt,bt){return O[bt].setXCentre(rt.position())}),H=O.map(function(rt){return new G.Variable(rt.cy())}),j=at(O,H),(J=new G.Solver(H,j)).solve(),H.forEach(function(rt,bt){return O[bt].setYCentre(rt.position())})};var Z=function(O){function H(j,J){var rt=O.call(this,0,J)||this;return rt.index=j,rt}return gt(H,O),H}(G.Variable);ht.IndexedVariable=Z;var nt=function(){function O(H,j,J,rt,bt){var Nt=this;if(void 0===J&&(J=null),void 0===rt&&(rt=null),void 0===bt&&(bt=!1),this.nodes=H,this.groups=j,this.rootGroup=J,this.avoidOverlaps=bt,this.variables=H.map(function(tt,ft){return tt.variable=new Z(ft,1)}),rt&&this.createConstraints(rt),bt&&J&&void 0!==J.groups){H.forEach(function(tt){if(tt.width&&tt.height){var ft=tt.width/2,Dt=tt.height/2;tt.bounds=new w(tt.x-ft,tt.x+ft,tt.y-Dt,tt.y+Dt)}else tt.bounds=new w(tt.x,tt.x,tt.y,tt.y)}),I(J);var W=H.length;j.forEach(function(tt){Nt.variables[W]=tt.minVar=new Z(W++,void 0!==tt.stiffness?tt.stiffness:.01),Nt.variables[W]=tt.maxVar=new Z(W++,void 0!==tt.stiffness?tt.stiffness:.01)})}}return O.prototype.createSeparation=function(H){return new G.Constraint(this.nodes[H.left].variable,this.nodes[H.right].variable,H.gap,void 0!==H.equality&&H.equality)},O.prototype.makeFeasible=function(H){var j=this;if(this.avoidOverlaps){var J="x",rt="width";"x"===H.axis&&(J="y",rt="height");var bt=H.offsets.map(function(W){return j.nodes[W.node]}).sort(function(W,tt){return W[J]-tt[J]}),Nt=null;bt.forEach(function(W){if(Nt){var tt=Nt[J]+Nt[rt];tt>W[J]&&(W[J]=tt)}Nt=W})}},O.prototype.createAlignment=function(H){var j=this,J=this.nodes[H.offsets[0].node].variable;this.makeFeasible(H);var rt="x"===H.axis?this.xConstraints:this.yConstraints;H.offsets.slice(1).forEach(function(bt){rt.push(new G.Constraint(J,j.nodes[bt.node].variable,bt.offset,!0))})},O.prototype.createConstraints=function(H){var j=this,J=function(rt){return void 0===rt.type||"separation"===rt.type};this.xConstraints=H.filter(function(rt){return"x"===rt.axis&&J(rt)}).map(function(rt){return j.createSeparation(rt)}),this.yConstraints=H.filter(function(rt){return"y"===rt.axis&&J(rt)}).map(function(rt){return j.createSeparation(rt)}),H.filter(function(rt){return"alignment"===rt.type}).forEach(function(rt){return j.createAlignment(rt)})},O.prototype.setupVariablesAndBounds=function(H,j,J,rt){this.nodes.forEach(function(bt,Nt){bt.fixed?(bt.variable.weight=bt.fixedWeight?bt.fixedWeight:1e3,J[Nt]=rt(bt)):bt.variable.weight=1;var W=(bt.width||0)/2,tt=(bt.height||0)/2,ft=H[Nt],Dt=j[Nt];bt.bounds=new w(ft-W,ft+W,Dt-tt,Dt+tt)})},O.prototype.xProject=function(H,j,J){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(H,j,H,J,function(rt){return rt.px},this.xConstraints,dt,function(rt){return rt.bounds.setXCentre(J[rt.variable.index]=rt.variable.position())},function(rt){var bt=J[rt.minVar.index]=rt.minVar.position(),Nt=J[rt.maxVar.index]=rt.maxVar.position(),W=rt.padding/2;rt.bounds.x=bt-W,rt.bounds.X=Nt+W})},O.prototype.yProject=function(H,j,J){!this.rootGroup&&!this.yConstraints||this.project(H,j,j,J,function(rt){return rt.py},this.yConstraints,At,function(rt){return rt.bounds.setYCentre(J[rt.variable.index]=rt.variable.position())},function(rt){var bt=J[rt.minVar.index]=rt.minVar.position(),Nt=J[rt.maxVar.index]=rt.maxVar.position(),W=rt.padding/2;rt.bounds.y=bt-W,rt.bounds.Y=Nt+W})},O.prototype.projectFunctions=function(){var H=this;return[function(j,J,rt){return H.xProject(j,J,rt)},function(j,J,rt){return H.yProject(j,J,rt)}]},O.prototype.project=function(H,j,J,rt,bt,Nt,W,tt,ft){this.setupVariablesAndBounds(H,j,rt,bt),this.rootGroup&&this.avoidOverlaps&&(I(this.rootGroup),Nt=Nt.concat(W(this.rootGroup))),this.solve(this.variables,Nt,J,rt),this.nodes.forEach(tt),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(ft),I(this.rootGroup))},O.prototype.solve=function(H,j,J,rt){var bt=new G.Solver(H,j);bt.setStartingPositions(J),bt.setDesiredPositions(rt),bt.solve()},O}();ht.Projection=nt},1717:(we,ht,ct)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var gt=ct(7992),G=function(v,f){this.id=v,this.distance=f},N=function(v){this.id=v,this.neighbours=[]},I=function(v,f,y){this.node=v,this.prev=f,this.d=y},w=function(){function b(v,f,y,d,p){this.n=v,this.es=f,this.neighbours=new Array(this.n);for(var c=this.n;c--;)this.neighbours[c]=new N(c);for(c=this.es.length;c--;){var E=this.es[c],S=y(E),A=d(E),M=p(E);this.neighbours[S].neighbours.push(new G(A,M)),this.neighbours[A].neighbours.push(new G(S,M))}}return b.prototype.DistanceMatrix=function(){for(var v=new Array(this.n),f=0;f<this.n;++f)v[f]=this.dijkstraNeighbours(f);return v},b.prototype.DistancesFromNode=function(v){return this.dijkstraNeighbours(v)},b.prototype.PathFromNodeToNode=function(v,f){return this.dijkstraNeighbours(v,f)},b.prototype.PathFromNodeToNodeWithPrevCost=function(v,f,y){var d=new gt.PriorityQueue(function(At,q){return At.d<=q.d}),p=this.neighbours[v],c=new I(p,null,0),E={};for(d.push(c);!d.empty()&&(p=(c=d.pop()).node).id!==f;)for(var S=p.neighbours.length;S--;){var A=p.neighbours[S],M=this.neighbours[A.id];if(!c.prev||M.id!==c.prev.node.id){var R=M.id+","+p.id;if(!(R in E&&E[R]<=c.d)){var X=c.prev?y(c.prev.node.id,p.id,M.id):0,at=c.d+A.distance+X;E[R]=at,d.push(new I(M,c,at))}}}for(var dt=[];c.prev;)dt.push((c=c.prev).node.id);return dt},b.prototype.dijkstraNeighbours=function(v,f){void 0===f&&(f=-1);for(var y=new gt.PriorityQueue(function(X,at){return X.d<=at.d}),d=this.neighbours.length,p=new Array(d);d--;){var c=this.neighbours[d];c.d=d===v?0:Number.POSITIVE_INFINITY,c.q=y.push(c)}for(;!y.empty();){var E=y.pop();if(p[E.id]=E.d,E.id===f){for(var S=[],A=E;void 0!==A.prev;)S.push(A.prev.id),A=A.prev;return S}for(d=E.neighbours.length;d--;){var M=E.neighbours[d],R=(A=this.neighbours[M.id],E.d+M.distance);E.d!==Number.MAX_VALUE&&A.d>R&&(A.d=R,A.prev=E,y.reduceKey(A.q,A,function(at,dt){return at.q=dt}))}}return p},b}();ht.Calculator=w},9474:(we,ht)=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});var ct=function(){function v(f){this.scale=f,this.AB=0,this.AD=0,this.A2=0}return v.prototype.addVariable=function(f){var y=this.scale/f.scale,p=f.weight;this.AB+=p*y*(f.offset/f.scale),this.AD+=p*y*f.desiredPosition,this.A2+=p*y*y},v.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},v}();ht.PositionStats=ct;var gt=function(){function v(f,y,d,p){void 0===p&&(p=!1),this.left=f,this.right=y,this.gap=d,this.equality=p,this.active=!1,this.unsatisfiable=!1,this.left=f,this.right=y,this.gap=d,this.equality=p}return v.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},v}();ht.Constraint=gt;var G=function(){function v(f,y,d){void 0===y&&(y=1),void 0===d&&(d=1),this.desiredPosition=f,this.weight=y,this.scale=d,this.offset=0}return v.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},v.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},v.prototype.visitNeighbours=function(f,y){var d=function(p,c){return p.active&&f!==c&&y(p,c)};this.cOut.forEach(function(p){return d(p,p.right)}),this.cIn.forEach(function(p){return d(p,p.left)})},v}();ht.Variable=G;var N=function(){function v(f){this.vars=[],f.offset=0,this.ps=new ct(f.scale),this.addVariable(f)}return v.prototype.addVariable=function(f){f.block=this,this.vars.push(f),this.ps.addVariable(f),this.posn=this.ps.getPosn()},v.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var f=0,y=this.vars.length;f<y;++f)this.ps.addVariable(this.vars[f]);this.posn=this.ps.getPosn()},v.prototype.compute_lm=function(f,y,d){var p=this,c=f.dfdv();return f.visitNeighbours(y,function(E,S){var A=p.compute_lm(S,f,d);S===E.right?(c+=A*E.left.scale,E.lm=A):(c+=A*E.right.scale,E.lm=-A),d(E)}),c/f.scale},v.prototype.populateSplitBlock=function(f,y){var d=this;f.visitNeighbours(y,function(p,c){c.offset=f.offset+(c===p.right?p.gap:-p.gap),d.addVariable(c),d.populateSplitBlock(c,f)})},v.prototype.traverse=function(f,y,d,p){var c=this;void 0===d&&(d=this.vars[0]),void 0===p&&(p=null),d.visitNeighbours(p,function(E,S){y.push(f(E)),c.traverse(f,y,S,d)})},v.prototype.findMinLM=function(){var f=null;return this.compute_lm(this.vars[0],null,function(y){!y.equality&&(null===f||y.lm<f.lm)&&(f=y)}),f},v.prototype.findMinLMBetween=function(f,y){this.compute_lm(f,null,function(){});var d=null;return this.findPath(f,null,y,function(p,c){!p.equality&&p.right===c&&(null===d||p.lm<d.lm)&&(d=p)}),d},v.prototype.findPath=function(f,y,d,p){var c=this,E=!1;return f.visitNeighbours(y,function(S,A){!E&&(A===d||c.findPath(A,f,d,p))&&(E=!0,p(S,A))}),E},v.prototype.isActiveDirectedPathBetween=function(f,y){if(f===y)return!0;for(var d=f.cOut.length;d--;){var p=f.cOut[d];if(p.active&&this.isActiveDirectedPathBetween(p.right,y))return!0}return!1},v.split=function(f){return f.active=!1,[v.createSplitBlock(f.left),v.createSplitBlock(f.right)]},v.createSplitBlock=function(f){var y=new v(f);return y.populateSplitBlock(f,null),y},v.prototype.splitBetween=function(f,y){var d=this.findMinLMBetween(f,y);if(null!==d){var p=v.split(d);return{constraint:d,lb:p[0],rb:p[1]}}return null},v.prototype.mergeAcross=function(f,y,d){y.active=!0;for(var p=0,c=f.vars.length;p<c;++p){var E=f.vars[p];E.offset+=d,this.addVariable(E)}this.posn=this.ps.getPosn()},v.prototype.cost=function(){for(var f=0,y=this.vars.length;y--;){var d=this.vars[y],p=d.position()-d.desiredPosition;f+=p*p*d.weight}return f},v}();ht.Block=N;var I=function(){function v(f){this.vs=f;var y=f.length;for(this.list=new Array(y);y--;){var d=new N(f[y]);this.list[y]=d,d.blockInd=y}}return v.prototype.cost=function(){for(var f=0,y=this.list.length;y--;)f+=this.list[y].cost();return f},v.prototype.insert=function(f){f.blockInd=this.list.length,this.list.push(f)},v.prototype.remove=function(f){var y=this.list.length-1,d=this.list[y];this.list.length=y,f!==d&&(this.list[f.blockInd]=d,d.blockInd=f.blockInd)},v.prototype.merge=function(f){var y=f.left.block,d=f.right.block,p=f.right.offset-f.left.offset-f.gap;y.vars.length<d.vars.length?(d.mergeAcross(y,f,p),this.remove(y)):(y.mergeAcross(d,f,-p),this.remove(d))},v.prototype.forEach=function(f){this.list.forEach(f)},v.prototype.updateBlockPositions=function(){this.list.forEach(function(f){return f.updateWeightedPosition()})},v.prototype.split=function(f){var y=this;this.updateBlockPositions(),this.list.forEach(function(d){var p=d.findMinLM();null!==p&&p.lm<w.LAGRANGIAN_TOLERANCE&&(d=p.left.block,N.split(p).forEach(function(c){return y.insert(c)}),y.remove(d),f.push(p))})},v}();ht.Blocks=I;var w=function(){function v(f,y){this.vs=f,this.cs=y,this.vs=f,f.forEach(function(d){d.cIn=[],d.cOut=[]}),this.cs=y,y.forEach(function(d){d.left.cOut.push(d),d.right.cIn.push(d)}),this.inactive=y.map(function(d){return d.active=!1,d}),this.bs=null}return v.prototype.cost=function(){return this.bs.cost()},v.prototype.setStartingPositions=function(f){this.inactive=this.cs.map(function(y){return y.active=!1,y}),this.bs=new I(this.vs),this.bs.forEach(function(y,d){return y.posn=f[d]})},v.prototype.setDesiredPositions=function(f){this.vs.forEach(function(y,d){return y.desiredPosition=f[d]})},v.prototype.mostViolated=function(){for(var f=Number.MAX_VALUE,y=null,d=this.inactive,p=d.length,c=p,E=0;E<p;++E){var S=d[E];if(!S.unsatisfiable){var A=S.slack();if((S.equality||A<f)&&(f=A,y=S,c=E,S.equality))break}}return c!==p&&(f<v.ZERO_UPPERBOUND&&!y.active||y.equality)&&(d[c]=d[p-1],d.length=p-1),y},v.prototype.satisfy=function(){null==this.bs&&(this.bs=new I(this.vs)),this.bs.split(this.inactive);for(var f=null;(f=this.mostViolated())&&(f.equality||f.slack()<v.ZERO_UPPERBOUND&&!f.active);){var y=f.left.block;if(y!==f.right.block)this.bs.merge(f);else{if(y.isActiveDirectedPathBetween(f.right,f.left)){f.unsatisfiable=!0;continue}var p=y.splitBetween(f.left,f.right);if(null===p){f.unsatisfiable=!0;continue}this.bs.insert(p.lb),this.bs.insert(p.rb),this.bs.remove(y),this.inactive.push(p.constraint),f.slack()>=0?this.inactive.push(f):this.bs.merge(f)}}},v.prototype.solve=function(){this.satisfy();for(var f=Number.MAX_VALUE,y=this.bs.cost();Math.abs(f-y)>1e-4;)this.satisfy(),f=y,y=this.bs.cost();return y},v.LAGRANGIAN_TOLERANCE=-1e-4,v.ZERO_UPPERBOUND=-1e-10,v}();ht.Solver=w,ht.removeOverlapInOneDimension=function(v,f,y){for(var d=v.map(function(Z){return new G(Z.desiredCenter)}),p=[],c=v.length,E=0;E<c-1;E++)p.push(new gt(d[E],d[E+1],(v[E].size+v[E+1].size)/2));var M=d[0],R=d[c-1],X=v[0].size/2,at=v[c-1].size/2,dt=null,At=null;return f&&(dt=new G(f,1e3*M.weight),d.push(dt),p.push(new gt(dt,M,X))),y&&(At=new G(y,1e3*R.weight),d.push(At),p.push(new gt(R,At,at))),new w(d,p).solve(),{newCenters:d.slice(0,v.length).map(function(Z){return Z.position()}),lowerBound:dt?dt.position():M.position()-X,upperBound:At?At.position():R.position()+at}}},1618:(we,ht,ct)=>{"use strict";ct.r(ht),ct.d(ht,{PPIexpModule:()=>qi});var gt=ct(6019),G=ct(9133),N=ct(9256),I=ct(8702),w=ct(3928),b=ct(3667),v=ct(4099),f=ct(6813),y=ct(2668),d=ct(2411),p=ct(8526),c=ct(8053),E=ct(8735),S=ct(9204),A=ct(6636),M=ct(5571),R=ct(8472),X=ct(661),at=ct(8425),dt=ct(1890),At=ct(8970),q=ct(7473),Z=ct(9744),nt=ct(3052),O=ct(6149),H=ct(1430),j=ct(7500);function J(lt){for(var K,St=[];!(K=lt.next()).done;)St.push(K.value);return St}function rt(lt,St,K){for(var Mt=0,Ft=K.length;Mt<Ft;){if(lt(St,K[Mt]))return!0;Mt+=1}return!1}function Nt(lt,St){return Object.prototype.hasOwnProperty.call(St,lt)}const tt="function"==typeof Object.is?Object.is:function(lt,St){return lt===St?0!==lt||1/lt==1/St:lt!=lt&&St!=St};var ft=ct(4182),Dt=Object.prototype.toString;const It=function(){return"[object Arguments]"===Dt.call(arguments)?function(St){return"[object Arguments]"===Dt.call(St)}:function(St){return Nt("callee",St)}}();var Rt=!{toString:null}.propertyIsEnumerable("toString"),Vt=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],te=function(){return arguments.propertyIsEnumerable("length")}(),he=function(St,K){for(var Mt=0;Mt<St.length;){if(St[Mt]===K)return!0;Mt+=1}return!1};const oe=(0,ft.Z)("function"!=typeof Object.keys||te?function(St){if(Object(St)!==St)return[];var K,Mt,Ft=[],$t=te&&It(St);for(K in St)Nt(K,St)&&(!$t||"length"!==K)&&(Ft[Ft.length]=K);if(Rt)for(Mt=Vt.length-1;Mt>=0;)Nt(K=Vt[Mt],St)&&!he(Ft,K)&&(Ft[Ft.length]=K),Mt-=1;return Ft}:function(St){return Object(St)!==St?[]:Object.keys(St)}),De=(0,ft.Z)(function(St){return null===St?"Null":void 0===St?"Undefined":Object.prototype.toString.call(St).slice(8,-1)});function Ut(lt,St,K,Mt){var Ft=J(lt);function ze(Fe,yn){return Jt(Fe,yn,K.slice(),Mt.slice())}return!rt(function(Fe,yn){return!rt(ze,yn,Fe)},J(St),Ft)}function Jt(lt,St,K,Mt){if(tt(lt,St))return!0;var Ft=De(lt);if(Ft!==De(St)||null==lt||null==St)return!1;if("function"==typeof lt["fantasy-land/equals"]||"function"==typeof St["fantasy-land/equals"])return"function"==typeof lt["fantasy-land/equals"]&&lt["fantasy-land/equals"](St)&&"function"==typeof St["fantasy-land/equals"]&&St["fantasy-land/equals"](lt);if("function"==typeof lt.equals||"function"==typeof St.equals)return"function"==typeof lt.equals&&lt.equals(St)&&"function"==typeof St.equals&&St.equals(lt);switch(Ft){case"Arguments":case"Array":case"Object":if("function"==typeof lt.constructor&&"Promise"===function(lt){var St=String(lt).match(/^function (\w*)/);return null==St?"":St[1]}(lt.constructor))return lt===St;break;case"Boolean":case"Number":case"String":if(typeof lt!=typeof St||!tt(lt.valueOf(),St.valueOf()))return!1;break;case"Date":if(!tt(lt.valueOf(),St.valueOf()))return!1;break;case"Error":return lt.name===St.name&&lt.message===St.message;case"RegExp":if(lt.source!==St.source||lt.global!==St.global||lt.ignoreCase!==St.ignoreCase||lt.multiline!==St.multiline||lt.sticky!==St.sticky||lt.unicode!==St.unicode)return!1}for(var $t=K.length-1;$t>=0;){if(K[$t]===lt)return Mt[$t]===St;$t-=1}switch(Ft){case"Map":return lt.size===St.size&&Ut(lt.entries(),St.entries(),K.concat([lt]),Mt.concat([St]));case"Set":return lt.size===St.size&&Ut(lt.values(),St.values(),K.concat([lt]),Mt.concat([St]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var ze=oe(lt);if(ze.length!==oe(St).length)return!1;var Fe=K.concat([lt]),yn=Mt.concat([St]);for($t=ze.length-1;$t>=0;){var mn=ze[$t];if(!Nt(mn,St)||!Jt(St[mn],lt[mn],Fe,yn))return!1;$t-=1}return!0}const pe=(0,j.Z)(function(St,K){return Jt(St,K,[],[])});function Me(lt,St){return function(lt,St,K){var Mt,Ft;if("function"==typeof lt.indexOf)switch(typeof St){case"number":if(0===St){for(Mt=1/St;K<lt.length;){if(0===(Ft=lt[K])&&1/Ft===Mt)return K;K+=1}return-1}if(St!=St){for(;K<lt.length;){if("number"==typeof(Ft=lt[K])&&Ft!=Ft)return K;K+=1}return-1}return lt.indexOf(St,K);case"string":case"boolean":case"function":case"undefined":return lt.indexOf(St,K);case"object":if(null===St)return lt.indexOf(St,K)}for(;K<lt.length;){if(pe(lt[K],St))return K;K+=1}return-1}(St,lt,0)>=0}const hn=(0,j.Z)(Me);var Qe=ct(5211);const Ar=lt=>lt.PPIexpState.graphList,Wn=lt=>lt.PPIexpState.expressionInDatasets,cn=lt=>lt.PPIexpState.datasetExpressionVisSettingsState,_i=(0,R.P1)(Ar,Qe.$D),jr=(0,R.P1)(Ar,Qe.ft),cr=(0,R.P1)(jr,(lt,St)=>lt[St.graphID]),dr=(0,R.P1)(jr,(lt,St)=>lt[St.graphID].graph.nodes.map(Ft=>Ft.data.id)),Dn=lt=>lt.PPIexpState.graphZoomNodesPositions,{selectIds:Cr,selectEntities:Fn}=Qe.mC.getSelectors(),Ai=(0,R.P1)(Dn,Cr),xa=(0,R.P1)(Dn,Fn),Ci=(0,R.P1)(Ai,(lt,St)=>hn(St.graphID,lt)),wa=(0,R.P1)(xa,(lt,St)=>lt[St.graphID]),Ni=lt=>lt.PPIexpState.geneListsForSpecificGenes,{selectIds:Wr,selectEntities:ki}=Qe.UC.getSelectors(),Nr=(0,R.P1)(Ni,Wr),Mi=(0,R.P1)(Ni,ki),Kr=(0,R.P1)(Mi,(lt,St)=>{const K=lt[St.geneListName];return K?K.symbols:void 0}),_e=(0,R.P1)(Wn,lt=>lt.ids),Qr=(0,R.P1)(Wn,(lt,St)=>lt.ids.includes(St.graphDatasetExpressionID)),be=(0,R.P1)(Wn,(lt,St)=>lt.entities[St.graphDatasetExpressionID]),vn=(0,R.P1)(cn,lt=>lt.ids),Oi=(0,R.P1)(cn,(lt,St)=>lt.entities[St.graphDatasetExpressionID]),Ea=(0,R.P1)(cn,(lt,St)=>lt.ids.includes(St.graphDatasetExpressionID));var Jr=ct(7548),Re=ct(1118),Ln=ct(877),ti=ct(7089),Ve=ct(1218),Gi=ct(4967),Kn=ct(8956),fr=ct(9232);const pr=function(lt,St,K){return[lt,St,K].join("/")};var Tn=ct(9220),gr=ct(7194),Y=ct(3668),ei=ct(4522),ni=ct(172),Da=ct(8260),La=ct(2047);let Ta=(()=>{class lt{constructor(K){this.http=K,this.ppiRequestUrl=Da.N.serverUrl+"restful/ppinetwork/constructNetwork/"}handleResponse(K){return K.type===ei.dt.Response?K.body.PPIs:ni.E}requestPPIsFromServer(K){const Mt=new ei.aW("POST",this.ppiRequestUrl,K,{reportProgress:!1,responseType:"json"});return this.http.request(Mt).pipe((0,c.U)(Ft=>this.handleResponse(Ft)),(0,La.K)(Ft=>(alert(Ft),ni.E)),(0,E.h)(Ft=>Ft!==ni.E))}}return lt.\u0275fac=function(K){return new(K||lt)(Y.LFG(ei.eN))},lt.\u0275prov=Y.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();var Ia=ct(4165),Sa=ct(726),Pa=ct(9990),_a=ct(9868),Aa=ct(4205),ri=ct(5535),Ca=ct(4473);let vr=(()=>{class lt extends gr.g{constructor(K,Mt,Ft,$t,ze,Fe,yn,mn,ci){super(K,yn,mn,ci),this.store=K,this.ppisRequestService=Mt,this.clusterService=Ft,this.diffAnalysisRequestService=$t,this.trySamppleService=ze,this.interAppsInteractService=Fe,this.inpputGeneList$=new v.X(null),this.constructGeneListPPIsRequest$=new v.X(null),this.requestGeneListGraph$=new v.X(null),this.modifyGraphZoomNodesPosition$=new v.X(null),this.datasetHierarRequestSubject=new v.X(null),this.updateNodesExpressionVisSettingsSubject=new v.X(null),this.genesSelectedFromExpressionPatternSubject=new v.X(null),this.datasetIDForDiffGenesHighlight$=new v.X(null),this.groupPairForDiffGenesHighlight$=new v.X(null),this.diffFilterInput$=new v.X(null),this.addGeneListIDForSpecificGenesHighlight$=new v.X(null),this.obtainGenesForSpecificGenesHighlight$=new v.X(null),this.ifSelectedGraphHasNodesPosition$=new v.X(!1),this.requestExpressionPatternFromStore$=new v.X(null),this.requestExpressionPatternOfLocalDataFromServer$=new v.X(null),this.requestExpressionPatternOfRemoteDataFromServer$=new v.X(null),this.requestDiffAnalysisOfRemoteDataFromServer$=new v.X(null),this.requestDiffAnalysisOfLocalDataFromServer$=new v.X(null),this.allGeneListIDs$=this.store.pipe((0,R.Ys)(at.Dm),(0,c.U)(vt=>(0,fr.NT)(vt))),this.allDatasetInfoForDisplay$=this.store.pipe((0,R.Ys)(q.yz)).pipe((0,c.U)(vt=>[...vt].reverse())),this.allGeneListGraphIDs$=this.store.pipe((0,R.Ys)(_i),(0,c.U)(vt=>(0,fr.NT)(vt))),this.graph$=this.requestGeneListGraph$.pipe((0,E.h)(vt=>null!==vt),(0,S.w)(vt=>{let qt=this.store.pipe((0,R.Ys)(cr,{graphID:vt}),(0,A.q)(1)),ee=this.store.pipe((0,R.Ys)(wa,{graphID:vt}),(0,A.q)(1));return(0,f.D)([qt,ee]).pipe((0,c.U)(([se,Le])=>void 0===Le?{graph:se.graph,ifHasNodesPositions:!1}:{graph:se.graph,ifHasNodesPositions:!0,positions:Le.nodesPositions,zoom:Le.zoom}))})),this.inpputGeneList$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(dt.tw,{ID:`${vt.speciesID}-${vt.IDtype}`}),(0,A.q)(1),(0,E.h)(ee=>!ee),(0,c.U)(ee=>vt))),(0,S.w)(vt=>this.geneAnnotationRequestService.requestGenesAnnoFromServer(vt.speciesID,vt.IDtype))).subscribe(vt=>{this.store.dispatch(At.n({geneID2info:vt}))}),(0,y.aj)([this.inpputGeneList$.pipe((0,E.h)(vt=>null!=vt)),this.store.pipe((0,R.Ys)(dt.VF))]).pipe((0,S.w)(([vt,qt])=>this.store.pipe((0,R.Ys)(dt.tw,{ID:`${vt.speciesID}-${vt.IDtype}`}),(0,A.q)(1),(0,E.h)(se=>se),(0,c.U)(se=>vt)))).subscribe(vt=>{this.store.dispatch(X.J({geneList:vt}))}),this.interAppsInteractService.geneListIDFromOtherApp$.pipe((0,E.h)(vt=>null!=vt),(0,c.U)(vt=>({geneListID:vt,database:"Mentha",subNetworkType:"between"}))).subscribe(this.constructGeneListPPIsRequest$),this.constructGeneListPPIsRequest$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(at.Vq,{ID:vt.geneListID}),(0,A.q)(1),(0,S.w)(qt=>"SYMBOL"===qt.IDtype?(0,d.of)(Object.assign(Object.assign({},qt),{symbols:qt.genes})):this.store.pipe((0,R.Ys)(dt.Rk,{ID:`${qt.speciesID}-${qt.IDtype}`,geneIDs:qt.genes}),(0,A.q)(1),(0,c.U)(se=>Object.assign(Object.assign({},qt),{symbols:se})))),(0,S.w)(qt=>this.ppisRequestService.requestPPIsFromServer({speciesID:qt.speciesID,IDtype:"SYMBOL",proteinIDs:qt.symbols,database:vt.database,subNetworkType:vt.subNetworkType})),(0,c.U)(qt=>{const ee=function(lt){let $t=new Set,ze=[],Fe=[];return lt.forEach((mn,ci)=>{const vt=mn[0],qt=mn[1],ee=mn[2],se=mn[3];ze.push({data:{id:ci.toString(),source:vt,target:qt}}),$t.has(vt)||(Fe.push({data:{id:vt,name:ee}}),$t.add(vt)),$t.has(qt)||(Fe.push({data:{id:qt,name:se}}),$t.add(qt))}),{edges:ze,nodes:Fe}}(qt);return{geneListPPIsRequest:vt,graph:ee}})))).subscribe(({geneListPPIsRequest:vt,graph:qt})=>{const ee=function(lt){return[lt.geneListID,lt.database,lt.subNetworkType].join("-")}(vt);this.store.dispatch(H._n({geneListGraph:{geneListID:vt.geneListID,database:vt.database,subNetworkType:vt.subNetworkType,graphID:ee,graph:qt}}))}),this.requestGeneListGraph$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(Ci,{graphID:vt})))).subscribe(vt=>{this.ifSelectedGraphHasNodesPosition$.next(vt)}),this.modifyGraphZoomNodesPosition$.pipe((0,E.h)(vt=>null!==vt),(0,M.M)(this.ifSelectedGraphHasNodesPosition$,this.requestGeneListGraph$)).subscribe(([vt,qt,ee])=>{const se={graphID:ee,nodesPositions:vt.nodesPositions,zoom:vt.zoom};this.store.dispatch(qt?H.YY({geneListGraphZoomNodesPosition:se}):H._p({geneListGraphZoomNodesPosition:se}))}),this.addGeneListIDForSpecificGenesHighlight$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(at.Vq,{ID:vt}),(0,A.q)(1))),(0,S.w)(vt=>"SYMBOL"===vt.IDtype?(0,d.of)({name:vt.name,symbols:vt.genes}):this.store.pipe((0,R.Ys)(dt.Rk,{ID:`${vt.speciesID}-${vt.IDtype}`,geneIDs:vt.genes}),(0,A.q)(1),(0,c.U)(se=>({name:vt.name,symbols:se}))))).subscribe(vt=>{this.store.dispatch(H.H6({geneList:vt}))}),this.genesFromGeneListSymbolsForHighlighting$=this.obtainGenesForSpecificGenesHighlight$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>"noList"===vt?(0,d.of)([]):this.store.pipe((0,R.Ys)(Kr,{geneListName:vt}),(0,A.q)(1)))),this.genelistIDsForSpecificGenesHighlight$=this.store.pipe((0,R.Ys)(Nr),(0,c.U)(vt=>vt.map(qt=>qt.toString()))),(0,y.aj)([this.datasetHierarRequestSubject.pipe((0,E.h)(vt=>null!=vt)),this.requestGeneListGraph$.pipe((0,E.h)(vt=>null!=vt))]).pipe((0,S.w)(([vt,qt])=>{const ee=vt.datasetID,se=vt.acrossGroupsOrSamples,Le=pr(qt,ee,se);return this.store.pipe((0,R.Ys)(Qr,{graphDatasetExpressionID:Le}),(0,A.q)(1),(0,c.U)(Te=>({datasetID:ee,acrossGroupsOrSamples:se,graphID:qt,ifExisted:Te})))}),(0,E.h)(vt=>!vt.ifExisted),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(q.iR,{datasetID:vt.datasetID}),(0,A.q)(1),(0,c.U)(qt=>({datasetID:vt.datasetID,acrossGroupsOrSamples:vt.acrossGroupsOrSamples,graphID:vt.graphID,datasetLocalOrRemote:qt.expressLocalOrRemote}))))).subscribe(vt=>{const qt=vt.graphID,ee=vt.datasetID;vt.datasetLocalOrRemote===Ln.M.local?this.requestExpressionPatternOfLocalDataFromServer$.next({graphID:qt,datasetID:ee,acrossGroupsOrSamples:vt.acrossGroupsOrSamples}):this.requestExpressionPatternOfRemoteDataFromServer$.next({graphID:qt,datasetID:ee,acrossGroupsOrSamples:vt.acrossGroupsOrSamples})}),this.requestExpressionPatternOfLocalDataFromServer$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>{const qt=vt.graphID,ee=vt.datasetID,se=vt.acrossGroupsOrSamples,Le=this.store.pipe((0,R.Ys)(dr,{graphID:qt}),(0,A.q)(1)),Te=this.store.pipe((0,R.Ys)(q.iR,{datasetID:ee}),(0,A.q)(1));return(0,f.D)([Le,Te]).pipe((0,S.w)(([sn,Ae])=>{const ln=`${Ae.speciesID}-${Ae.IDtype}`;return this.store.pipe((0,R.Ys)(dt.by,{ID:ln,symbols:sn})).pipe((0,S.w)(Xe=>this.store.pipe((0,R.Ys)(Jr.l,{datasetID:ee,geneIDs:Xe}),(0,A.q)(1))),(0,S.w)(Xe=>{const Ce=this.clusterService.requestNormalizedValuesSpecificClusterResult({experimentType:Ae.experimentType,dataArray:Xe.expressionValues,genes:Xe.geneIDs,samples:Ae.samples,groups:Ae.groups,acrossGroupsOrSamples:se,clusterMethod:"Hierarchical",clusterMethodSetting:"average"}),He=this.store.pipe((0,R.Ys)(dt.MR,{ID:ln,geneIDs:Xe.geneIDs}),(0,A.q)(1));return(0,f.D)([Ce,He]).pipe((0,c.U)(([Sn,Pn])=>{const _n=Sn.leftUniqueTerms.map(An=>Pn.get(An));return Object.assign(Object.assign({},Sn),{leftDisplayTerms:_n})}))}),(0,c.U)(Xe=>({clusterResultID:pr(qt,ee,se),graphID:qt,datasetID:ee,acrossGroupsOrSamples:vt.acrossGroupsOrSamples,result:Xe})))}))})).subscribe(vt=>{const qt={mapID:vt.clusterResultID,transform:{realTranslateX:0,realTranslateY:0,realScaleX:1,realScaleY:1,zoomTranslateX:0,zoomTranslateY:0,zoomScale:1},basicSetting:null};this.store.dispatch(H.OZ({clusteringResult:vt})),this.store.dispatch(H.LW({visSettings:qt}))}),this.expressionPatternInfo$=(0,y.aj)([this.datasetHierarRequestSubject.pipe((0,E.h)(vt=>null!=vt)),this.requestGeneListGraph$.pipe((0,E.h)(vt=>null!=vt)),this.store.pipe((0,R.Ys)(_e)),this.store.pipe((0,R.Ys)(vn))]).pipe((0,S.w)(([vt,qt,ee,se])=>{const Le=pr(qt,vt.datasetID,vt.acrossGroupsOrSamples),Te=this.store.pipe((0,R.Ys)(Qr,{graphDatasetExpressionID:Le}),(0,A.q)(1),(0,E.h)(Ae=>Ae)),sn=this.store.pipe((0,R.Ys)(Ea,{graphDatasetExpressionID:Le}),(0,A.q)(1),(0,E.h)(Ae=>Ae));return(0,f.D)([Te,sn]).pipe((0,E.h)(([Ae,ln])=>Ae&&ln),(0,S.w)(Ae=>{const ln=this.store.pipe((0,R.Ys)(be,{graphDatasetExpressionID:Le}),(0,A.q)(1)),Xe=this.store.pipe((0,R.Ys)(Oi,{graphDatasetExpressionID:Le}),(0,A.q)(1));return(0,f.D)([ln,Xe]).pipe((0,c.U)(([qe,Ce])=>({clusterResultID:Le,graphID:qt,datasetID:vt.datasetID,acrossGroupsOrSamples:vt.acrossGroupsOrSamples,result:Object.assign({},qe.result),transform:Object.assign({},Ce.transform),basicSetting:Object.assign({},Ce.basicSetting)})))}))})),this.updateNodesExpressionVisSettingsSubject.pipe((0,E.h)(vt=>null!=vt),(0,M.M)(this.requestGeneListGraph$,this.datasetHierarRequestSubject),(0,c.U)(([vt,qt,ee])=>{const se=pr(qt,ee.datasetID,ee.acrossGroupsOrSamples);return Object.assign(Object.assign({},vt),{mapID:se})})).subscribe(vt=>{this.store.dispatch(H.pY({visSettings:vt}))}),this.genesFromExpressionPatternSymbolsForHighlighting$=this.genesSelectedFromExpressionPatternSubject.pipe((0,E.h)(vt=>null!=vt),(0,M.M)(this.datasetHierarRequestSubject.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>this.store.pipe((0,R.Ys)(q.iR,{datasetID:vt.datasetID}),(0,c.U)(qt=>({speciesID:qt.speciesID,datasetIDtype:qt.IDtype})),(0,A.q)(1))))),(0,S.w)(([vt,qt])=>"SYMBOL"===qt.datasetIDtype?(0,d.of)(vt):this.store.pipe((0,R.Ys)(dt.Rk,{ID:`${qt.speciesID}-${qt.datasetIDtype}`,geneIDs:vt}),(0,A.q)(1)))),this.datasetIDForDiffGenesHighlight$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>{let qt=this.store.pipe((0,R.Ys)(q.XF,{datasetID:vt}),(0,A.q)(1)),ee=this.store.pipe((0,R.Ys)(nt.ON,{datasetID:vt}),(0,A.q)(1));return(0,f.D)([qt,ee]).pipe((0,c.U)(([se,Le])=>{const Te=(0,Ve.S8)(se,Le);return{datasetID:vt,diffGroupPairs:Te}}))}),(0,E.h)(vt=>vt.diffGroupPairs.length>=1),(0,S.w)(vt=>{const qt=vt.datasetID;return this.store.pipe((0,R.Ys)(q.iR,{datasetID:qt}),(0,A.q)(1)).pipe((0,c.U)(ee=>({datasetID:qt,datasetLocalOrRemote:ee.expressLocalOrRemote,experimentType:ee.experimentType,diffGroupPairs:vt.diffGroupPairs})))})).subscribe(vt=>{const qt={experimentType:vt.experimentType,datasetID:vt.datasetID,groupPairs:vt.diffGroupPairs};vt.datasetLocalOrRemote===Ln.M.remote?this.requestDiffAnalysisOfRemoteDataFromServer$.next(qt):this.requestDiffAnalysisOfLocalDataFromServer$.next(qt)}),this.requestDiffAnalysisOfLocalDataFromServer$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>{const qt=vt.datasetID,ee=vt.groupPairs;return this.store.pipe((0,R.Ys)(q.iR,{datasetID:qt}),(0,A.q)(1)).pipe((0,S.w)(se=>{const Le=se.experimentType,Te=se.speciesID,sn=se.IDtype,Ae=(0,Ve.XU)(ee),ln=se.groups.filter(Ce=>Ae.has(Ce.name)),Xe=(0,Gi.Z)(ln),qe=(0,Ve.FV)(ee,Xe);return this.store.pipe((0,R.Ys)(Jr.ZM,{datasetID:qt})).pipe((0,S.w)(Ce=>{const Pn=Ce.genes,_n=(0,Kn.l)(Ce.values,Ce.samples,qe),On=Tn.e8.get(Le);return this.diffAnalysisRequestService.requestLocalDatasetDiffAnalysisMultipleGroupPairs({valuesDic:_n,genes:Pn,groupPairs:ee,groups2samples:Xe,experimentType:Le,diffSoftware:On})}),(0,c.U)(Ce=>{const Sn=Ce.diffSoftware;return Ce.diffResultList.map((_n,On)=>{const An=ee[On];return{id:`${qt}-${An.targetGroup} VS ${An.baseGroup}-${Sn}`,datasetID:qt,baseGroup:An.baseGroup,targetGroup:An.targetGroup,diffSoftware:Sn,IDtype:sn,speciesID:Te,diffResults:_n}})}))}))})).subscribe(vt=>{this.store.dispatch(O.rv({diffAnalysisResultInfos:vt}))}),this.requestDiffAnalysisOfRemoteDataFromServer$.pipe((0,E.h)(vt=>null!=vt),(0,S.w)(vt=>{const qt=vt.datasetID,ee=vt.groupPairs;return this.store.pipe((0,R.Ys)(q.iR,{datasetID:qt}),(0,A.q)(1)).pipe((0,S.w)(se=>{const Le=se.experimentType,Te=se.speciesID,sn=se.idType,Ae=se.database,ln=(0,Ve.XU)(ee),Xe=se.groups.filter(He=>ln.has(He.name)),qe=(0,Gi.Z)(Xe);return(0,Ve.FV)(ee,qe),this.diffAnalysisRequestService.requestRemoteDatasetDiffAnalysisMultipleGroupParis({database:Ae,datasetID:qt,experimentType:Le,IDtype:sn,groupPairs:ee,groups2samples:qe,diffSoftware:Tn.e8[Le]}).pipe((0,c.U)(He=>{const Pn=He.diffSoftware;return He.diffResultList.map((On,An)=>{const Vn=ee[An];return{id:`${qt}-${Vn.targetGroup} VS ${Vn.baseGroup}-${Pn}`,datasetID:qt,baseGroup:Vn.baseGroup,targetGroup:Vn.targetGroup,diffSoftware:Pn,IDtype:sn,speciesID:Te,diffResults:On}})}))}))})).subscribe(vt=>{this.store.dispatch(O.rv({diffAnalysisResultInfos:vt}))}),this.datasetGroupsWithStatus$=(0,y.aj)([this.store.pipe((0,R.Ys)(nt.Nq)),this.datasetIDForDiffGenesHighlight$.pipe((0,E.h)(vt=>null!=vt))]).pipe((0,S.w)(([vt,qt])=>{let ee=this.store.pipe((0,R.Ys)(q.XF,{datasetID:qt}),(0,A.q)(1)),se=this.store.pipe((0,R.Ys)(nt.ON,{datasetID:qt}),(0,A.q)(1));return(0,f.D)([ee,se]).pipe((0,c.U)(([Le,Te])=>(0,Ve.HI)(Le,Te)))})),this.diffGenesSymbolsForHighlighting$=(0,y.aj)([this.diffFilterInput$.pipe((0,E.h)(vt=>null!=vt)),this.groupPairForDiffGenesHighlight$.pipe((0,E.h)(vt=>null!=vt))]).pipe((0,c.U)(([vt,qt])=>({diffFilterInput:vt,diffGroupPair:qt})),(0,M.M)(this.datasetIDForDiffGenesHighlight$),(0,S.w)(([vt,qt])=>{const ee=vt.diffGroupPair.baseGroup,se=vt.diffGroupPair.targetGroup,Le=vt.diffFilterInput;return ee===se?(0,d.of)({up:[],down:[]}):this.store.pipe((0,R.Ys)(nt.fh,{datasetID:qt,baseGroup:ee,targetGroup:se}),(0,A.q)(1),(0,c.U)(Te=>({diffGenes:(0,ti.IT)(Te.diffSoftware,Te.diffResults,Le),geneAnnoID:Te.speciesID+"-"+Te.IDtype})),(0,S.w)(Te=>{const Ae=Te.diffGenes.down,ln=Te.geneAnnoID;let Xe=this.store.pipe((0,R.Ys)(dt.Rk,{ID:ln,geneIDs:Te.diffGenes.up}),(0,A.q)(1)),qe=this.store.pipe((0,R.Ys)(dt.Rk,{ID:ln,geneIDs:Ae}),(0,A.q)(1));return(0,f.D)([Xe,qe]).pipe((0,c.U)(([Ce,He])=>({up:Ce,down:He})))}))})),this.genesForHighlight$=(0,p.T)(this.genesFromExpressionPatternSymbolsForHighlighting$,this.genesFromGeneListSymbolsForHighlighting$),this.trySamppleService.trySampleData$.pipe((0,E.h)(Boolean)).subscribe(vt=>{this.store.dispatch(Z.CF({newState:vt.datasetListState})),this.store.dispatch(Re.gw({newState:vt.localExpressDataState})),this.store.dispatch(At.A({newState:vt.geneAnnotationsState})),this.store.dispatch(X.c({newState:vt.geneListState})),this.store.dispatch(H.iS({newState:vt.PPIexpState}))}),this.trySamplePercentage$=this.trySamppleService.trySamplePercentage$}constructGeneListPPIsRequest(K){this.constructGeneListPPIsRequest$.next(K)}inputGeneList(K){this.inpputGeneList$.next(K)}requestGeneListGraph(K){this.requestGeneListGraph$.next(K)}modifyGraphZoomNodesPosition(K){this.modifyGraphZoomNodesPosition$.next(K)}requestExpressionPattern(K){this.datasetHierarRequestSubject.next(K)}updateVisSettingsOfNodesExpressionInDataset(K){this.updateNodesExpressionVisSettingsSubject.next(K)}requestSymbolsForGenesSelectedFromExpressionPattern(K){this.genesSelectedFromExpressionPatternSubject.next(K)}requestDatasetDiffGenesForHighlight(K){this.datasetIDForDiffGenesHighlight$.next(K)}requestGroupPairDiffGenesForHighlight(K){this.groupPairForDiffGenesHighlight$.next(K)}changeDiffFilterInput(K){this.diffFilterInput$.next(K)}addGeneListIDForSpecificGenesHighlight(K){this.addGeneListIDForSpecificGenesHighlight$.next(K)}obtainGenesForSpecificGenesHighlight(K){this.obtainGenesForSpecificGenesHighlight$.next(K)}prepareTrySampleData(K){this.trySamppleService.requestTrySampleData(K)}}return lt.\u0275fac=function(K){return new(K||lt)(Y.LFG(R.yh),Y.LFG(Ta),Y.LFG(Ia.W),Y.LFG(Sa.h),Y.LFG(Pa.v),Y.LFG(_a.h),Y.LFG(Aa.b),Y.LFG(ri.f),Y.LFG(Ca.h))},lt.\u0275prov=Y.Yz7({token:lt,factory:lt.\u0275fac}),lt})();var ii=ct(1144),Bn=ct(4102);function kr(lt,St){if(1&lt&&(Y.TgZ(0,"option",11),Y._uU(1),Y.qZA()),2&lt){const K=St.$implicit;Y.Q6J("value",K),Y.xp6(1),Y.hij(" ",K," ")}}function ai(lt,St){if(1&lt){const K=Y.EpF();Y.TgZ(0,"label",12),Y.TgZ(1,"p"),Y._uU(2,"Please load or generate a new gene list "),Y.TgZ(3,"a",13),Y.NdJ("click",function(Ft){return Y.CHM(K),Y.oxw().triggerInputGeneListSignal(Ft)}),Y._uU(4,"New Gene List"),Y.qZA(),Y.qZA(),Y.qZA()}}function Ri(lt,St){if(1&lt&&(Y.TgZ(0,"option",11),Y._uU(1),Y.qZA()),2&lt){const K=St.$implicit;Y.Q6J("value",K),Y.xp6(1),Y.hij(" ",K," ")}}function Yn(lt,St){if(1&lt&&(Y.TgZ(0,"option",11),Y._uU(1),Y.qZA()),2&lt){const K=St.$implicit;Y.Q6J("value",K.name),Y.xp6(1),Y.hij(" ",K.description," ")}}let zn=(()=>{class lt{constructor(K){this.cdr=K,this.inputGeneListSignal$=new Y.vpe,this.geneListPPIrequest$=new Y.vpe,this.subNetworkTypes=[{name:"between",description:"Between Input Genes"},{name:"participate",description:"Input Genes Participate in"}],this.geneListPPIinputForm=new G.cw({geneListID:new G.NI("",G.kI.required),database:new G.NI("",G.kI.required),subNetworkType:new G.NI("between",G.kI.required)}),this.geneListPPIinputForm.valueChanges.subscribe(Mt=>{this.cdr.detectChanges()})}ngOnInit(){this._setDefaultPPIdatabase()}onSubmit(K){this.geneListPPIrequest$.next(this.geneListPPIinputForm.value)}ngOnChanges(K){K.ppiDatabases&&!K.ppiDatabases.isFirstChange()&&this._setDefaultPPIdatabase(),K.geneListIDs&&K.geneListIDs.isFirstChange()}_setDefaultPPIdatabase(){this.ppiDatabases&&this.geneListPPIinputForm.patchValue({database:this.ppiDatabases[0]})}triggerInputGeneListSignal(K){this.inputGeneListSignal$.next(!0)}}return lt.\u0275fac=function(K){return new(K||lt)(Y.Y36(Y.sBO))},lt.\u0275cmp=Y.Xpm({type:lt,selectors:[["app-generate-new-ppi-network"]],inputs:{geneListIDs:"geneListIDs",ppiDatabases:"ppiDatabases"},outputs:{inputGeneListSignal$:"inputGeneListSignal$",geneListPPIrequest$:"geneListPPIrequest$"},features:[Y.TTD],decls:20,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","geneList"],["formControlName","geneListID","name","geneListID",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger font-weight-light",4,"ngIf"],["for","database"],["formControlName","database","name","database",1,"form-control","form-control-sm"],["for","subNetworkType"],["formControlName","subNetworkType","name","subNetworkType",1,"form-control","form-control-sm"],["data-testid","submitNewPPI","type","submit",1,"btn","btn-sm","btn-expressvis",3,"disabled"],[3,"value"],[1,"text-danger","font-weight-light"],["href","javascript:void(0)",3,"click"]],template:function(K,Mt){1&K&&(Y.TgZ(0,"form",0),Y.NdJ("ngSubmit",function($t){return Mt.onSubmit($t)}),Y.TgZ(1,"div",1),Y.TgZ(2,"label",2),Y._uU(3,"Gene List"),Y.qZA(),Y.TgZ(4,"select",3),Y.YNc(5,kr,2,2,"option",4),Y.qZA(),Y.YNc(6,ai,5,0,"label",5),Y.qZA(),Y.TgZ(7,"div",1),Y.TgZ(8,"label",6),Y._uU(9,"PPI Database"),Y.qZA(),Y.TgZ(10,"select",7),Y.YNc(11,Ri,2,2,"option",4),Y.qZA(),Y.qZA(),Y.TgZ(12,"div",1),Y.TgZ(13,"label",8),Y._uU(14,"Sub PPI Network Type"),Y.qZA(),Y.TgZ(15,"select",9),Y.YNc(16,Yn,2,2,"option",4),Y.qZA(),Y.qZA(),Y.TgZ(17,"div",1),Y.TgZ(18,"button",10),Y._uU(19," Submit "),Y.qZA(),Y.qZA(),Y.qZA()),2&K&&(Y.Q6J("formGroup",Mt.geneListPPIinputForm),Y.xp6(5),Y.Q6J("ngForOf",Mt.geneListIDs),Y.xp6(1),Y.Q6J("ngIf",!((null==Mt.geneListIDs?null:Mt.geneListIDs.length)>=1&&Mt.geneListIDs)),Y.xp6(5),Y.Q6J("ngForOf",Mt.ppiDatabases),Y.xp6(5),Y.Q6J("ngForOf",Mt.subNetworkTypes),Y.xp6(2),Y.Q6J("disabled",!Mt.geneListPPIinputForm.valid))},directives:[G._Y,G.JL,G.sg,G.EJ,G.JJ,G.u,gt.sg,gt.O5,G.YN,G.Kr],styles:[""],changeDetection:0}),lt})();var Fi=ct(3405),Oe=ct(8805);function Qn(lt,St){if(1&lt&&(Y.TgZ(0,"option",5),Y._uU(1),Y.qZA()),2&lt){const K=St.$implicit;Y.Q6J("value",K),Y.xp6(1),Y.hij(" ",K," ")}}function yr(lt,St){1&lt&&(Y.TgZ(0,"label",6),Y._uU(1," Construct a PPI in the Left Sidebar "),Y.qZA())}let Je=(()=>{class lt{constructor(){this.selectedGeneListGraphID$=new Y.vpe,this.destroyNotifier$=new Fi.xQ,this.graphSelectForm=new G.cw({graphID:new G.NI("",G.kI.required)})}ngOnInit(){this.graphSelectForm.get("graphID").valueChanges.pipe((0,Oe.R)(this.destroyNotifier$)).subscribe(K=>{this.selectedGeneListGraphID$.next(K)})}ngOnChanges(K){K.geneListGraphIDs&&!K.geneListGraphIDs.isFirstChange()&&this.graphSelectForm.patchValue({graphID:[...this.geneListGraphIDs].reverse()[0]})}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}}return lt.\u0275fac=function(K){return new(K||lt)},lt.\u0275cmp=Y.Xpm({type:lt,selectors:[["app-select-genelist-graph-id"]],inputs:{geneListGraphIDs:"geneListGraphIDs"},outputs:{selectedGeneListGraphID$:"selectedGeneListGraphID$"},features:[Y.TTD],decls:6,vars:3,consts:[[1,"form-inline",3,"formGroup"],["for","graphSelect"],["formControlName","graphID",1,"form-control","form-control-sm","ml-2"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger font-weight-light",4,"ngIf"],[3,"value"],[1,"text-danger","font-weight-light"]],template:function(K,Mt){1&K&&(Y.TgZ(0,"form",0),Y.TgZ(1,"label",1),Y._uU(2,"Select a PPI network:"),Y.qZA(),Y.TgZ(3,"select",2),Y.YNc(4,Qn,2,2,"option",3),Y.qZA(),Y.YNc(5,yr,2,0,"label",4),Y.qZA()),2&K&&(Y.Q6J("formGroup",Mt.graphSelectForm),Y.xp6(4),Y.Q6J("ngForOf",Mt.geneListGraphIDs),Y.xp6(1),Y.Q6J("ngIf",!((null==Mt.geneListGraphIDs?null:Mt.geneListGraphIDs.length)>=1&&Mt.geneListGraphIDs)))},directives:[G._Y,G.JL,G.sg,G.EJ,G.JJ,G.u,gt.sg,gt.O5,G.YN,G.Kr],styles:[""],changeDetection:0}),lt})();var Na=ct(9319),Xn=ct.n(Na),oi=ct(5674),Bi=ct.n(oi),si=ct(2142),Jn=ct.n(si);const Yi={name:"cose-bilkent",ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.8},zi=[{selector:"node",style:{"background-color":"#3399ff",shape:"ellipse",label:"data(name)",width:"30px",height:"30px","font-size":15,"text-valign":"center","border-color":"#3399ff"}},{selector:"edge",style:{width:"3px","control-point-step-size":30}},{selector:".nodeUpRegulated",style:{"background-color":"red"}},{selector:".nodeDownRegulated",style:{"background-color":"green"}},{selector:".edgeUpRegulated",style:{"background-color":"red","line-color":"red"}},{selector:".edgeDownRegulated",style:{"background-color":"green","line-color":"green"}}];var Ma=ct(5686);const Oa=["cyMap"];let Ga=(()=>{class lt{constructor(){this.outputZoomPan$=new Y.vpe,this.outputZoomNodesPosition$=new Y.vpe,this.style=zi,this.layout=Yi,this.zoom={min:.1,max:10},this.emitNodesPosition$=new v.X(null),this.destroyNotifier$=new Fi.xQ}ngOnInit(){this.emitNodesPosition$.pipe((0,Oe.R)(this.destroyNotifier$),(0,E.h)(K=>null!=K),(0,Ma.b)(1e3)).subscribe(()=>{const K=this._obtainNodesPosition(),Mt=parseFloat(this.cy.zoom())*this.initialZoom;this.outputZoomNodesPosition$.next({nodesPositions:K,zoom:Mt})}),this._registerLayouts(),this.graphForDisplay&&(this._renderPPIgraph(),this._addEvents())}ngOnChanges(K){K.graphForDisplay&&!K.graphForDisplay.isFirstChange()&&(this._renderPPIgraph(),this._addEvents()),K.diffGenes&&!K.diffGenes.isFirstChange()&&this._highlightDiffNodes(),K.diffEdges&&!K.diffEdges.isFirstChange()&&this._highlightDiffEdges(),K.nodesPropertyHighlight&&!K.nodesPropertyHighlight.isFirstChange()&&this._highlightNodesAccordingAttributeValue(),K._highlightNodesAccordingAttributeValue&&!K._highlightNodesAccordingAttributeValue.isFirstChange()&&this._highlightNodesAccordingAttributeValue(),K.basicSettingModify&&!K.basicSettingModify.isFirstChange()&&this._modifyBasicSetting()}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}_registerLayouts(){Bi()(Xn()),Jn()(Xn())}_renderPPIgraph(){this.graphForDisplay.ifHasNodesPositions?this._renderPPIgraphWithPositions():this._renderPPIgraphWithNoPositions()}_modifyBasicStyle(){this.initialZoom=this.graphForDisplay.zoom;const K=this.graphForDisplay.zoom;let Mt=[...zi].map(Ft=>{if("node"===Ft.selector){const $t=Ft.style,ze=parseFloat($t.width),Fe=parseFloat($t.height),yn=$t["font-size"];return Object.assign(Object.assign({},Ft),{style:Object.assign(Object.assign({},$t),{width:ze*K+"px",height:Fe*K+"px","font-size":yn*K})})}if("edge"===Ft.selector){const $t=Ft.style,ze=parseFloat($t.width),Fe=$t["control-point-step-size"];return Object.assign(Object.assign({},Ft),{style:Object.assign(Object.assign({},$t),{width:ze*K+"px","control-point-step-size":Fe*K})})}return Ft});this.modifiedStyle=Mt}_renderPPIgraphWithPositions(){this._modifyBasicStyle();const Mt={name:"preset",positions:this.graphForDisplay.positions,fit:!1};this.cy=Xn()({container:this.cyMap.nativeElement,elements:this.graphForDisplay.graph,layout:Mt,style:this.modifiedStyle,minZoom:this.zoom.min,maxZoom:this.zoom.max})}_renderPPIgraphWithNoPositions(){this.initialZoom=1,this.cy=Xn()({container:this.cyMap.nativeElement,elements:this.graphForDisplay.graph,style:this.style,minZoom:this.zoom.min,maxZoom:this.zoom.max}),this.cy.elements().layout(Object.assign(Object.assign({},this.layout),{fit:!0})).run()}_addEvents(){this.cy.on("zoom",K=>{this.emitNodesPosition$.next(!0)}),this.cy.on("pan",K=>{this.emitNodesPosition$.next(!0)}),this.cy.nodes().on("drag",K=>{this.emitNodesPosition$.next(!0)})}_obtainNodesPosition(){let K={};return this.cy.nodes().forEach(Mt=>{K[Mt.data().id]=Mt.renderedPosition()}),K}_obtainNodesModelPosition(){let K={};return this.cy.nodes().forEach(Mt=>{K[Mt.data().id]=Mt.position()}),K}_highlightDiffNodes(){let K=this.diffGenes.up,Mt=this.diffGenes.down;this.cy.nodes().removeClass("nodeUpRegulated").removeClass("nodeDownRegulated"),this.cy.nodes().filter(function(Ft,$t){return K.indexOf(Ft.data("id"))>-1}).addClass("nodeUpRegulated"),this.cy.nodes().filter(function(Ft,$t){return Mt.indexOf(Ft.data("id"))>-1}).addClass("nodeDownRegulated")}_highlightDiffEdges(){let K=this.diffEdges.up,Mt=this.diffEdges.down;this.cy.edges().removeClass("edgeUpRegulated").removeClass("edgeDownRegulated"),this.cy.edges().filter(function(Ft){return K.indexOf(Ft.data("id"))>-1}).addClass("edgeUpRegulated"),this.cy.edges().filter(function(Ft){return Mt.indexOf(Ft.data("id"))>-1}).addClass("edgeDownRegulated")}_highlightNodesAccordingAttributeValue(){const{nodes:K,property:Mt,propertyValue:Ft,type:$t}=Object.assign({},this.nodesPropertyHighlight);"add"===$t?(this.cy.nodes().removeStyle(Mt),this.cy.nodes().filter(function(ze,Fe){return K.indexOf(ze.data("id"))>-1}).style(Mt,Ft)):this.cy.nodes().removeStyle(Mt)}_modifyBasicSetting(){const Mt={property:this.basicSettingModify.property,propertyValue:this.basicSettingModify.propertyValue};this.cy.style().selector(this.basicSettingModify.selector).style(Mt).update()}}return lt.\u0275fac=function(K){return new(K||lt)},lt.\u0275cmp=Y.Xpm({type:lt,selectors:[["app-cytoscapejs-ppi-vis"]],viewQuery:function(K,Mt){if(1&K&&Y.Gf(Oa,5),2&K){let Ft;Y.iGM(Ft=Y.CRH())&&(Mt.cyMap=Ft.first)}},inputs:{graphForDisplay:"graphForDisplay",diffGenes:"diffGenes",diffEdges:"diffEdges",nodesPropertyHighlight:"nodesPropertyHighlight",basicSettingModify:"basicSettingModify"},outputs:{outputZoomNodesPosition$:"outputZoomNodesPosition$"},features:[Y.TTD],decls:3,vars:0,consts:[[2,"width","100%","height","80vh","display","block"],["cyMap",""]],template:function(K,Mt){1&K&&(Y.TgZ(0,"div"),Y._UZ(1,"div",0,1),Y.qZA())},styles:[""],changeDetection:0}),lt})();var tn=ct(7075),In=ct(1545),Xi=ct(4234),Hi=ct(7360);function Hn(lt,St){if(1&lt){const K=Y.EpF();Y.TgZ(0,"div"),Y.TgZ(1,"app-select-gene-list",6),Y.NdJ("selectedGeneListName",function(Ft){return Y.CHM(K),Y.oxw().processGeneListIDforAdding(Ft)}),Y.qZA(),Y.TgZ(2,"a",7),Y.NdJ("click",function(Ft){return Y.CHM(K),Y.oxw().triggerInputGeneListSignal(Ft)}),Y._uU(3,"Import A New Gene List"),Y.qZA(),Y.qZA()}if(2&lt){const K=Y.oxw();Y.xp6(1),Y.Q6J("availableGeneListNames",K.allGeneListIDs)}}function mr(lt,St){if(1&lt){const K=Y.EpF();Y.TgZ(0,"p"),Y._uU(1,"Please import a gene list first. "),Y.TgZ(2,"a",7),Y.NdJ("click",function(Ft){return Y.CHM(K),Y.oxw().triggerInputGeneListSignal(Ft)}),Y._uU(3,"Import Gene List"),Y.qZA(),Y.qZA()}}function li(lt,St){if(1&lt&&(Y.TgZ(0,"p"),Y._uU(1),Y.qZA()),2&lt){const K=Y.oxw();Y.xp6(1),Y.Oqu(null==K.addGeneListForHighlightStatus?null:K.addGeneListForHighlightStatus.statusValue)}}function Mn(lt,St){if(1&lt&&(Y.TgZ(0,"p",8),Y._uU(1),Y.qZA()),2&lt){const K=Y.oxw();Y.xp6(1),Y.Oqu(null==K.addGeneListForHighlightStatus?null:K.addGeneListForHighlightStatus.statusValue)}}let br=(()=>{class lt{constructor(){this.geneListIDforAdding$=new Y.vpe,this.geneListIDforRemove$=new Y.vpe,this.geneListIDforHighlight$=new Y.vpe,this.inputGeneListSignal$=new Y.vpe}ngOnInit(){}processGeneListIDforAdding(K){this.geneListIDforAdding$.next(K)}processGeneListIDforHighlight(K){this.geneListIDforHighlight$.next(K)}processGeneListIDforRemove(K){this.geneListIDforRemove$.next(K)}triggerInputGeneListSignal(K){this.inputGeneListSignal$.next(!0)}}return lt.\u0275fac=function(K){return new(K||lt)},lt.\u0275cmp=Y.Xpm({type:lt,selectors:[["app-manage-gene-lists-for-highlight"]],inputs:{allGeneListIDs:"allGeneListIDs",availableGenelistIDsForHighlight:"availableGenelistIDsForHighlight",addGeneListForHighlightStatus:"addGeneListForHighlightStatus",disActiveAllGenelist:"disActiveAllGenelist"},outputs:{geneListIDforAdding$:"geneListIDforAdding$",geneListIDforRemove$:"geneListIDforRemove$",geneListIDforHighlight$:"geneListIDforHighlight$",inputGeneListSignal$:"inputGeneListSignal$"},decls:9,vars:6,consts:[[1,"text-center"],[1,"col-12","border-right"],[4,"ngIf","ngIfElse"],["importGeneListNote",""],[3,"ngIf"],[3,"availableGenelistIDs","disActiveAll","selectedGeneListIDforHighlight$","selectedGeneListIDforRemove$"],[3,"availableGeneListNames","selectedGeneListName"],["href","javascript:void(0)","data-testid","importGeneList",3,"click"],[2,"color","red"]],template:function(K,Mt){if(1&K&&(Y.TgZ(0,"h5",0),Y._uU(1,"Highlight specific Genes"),Y.qZA(),Y.TgZ(2,"div",1),Y.YNc(3,Hn,4,1,"div",2),Y.YNc(4,mr,4,0,"ng-template",null,3,Y.W1O),Y.qZA(),Y.YNc(6,li,2,1,"ng-template",4),Y.YNc(7,Mn,2,1,"ng-template",4),Y.TgZ(8,"app-click-gene-list-for-highlighting",5),Y.NdJ("selectedGeneListIDforHighlight$",function($t){return Mt.processGeneListIDforHighlight($t)})("selectedGeneListIDforRemove$",function($t){return Mt.processGeneListIDforRemove($t)}),Y.qZA()),2&K){const Ft=Y.MAs(5);Y.xp6(3),Y.Q6J("ngIf",(null==Mt.allGeneListIDs?null:Mt.allGeneListIDs.length)>0)("ngIfElse",Ft),Y.xp6(3),Y.Q6J("ngIf","loading"===(null==Mt.addGeneListForHighlightStatus?null:Mt.addGeneListForHighlightStatus.status)),Y.xp6(1),Y.Q6J("ngIf","error"===(null==Mt.addGeneListForHighlightStatus?null:Mt.addGeneListForHighlightStatus.status)),Y.xp6(1),Y.Q6J("availableGenelistIDs",Mt.availableGenelistIDsForHighlight)("disActiveAll",Mt.disActiveAllGenelist)}},directives:[gt.O5,Xi.T,Hi.i],styles:[""],changeDetection:0}),lt})();var Mr=ct(4547),Ue=ct(5826),Vi=ct(6588);const ui=["inputGeneListComponent"];function xr(lt,St){if(1&lt){const K=Y.EpF();Y.TgZ(0,"div",22),Y.TgZ(1,"div",23),Y.TgZ(2,"app-try-sample",24),Y.NdJ("sampleForTryName$",function(Ft){return Y.CHM(K),Y.oxw().processTrySampleFileName(Ft)})("sampleForImportName$",function(Ft){return Y.CHM(K),Y.oxw().processDownloadSampleData(Ft)})("closeMe$",function(Ft){return Y.CHM(K),Y.oxw().closeTrySampleComponent(Ft)}),Y.ALo(3,"async"),Y.qZA(),Y.qZA(),Y.qZA()}if(2&lt){const K=Y.oxw();Y.xp6(2),Y.Q6J("fileInfos",K.trySamplesInfos)("trySamplePercentage",Y.lcZ(3,2,K.trySamplePercentage$))}}function hi(lt,St){if(1&lt){const K=Y.EpF();Y.TgZ(0,"div",25),Y.TgZ(1,"h3"),Y._uU(2,"Generate a New Gene List"),Y.qZA(),Y.TgZ(3,"button",26),Y.NdJ("click",function(){Y.CHM(K);const Ft=Y.oxw();return null==Ft.inputGenelistModalRef?null:Ft.inputGenelistModalRef.hide()}),Y.TgZ(4,"span",27),Y._uU(5,"\xd7"),Y.qZA(),Y.qZA(),Y.qZA(),Y.TgZ(6,"div",28),Y.TgZ(7,"app-generate-new-gene-list",29),Y.NdJ("outputGeneList$",function(Ft){return Y.CHM(K),Y.oxw().processInputGeneList(Ft)})("annotationTermsRequest$",function(Ft){return Y.CHM(K),Y.oxw().processAnnotationTermsRequest(Ft)})("annotationGenesRequest$",function(Ft){return Y.CHM(K),Y.oxw().processAnnotationGenesRequest(Ft)})("geneListFromDatasetRequest$",function(Ft){return Y.CHM(K),Y.oxw().processGeneListFromDatasetRequest(Ft)}),Y.ALo(8,"async"),Y.ALo(9,"async"),Y.ALo(10,"async"),Y.ALo(11,"async"),Y.qZA(),Y.qZA(),Y.TgZ(12,"div",30),Y.TgZ(13,"button",31),Y.NdJ("click",function(){return Y.CHM(K),Y.oxw().inputGenelistModalRef.hide()}),Y._uU(14,"close"),Y.qZA(),Y.qZA()}if(2&lt){const K=Y.oxw();Y.xp6(7),Y.Q6J("availableSpecies",K.availableSpecies)("availableGeneIDtypes",K.availableGeneIDtypes)("annotationTerms",Y.lcZ(8,6,K.annotationTerms$))("allDatasetInfoForDisplay",Y.lcZ(9,8,K.allDatasetInfoForDisplay$))("geneNumberAfterFilter",Y.lcZ(10,10,K.geneNumberAfterFilter$))("latestAddedGeneListID",Y.lcZ(11,12,K.latestAddedGenelistName$))}}const Ra=[{path:"",component:(()=>{class lt{constructor(K,Mt){this.facade=K,this.modalService=Mt,this.trySamplesInfos=[{fileForTry:"ProteomicsPPIExp.json.gz",fileForImport:"proteomics with clinical.zip",description:"Proteomics data"}],this.availableSpecies=Tn.it,this.availableGeneIDtypes=Tn.k1,this.availablePPIdatabases=Tn.dT,this.allDatasetInfoForDisplay$=this.facade.allDatasetInfoForDisplay$.pipe((0,Bn.d)(2)),this.allGeneListIDs$=this.facade.allGeneListIDs$.pipe((0,Bn.d)(3)),this.genelistIDsForSpecificGenesHighlight$=this.facade.genelistIDsForSpecificGenesHighlight$,this.allGeneListGraphIDs$=this.facade.allGeneListGraphIDs$,this.datasetGroupsWithStatusForDiffGenes$=this.facade.datasetGroupsWithStatus$,this.latestAddedGenelistName$=this.facade.latestAddedGenelistName$,this.annotationTerms$=this.facade.annotationTerms$,this.geneNumberAfterFilter$=this.facade.geneNumberAfterFilter$,this.trySamplePercentage$=this.facade.trySamplePercentage$,this.ifShowTrySampleComponent=!0,this.graph$=this.facade.graph$,this.diffGenes$=this.facade.diffGenesSymbolsForHighlighting$,this.diffEdges$=this.facade.diffEdges$,this.disSelectedGenesInExpressionPattern=!1,this.disActiveAllDiffGroupPairs=!1,this.disActiveAllGenelist=!1,this.facade.changeDiffFilterInput({pValueType:"rawPvalue",pValue:.05,foldChangeType:"log2FoldChange",foldChange:1})}ngOnInit(){this.nodesPropertyHighlight$=this.facade.genesForHighlight$.pipe((0,c.U)(K=>({nodes:[...K],property:"background-color",propertyValue:"red",type:"add"}))),this.hierarClusteringResult$=this.facade.expressionPatternInfo$.pipe((0,c.U)(K=>({clusterResult:K.result,transform:K.transform,basicSetting:K.basicSetting})))}processGeneListPPIrequest(K){this.facade.constructGeneListPPIsRequest(K)}processSelectedDatasetForDiffGenesHighlight(K){this.facade.requestDatasetDiffGenesForHighlight(K)}processDiffGroupPairForDiffGenesHighlight(K){this.facade.requestGroupPairDiffGenesForHighlight(K),this._doNotHighlightGenesAnyMore(),this.disActiveAllGenelist=!0,this.disSelectedGenesInExpressionPattern=!0,this.disActiveAllDiffGroupPairs=!1}processExpressionPatternInDataset(K){this.facade.requestExpressionPattern(K)}processExpressionPatternMapVisSettings(K){this.facade.updateVisSettingsOfNodesExpressionInDataset(K)}processGenesSelectedFromExpressionPattern(K){this.facade.requestSymbolsForGenesSelectedFromExpressionPattern(K.selectedNodes),this._doNotHighlightDiffGenesAnyMore(),this.disActiveAllGenelist=!0,this.disActiveAllDiffGroupPairs=!0,this.disSelectedGenesInExpressionPattern=!1}processGeneListForAddSpecificGenes(K){this.facade.addGeneListIDForSpecificGenesHighlight(K)}processGeneListForHighlight(K){this.facade.obtainGenesForSpecificGenesHighlight(K),this._doNotHighlightDiffGenesAnyMore(),this.disActiveAllDiffGroupPairs=!0,this.disSelectedGenesInExpressionPattern=!0,this.disActiveAllGenelist=!1}processSelectedGeneListGraphID(K){this.facade.requestGeneListGraph(K)}processOutputZoomNodesPosition(K){this.facade.modifyGraphZoomNodesPosition(K)}openModalForLoadingGeneList(K){this.inputGenelistModalRef=this.modalService.show(this.inputGeneListComponent)}processInputGeneList(K){this.facade.addGeneListToTheStore(K)}processAnnotationTermsRequest(K){this.facade.requestAnnotationTerms(K)}processAnnotationGenesRequest(K){this.facade.requestAnnotationGenes(K)}processGeneListFromDatasetRequest(K){this.facade.processNewGeneListFromDatasetRequest(K)}processDownloadProjectSignal(K){this.facade.downloadProjectSignal()}processTrySampleFileName(K){this.facade.prepareTrySampleData(K)}closeTrySampleComponent(K){this.ifShowTrySampleComponent=!1}processDownloadSampleData(K){this.facade.downloadSampleData(K)}_doNotHighlightDiffGenesAnyMore(){this.facade.requestGroupPairDiffGenesForHighlight({baseGroup:"noGroup",targetGroup:"noGroup"})}_doNotHighlightGenesAnyMore(){this.facade.obtainGenesForSpecificGenesHighlight("noList")}}return lt.\u0275fac=function(K){return new(K||lt)(Y.Y36(vr),Y.Y36(N.tT))},lt.\u0275cmp=Y.Xpm({type:lt,selectors:[["app-ppi-exp"]],viewQuery:function(K,Mt){if(1&K&&Y.Gf(ui,5,Y.Rgc),2&K){let Ft;Y.iGM(Ft=Y.CRH())&&(Mt.inputGeneListComponent=Ft.first)}},decls:40,vars:41,consts:[[1,"row","flex-xl-nowrap"],[1,"col-12","col-md-3","col-xl-2","border","bd-sidebar"],[1,"mb-3","mt-5"],[3,"geneListIDs","ppiDatabases","inputGeneListSignal$","geneListPPIrequest$"],[1,"border-top","mt-4"],["data-testid","newGeneList",1,"btn","btn-sm",3,"click"],[1,"col-12","col-md-9","col-xl-10","mt-2"],["class","row border",4,"ngIf"],[3,"geneListGraphIDs","selectedGeneListGraphID$"],[1,"row","row-cols-3","mt-2"],[1,"col-12","col-md-7","order-1","order-md-1","border"],[1,"text-center",2,"margin-bottom","0"],[1,"col-12","col-md-5","order-3","order-md-3","border"],[1,"text-center"],[1,"col-12","col-md-7","order-2","order-md-4","border","mainVisSection",3,"graphForDisplay","diffGenes","diffEdges","nodesPropertyHighlight","outputZoomNodesPosition$"],[1,"col-12","col-md-5","order-4","order-md-6","border","mainVisSection"],[3,"allDatasetInfoForDisplay","hierarClusteringResult","disSelectedGenes","datasetHierarRequest$","mapVisSettings$","selectedNodes$"],[1,"row",3,"allDatasetInfoForDisplay","datasetGroupsWithStatus","disActiveAllDiffGroupPairs","selectedDatasetID$","diffGroupPair$"],[1,"row",3,"allGeneListIDs","addGeneListForHighlightStatus","availableGenelistIDsForHighlight","disActiveAllGenelist","geneListIDforAdding$","geneListIDforHighlight$","inputGeneListSignal$"],[1,"row","mt-4"],[3,"downloadProjectSignal$"],["inputGeneListComponent",""],[1,"row","border"],[1,"col-12","p-1"],[3,"fileInfos","trySamplePercentage","sampleForTryName$","sampleForImportName$","closeMe$"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"availableSpecies","availableGeneIDtypes","annotationTerms","allDatasetInfoForDisplay","geneNumberAfterFilter","latestAddedGeneListID","outputGeneList$","annotationTermsRequest$","annotationGenesRequest$","geneListFromDatasetRequest$"],[1,"modal-footer"],["data-testid","closeGeneListInput","type","button",1,"btn","btn-default","btn-sm",3,"click"]],template:function(K,Mt){1&K&&(Y.TgZ(0,"div",0),Y.TgZ(1,"div",1),Y.TgZ(2,"h5",2),Y._uU(3,"Construct a new PPI network"),Y.qZA(),Y.TgZ(4,"app-generate-new-ppi-network",3),Y.NdJ("inputGeneListSignal$",function($t){return Mt.openModalForLoadingGeneList($t)})("geneListPPIrequest$",function($t){return Mt.processGeneListPPIrequest($t)}),Y.ALo(5,"async"),Y.qZA(),Y.TgZ(6,"p",4),Y._uU(7,"If the genes are not in the gene lists, click the following button to input a new gene list "),Y.qZA(),Y.TgZ(8,"button",5),Y.NdJ("click",function($t){return Mt.openModalForLoadingGeneList($t)}),Y._uU(9," Load a new gene list "),Y.qZA(),Y.qZA(),Y.TgZ(10,"div",6),Y.YNc(11,xr,4,4,"div",7),Y.TgZ(12,"app-select-genelist-graph-id",8),Y.NdJ("selectedGeneListGraphID$",function($t){return Mt.processSelectedGeneListGraphID($t)}),Y.ALo(13,"async"),Y.qZA(),Y.TgZ(14,"div",9),Y.TgZ(15,"div",10),Y.TgZ(16,"h5",11),Y._uU(17," PPI Graph "),Y.qZA(),Y.qZA(),Y.TgZ(18,"div",12),Y.TgZ(19,"h5",13),Y._uU(20," Expression Profile of PPI Nodes In Dataset "),Y.qZA(),Y.qZA(),Y.TgZ(21,"app-cytoscapejs-ppi-vis",14),Y.NdJ("outputZoomNodesPosition$",function($t){return Mt.processOutputZoomNodesPosition($t)}),Y.ALo(22,"async"),Y.ALo(23,"async"),Y.ALo(24,"async"),Y.ALo(25,"async"),Y.qZA(),Y.TgZ(26,"div",15),Y.TgZ(27,"app-manage-genes-expression-in-dataset",16),Y.NdJ("datasetHierarRequest$",function($t){return Mt.processExpressionPatternInDataset($t)})("mapVisSettings$",function($t){return Mt.processExpressionPatternMapVisSettings($t)})("selectedNodes$",function($t){return Mt.processGenesSelectedFromExpressionPattern($t)}),Y.ALo(28,"async"),Y.ALo(29,"async"),Y.qZA(),Y.qZA(),Y.qZA(),Y.TgZ(30,"app-manage-diff-genes-for-highlight",17),Y.NdJ("selectedDatasetID$",function($t){return Mt.processSelectedDatasetForDiffGenesHighlight($t)})("diffGroupPair$",function($t){return Mt.processDiffGroupPairForDiffGenesHighlight($t)}),Y.ALo(31,"async"),Y.ALo(32,"async"),Y.qZA(),Y.TgZ(33,"app-manage-gene-lists-for-highlight",18),Y.NdJ("geneListIDforAdding$",function($t){return Mt.processGeneListForAddSpecificGenes($t)})("geneListIDforHighlight$",function($t){return Mt.processGeneListForHighlight($t)})("inputGeneListSignal$",function($t){return Mt.openModalForLoadingGeneList($t)}),Y.ALo(34,"async"),Y.ALo(35,"async"),Y.qZA(),Y.TgZ(36,"div",19),Y.TgZ(37,"app-download-project",20),Y.NdJ("downloadProjectSignal$",function($t){return Mt.processDownloadProjectSignal($t)}),Y.qZA(),Y.qZA(),Y.qZA(),Y.YNc(38,hi,15,14,"ng-template",null,21,Y.W1O),Y.qZA()),2&K&&(Y.xp6(4),Y.Q6J("geneListIDs",Y.lcZ(5,17,Mt.allGeneListIDs$))("ppiDatabases",Mt.availablePPIdatabases),Y.xp6(7),Y.Q6J("ngIf",Mt.ifShowTrySampleComponent),Y.xp6(1),Y.Q6J("geneListGraphIDs",Y.lcZ(13,19,Mt.allGeneListGraphIDs$)),Y.xp6(9),Y.Q6J("graphForDisplay",Y.lcZ(22,21,Mt.graph$))("diffGenes",Y.lcZ(23,23,Mt.diffGenes$))("diffEdges",Y.lcZ(24,25,Mt.diffEdges$))("nodesPropertyHighlight",Y.lcZ(25,27,Mt.nodesPropertyHighlight$)),Y.xp6(6),Y.Q6J("allDatasetInfoForDisplay",Y.lcZ(28,29,Mt.allDatasetInfoForDisplay$))("hierarClusteringResult",Y.lcZ(29,31,Mt.hierarClusteringResult$))("disSelectedGenes",Mt.disSelectedGenesInExpressionPattern),Y.xp6(3),Y.Q6J("allDatasetInfoForDisplay",Y.lcZ(31,33,Mt.allDatasetInfoForDisplay$))("datasetGroupsWithStatus",Y.lcZ(32,35,Mt.datasetGroupsWithStatusForDiffGenes$))("disActiveAllDiffGroupPairs",Mt.disActiveAllDiffGroupPairs),Y.xp6(3),Y.Q6J("allGeneListIDs",Y.lcZ(34,37,Mt.allGeneListIDs$))("availableGenelistIDsForHighlight",Y.lcZ(35,39,Mt.genelistIDsForSpecificGenesHighlight$))("disActiveAllGenelist",Mt.disActiveAllGenelist))},directives:[zn,gt.O5,Je,Ga,tn.h,In.d,br,Mr.E,Ue.P,Vi.D],pipes:[gt.Ov],styles:[""]}),lt})(),data:{key:"PPIExp"}}];let Fa=(()=>{class lt{}return lt.\u0275fac=function(K){return new(K||lt)},lt.\u0275mod=Y.oAB({type:lt}),lt.\u0275inj=Y.cJS({imports:[[ii.Bz.forChild(Ra)],ii.Bz]}),lt})(),qi=(()=>{class lt{}return lt.\u0275fac=function(K){return new(K||lt)},lt.\u0275mod=Y.oAB({type:lt}),lt.\u0275inj=Y.cJS({providers:[vr],imports:[[gt.ez,G.u5,G.UX,N.zk.forRoot(),Fa,I.f,w.m,b.D]]}),lt})()}}]);