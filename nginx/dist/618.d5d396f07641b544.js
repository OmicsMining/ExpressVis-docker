(self.webpackChunkclient=self.webpackChunkclient||[]).push([[618],{3544:function(Ee,ct,ut){var pt;Ee.exports=(pt=ut(5805),function(R){var k={};function T(w){if(k[w])return k[w].exports;var b=k[w]={i:w,l:!1,exports:{}};return R[w].call(b.exports,b,b.exports,T),b.l=!0,b.exports}return T.m=R,T.c=k,T.i=function(w){return w},T.d=function(w,b,v){T.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},T.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return T.d(b,"a",b),b},T.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},T.p="",T(T.s=7)}([function(R,k){R.exports=pt},function(R,k,T){"use strict";var w=T(0).FDLayoutConstants;function b(){}for(var v in w)b[v]=w[v];b.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,b.DEFAULT_RADIAL_SEPARATION=w.DEFAULT_EDGE_LENGTH,b.DEFAULT_COMPONENT_SEPERATION=60,b.TILE=!0,b.TILING_PADDING_VERTICAL=10,b.TILING_PADDING_HORIZONTAL=10,b.TREE_REDUCTION_ON_INCREMENTAL=!1,R.exports=b},function(R,k,T){"use strict";var w=T(0).FDLayoutEdge;function b(f,y,d){w.call(this,f,y,d)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];R.exports=b},function(R,k,T){"use strict";var w=T(0).LGraph;function b(f,y,d){w.call(this,f,y,d)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];R.exports=b},function(R,k,T){"use strict";var w=T(0).LGraphManager;function b(f){w.call(this,f)}for(var v in b.prototype=Object.create(w.prototype),w)b[v]=w[v];R.exports=b},function(R,k,T){"use strict";var w=T(0).FDLayoutNode,b=T(0).IMath;function v(y,d,p,c){w.call(this,y,d,p,c)}for(var f in v.prototype=Object.create(w.prototype),w)v[f]=w[f];v.prototype.move=function(){var y=this.graphManager.getLayout();this.displacementX=y.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=y.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementX=y.coolingFactor*y.maxNodeDisplacement*b.sign(this.displacementX)),Math.abs(this.displacementY)>y.coolingFactor*y.maxNodeDisplacement&&(this.displacementY=y.coolingFactor*y.maxNodeDisplacement*b.sign(this.displacementY)),null==this.child||0==this.child.getNodes().length?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),y.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},v.prototype.propogateDisplacementToChildren=function(y,d){for(var c,p=this.getChild().getNodes(),D=0;D<p.length;D++)null==(c=p[D]).getChild()?(c.moveBy(y,d),c.displacementX+=y,c.displacementY+=d):c.propogateDisplacementToChildren(y,d)},v.prototype.setPred1=function(y){this.pred1=y},v.prototype.getPred1=function(){return pred1},v.prototype.getPred2=function(){return pred2},v.prototype.setNext=function(y){this.next=y},v.prototype.getNext=function(){return next},v.prototype.setProcessed=function(y){this.processed=y},v.prototype.isProcessed=function(){return processed},R.exports=v},function(R,k,T){"use strict";var w=T(0).FDLayout,b=T(4),v=T(3),f=T(5),y=T(2),d=T(1),p=T(0).FDLayoutConstants,c=T(0).LayoutConstants,D=T(0).Point,I=T(0).PointD,C=T(0).Layout,N=T(0).Integer,U=T(0).IGeometry,G=T(0).LGraph,at=T(0).Transform;function gt(){w.call(this),this.toBeTiled={}}for(var At in gt.prototype=Object.create(w.prototype),w)gt[At]=w[At];gt.prototype.newGraphManager=function(){var q=new b(this);return this.graphManager=q,q},gt.prototype.newGraph=function(q){return new v(null,this.graphManager,q)},gt.prototype.newNode=function(q){return new f(this.graphManager,q)},gt.prototype.newEdge=function(q){return new y(null,null,q)},gt.prototype.initParameters=function(){w.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=d.DEFAULT_EDGE_LENGTH<10?10:d.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=p.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=p.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=p.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=p.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=p.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=p.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/p.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=p.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},gt.prototype.layout=function(){return c.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},gt.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(d.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var $=new Set(this.getAllNodes()),rt=this.nodesWithGravity.filter(function(j){return $.has(j)});this.graphManager.setAllNodesToApplyGravitation(rt)}}else{var q=this.getFlatForest();q.length>0?this.positionNodesRadially(q):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),$=new Set(this.getAllNodes()),rt=this.nodesWithGravity.filter(function(O){return $.has(O)}),this.graphManager.setAllNodesToApplyGravitation(rt),this.positionNodesRandomly())}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},gt.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%p.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var q=new Set(this.getAllNodes()),$=this.nodesWithGravity.filter(function(H){return q.has(H)});this.graphManager.setAllNodesToApplyGravitation($),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=p.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=p.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var rt=!this.isTreeGrowing&&!this.isGrowthFinished,O=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(rt,O),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},gt.prototype.getPositionsData=function(){for(var q=this.graphManager.getAllNodes(),$={},rt=0;rt<q.length;rt++){var O=q[rt].rect,H=q[rt].id;$[H]={id:H,x:O.getCenterX(),y:O.getCenterY(),w:O.width,h:O.height}}return $},gt.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var q=!1;if("during"===p.ANIMATE)this.emit("layoutstarted");else{for(;!q;)q=this.tick();this.graphManager.updateBounds()}},gt.prototype.calculateNodesToApplyGravitationTo=function(){var $,H,q=[],rt=this.graphManager.getGraphs(),O=rt.length;for(H=0;H<O;H++)($=rt[H]).updateConnected(),$.isConnected||(q=q.concat($.getNodes()));return q},gt.prototype.createBendpoints=function(){var q=[];q=q.concat(this.graphManager.getAllEdges());var rt,$=new Set;for(rt=0;rt<q.length;rt++){var O=q[rt];if(!$.has(O)){var H=O.getSource(),j=O.getTarget();if(H==j)O.getBendpoints().push(new I),O.getBendpoints().push(new I),this.createDummyNodesForBendpoints(O),$.add(O);else{var J=[];if(J=(J=J.concat(H.getEdgeListToNode(j))).concat(j.getEdgeListToNode(H)),!$.has(J[0])){var nt;if(J.length>1)for(nt=0;nt<J.length;nt++){var yt=J[nt];yt.getBendpoints().push(new I),this.createDummyNodesForBendpoints(yt)}J.forEach(function(Nt){$.add(Nt)})}}}if($.size==q.length)break}},gt.prototype.positionNodesRadially=function(q){for(var $=new D(0,0),rt=Math.ceil(Math.sqrt(q.length)),O=0,H=0,j=0,J=new I(0,0),nt=0;nt<q.length;nt++){nt%rt==0&&(j=0,H=O,0!=nt&&(H+=d.DEFAULT_COMPONENT_SEPERATION),O=0);var yt=q[nt],Nt=C.findCenterOfTree(yt);$.x=j,$.y=H,(J=gt.radialLayout(yt,Nt,$)).y>O&&(O=Math.floor(J.y)),j=Math.floor(J.x+d.DEFAULT_COMPONENT_SEPERATION)}this.transform(new I(c.WORLD_CENTER_X-J.x/2,c.WORLD_CENTER_Y-J.y/2))},gt.radialLayout=function(q,$,rt){var O=Math.max(this.maxDiagonalInTree(q),d.DEFAULT_RADIAL_SEPARATION);gt.branchRadialLayout($,null,0,359,0,O);var H=G.calculateBounds(q),j=new at;j.setDeviceOrgX(H.getMinX()),j.setDeviceOrgY(H.getMinY()),j.setWorldOrgX(rt.x),j.setWorldOrgY(rt.y);for(var J=0;J<q.length;J++)q[J].transform(j);var yt=new I(H.getMaxX(),H.getMaxY());return j.inverseTransformPoint(yt)},gt.branchRadialLayout=function(q,$,rt,O,H,j){var J=(O-rt+1)/2;J<0&&(J+=180);var yt=(J+rt)%360*U.TWO_PI/360,W=(Math.cos(yt),H*Math.cos(yt)),tt=H*Math.sin(yt);q.setCenter(W,tt);var dt=[],Dt=(dt=dt.concat(q.getEdges())).length;null!=$&&Dt--;for(var Rt,Ot=0,St=dt.length,Vt=q.getEdgesBetween($);Vt.length>1;){var te=Vt[0];Vt.splice(0,1);var he=dt.indexOf(te);he>=0&&dt.splice(he,1),St--,Dt--}Rt=null!=$?(dt.indexOf(Vt[0])+1)%St:0;for(var de=Math.abs(O-rt)/Dt,se=Rt;Ot!=Dt;se=++se%St){var De=dt[se].getOtherEnd(q);if(De!=$){var Le=(rt+Ot*de)%360;gt.branchRadialLayout(De,q,Le,(Le+de)%360,H+j,j),Ot++}}},gt.maxDiagonalInTree=function(q){for(var $=N.MIN_VALUE,rt=0;rt<q.length;rt++){var H=q[rt].getDiagonal();H>$&&($=H)}return $},gt.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},gt.prototype.groupZeroDegreeMembers=function(){var q=this,$={};this.memberGroups={},this.idToDummyNode={};for(var rt=[],O=this.graphManager.getAllNodes(),H=0;H<O.length;H++){var J=(j=O[H]).getParent();0===this.getNodeDegreeWithChildren(j)&&(null==J.id||!this.getToBeTiled(J))&&rt.push(j)}for(H=0;H<rt.length;H++){var j,nt=(j=rt[H]).getParent().id;void 0===$[nt]&&($[nt]=[]),$[nt]=$[nt].concat(j)}Object.keys($).forEach(function(yt){if($[yt].length>1){var Nt="DummyCompound_"+yt;q.memberGroups[Nt]=$[yt];var W=$[yt][0].getParent(),tt=new f(q.graphManager);tt.id=Nt,tt.paddingLeft=W.paddingLeft||0,tt.paddingRight=W.paddingRight||0,tt.paddingBottom=W.paddingBottom||0,tt.paddingTop=W.paddingTop||0,q.idToDummyNode[Nt]=tt;var dt=q.getGraphManager().add(q.newGraph(),tt),Dt=W.getChild();Dt.add(tt);for(var Ot=0;Ot<$[yt].length;Ot++){var St=$[yt][Ot];Dt.remove(St),dt.add(St)}}})},gt.prototype.clearCompounds=function(){var q={},$={};this.performDFSOnCompounds();for(var rt=0;rt<this.compoundOrder.length;rt++)$[this.compoundOrder[rt].id]=this.compoundOrder[rt],q[this.compoundOrder[rt].id]=[].concat(this.compoundOrder[rt].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[rt].getChild()),this.compoundOrder[rt].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(q,$)},gt.prototype.clearZeroDegreeMembers=function(){var q=this,$=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(rt){var O=q.idToDummyNode[rt];$[rt]=q.tileNodes(q.memberGroups[rt],O.paddingLeft+O.paddingRight),O.rect.width=$[rt].width,O.rect.height=$[rt].height})},gt.prototype.repopulateCompounds=function(){for(var q=this.compoundOrder.length-1;q>=0;q--){var $=this.compoundOrder[q];this.adjustLocations(this.tiledMemberPack[$.id],$.rect.x,$.rect.y,$.paddingLeft,$.paddingTop)}},gt.prototype.repopulateZeroDegreeMembers=function(){var q=this,$=this.tiledZeroDegreePack;Object.keys($).forEach(function(rt){var O=q.idToDummyNode[rt];q.adjustLocations($[rt],O.rect.x,O.rect.y,O.paddingLeft,O.paddingTop)})},gt.prototype.getToBeTiled=function(q){var $=q.id;if(null!=this.toBeTiled[$])return this.toBeTiled[$];var rt=q.getChild();if(null==rt)return this.toBeTiled[$]=!1,!1;for(var O=rt.getNodes(),H=0;H<O.length;H++){var j=O[H];if(this.getNodeDegree(j)>0)return this.toBeTiled[$]=!1,!1;if(null!=j.getChild()){if(!this.getToBeTiled(j))return this.toBeTiled[$]=!1,!1}else this.toBeTiled[j.id]=!1}return this.toBeTiled[$]=!0,!0},gt.prototype.getNodeDegree=function(q){for(var rt=q.getEdges(),O=0,H=0;H<rt.length;H++){var j=rt[H];j.getSource().id!==j.getTarget().id&&(O+=1)}return O},gt.prototype.getNodeDegreeWithChildren=function(q){var $=this.getNodeDegree(q);if(null==q.getChild())return $;for(var rt=q.getChild().getNodes(),O=0;O<rt.length;O++)$+=this.getNodeDegreeWithChildren(rt[O]);return $},gt.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},gt.prototype.fillCompexOrderByDFS=function(q){for(var $=0;$<q.length;$++){var rt=q[$];null!=rt.getChild()&&this.fillCompexOrderByDFS(rt.getChild().getNodes()),this.getToBeTiled(rt)&&this.compoundOrder.push(rt)}},gt.prototype.adjustLocations=function(q,$,rt,O,H){rt+=H;for(var j=$+=O,J=0;J<q.rows.length;J++){var nt=q.rows[J];$=j;for(var yt=0,Nt=0;Nt<nt.length;Nt++){var W=nt[Nt];W.rect.x=$,W.rect.y=rt,$+=W.rect.width+q.horizontalPadding,W.rect.height>yt&&(yt=W.rect.height)}rt+=yt+q.verticalPadding}},gt.prototype.tileCompoundMembers=function(q,$){var rt=this;this.tiledMemberPack=[],Object.keys(q).forEach(function(O){var H=$[O];rt.tiledMemberPack[O]=rt.tileNodes(q[O],H.paddingLeft+H.paddingRight),H.rect.width=rt.tiledMemberPack[O].width,H.rect.height=rt.tiledMemberPack[O].height})},gt.prototype.tileNodes=function(q,$){var H={rows:[],rowWidth:[],rowHeight:[],width:0,height:$,verticalPadding:d.TILING_PADDING_VERTICAL,horizontalPadding:d.TILING_PADDING_HORIZONTAL};q.sort(function(nt,yt){return nt.rect.width*nt.rect.height>yt.rect.width*yt.rect.height?-1:nt.rect.width*nt.rect.height<yt.rect.width*yt.rect.height?1:0});for(var j=0;j<q.length;j++){var J=q[j];0==H.rows.length?this.insertNodeToRow(H,J,0,$):this.canAddHorizontal(H,J.rect.width,J.rect.height)?this.insertNodeToRow(H,J,this.getShortestRowIndex(H),$):this.insertNodeToRow(H,J,H.rows.length,$),this.shiftToLastRow(H)}return H},gt.prototype.insertNodeToRow=function(q,$,rt,O){var H=O;rt==q.rows.length&&(q.rows.push([]),q.rowWidth.push(H),q.rowHeight.push(0));var J=q.rowWidth[rt]+$.rect.width;q.rows[rt].length>0&&(J+=q.horizontalPadding),q.rowWidth[rt]=J,q.width<J&&(q.width=J);var nt=$.rect.height;rt>0&&(nt+=q.verticalPadding);var yt=0;nt>q.rowHeight[rt]&&(yt=q.rowHeight[rt],q.rowHeight[rt]=nt,yt=q.rowHeight[rt]-yt),q.height+=yt,q.rows[rt].push($)},gt.prototype.getShortestRowIndex=function(q){for(var $=-1,rt=Number.MAX_VALUE,O=0;O<q.rows.length;O++)q.rowWidth[O]<rt&&($=O,rt=q.rowWidth[O]);return $},gt.prototype.getLongestRowIndex=function(q){for(var $=-1,rt=Number.MIN_VALUE,O=0;O<q.rows.length;O++)q.rowWidth[O]>rt&&($=O,rt=q.rowWidth[O]);return $},gt.prototype.canAddHorizontal=function(q,$,rt){var O=this.getShortestRowIndex(q);if(O<0)return!0;var H=q.rowWidth[O];if(H+q.horizontalPadding+$<=q.width)return!0;var J,nt,j=0;return q.rowHeight[O]<rt&&O>0&&(j=rt+q.verticalPadding-q.rowHeight[O]),J=q.width-H>=$+q.horizontalPadding?(q.height+j)/(H+$+q.horizontalPadding):(q.height+j)/q.width,j=rt+q.verticalPadding,(nt=q.width<$?(q.height+j)/$:(q.height+j)/q.width)<1&&(nt=1/nt),J<1&&(J=1/J),J<nt},gt.prototype.shiftToLastRow=function(q){var $=this.getLongestRowIndex(q),rt=q.rowWidth.length-1,O=q.rows[$],H=O[O.length-1],j=H.width+q.horizontalPadding;if(q.width-q.rowWidth[rt]>j&&$!=rt){O.splice(-1,1),q.rows[rt].push(H),q.rowWidth[$]=q.rowWidth[$]-j,q.rowWidth[rt]=q.rowWidth[rt]+j,q.width=q.rowWidth[instance.getLongestRowIndex(q)];for(var J=Number.MIN_VALUE,nt=0;nt<O.length;nt++)O[nt].height>J&&(J=O[nt].height);$>0&&(J+=q.verticalPadding);var yt=q.rowHeight[$]+q.rowHeight[rt];q.rowHeight[$]=J,q.rowHeight[rt]<H.height+q.verticalPadding&&(q.rowHeight[rt]=H.height+q.verticalPadding),q.height+=q.rowHeight[$]+q.rowHeight[rt]-yt,this.shiftToLastRow(q)}},gt.prototype.tilingPreLayout=function(){d.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},gt.prototype.tilingPostLayout=function(){d.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},gt.prototype.reduceTrees=function(){for(var rt,q=[],$=!0;$;){var O=this.graphManager.getAllNodes(),H=[];$=!1;for(var j=0;j<O.length;j++)1==(rt=O[j]).getEdges().length&&!rt.getEdges()[0].isInterGraph&&null==rt.getChild()&&(H.push([rt,rt.getEdges()[0],rt.getOwner()]),$=!0);if(1==$){for(var J=[],nt=0;nt<H.length;nt++)1==H[nt][0].getEdges().length&&(J.push(H[nt]),H[nt][0].getOwner().remove(H[nt][0]));q.push(J),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=q},gt.prototype.growTree=function(q){for(var O,rt=q[q.length-1],H=0;H<rt.length;H++)this.findPlaceforPrunedNode(O=rt[H]),O[2].add(O[0]),O[2].add(O[1],O[1].source,O[1].target);q.splice(q.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},gt.prototype.findPlaceforPrunedNode=function(q){var $,rt,O=q[0],H=(rt=O==q[1].source?q[1].target:q[1].source).startX,j=rt.finishX,J=rt.startY,nt=rt.finishY,dt=[0,0,0,0];if(J>0)for(var Dt=H;Dt<=j;Dt++)dt[0]+=this.grid[Dt][J-1].length+this.grid[Dt][J].length-1;if(j<this.grid.length-1)for(Dt=J;Dt<=nt;Dt++)dt[1]+=this.grid[j+1][Dt].length+this.grid[j][Dt].length-1;if(nt<this.grid[0].length-1)for(Dt=H;Dt<=j;Dt++)dt[2]+=this.grid[Dt][nt+1].length+this.grid[Dt][nt].length-1;if(H>0)for(Dt=J;Dt<=nt;Dt++)dt[3]+=this.grid[H-1][Dt].length+this.grid[H][Dt].length-1;for(var St,Rt,Ot=N.MAX_VALUE,Vt=0;Vt<dt.length;Vt++)dt[Vt]<Ot?(Ot=dt[Vt],St=1,Rt=Vt):dt[Vt]==Ot&&St++;if(3==St&&0==Ot)0==dt[0]&&0==dt[1]&&0==dt[2]?$=1:0==dt[0]&&0==dt[1]&&0==dt[3]?$=0:0==dt[0]&&0==dt[2]&&0==dt[3]?$=3:0==dt[1]&&0==dt[2]&&0==dt[3]&&($=2);else if(2==St&&0==Ot){var te=Math.floor(2*Math.random());$=0==dt[0]&&0==dt[1]?0==te?0:1:0==dt[0]&&0==dt[2]?0==te?0:2:0==dt[0]&&0==dt[3]?0==te?0:3:0==dt[1]&&0==dt[2]?0==te?1:2:0==dt[1]&&0==dt[3]?0==te?1:3:0==te?2:3}else $=4==St&&0==Ot?te=Math.floor(4*Math.random()):Rt;0==$?O.setCenter(rt.getCenterX(),rt.getCenterY()-rt.getHeight()/2-p.DEFAULT_EDGE_LENGTH-O.getHeight()/2):1==$?O.setCenter(rt.getCenterX()+rt.getWidth()/2+p.DEFAULT_EDGE_LENGTH+O.getWidth()/2,rt.getCenterY()):2==$?O.setCenter(rt.getCenterX(),rt.getCenterY()+rt.getHeight()/2+p.DEFAULT_EDGE_LENGTH+O.getHeight()/2):O.setCenter(rt.getCenterX()-rt.getWidth()/2-p.DEFAULT_EDGE_LENGTH-O.getWidth()/2,rt.getCenterY())},R.exports=gt},function(R,k,T){"use strict";var w={};w.layoutBase=T(0),w.CoSEConstants=T(1),w.CoSEEdge=T(2),w.CoSEGraph=T(3),w.CoSEGraphManager=T(4),w.CoSELayout=T(6),w.CoSENode=T(5),R.exports=w}]))},5674:function(Ee,ct,ut){var pt;Ee.exports=(pt=ut(2103),function(R){var k={};function T(w){if(k[w])return k[w].exports;var b=k[w]={i:w,l:!1,exports:{}};return R[w].call(b.exports,b,b.exports,T),b.l=!0,b.exports}return T.m=R,T.c=k,T.i=function(w){return w},T.d=function(w,b,v){T.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},T.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return T.d(b,"a",b),b},T.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},T.p="",T(T.s=3)}([function(R,k,T){"use strict";var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},b=T(1),v=T(2),f=T(5)||("undefined"!=typeof window?window.cola:null),y=T(4),p=function(G){return(void 0===G?"undefined":w(G))===w(0)},I=function(){},C=function(G,at){return function(G){return null!=G&&(void 0===G?"undefined":w(G))===w(function(){})}(G)?G.apply(at,[at]):G};function N(U){this.options=b({},v,U)}N.prototype.run=function(){var U=this,G=this.options;U.manuallyStopped=!1;var at=G.cy,gt=G.eles,At=gt.nodes(),q=gt.edges(),$=!1,O=At.filter(function(Jt){return Jt.isParent()}),H=At.subtract(O),j=G.boundingBox||{x1:0,y1:0,w:at.width(),h:at.height()};void 0===j.x2&&(j.x2=j.x1+j.w),void 0===j.w&&(j.w=j.x2-j.x1),void 0===j.y2&&(j.y2=j.y1+j.h),void 0===j.h&&(j.h=j.y2-j.y1);var J=function(){for(var Jt=0;Jt<At.length;Jt++){var ie=At[Jt],pe=ie.layoutDimensions(G),xe=ie.scratch("cola");if(!xe.updatedDims){var Me=C(G.nodeSpacing,ie);xe.width=pe.w+2*Me,xe.height=pe.h+2*Me}}At.positions(function(Ge){var ln=Ge.scratch().cola,un=void 0;return!Ge.grabbed()&&H.contains(Ge)&&(!p((un={x:j.x1+ln.x,y:j.y1+ln.y}).x)||!p(un.y))&&(un=void 0),un}),At.updateCompoundBounds(),$||(yt(),$=!0),G.fit&&at.fit(G.padding)},nt=function(){G.ungrabifyWhileSimulating&&tt.grabify(),at.off("destroy",dt),At.off("grab free position",Dt),At.off("lock unlock",Ot),U.one("layoutstop",G.stop),U.trigger({type:"layoutstop",layout:U})},yt=function(){U.one("layoutready",G.ready),U.trigger({type:"layoutready",layout:U})},Nt=G.refresh;Nt=G.refresh<0?1:Math.max(1,Nt);var W=U.adaptor=f.adaptor({trigger:function(Jt){switch(Jt.type){case"tick":case f.EventType?f.EventType.tick:null:G.animate&&J();break;case"end":case f.EventType?f.EventType.end:null:J(),G.infinite||nt()}},kick:function(){var Jt=!0,ie=function(){if(U.manuallyStopped)return nt(),!0;var Ge=W.tick();return!G.infinite&&!Jt&&W.convergenceThreshold(G.convergenceThreshold),Jt=!1,Ge&&G.infinite&&W.resume(),Ge};if(G.animate){y(function Me(){(function(){for(var Ge=void 0,ln=0;ln<Nt&&!Ge;ln++)Ge=Ge||ie();return Ge})()||y(Me)})}else for(;!ie(););},on:I,drag:I});U.adaptor=W;var tt=At.filter(":grabbable");G.ungrabifyWhileSimulating&&tt.ungrabify();var dt=void 0;at.one("destroy",dt=function(){U.stop()});var Dt=void 0;At.on("grab free position",Dt=function(Jt){var pe=this.scratch().cola,xe=this.position();if(Jt.cyTarget===this||Jt.target===this)switch(Jt.type){case"grab":W.dragstart(pe);break;case"free":W.dragend(pe);break;case"position":(pe.px!==xe.x-j.x1||pe.py!==xe.y-j.y1)&&(pe.px=xe.x-j.x1,pe.py=xe.y-j.y1)}});var Ot=void 0;At.on("lock unlock",Ot=function(){var ie=this.scratch().cola;ie.fixed=this.locked(),this.locked()?W.dragstart(ie):W.dragend(ie)}),W.nodes(H.map(function(Ut,Jt){var ie=C(G.nodeSpacing,Ut),pe=Ut.position(),xe=Ut.layoutDimensions(G);return Ut.scratch().cola={x:G.randomize&&!Ut.locked()||void 0===pe.x?Math.round(Math.random()*j.w):pe.x,y:G.randomize&&!Ut.locked()||void 0===pe.y?Math.round(Math.random()*j.h):pe.y,width:xe.w+2*ie,height:xe.h+2*ie,index:Jt,fixed:Ut.locked()}}));var St=[];G.alignment&&(G.alignment.vertical&&G.alignment.vertical.forEach(function(Ut){var Jt=[];Ut.forEach(function(ie){var xe=ie.node.scratch().cola;Jt.push({node:xe.index,offset:ie.offset?ie.offset:0})}),St.push({type:"alignment",axis:"x",offsets:Jt})}),G.alignment.horizontal&&G.alignment.horizontal.forEach(function(Ut){var Jt=[];Ut.forEach(function(ie){var xe=ie.node.scratch().cola;Jt.push({node:xe.index,offset:ie.offset?ie.offset:0})}),St.push({type:"alignment",axis:"y",offsets:Jt})})),G.gapInequalities&&G.gapInequalities.forEach(function(Ut){var Jt=Ut.left.scratch().cola.index,ie=Ut.right.scratch().cola.index;St.push({axis:Ut.axis,left:Jt,right:ie,gap:Ut.gap,equality:Ut.equality})}),St.length>0&&W.constraints(St),W.groups(O.map(function(Ut,Jt){var ie=C(G.nodeSpacing,Ut),pe=function(Qn){return parseFloat(Ut.style("padding-"+Qn))},xe=pe("left")+ie,Me=pe("right")+ie,Ge=pe("top")+ie,ln=pe("bottom")+ie;return Ut.scratch().cola={index:Jt,padding:Math.max(xe,Me,Ge,ln),leaves:Ut.children().intersection(H).map(function(un){return un[0].scratch().cola.index}),fixed:Ut.locked()},Ut}).map(function(Ut){return Ut.scratch().cola.groups=Ut.children().intersection(O).map(function(Jt){return Jt.scratch().cola.index}),Ut.scratch().cola}));var te=void 0,he=void 0;null!=G.edgeLength?(te=G.edgeLength,he="linkDistance"):null!=G.edgeSymDiffLength?(te=G.edgeSymDiffLength,he="symmetricDiffLinkLengths"):null!=G.edgeJaccardLength?(te=G.edgeJaccardLength,he="jaccardLinkLengths"):(te=100,he="linkDistance");if(W.links(q.stdFilter(function(Ut){return H.contains(Ut.source())&&H.contains(Ut.target())}).map(function(Ut){var Jt=Ut.scratch().cola={source:Ut.source()[0].scratch().cola.index,target:Ut.target()[0].scratch().cola.index};return null!=te&&(Jt.calcLength=C(te,Ut)),Jt})),W.size([j.w,j.h]),null!=te&&W[he](function(Jt){return Jt.calcLength}),G.flow){var se=void 0;!function(G){return(void 0===G?"undefined":w(G))===w("")}(G.flow)?p(G.flow)?se={axis:"y",minSeparation:G.flow}:function(G){return null!=G&&(void 0===G?"undefined":w(G))===w({})}(G.flow)?((se=G.flow).axis=se.axis||"y",se.minSeparation=null!=se.minSeparation?se.minSeparation:50):se={axis:"y",minSeparation:50}:se={axis:G.flow,minSeparation:50},W.flowLayout(se.axis,se.minSeparation)}return U.trigger({type:"layoutstart",layout:U}),W.avoidOverlaps(G.avoidOverlap).handleDisconnected(G.handleDisconnected).start(G.unconstrIter,G.userConstIter,G.allConstIter,void 0,void 0,G.centerGraph),G.infinite||setTimeout(function(){U.manuallyStopped||W.stop()},G.maxSimulationTime),this},N.prototype.stop=function(){return this.adaptor&&(this.manuallyStopped=!0,this.adaptor.stop()),this},R.exports=N},function(R,k,T){"use strict";R.exports=null!=Object.assign?Object.assign.bind(Object):function(w){for(var b=arguments.length,v=Array(b>1?b-1:0),f=1;f<b;f++)v[f-1]=arguments[f];return v.filter(function(y){return null!=y}).forEach(function(y){Object.keys(y).forEach(function(d){return w[d]=y[d]})}),w}},function(R,k,T){"use strict";R.exports={animate:!0,refresh:1,maxSimulationTime:4e3,ungrabifyWhileSimulating:!1,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,ready:function(){},stop:function(){},randomize:!1,avoidOverlap:!0,handleDisconnected:!0,convergenceThreshold:.01,nodeSpacing:function(v){return 10},flow:void 0,alignment:void 0,gapInequalities:void 0,centerGraph:!0,edgeLength:void 0,edgeSymDiffLength:void 0,edgeJaccardLength:void 0,unconstrIter:void 0,userConstIter:void 0,allConstIter:void 0,infinite:!1}},function(R,k,T){"use strict";var w=T(0),b=function(f){!f||f("layout","cola",w)};"undefined"!=typeof cytoscape&&b(cytoscape),R.exports=b},function(R,k,T){"use strict";var b,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v};b="undefined"!==("undefined"==typeof window?"undefined":w(window))?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){return setTimeout(v,16)}:function(f){f()},R.exports=b},function(R,k){R.exports=pt}]))},2142:function(Ee,ct,ut){var pt;Ee.exports=(pt=ut(3544),function(R){var k={};function T(w){if(k[w])return k[w].exports;var b=k[w]={i:w,l:!1,exports:{}};return R[w].call(b.exports,b,b.exports,T),b.l=!0,b.exports}return T.m=R,T.c=k,T.i=function(w){return w},T.d=function(w,b,v){T.o(w,b)||Object.defineProperty(w,b,{configurable:!1,enumerable:!0,get:v})},T.n=function(w){var b=w&&w.__esModule?function(){return w.default}:function(){return w};return T.d(b,"a",b),b},T.o=function(w,b){return Object.prototype.hasOwnProperty.call(w,b)},T.p="",T(T.s=1)}([function(R,k){R.exports=pt},function(R,k,T){"use strict";var w=T(0).layoutBase.LayoutConstants,b=T(0).layoutBase.FDLayoutConstants,v=T(0).CoSEConstants,f=T(0).CoSELayout,y=T(0).CoSENode,d=T(0).layoutBase.PointD,p=T(0).layoutBase.DimensionD,c={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function I(U){this.options=function(U,G){var at={};for(var gt in U)at[gt]=U[gt];for(var gt in G)at[gt]=G[gt];return at}(c,U),C(this.options)}var C=function(G){null!=G.nodeRepulsion&&(v.DEFAULT_REPULSION_STRENGTH=b.DEFAULT_REPULSION_STRENGTH=G.nodeRepulsion),null!=G.idealEdgeLength&&(v.DEFAULT_EDGE_LENGTH=b.DEFAULT_EDGE_LENGTH=G.idealEdgeLength),null!=G.edgeElasticity&&(v.DEFAULT_SPRING_STRENGTH=b.DEFAULT_SPRING_STRENGTH=G.edgeElasticity),null!=G.nestingFactor&&(v.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=b.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=G.nestingFactor),null!=G.gravity&&(v.DEFAULT_GRAVITY_STRENGTH=b.DEFAULT_GRAVITY_STRENGTH=G.gravity),null!=G.numIter&&(v.MAX_ITERATIONS=b.MAX_ITERATIONS=G.numIter),null!=G.gravityRange&&(v.DEFAULT_GRAVITY_RANGE_FACTOR=b.DEFAULT_GRAVITY_RANGE_FACTOR=G.gravityRange),null!=G.gravityCompound&&(v.DEFAULT_COMPOUND_GRAVITY_STRENGTH=b.DEFAULT_COMPOUND_GRAVITY_STRENGTH=G.gravityCompound),null!=G.gravityRangeCompound&&(v.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=b.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=G.gravityRangeCompound),null!=G.initialEnergyOnIncremental&&(v.DEFAULT_COOLING_FACTOR_INCREMENTAL=b.DEFAULT_COOLING_FACTOR_INCREMENTAL=G.initialEnergyOnIncremental),w.QUALITY="draft"==G.quality?0:"proof"==G.quality?2:1,v.NODE_DIMENSIONS_INCLUDE_LABELS=b.NODE_DIMENSIONS_INCLUDE_LABELS=w.NODE_DIMENSIONS_INCLUDE_LABELS=G.nodeDimensionsIncludeLabels,v.DEFAULT_INCREMENTAL=b.DEFAULT_INCREMENTAL=w.DEFAULT_INCREMENTAL=!G.randomize,v.ANIMATE=b.ANIMATE=w.ANIMATE=G.animate,v.TILE=G.tile,v.TILING_PADDING_VERTICAL="function"==typeof G.tilingPaddingVertical?G.tilingPaddingVertical.call():G.tilingPaddingVertical,v.TILING_PADDING_HORIZONTAL="function"==typeof G.tilingPaddingHorizontal?G.tilingPaddingHorizontal.call():G.tilingPaddingHorizontal};I.prototype.run=function(){var U,G,at=this.options,At=(this.idToLNode={},this.layout=new f),q=this;q.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var $=At.newGraphManager();this.gm=$;var rt=this.options.eles.nodes(),O=this.options.eles.edges();this.root=$.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(rt),At);for(var H=0;H<O.length;H++){var j=O[H],J=this.idToLNode[j.data("source")],nt=this.idToLNode[j.data("target")];J!==nt&&0==J.getEdgesBetween(nt).length&&($.add(At.newEdge(),J,nt).id=j.id())}var Nt=function(dt,Dt){"number"==typeof dt&&(dt=Dt);var Ot=dt.data("id"),St=q.idToLNode[Ot];return{x:St.getRect().getCenterX(),y:St.getRect().getCenterY()}},W=function tt(){for(var Ot,dt=function(){at.fit&&at.cy.fit(at.eles,at.padding),U||(U=!0,q.cy.one("layoutready",at.ready),q.cy.trigger({type:"layoutready",layout:q}))},Dt=q.options.refresh,St=0;St<Dt&&!Ot;St++)Ot=q.stopped||q.layout.tick();if(Ot)return At.checkLayoutSuccess()&&!At.isSubLayout&&At.doPostLayout(),At.tilingPostLayout&&At.tilingPostLayout(),At.isLayoutFinished=!0,q.options.eles.nodes().positions(Nt),dt(),q.cy.one("layoutstop",q.options.stop),q.cy.trigger({type:"layoutstop",layout:q}),G&&cancelAnimationFrame(G),void(U=!1);var Rt=q.layout.getPositionsData();at.eles.nodes().positions(function(Vt,te){if("number"==typeof Vt&&(Vt=te),!Vt.isParent()){for(var he=Vt.id(),de=Rt[he],se=Vt;null==de&&(de=Rt[se.data("parent")]||Rt["DummyCompound_"+se.data("parent")],Rt[he]=de,null!=(se=se.parent()[0])););return null!=de?{x:de.x,y:de.y}:{x:Vt.position("x"),y:Vt.position("y")}}}),dt(),G=requestAnimationFrame(tt)};return At.addListener("layoutstarted",function(){"during"===q.options.animate&&(G=requestAnimationFrame(W))}),At.runLayout(),"during"!==this.options.animate&&(q.options.eles.nodes().not(":parent").layoutPositions(q,q.options,Nt),U=!1),this},I.prototype.getTopMostNodes=function(U){for(var G={},at=0;at<U.length;at++)G[U[at].id()]=!0;return U.filter(function(At,q){"number"==typeof At&&(At=q);for(var $=At.parent()[0];null!=$;){if(G[$.id()])return!1;$=$.parent()[0]}return!0})},I.prototype.processChildrenList=function(U,G,at){for(var gt=G.length,At=0;At<gt;At++){var rt,nt,q=G[At],$=q.children(),O=q.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if((rt=null!=q.outerWidth()&&null!=q.outerHeight()?U.add(new y(at.graphManager,new d(q.position("x")-O.w/2,q.position("y")-O.h/2),new p(parseFloat(O.w),parseFloat(O.h)))):U.add(new y(this.graphManager))).id=q.data("id"),rt.paddingLeft=parseInt(q.css("padding")),rt.paddingTop=parseInt(q.css("padding")),rt.paddingRight=parseInt(q.css("padding")),rt.paddingBottom=parseInt(q.css("padding")),this.options.nodeDimensionsIncludeLabels&&q.isParent()){var H=q.boundingBox({includeLabels:!0,includeNodes:!1}).w,j=q.boundingBox({includeLabels:!0,includeNodes:!1}).h,J=q.css("text-halign");rt.labelWidth=H,rt.labelHeight=j,rt.labelPos=J}this.idToLNode[q.data("id")]=rt,isNaN(rt.rect.x)&&(rt.rect.x=0),isNaN(rt.rect.y)&&(rt.rect.y=0),null!=$&&$.length>0&&(nt=at.getGraphManager().add(at.newGraph(),rt),this.processChildrenList(nt,$,at))}},I.prototype.stop=function(){return this.stopped=!0,this};var N=function(G){G("layout","cose-bilkent",I)};"undefined"!=typeof cytoscape&&N(cytoscape),R.exports=N}]))},9319:function(Ee){Ee.exports=function(){"use strict";function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=[],a=!0,o=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done)&&(i.push(s.value),!r||i.length!==r);a=!0);}catch(h){o=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w="undefined"==typeof window?null:window,b=w?w.navigator:null,v=ct(""),f=ct({}),y=ct(function(){}),d="undefined"==typeof HTMLElement?"undefined":ct(HTMLElement),p=function(t){return t&&t.instanceString&&D(t.instanceString)?t.instanceString():null},c=function(t){return null!=t&&ct(t)==v},D=function(t){return null!=t&&ct(t)===y},I=function(t){return!G(t)&&(Array.isArray?Array.isArray(t):null!=t&&t instanceof Array)},C=function(t){return null!=t&&ct(t)===f&&!I(t)&&t.constructor===Object},N=function(t){return null!=t&&ct(t)===ct(1)&&!isNaN(t)},U=function(t){return"undefined"===d?void 0:null!=t&&t instanceof HTMLElement},G=function(t){return at(t)||gt(t)},at=function(t){return"collection"===p(t)&&t._private.single},gt=function(t){return"collection"===p(t)&&!t._private.single},At=function(t){return"core"===p(t)},q=function(t){return"stylesheet"===p(t)},$=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},rt=function(t){return null!=(e=t)&&ct(e)===f&&D(t.then);var e},O=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);return r.join("$")});var n=function r(){var i,a=this,o=arguments,l=e.apply(a,o),s=r.cache;return(i=s[l])||(i=s[l]=t.apply(a,o)),i};return n.cache={},n},H=O(function(t){return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),j=O(function(t){return t.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),J=O(function(t,e){return t+e[0].toUpperCase()+e.substring(1)},function(t,e){return t+"$"+e}),nt=function(t){return $(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},yt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Nt=function(t,e){return t<e?-1:t>e?1:0},W=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];t[o]=r[o]}}return t},dt={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Dt=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(C(a))throw Error("Tried to set map with object key");i<n.length-1?(null==e[a]&&(e[a]={}),e=e[a]):e[a]=t.value}},Ot=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(C(a))throw Error("Tried to get map with object key");if(null==(e=e[a]))return e}return e},St="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rt=/^\s+|\s+$/g,Vt=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,he=/^0o[0-7]+$/i,de=parseInt,De="object"==typeof self&&self&&self.Object===Object&&self,Le="object"==typeof St&&St&&St.Object===Object&&St||De||Function("return this")(),Ut=Object.prototype.toString,Jt=Math.max,ie=Math.min,pe=function(){return Le.Date.now()};function xe(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Me(t){if("number"==typeof t)return t;if("symbol"==typeof(r=t)||(i=r)&&"object"==typeof i&&"[object Symbol]"==Ut.call(r))return NaN;var r,i;if(xe(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=xe(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var n=te.test(t);return n||he.test(t)?de(t.slice(2),n?2:8):Vt.test(t)?NaN:+t}var Ge=function(t,e,n){var r,i,a,o,l,s,u=0,h=!1,g=!1,x=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function E(_){var X=r,z=i;return r=i=void 0,u=_,o=t.apply(z,X)}function m(_){return u=_,l=setTimeout(A,e),h?E(_):o}function S(_){var X=_-s;return void 0===s||X>=e||X<0||g&&_-u>=a}function A(){var X,z,_=pe();if(S(_))return L(_);l=setTimeout(A,(z=e-((X=_)-s),g?ie(z,a-(X-u)):z))}function L(_){return l=void 0,x&&r?E(_):(r=i=void 0,o)}function P(){var _=pe(),X=S(_);if(r=arguments,i=this,s=_,X){if(void 0===l)return m(s);if(g)return l=setTimeout(A,e),E(s)}return void 0===l&&(l=setTimeout(A,e)),o}return e=Me(e)||0,xe(n)&&(h=!!n.leading,a=(g="maxWait"in n)?Jt(Me(n.maxWait)||0,e):a,x="trailing"in n?!!n.trailing:x),P.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},P.flush=function(){return void 0===l?o:L(pe())},P},ln=w?w.performance:null,un=ln&&ln.now?function(){return ln.now()}:function(){return Date.now()},Qn=function(){if(w){if(w.requestAnimationFrame)return function(t){w.requestAnimationFrame(t)};if(w.mozRequestAnimationFrame)return function(t){w.mozRequestAnimationFrame(t)};if(w.webkitRequestAnimationFrame)return function(t){w.webkitRequestAnimationFrame(t)};if(w.msRequestAnimationFrame)return function(t){w.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout(function(){t(un())},1e3/60)}}(),gr=function(t){return Qn(t)},hn=un,kr=65599,Ni=function(t){for(var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;!(e=t.next()).done;)r=r*kr+e.value|0;return r},Jn=function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261)*kr+t|0},vr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(e<<5)+e+t|0},_n=function(t){return 2097152*t[0]+t[1]},yr=function(t,e){return[Jn(t[0],e[0]),vr(t[1],e[1])]},Bn=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return Ni({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},ki=function(){return wa(arguments)},wa=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?Bn(r):Bn(r,e)}return e},Mi=!0,Ea=null!=console.warn,Da=null!=console.trace,Mr=Number.MAX_SAFE_INTEGER||9007199254740991,Oi=function(){return!0},Or=function(){return!1},Gi=function(){return 0},ri=function(){},_e=function(t){throw new Error(t)},Ri=function(t){if(void 0===t)return Mi;Mi=!!t},be=function(t){Ri()&&(Ea?console.warn(t):(console.log(t),Da&&console.trace()))},yn=function(t){return null==t?t:I(t)?t.slice():C(t)?W({},t):t},Fi=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},La={},Bi=function(){return La},Re=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var a=e[i],o=null==n?void 0:n[a];r[a]=void 0===o?t[a]:o}return r}},Cn=function(t,e,n){for(var r=t.length-1;r>=0&&(t[r]!==e||(t.splice(r,1),!n));r--);},Gr=function(t){t.splice(0,t.length)},cn=function(t,e,n){return n&&(e=J(n,e)),t[e]},Nn=function(t,e,n,r){n&&(e=J(n,e)),t[e]=r},mn="undefined"!=typeof Map?Map:function(){function t(){ut(this,t),this._obj={}}return R(t,[{key:"set",value:function(e,n){return this._obj[e]=n,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),t}(),tr=function(){function t(e){if(ut(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return R(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var n=this._obj;1!==n[e]&&(n[e]=1,this.size++)}},{key:"delete",value:function(e){var n=this._obj;1===n[e]&&(n[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(n){return e.has(n)})}},{key:"forEach",value:function(e,n){return this.toArray().forEach(e,n)}}]),t}(),zn="undefined"!==("undefined"==typeof Set?"undefined":ct(Set))?Set:tr,Rr=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0!==t&&void 0!==e&&At(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new zn,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var a=e.renderedPosition,o=t.pan(),l=t.zoom();i.position={x:(a.x-o.x)/l,y:(a.y-o.y)/l}}var s=[];I(e.classes)?s=e.classes:c(e.classes)&&(s=e.classes.split(/\s+/));for(var u=0,h=s.length;u<h;u++){var g=s[u];g&&""!==g&&i.classes.add(g)}this.createEmitter();var x=e.style||e.css;x&&(be("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(x)),(void 0===n||n)&&this.restore()}else _e("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else _e("An element must have a core reference and parameters set")},ii=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;C(e)&&!G(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||D(n)?r:n,n=D(n)?n:function(){};for(var a,o=this._private.cy,l=e=c(e)?this.filter(e):e,s=[],u=[],h={},g={},x={},E=0,m=this.byGroup(),S=m.nodes,A=m.edges,L=0;L<l.length;L++){var P=l[L],_=P.id();P.isNode()&&(s.unshift(P),t.bfs&&(x[_]=!0,u.push(P)),g[_]=0)}var X=function(){var K=t.bfs?s.shift():s.pop(),it=K.id();if(t.dfs){if(x[it])return"continue";x[it]=!0,u.push(K)}var ot,st=g[it],vt=h[it],ft=null!=vt?vt.source():null,et=null!=vt?vt.target():null,Pt=null==vt?void 0:K.same(ft)?et[0]:ft[0];if(!0===(ot=n(K,vt,Pt,E++,st)))return a=K,"break";if(!1===ot)return"break";for(var Lt=K.connectedEdges().filter(function(Mt){return(!r||Mt.source().same(K))&&A.has(Mt)}),mt=0;mt<Lt.length;mt++){var _t=Lt[mt],bt=_t.connectedNodes().filter(function(Mt){return!Mt.same(K)&&S.has(Mt)}),Tt=bt.id();0===bt.length||x[Tt]||(s.push(bt=bt[0]),t.bfs&&(x[Tt]=!0,u.push(bt)),h[Tt]=_t,g[Tt]=g[it]+1)}};t:for(;0!==s.length;)switch(X()){case"continue":continue;case"break":break t}for(var F=o.collection(),M=0;M<u.length;M++){var V=u[M],Z=h[V.id()];null!=Z&&F.push(Z),F.push(V)}return{path:o.collection(F),found:o.collection(a)}}},kn={breadthFirstSearch:ii({bfs:!0}),depthFirstSearch:ii({dfs:!0})};kn.bfs=kn.breadthFirstSearch,kn.dfs=kn.depthFirstSearch;var e,t,Sn=(t=e={exports:{}},function(){var n,r,i,a,o,l,s,u,h,g,x,E,m,S,A;i=Math.floor,g=Math.min,r=function(L,P){return L<P?-1:L>P?1:0},h=function(L,P,_,X,z){var F;if(null==_&&(_=0),null==z&&(z=r),_<0)throw new Error("lo must be non-negative");for(null==X&&(X=L.length);_<X;)z(P,L[F=i((_+X)/2)])<0?X=F:_=F+1;return[].splice.apply(L,[_,_-_].concat(P)),P},l=function(L,P,_){return null==_&&(_=r),L.push(P),S(L,0,L.length-1,_)},o=function(L,P){var _,X;return null==P&&(P=r),_=L.pop(),L.length?(X=L[0],L[0]=_,A(L,0,P)):X=_,X},u=function(L,P,_){var X;return null==_&&(_=r),X=L[0],L[0]=P,A(L,0,_),X},s=function(L,P,_){var X;return null==_&&(_=r),L.length&&_(L[0],P)<0&&(P=(X=[L[0],P])[0],L[0]=X[1],A(L,0,_)),P},a=function(L,P){var X,z,F,M,V;for(null==P&&(P=r),M=[],X=0,z=(F=function(){V=[];for(var Z=0,K=i(L.length/2);0<=K?Z<K:Z>K;0<=K?Z++:Z--)V.push(Z);return V}.apply(this).reverse()).length;X<z;X++)M.push(A(L,F[X],P));return M},m=function(L,P,_){var X;if(null==_&&(_=r),-1!==(X=L.indexOf(P)))return S(L,0,X,_),A(L,X,_)},x=function(L,P,_){var z,F,M,V;if(null==_&&(_=r),!(z=L.slice(0,P)).length)return z;for(a(z,_),F=0,M=(V=L.slice(P)).length;F<M;F++)s(z,V[F],_);return z.sort(_).reverse()},E=function(L,P,_){var X,z,F,M,V,Z,K,it,ot;if(null==_&&(_=r),10*P<=L.length){if(!(F=L.slice(0,P).sort(_)).length)return F;for(z=F[F.length-1],M=0,Z=(K=L.slice(P)).length;M<Z;M++)_(X=K[M],z)<0&&(h(F,X,0,null,_),F.pop(),z=F[F.length-1]);return F}for(a(L,_),ot=[],V=0,it=g(P,L.length);0<=it?V<it:V>it;0<=it?++V:--V)ot.push(o(L,_));return ot},S=function(L,P,_,X){var z,F,M;for(null==X&&(X=r),z=L[_];_>P&&X(z,F=L[M=_-1>>1])<0;)L[_]=F,_=M;return L[_]=z},A=function(L,P,_){var X,z,F,M,V;for(null==_&&(_=r),z=L.length,V=P,F=L[P],X=2*P+1;X<z;)(M=X+1)<z&&!(_(L[X],L[M])<0)&&(X=M),L[P]=L[X],X=2*(P=X)+1;return L[P]=F,S(L,V,P,_)},n=function(){function L(P){this.cmp=null!=P?P:r,this.nodes=[]}return L.push=l,L.pop=o,L.replace=u,L.pushpop=s,L.heapify=a,L.updateItem=m,L.nlargest=x,L.nsmallest=E,L.prototype.push=function(P){return l(this.nodes,P,this.cmp)},L.prototype.pop=function(){return o(this.nodes,this.cmp)},L.prototype.peek=function(){return this.nodes[0]},L.prototype.contains=function(P){return-1!==this.nodes.indexOf(P)},L.prototype.replace=function(P){return u(this.nodes,P,this.cmp)},L.prototype.pushpop=function(P){return s(this.nodes,P,this.cmp)},L.prototype.heapify=function(){return a(this.nodes,this.cmp)},L.prototype.updateItem=function(P){return m(this.nodes,P,this.cmp)},L.prototype.clear=function(){return this.nodes=[]},L.prototype.empty=function(){return 0===this.nodes.length},L.prototype.size=function(){return this.nodes.length},L.prototype.clone=function(){var P;return(P=new L).nodes=this.nodes.slice(0),P},L.prototype.toArray=function(){return this.nodes.slice(0)},L.prototype.insert=L.prototype.push,L.prototype.top=L.prototype.peek,L.prototype.front=L.prototype.peek,L.prototype.has=L.prototype.contains,L.prototype.copy=L.prototype.clone,L}(),t.exports=n}.call(St),e.exports),Ta=Re({root:null,weight:function(t){return 1},directed:!1}),B={dijkstra:function(t){if(!C(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Ta(t),r=n.root,a=n.directed,o=this,l=n.weight,s=c(r)?this.filter(r)[0]:r[0],u={},h={},g={},x=this.byGroup(),E=x.nodes,m=x.edges;m.unmergeBy(function(vt){return vt.isLoop()});for(var S=function(vt){return u[vt.id()]},A=function(vt,ft){u[vt.id()]=ft,L.updateItem(vt)},L=new Sn(function(vt,ft){return S(vt)-S(ft)}),P=0;P<E.length;P++){var _=E[P];u[_.id()]=_.same(s)?0:1/0,L.push(_)}for(var X=function(vt,ft){for(var et,Pt=(a?vt.edgesTo(ft):vt.edgesWith(ft)).intersect(m),Lt=1/0,mt=0;mt<Pt.length;mt++){var _t=Pt[mt],bt=l(_t);(bt<Lt||!et)&&(Lt=bt,et=_t)}return{edge:et,dist:Lt}};L.size()>0;){var z=L.pop(),F=S(z),M=z.id();if(g[M]=F,F!==1/0)for(var V=z.neighborhood().intersect(E),Z=0;Z<V.length;Z++){var K=V[Z],it=K.id(),ot=X(z,K),st=F+ot.dist;st<S(K)&&(A(K,st),h[it]={node:z,edge:ot.edge})}}return{distanceTo:function(vt){var ft=c(vt)?E.filter(vt)[0]:vt[0];return g[ft.id()]},pathTo:function(vt){var ft=c(vt)?E.filter(vt)[0]:vt[0],et=[],Pt=ft,Lt=Pt.id();if(ft.length>0)for(et.unshift(ft);h[Lt];){var mt=h[Lt];et.unshift(mt.edge),et.unshift(mt.node),Lt=(Pt=mt.node).id()}return o.spawn(et)}}}},ai={kruskal:function(t){t=t||function(P){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,a=new Array(i),o=n,l=function(P){for(var _=0;_<a.length;_++)if(a[_].has(P))return _},s=0;s<i;s++)a[s]=this.spawn(n[s]);for(var u=r.sort(function(P,_){return t(P)-t(_)}),h=0;h<u.length;h++){var g=u[h],x=g.source()[0],E=g.target()[0],m=l(x),S=l(E),A=a[m],L=a[S];m!==S&&(o.merge(g),A.merge(L),a.splice(S,1))}return o}},oi=Re({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Sa={aStar:function(t){var e=this.cy(),n=oi(t),r=n.root,i=n.goal,a=n.heuristic,o=n.directed,l=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var s,u,h=r.id(),g=i.id(),x={},E={},m={},S=new Sn(function(Lt,mt){return E[Lt.id()]-E[mt.id()]}),A=new zn,L={},P={},_=function(Lt,mt){S.push(Lt),A.add(mt)};_(r,h),x[h]=0,E[h]=a(r);for(var z=0;S.size()>0;){if(u=(s=S.pop()).id(),A.delete(u),z++,u===g){for(var F=[],M=i,V=g,Z=P[V];F.unshift(M),null!=Z&&F.unshift(Z),null!=(M=L[V]);)Z=P[V=M.id()];return{found:!0,distance:x[u],path:this.spawn(F),steps:z}}m[u]=!0;for(var K=s._private.edges,it=0;it<K.length;it++){var ot=K[it];if(this.hasElementWithId(ot.id())&&(!o||ot.data("source")===u)){var st=ot.source(),vt=ot.target(),ft=st.id()!==u?st:vt,et=ft.id();if(this.hasElementWithId(et)&&!m[et]){var Pt=x[u]+l(ot);A.has(et)?Pt<x[et]&&(x[et]=Pt,E[et]=Pt+a(ft),L[et]=s,P[et]=ot):(x[et]=Pt,E[et]=Pt+a(ft),_(ft,et),L[et]=s,P[et]=ot)}}}}return{found:!1,distance:void 0,path:void 0,steps:z}}},Ia=Re({weight:function(t){return 1},directed:!1}),Pa={floydWarshall:function(t){for(var e=this.cy(),n=Ia(t),i=n.directed,a=n.weight,o=this.byGroup(),l=o.nodes,s=o.edges,u=l.length,h=u*u,g=function(mt){return l.indexOf(mt)},x=function(mt){return l[mt]},E=new Array(h),m=0;m<h;m++){var S=m%u;E[m]=(m-S)/u===S?0:1/0}for(var L=new Array(h),P=new Array(h),_=0;_<s.length;_++){var X=s[_],z=X.source()[0],F=X.target()[0];if(z!==F){var M=g(z),V=g(F),Z=M*u+V,K=a(X);if(E[Z]>K&&(E[Z]=K,L[Z]=V,P[Z]=X),!i){var it=V*u+M;!i&&E[it]>K&&(E[it]=K,L[it]=M,P[it]=X)}}}for(var ot=0;ot<u;ot++)for(var st=0;st<u;st++)for(var vt=st*u+ot,ft=0;ft<u;ft++){var et=st*u+ft,Pt=ot*u+ft;E[vt]+E[Pt]<E[et]&&(E[et]=E[vt]+E[Pt],L[et]=L[vt])}var Lt=function(mt){return g((c(_t=mt)?e.filter(_t):_t)[0]);var _t};return{distance:function(mt,_t){var bt=Lt(mt),Tt=Lt(_t);return E[bt*u+Tt]},path:function(mt,_t){var bt=Lt(mt),Tt=Lt(_t),Mt=x(bt);if(bt===Tt)return Mt.collection();if(null==L[bt*u+Tt])return e.collection();var Xt=e.collection();for(Xt.merge(Mt);bt!==Tt;)Xt.merge(P[bt*u+(bt=L[bt*u+Tt])]),Xt.merge(x(bt));return Xt}}}},Aa=Re({weight:function(t){return 1},directed:!1,root:null}),_a={bellmanFord:function(t){var e=this,n=Aa(t),i=n.directed,a=n.root,o=n.weight,l=this,s=this.cy(),u=this.byGroup(),h=u.edges,g=u.nodes,x=g.length,E=new mn,m=!1;a=s.collection(a)[0],h.unmergeBy(function(Tt){return Tt.isLoop()});for(var S=h.length,A=function(Tt){var Mt=E.get(Tt.id());return Mt||(Mt={},E.set(Tt.id(),Mt)),Mt},L=function(Tt){return(c(Tt)?s.$(Tt):Tt)[0]},P=0;P<x;P++){var _=g[P],X=A(_);X.dist=_.same(a)?0:1/0,X.pred=null,X.edge=null}for(var z=!1,F=function(Tt,Mt,Bt,Xt,zt,jt){var Zt=Xt.dist+jt;Zt<zt.dist&&!Bt.same(Xt.edge)&&(zt.dist=Zt,zt.pred=Tt,zt.edge=Bt,z=!0)},M=1;M<x;M++){z=!1;for(var V=0;V<S;V++){var Z=h[V],K=Z.source(),it=Z.target(),ot=o(Z),st=A(K),vt=A(it);F(K,0,Z,st,vt,ot),i||F(it,0,Z,vt,st,ot)}if(!z)break}if(z)for(var ft=0;ft<S;ft++){var et=h[ft],Pt=et.source(),Lt=et.target(),mt=o(et),_t=A(Pt).dist,bt=A(Lt).dist;if(_t+mt<bt||!i&&bt+mt<_t){be("Graph contains a negative weight cycle for Bellman-Ford"),m=!0;break}}return{distanceTo:function(Tt){return A(L(Tt)).dist},pathTo:function(Tt){for(var Mt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,Xt=[],zt=L(Tt);;){if(null==zt)return e.spawn();var jt=A(zt),Zt=jt.edge,ne=jt.pred;if(Xt.unshift(zt[0]),zt.same(Mt)&&Xt.length>0)break;null!=Zt&&Xt.unshift(Zt),zt=ne}return l.spawn(Xt)},hasNegativeWeightCycle:m,negativeWeightCycles:[]}}},Ca=Math.sqrt(2),Na=function(t,e,n){0===n.length&&_e("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],o=e[r[1]],l=e[r[2]],s=n,u=s.length-1;u>=0;u--){var h=s[u],g=h[1],x=h[2];(e[g]===o&&e[x]===l||e[g]===l&&e[x]===o)&&s.splice(u,1)}for(var E=0;E<s.length;E++){var m=s[E];m[1]===l?(s[E]=m.slice(),s[E][1]=o):m[2]===l&&(s[E]=m.slice(),s[E][2]=o)}for(var S=0;S<e.length;S++)e[S]===l&&(e[S]=o);return s},si=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Na(i,t,e),n--}return e},ka={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy(function(et){return et.isLoop()});var i=n.length,a=r.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/Ca);if(!(i<2)){for(var s=[],u=0;u<a;u++){var h=r[u];s.push([u,n.indexOf(h.source()),n.indexOf(h.target())])}for(var g=1/0,x=[],E=new Array(i),m=new Array(i),S=new Array(i),A=function(et,Pt){for(var Lt=0;Lt<i;Lt++)Pt[Lt]=et[Lt]},L=0;L<=o;L++){for(var P=0;P<i;P++)m[P]=P;var _=si(m,s.slice(),i,l),X=_.slice();A(m,S);var z=si(m,_,l,2),F=si(S,X,l,2);z.length<=F.length&&z.length<g?(g=z.length,x=z,A(m,E)):F.length<=z.length&&F.length<g&&(g=F.length,x=F,A(S,E))}for(var M=this.spawn(x.map(function(et){return r[et[0]]})),V=this.spawn(),Z=this.spawn(),K=E[0],it=0;it<E.length;it++){var st=n[it];E[it]===K?V.merge(st):Z.merge(st)}var vt=function(et){var Pt=t.spawn();return et.forEach(function(Lt){Pt.merge(Lt),Lt.connectedEdges().forEach(function(mt){t.contains(mt)&&!M.contains(mt)&&Pt.merge(mt)})}),Pt},ft=[vt(V),vt(Z)];return{cut:M,components:ft,partition1:V,partition2:Z}}_e("At least 2 nodes are required for Karger-Stein algorithm")}},Fr=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},li=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Yn=function(t){return{x:t[0],y:t[1]}},mr=function(t,e){return Math.atan2(e,t)-Math.PI/2},ui=Math.log2||function(t){return Math.log(t)/Math.log(2)},zi=function(t){return t>0?1:t<0?-1:0},Xn=function(t,e){return Math.sqrt(Hn(t,e))},Hn=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Ma=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},Oe=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},Vn=function(t,e,n,r){return{x:Oe(t.x,e.x,n.x,r),y:Oe(t.y,e.y,n.y,r)}},br=function(t,e,n){return Math.max(t,Math.min(n,e))},Ke=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},Oa=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},Br=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},hi=function(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)e=n=r=i=a[0];else if(2===a.length)e=r=a[0],i=n=a[1];else if(4===a.length){var o=T(a,4);e=o[0],n=o[1],r=o[2],i=o[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},xr=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},ci=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},er=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},Yi=function(t,e){return er(t,e.x1,e.y1)&&er(t,e.x2,e.y2)},Xi=function(t,e,n,r,i,a,o){var l,s=Dr(i,a),u=i/2,h=a/2,g=r-h-o;if((l=Mn(t,e,n,r,n-u+s-o,g,n+u-s+o,g,!1)).length>0)return l;var x=n+u+o;if((l=Mn(t,e,n,r,x,r-h+s-o,x,r+h-s+o,!1)).length>0)return l;var E=r+h+o;if((l=Mn(t,e,n,r,n-u+s-o,E,n+u-s+o,E,!1)).length>0)return l;var m,S=n-u-o;if((l=Mn(t,e,n,r,S,r-h+s-o,S,r+h-s+o,!1)).length>0)return l;var A=n-u+s,L=r-h+s;if((m=wr(t,e,n,r,A,L,s+o)).length>0&&m[0]<=A&&m[1]<=L)return[m[0],m[1]];var P=n+u-s,_=r-h+s;if((m=wr(t,e,n,r,P,_,s+o)).length>0&&m[0]>=P&&m[1]<=_)return[m[0],m[1]];var X=n+u-s,z=r+h-s;if((m=wr(t,e,n,r,X,z,s+o)).length>0&&m[0]>=X&&m[1]>=z)return[m[0],m[1]];var F=n-u+s,M=r+h-s;return(m=wr(t,e,n,r,F,M,s+o)).length>0&&m[0]<=F&&m[1]>=M?[m[0],m[1]]:[]},Ga=function(t,e,n,r,i,a,o){var l=o,s=Math.min(n,i),u=Math.max(n,i),h=Math.min(r,a),g=Math.max(r,a);return s-l<=t&&t<=u+l&&h-l<=e&&e<=g+l},xo=function(t,e,n,r,i,a,o,l,s){var u=Math.min(n,o,i)-s,h=Math.max(n,o,i)+s,g=Math.min(r,l,a)-s,x=Math.max(r,l,a)+s;return!(t<u||t>h||e<g||e>x)},Hi=function(t,e,n,r,i,a,o,l){var A,L,P,_,X,z,F,M,V,Z,K,it,ot,s=[];L=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*l-6*a*a+3*a*l,P=3*n*n-6*n*i+n*o-n*t+2*i*i+2*i*t-o*t+3*r*r-6*r*a+r*l-r*e+2*a*a+2*a*e-l*e,_=1*n*i-n*n+n*t-i*t+r*a-r*r+r*e-a*e,0==(A=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*l+4*a*a-4*a*l+l*l)&&(A=1e-5),M=-27*(_/=A)+(L/=A)*(9*(P/=A)-L*L*2),z=(F=(3*P-L*L)/9)*F*F+(M/=54)*M,(X=s)[1]=0,it=L/3,z>0?(Z=(Z=M+Math.sqrt(z))<0?-Math.pow(-Z,1/3):Math.pow(Z,1/3),K=(K=M-Math.sqrt(z))<0?-Math.pow(-K,1/3):Math.pow(K,1/3),X[0]=-it+Z+K,X[4]=X[2]=-(it+=(Z+K)/2),it=Math.sqrt(3)*(-K+Z)/2,X[3]=it,X[5]=-it):(X[5]=X[3]=0,0===z?(ot=M<0?-Math.pow(-M,1/3):Math.pow(M,1/3),X[0]=2*ot-it,X[4]=X[2]=-(ot+it)):(V=(F=-F)*F*F,V=Math.acos(M/Math.sqrt(V)),ot=2*Math.sqrt(F),X[0]=-it+ot*Math.cos(V/3),X[2]=-it+ot*Math.cos((V+2*Math.PI)/3),X[4]=-it+ot*Math.cos((V+4*Math.PI)/3)));for(var u=[],h=0;h<6;h+=2)Math.abs(s[h+1])<1e-7&&s[h]>=0&&s[h]<=1&&u.push(s[h]);u.push(1),u.push(0);for(var g,x,E,m=-1,S=0;S<u.length;S++)g=Math.pow(1-u[S],2)*n+2*(1-u[S])*u[S]*i+u[S]*u[S]*o,x=Math.pow(1-u[S],2)*r+2*(1-u[S])*u[S]*a+u[S]*u[S]*l,E=Math.pow(g-t,2)+Math.pow(x-e,2),m>=0?E<m&&(m=E):m=E;return m},Ra=function(t,e,n,r,i,a){var o=[t-n,e-r],l=[i-n,a-r],s=l[0]*l[0]+l[1]*l[1],u=o[0]*o[0]+o[1]*o[1],h=o[0]*l[0]+o[1]*l[1],g=h*h/s;return h<0?u:g>s?(t-i)*(t-i)+(e-a)*(e-a):u-g},Qe=function(t,e,n){for(var r,i,a,o,l=0,s=0;s<n.length/2;s++)if(i=n[2*s+1],s+1<n.length/2?(a=n[2*(s+1)],o=n[2*(s+1)+1]):(a=n[2*(s+1-n.length/2)],o=n[2*(s+1-n.length/2)+1]),(r=n[2*s])!=t||a!=t){if(!(r>=t&&t>=a||r<=t&&t<=a))continue;(t-r)/(a-r)*(o-i)+i>e&&l++}return l%2!=0},In=function(t,e,n,r,i,a,o,l,s){var u,h=new Array(n.length);null!=l[0]?(u=Math.atan(l[1]/l[0]),l[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=l;for(var g,x=Math.cos(-u),E=Math.sin(-u),m=0;m<h.length/2;m++)h[2*m]=a/2*(n[2*m]*x-n[2*m+1]*E),h[2*m+1]=o/2*(n[2*m+1]*x+n[2*m]*E),h[2*m]+=r,h[2*m+1]+=i;if(s>0){var S=Ui(h,-s);g=Vi(S)}else g=h;return Qe(t,e,g)},Vi=function(t){for(var a,o,l,s,u=new Array(t.length/2),h=0;h<t.length/4;h++){h<t.length/4-1?(a=t[4*(h+1)],o=t[4*(h+1)+1],l=t[4*(h+1)+2],s=t[4*(h+1)+3]):(a=t[0],o=t[1],l=t[2],s=t[3]);var g=Mn(t[4*h],t[4*h+1],t[4*h+2],t[4*h+3],a,o,l,s,!0);u[2*h]=g[0],u[2*h+1]=g[1]}return u},Ui=function(t,e){for(var n,r,i,a,o=new Array(2*t.length),l=0;l<t.length/2;l++){l<t.length/2-1?(i=t[2*(l+1)],a=t[2*(l+1)+1]):(i=t[0],a=t[1]);var s=a-(r=t[2*l+1]),u=-(i-(n=t[2*l])),h=Math.sqrt(s*s+u*u),g=s/h,x=u/h;o[4*l]=n+g*e,o[4*l+1]=r+x*e,o[4*l+2]=i+g*e,o[4*l+3]=a+x*e}return o},Un=function(t,e,n,r,i,a,o){return t-=i,e-=a,(t/=n/2+o)*t+(e/=r/2+o)*e<=1},wr=function(t,e,n,r,i,a,o){var l=[n-t,r-e],s=[t-i,e-a],u=l[0]*l[0]+l[1]*l[1],h=2*(s[0]*l[0]+s[1]*l[1]),g=h*h-4*u*(s[0]*s[0]+s[1]*s[1]-o*o);if(g<0)return[];var x=(-h+Math.sqrt(g))/(2*u),E=(-h-Math.sqrt(g))/(2*u),m=Math.min(x,E),S=Math.max(x,E),A=[];if(m>=0&&m<=1&&A.push(m),S>=0&&S<=1&&A.push(S),0===A.length)return[];var L=A[0]*l[0]+t,P=A[0]*l[1]+e;return A.length>1?A[0]==A[1]?[L,P]:[L,P,A[1]*l[0]+t,A[1]*l[1]+e]:[L,P]},di=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Mn=function(t,e,n,r,i,a,o,l,s){var u=t-i,h=n-t,g=o-i,x=e-a,E=r-e,m=l-a,S=g*x-m*u,A=h*x-E*u,L=m*h-g*E;if(0!==L){var P=S/L,_=A/L;return-.001<=P&&P<=1.001&&-.001<=_&&_<=1.001||s?[t+P*h,e+P*E]:[]}return 0===S||0===A?di(t,n,o)===o?[o,l]:di(t,n,i)===i?[i,a]:di(i,o,n)===n?[n,r]:[]:[]},Er=function(t,e,n,r,i,a,o,l){var s,u,x,E,m=[],S=new Array(n.length),A=!0;if(null==a&&(A=!1),A){for(var L=0;L<S.length/2;L++)S[2*L]=n[2*L]*a+r,S[2*L+1]=n[2*L+1]*o+i;if(l>0){var P=Ui(S,-l);u=Vi(P)}else u=S}else u=n;for(var _=0;_<u.length/2;_++)_<u.length/2-1?(x=u[2*(_+1)],E=u[2*(_+1)+1]):(x=u[0],E=u[1]),0!==(s=Mn(t,e,r,i,u[2*_],u[2*_+1],x,E)).length&&m.push(s[0],s[1]);return m},zr=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[e[0]+a*r[0],e[1]+a*r[1]]},Ue=function(t,e){var n=fi(t,e);return qi(n)},qi=function(t){for(var e,n,r=t.length/2,i=1/0,a=1/0,o=-1/0,l=-1/0,s=0;s<r;s++)e=t[2*s],n=t[2*s+1],i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),l=Math.max(l,n);for(var u=2/(o-i),h=2/(l-a),g=0;g<r;g++)e=t[2*g]=t[2*g]*u,n=t[2*g+1]=t[2*g+1]*h,i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),l=Math.max(l,n);if(a<-1)for(var x=0;x<r;x++)n=t[2*x+1]=t[2*x+1]+(-1-a);return t},fi=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,a=new Array(2*t),o=0;o<t;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},Dr=function(t,e){return Math.min(t/4,e/4,8)},pi=function(t,e){return Math.min(t/10,e/10,8)},gi=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Fa=Re({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),Ba={pageRank:function(t){for(var e=Fa(t),n=e.dampingFactor,r=e.precision,i=e.iterations,a=e.weight,o=this._private.cy,l=this.byGroup(),s=l.nodes,u=l.edges,h=s.length,x=u.length,E=new Array(h*h),m=new Array(h),S=(1-n)/h,A=0;A<h;A++){for(var L=0;L<h;L++)E[A*h+L]=0;m[A]=0}for(var P=0;P<x;P++){var _=u[P],X=_.data("source"),z=_.data("target");if(X!==z){var F=s.indexOfId(X),M=s.indexOfId(z),V=a(_);E[M*h+F]+=V,m[F]+=V}}for(var Z=1/h+S,K=0;K<h;K++)if(0===m[K])for(var it=0;it<h;it++)E[it*h+K]=Z;else for(var ot=0;ot<h;ot++){var st=ot*h+K;E[st]=E[st]/m[K]+S}for(var vt,ft=new Array(h),et=new Array(h),Pt=0;Pt<h;Pt++)ft[Pt]=1;for(var Lt=0;Lt<i;Lt++){for(var mt=0;mt<h;mt++)et[mt]=0;for(var _t=0;_t<h;_t++)for(var bt=0;bt<h;bt++)et[_t]+=E[_t*h+bt]*ft[bt];Ma(et),vt=ft,ft=et,et=vt;for(var Mt=0,Bt=0;Bt<h;Bt++){var Xt=vt[Bt]-ft[Bt];Mt+=Xt*Xt}if(Mt<r)break}return{rank:function(zt){return zt=o.collection(zt)[0],ft[s.indexOf(zt)]}}}},za=Re({root:null,weight:function(t){return 1},directed:!1,alpha:0}),nr={degreeCentralityNormalized:function(t){t=za(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},a={},o=0,l=0,s=0;s<r;s++){var u=n[s],h=u.id();t.root=u;var g=this.degreeCentrality(t);o<g.indegree&&(o=g.indegree),l<g.outdegree&&(l=g.outdegree),i[h]=g.indegree,a[h]=g.outdegree}return{indegree:function(L){return 0==o?0:(c(L)&&(L=e.filter(L)),i[L.id()]/o)},outdegree:function(L){return 0===l?0:(c(L)&&(L=e.filter(L)),a[L.id()]/l)}}}for(var x={},E=0,m=0;m<r;m++){var S=n[m];t.root=S;var A=this.degreeCentrality(t);E<A.degree&&(E=A.degree),x[S.id()]=A.degree}return{degree:function(L){return 0===E?0:(c(L)&&(L=e.filter(L)),x[L.id()]/E)}}},degreeCentrality:function(t){t=za(t);var e=this.cy(),n=this,i=t.root,a=t.weight,o=t.directed,l=t.alpha;if(i=e.collection(i)[0],o){for(var s=i.connectedEdges(),u=s.filter(function(z){return z.target().same(i)&&n.has(z)}),h=s.filter(function(z){return z.source().same(i)&&n.has(z)}),g=u.length,x=h.length,E=0,m=0,S=0;S<u.length;S++)E+=a(u[S]);for(var A=0;A<h.length;A++)m+=a(h[A]);return{indegree:Math.pow(g,1-l)*Math.pow(E,l),outdegree:Math.pow(x,1-l)*Math.pow(m,l)}}for(var L=i.connectedEdges().intersection(n),P=L.length,_=0,X=0;X<L.length;X++)_+=a(L[X]);return{degree:Math.pow(P,1-l)*Math.pow(_,l)}}};nr.dc=nr.degreeCentrality,nr.dcn=nr.degreeCentralityNormalised=nr.degreeCentralityNormalized;var $i=Re({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),rr={closenessCentralityNormalized:function(t){for(var e=$i(t),n=e.harmonic,r=e.weight,i=e.directed,a=this.cy(),o={},l=0,s=this.nodes(),u=this.floydWarshall({weight:r,directed:i}),h=0;h<s.length;h++){for(var g=0,x=s[h],E=0;E<s.length;E++)if(h!==E){var m=u.distance(x,s[E]);g+=n?1/m:m}n||(g=1/g),l<g&&(l=g),o[x.id()]=g}return{closeness:function(S){return 0==l?0:(S=c(S)?a.filter(S)[0].id():S.id(),o[S]/l)}}},closenessCentrality:function(t){var e=$i(t),n=e.root,r=e.weight,i=e.directed,a=e.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),l=0,s=this.nodes(),u=0;u<s.length;u++){var h=s[u];if(!h.same(n)){var g=o.distanceTo(h);l+=a?1/g:g}}return a?l:1/l}};rr.cc=rr.closenessCentrality,rr.ccn=rr.closenessCentralityNormalised=rr.closenessCentralityNormalized;var lt=Re({weight:null,directed:!1}),It={betweennessCentrality:function(t){for(var e=lt(t),n=e.directed,r=e.weight,i=null!=r,a=this.cy(),o=this.nodes(),l={},s={},u=0,h=function(P,_){s[P]=_,_>u&&(u=_)},g=function(P){return s[P]},x=0;x<o.length;x++){var E=o[x],m=E.id();l[m]=n?E.outgoers().nodes():E.openNeighborhood().nodes(),h(m,0)}for(var S=function(P){for(var _=o[P].id(),X=[],z={},F={},M={},V=new Sn(function(Bt,Xt){return M[Bt]-M[Xt]}),Z=0;Z<o.length;Z++){var K=o[Z].id();z[K]=[],F[K]=0,M[K]=1/0}for(F[_]=1,M[_]=0,V.push(_);!V.empty();){var it=V.pop();if(X.push(it),i)for(var ot=0;ot<l[it].length;ot++){var ft,st=l[it][ot],vt=a.getElementById(it);ft=vt.edgesTo(st).length>0?vt.edgesTo(st)[0]:st.edgesTo(vt)[0];var et=r(ft);st=st.id(),M[st]>M[it]+et&&(M[st]=M[it]+et,V.nodes.indexOf(st)<0?V.push(st):V.updateItem(st),F[st]=0,z[st]=[]),M[st]==M[it]+et&&(F[st]=F[st]+F[it],z[st].push(it))}else for(var Pt=0;Pt<l[it].length;Pt++){var Lt=l[it][Pt].id();M[Lt]==1/0&&(V.push(Lt),M[Lt]=M[it]+1),M[Lt]==M[it]+1&&(F[Lt]=F[Lt]+F[it],z[Lt].push(it))}}for(var mt={},_t=0;_t<o.length;_t++)mt[o[_t].id()]=0;for(;X.length>0;){for(var bt=X.pop(),Tt=0;Tt<z[bt].length;Tt++){var Mt=z[bt][Tt];mt[Mt]=mt[Mt]+F[Mt]/F[bt]*(1+mt[bt])}bt!=o[P].id()&&h(bt,g(bt)+mt[bt])}},A=0;A<o.length;A++)S(A);var L={betweenness:function(P){var _=a.collection(P).id();return g(_)},betweennessNormalized:function(P){if(0==u)return 0;var _=a.collection(P).id();return g(_)/u}};return L.betweennessNormalised=L.betweennessNormalized,L}};It.bc=It.betweennessCentrality;var Q=Re({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),kt=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Ft=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var a=0;a<e;a++)t[a*e+r]=t[a*e+r]/n}},qt=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)r[i*n+l]+=t[i*n+o]*e[o*n+l]}return r},Xe=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=qt(t,r,e);return t},He=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Ft(r,e),r},bn=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},xn=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},Yr=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=Q(t),a={},o=0;o<e.length;o++)a[e[o].id()]=o;for(var l,s=e.length,u=s*s,h=new Array(u),g=0;g<u;g++)h[g]=0;for(var x=0;x<n.length;x++){var E=n[x],m=a[E.source().id()],S=a[E.target().id()],A=kt(E,i.attributes);h[m*s+S]+=A,h[S*s+m]+=A}(function(X,z,F){for(var M=0;M<z;M++)X[M*z+M]=F})(h,s,i.multFactor),Ft(h,s);for(var L=!0,P=0;L&&P<i.maxIterations;)L=!1,l=Xe(h,s,i.expandFactor),h=He(l,s,i.inflateFactor),bn(h,l,u,4)||(L=!0),P++;return function(X){for(var z=0;z<X.length;z++)for(var F=0;F<X.length;F++)z!=F&&xn(X[z],X[F])&&X.splice(F,1);return X}(function(X,z,F,M){for(var V=[],Z=0;Z<z;Z++){for(var K=[],it=0;it<z;it++)Math.round(1e3*X[Z*z+it])/1e3>0&&K.push(F[it]);0!==K.length&&V.push(M.collection(K))}return V}(h,s,e,r))},Et={markovClustering:Yr,mcl:Yr},$t=function(t){return t},ee=function(t,e){return Math.abs(e-t)},le=function(t,e,n){return t+ee(e,n)},ge=function(t,e,n){return t+Math.pow(n-e,2)},Pe=function(t){return Math.sqrt(t)},on=function(t,e,n){return Math.max(t,ee(e,n))},Te=function(t,e,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:$t,o=r,l=0;l<t;l++)o=i(o,e(l),n(l));return a(o)},Fe={euclidean:function(t,e,n){return t>=2?Te(t,e,n,0,ge,Pe):Te(t,e,n,0,le)},squaredEuclidean:function(t,e,n){return Te(t,e,n,0,ge)},manhattan:function(t,e,n){return Te(t,e,n,0,le)},max:function(t,e,n){return Te(t,e,n,-1/0,on)}};function Ce(t,e,n,r,i,a){var o;return o=D(t)?t:Fe[t]||Fe.euclidean,0===e&&D(t)?o(i,a):o(e,n,r,i,a)}Fe["squared-euclidean"]=Fe.squaredEuclidean,Fe.squaredeuclidean=Fe.squaredEuclidean;var dn=Re({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Be=function(t){return dn(t)},Ve=function(t,e,n,r,i){var a="kMedoids"!==i?function(s){return n[s]}:function(s){return r[s](n)};return Ce(t,r.length,a,function(s){return r[s](e)},n,e)},sn=function(t,e,n){for(var r=n.length,i=new Array(r),a=new Array(r),o=new Array(e),l=null,s=0;s<r;s++)i[s]=t.min(n[s]).value,a[s]=t.max(n[s]).value;for(var u=0;u<e;u++){l=[];for(var h=0;h<r;h++)l[h]=Math.random()*(a[h]-i[h])+i[h];o[u]=l}return o},wn=function(t,e,n,r,i){for(var a=1/0,o=0,l=0;l<e.length;l++){var s=Ve(n,t,e[l],r,i);s<a&&(a=s,o=l)}return o},fn=function(t,e,n){for(var r=[],i=null,a=0;a<e.length;a++)n[(i=e[a]).id()]===t&&r.push(i);return r},On=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},Gn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},qn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];Gn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var a=0;a<e;a++)n[a]=t[Math.floor(Math.random()*t.length)];return n},Xr=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=Ve("manhattan",e[i],t,n,"kMedoids");return r},Zi=function(t,e,n,r,i){for(var a,o,l=0;l<e.length;l++)for(var s=0;s<t.length;s++)r[l][s]=Math.pow(n[l][s],i.m);for(var u=0;u<t.length;u++)for(var h=0;h<i.attributes.length;h++){a=0,o=0;for(var g=0;g<e.length;g++)a+=r[g][u]*i.attributes[h](e[g]),o+=r[g][u];t[u][h]=a/o}},wo=function(t,e,n,r,i){for(var a=0;a<t.length;a++)e[a]=t[a].slice();for(var o,l,s,u=2/(i.m-1),h=0;h<n.length;h++)for(var g=0;g<r.length;g++){o=0;for(var x=0;x<n.length;x++)l=Ve(i.distance,r[g],n[h],i.attributes,"cmeans"),s=Ve(i.distance,r[g],n[x],i.attributes,"cmeans"),o+=Math.pow(l/s,u);t[g][h]=1/o}},Eo=function(t){var e,n,r,i,a=this.cy(),o=this.nodes(),l=Be(t);r=new Array(o.length);for(var s=0;s<o.length;s++)r[s]=new Array(l.k);n=new Array(o.length);for(var u=0;u<o.length;u++)n[u]=new Array(l.k);for(var h=0;h<o.length;h++){for(var g=0,x=0;x<l.k;x++)n[h][x]=Math.random(),g+=n[h][x];for(var E=0;E<l.k;E++)n[h][E]=n[h][E]/g}e=new Array(l.k);for(var m=0;m<l.k;m++)e[m]=new Array(l.attributes.length);i=new Array(o.length);for(var S=0;S<o.length;S++)i[S]=new Array(l.k);for(var A=!0,L=0;A&&L<l.maxIterations;)A=!1,Zi(e,o,n,i,l),wo(n,r,e,o,l),On(n,r,l.sensitivityThreshold)||(A=!0),L++;return{clusters:function(P,_,X,z){for(var F,M,V=new Array(X.k),Z=0;Z<V.length;Z++)V[Z]=[];for(var K=0;K<_.length;K++){F=-1/0,M=-1;for(var it=0;it<_[0].length;it++)_[K][it]>F&&(F=_[K][it],M=it);V[M].push(P[K])}for(var ot=0;ot<V.length;ot++)V[ot]=z.collection(V[ot]);return V}(o,n,l,a),degreeOfMembership:n}},hl={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,a=Be(t),o=new Array(a.k),l={};e=a.testMode?"number"==typeof a.testCentroids?sn(r,a.k,a.attributes):"object"===ct(a.testCentroids)?a.testCentroids:sn(r,a.k,a.attributes):sn(r,a.k,a.attributes);for(var h,g=!0,x=0;g&&x<a.maxIterations;){for(var E=0;E<r.length;E++)l[(i=r[E]).id()]=wn(i,e,a.distance,a.attributes,"kMeans");g=!1;for(var m=0;m<a.k;m++){var S=fn(m,r,l);if(0!==S.length){for(var A=a.attributes.length,L=e[m],P=new Array(A),_=new Array(A),X=0;X<A;X++){_[X]=0;for(var z=0;z<S.length;z++)_[X]+=a.attributes[X](i=S[z]);P[X]=_[X]/S.length,h=a.sensitivityThreshold,Math.abs(L[X]-P[X])<=h||(g=!0)}e[m]=P,o[m]=n.collection(S)}}x++}return o},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),a=null,o=Be(t),l=new Array(o.k),s={},u=new Array(o.k);o.testMode?"number"==typeof o.testCentroids||(e="object"===ct(o.testCentroids)?o.testCentroids:qn(i,o.k)):e=qn(i,o.k);for(var h=!0,g=0;h&&g<o.maxIterations;){for(var x=0;x<i.length;x++)s[(a=i[x]).id()]=wn(a,e,o.distance,o.attributes,"kMedoids");h=!1;for(var E=0;E<e.length;E++){var m=fn(E,i,s);if(0!==m.length){u[E]=Xr(e[E],m,o.attributes);for(var S=0;S<m.length;S++)(n=Xr(m[S],m,o.attributes))<u[E]&&(u[E]=n,e[E]=m[S],h=!0);l[E]=r.collection(m)}}g++}return l},fuzzyCMeans:Eo,fcm:Eo},cl=Re({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),dl={single:"min",complete:"max"},Do=function(t,e,n,r,i){for(var a,o=0,l=1/0,s=i.attributes,u=function(M,V){return Ce(i.distance,s.length,function(Z){return s[Z](M)},function(Z){return s[Z](V)},M,V)},h=0;h<t.length;h++){var g=t[h].key,x=n[g][r[g]];x<l&&(o=g,l=x)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var E,m=e[o],S=e[r[o]];E="dendrogram"===i.mode?{left:m,right:S,key:m.key}:{value:m.value.concat(S.value),key:m.key},t[m.index]=E,t.splice(S.index,1),e[m.key]=E;for(var A=0;A<t.length;A++){var L=t[A];m.key===L.key?a=1/0:"min"===i.linkage?(a=n[m.key][L.key],n[m.key][L.key]>n[S.key][L.key]&&(a=n[S.key][L.key])):"max"===i.linkage?(a=n[m.key][L.key],n[m.key][L.key]<n[S.key][L.key]&&(a=n[S.key][L.key])):a="mean"===i.linkage?(n[m.key][L.key]*m.size+n[S.key][L.key]*S.size)/(m.size+S.size):"dendrogram"===i.mode?u(L.value,m.value):u(L.value[0],m.value[0]),n[m.key][L.key]=n[L.key][m.key]=a}for(var P=0;P<t.length;P++){var _=t[P].key;if(r[_]===m.key||r[_]===S.key){for(var X=_,z=0;z<t.length;z++){var F=t[z].key;n[_][F]<n[_][X]&&(X=F)}r[_]=X}t[P].index=P}return m.key=S.key=m.index=S.index=null,!0},ji=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Lo=function(t){for(var e=this.cy(),n=this.nodes(),r=(P=void 0,void 0,P=cl(t),null!=(_=dl[P.linkage])&&(P.linkage=_),P),i=r.attributes,a=function(L,P){return Ce(r.distance,i.length,function(_){return i[_](L)},function(_){return i[_](P)},L,P)},o=[],l=[],s=[],u=[],h=0;h<n.length;h++){var g={value:"dendrogram"===r.mode?n[h]:[n[h]],key:h,index:h};o[h]=g,u[h]=g,l[h]=[],s[h]=0}for(var P,_,x=0;x<o.length;x++)for(var E=0;E<=x;E++){var m;m="dendrogram"===r.mode?x===E?1/0:a(o[x].value,o[E].value):x===E?1/0:a(o[x].value[0],o[E].value[0]),l[x][E]=m,l[E][x]=m,m<l[x][s[x]]&&(s[x]=E)}for(var S,A=Do(o,u,l,s,r);A;)A=Do(o,u,l,s,r);return"dendrogram"===r.mode?(S=function L(P,_,X){if(!P)return[];var z=[],F=[],M=[];return 0===_?(P.left&&ji(P.left,z),P.right&&ji(P.right,F),M=z.concat(F),[X.collection(M)]):1===_?P.value?[X.collection(P.value)]:(P.left&&ji(P.left,z),P.right&&ji(P.right,F),[X.collection(z),X.collection(F)]):P.value?[X.collection(P.value)]:(P.left&&(z=L(P.left,_-1,X)),P.right&&(F=L(P.right,_-1,X)),z.concat(F))}(o[0],r.dendrogramDepth,e),r.addDendrogram&&function L(P,_){if(!P)return"";if(P.left&&P.right){var X=L(P.left,_),z=L(P.right,_),F=_.add({group:"nodes",data:{id:X+","+z}});return _.add({group:"edges",data:{source:X,target:F.id()}}),_.add({group:"edges",data:{source:z,target:F.id()}}),F.id()}return P.value?P.value.id():void 0}(o[0],e)):(S=new Array(o.length),o.forEach(function(L,P){L.key=L.index=null,S[P]=e.collection(L.value)})),S},fl={hierarchicalClustering:Lo,hca:Lo},pl=Re({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),gl=function(t,e,n,r){var i=function(a,o){return r[o](a)};return-Ce(t,r.length,function(a){return i(e,a)},function(a){return i(n,a)},e,n)},To=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var a=-1,o=-1/0,l=0;l<n.length;l++){var s=n[l];e[i*t+s]>o&&(a=s,o=e[i*t+s])}a>0&&r.push(a)}for(var u=0;u<n.length;u++)r[n[u]]=n[u];return r},So=function(t){for(var e,n,r,i,a,o,l=this.cy(),s=this.nodes(),u=function(Y){var ht=Y.damping,xt=Y.preference;.5<=ht&&ht<1||_e("Damping must range on [0.5, 1).  Got: ".concat(ht));var Ct=["median","mean","min","max"];return Ct.some(function(wt){return wt===xt})||N(xt)||_e("Preference must be one of [".concat(Ct.map(function(wt){return"'".concat(wt,"'")}).join(", "),"] or a number.  Got: ").concat(xt)),pl(Y)}(t),h={},g=0;g<s.length;g++)h[s[g].id()]=g;n=(e=s.length)*e,r=new Array(n);for(var x=0;x<n;x++)r[x]=-1/0;for(var E=0;E<e;E++)for(var m=0;m<e;m++)E!==m&&(r[E*e+m]=gl(u.distance,s[E],s[m],u.attributes));i=function(t,e){return"median"===e?function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(i<n.length&&n.splice(i,n.length-i),r>0&&n.splice(0,r)):n=n.slice(r,i);for(var s=0,u=n.length-1;u>=0;u--)l?isFinite(n[u])||(n[u]=-1/0,s++):n.splice(u,1);o&&n.sort(function(E,m){return E-m});var g=n.length,x=Math.floor(g/2);return g%2!=0?n[x+1+s]:(n[x-1+s]+n[x+s])/2}(t):"mean"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=0,o=0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l<i;l++){var s=n[l];isFinite(s)&&(a+=s,o++)}return a/o}(t):"min"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<i;o++){var l=n[o];isFinite(l)&&(a=Math.min(l,a))}return a}(t):"max"===e?function(n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.length,a=-1/0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o<i;o++){var l=n[o];isFinite(l)&&(a=Math.max(l,a))}return a}(t):e}(r,u.preference);for(var S=0;S<e;S++)r[S*e+S]=i;a=new Array(n);for(var A=0;A<n;A++)a[A]=0;o=new Array(n);for(var L=0;L<n;L++)o[L]=0;for(var P=new Array(e),_=new Array(e),X=new Array(e),z=0;z<e;z++)P[z]=0,_[z]=0,X[z]=0;for(var F,M=new Array(e*u.minIterations),V=0;V<M.length;V++)M[V]=0;for(F=0;F<u.maxIterations;F++){for(var Z=0;Z<e;Z++){for(var K=-1/0,it=-1/0,ot=-1,st=0,vt=0;vt<e;vt++)P[vt]=a[Z*e+vt],(st=o[Z*e+vt]+r[Z*e+vt])>=K?(it=K,K=st,ot=vt):st>it&&(it=st);for(var ft=0;ft<e;ft++)a[Z*e+ft]=(1-u.damping)*(r[Z*e+ft]-K)+u.damping*P[ft];a[Z*e+ot]=(1-u.damping)*(r[Z*e+ot]-it)+u.damping*P[ot]}for(var et=0;et<e;et++){for(var Pt=0,Lt=0;Lt<e;Lt++)P[Lt]=o[Lt*e+et],_[Lt]=Math.max(0,a[Lt*e+et]),Pt+=_[Lt];Pt-=_[et],_[et]=a[et*e+et],Pt+=_[et];for(var mt=0;mt<e;mt++)o[mt*e+et]=(1-u.damping)*Math.min(0,Pt-_[mt])+u.damping*P[mt];o[et*e+et]=(1-u.damping)*(Pt-_[et])+u.damping*P[et]}for(var _t=0,bt=0;bt<e;bt++){var Tt=o[bt*e+bt]+a[bt*e+bt]>0?1:0;M[F%u.minIterations*e+bt]=Tt,_t+=Tt}if(_t>0&&(F>=u.minIterations-1||F==u.maxIterations-1)){for(var Mt=0,Bt=0;Bt<e;Bt++){X[Bt]=0;for(var Xt=0;Xt<u.minIterations;Xt++)X[Bt]+=M[Xt*e+Bt];0!==X[Bt]&&X[Bt]!==u.minIterations||Mt++}if(Mt===e)break}}for(var zt=function(Y,ht,xt){for(var Ct=[],wt=0;wt<Y;wt++)ht[wt*Y+wt]+xt[wt*Y+wt]>0&&Ct.push(wt);return Ct}(e,a,o),jt=function(Y,ht,xt){for(var Ct=To(Y,ht,xt),wt=0;wt<xt.length;wt++){for(var Ht=[],Gt=0;Gt<Ct.length;Gt++)Ct[Gt]===xt[wt]&&Ht.push(Gt);for(var Kt=-1,ae=-1/0,ue=0;ue<Ht.length;ue++){for(var ce=0,re=0;re<Ht.length;re++)ce+=ht[Ht[re]*Y+Ht[ue]];ce>ae&&(Kt=ue,ae=ce)}xt[wt]=Ht[Kt]}return To(Y,ht,xt)}(e,r,zt),Zt={},ne=0;ne<zt.length;ne++)Zt[zt[ne]]=[];for(var oe=0;oe<s.length;oe++){var Yt=jt[h[s[oe].id()]];null!=Yt&&Zt[Yt].push(s[oe])}for(var Wt=new Array(zt.length),Qt=0;Qt<zt.length;Qt++)Wt[Qt]=l.collection(Zt[zt[Qt]]);return Wt},yl={affinityPropagation:So,ap:So},ml=Re({root:void 0,directed:!1}),Wi=function(){var t=this,e={},n=0,r=0,i=[],a=[],o={},l=function u(h,g,x){h===x&&(r+=1),e[g]={id:n,low:n++,cutVertex:!1};var E,m,S,A,L=t.getElementById(g).connectedEdges().intersection(t);0===L.size()?i.push(t.spawn(t.getElementById(g))):L.forEach(function(P){E=P.source().id(),m=P.target().id(),(S=E===g?m:E)!==x&&(A=P.id(),o[A]||(o[A]=!0,a.push({x:g,y:S,edge:P})),S in e?e[g].low=Math.min(e[g].low,e[S].id):(u(h,S,g),e[g].low=Math.min(e[g].low,e[S].low),e[g].id<=e[S].low&&(e[g].cutVertex=!0,function(_,X){for(var z=a.length-1,F=[],M=t.spawn();a[z].x!=_||a[z].y!=X;)F.push(a.pop().edge),z--;F.push(a.pop().edge),F.forEach(function(V){var Z=V.connectedNodes().intersection(t);M.merge(V),Z.forEach(function(K){var it=K.id(),ot=K.connectedEdges().intersection(t);M.merge(K),M.merge(e[it].cutVertex?ot.filter(function(st){return st.isLoop()}):ot)})}),i.push(M)}(g,S))))})};t.forEach(function(u){if(u.isNode()){var h=u.id();h in e||(r=0,l(h,h),e[h].cutVertex=r>1)}});var s=Object.keys(e).filter(function(u){return e[u].cutVertex}).map(function(u){return t.getElementById(u)});return{cut:t.spawn(s),components:i}},Ki=function(){var t=this,e={},n=0,r=[],i=[],a=t.spawn(t);return t.forEach(function(o){if(o.isNode()){var l=o.id();l in e||function s(u){if(i.push(u),e[u]={index:n,low:n++,explored:!1},t.getElementById(u).connectedEdges().intersection(t).forEach(function(m){var S=m.target().id();S!==u&&(S in e||s(S),e[S].explored||(e[u].low=Math.min(e[u].low,e[S].low)))}),e[u].index===e[u].low){for(var h=t.spawn();;){var g=i.pop();if(h.merge(t.getElementById(g)),e[g].low=e[u].index,e[g].explored=!0,g===u)break}var x=h.edgesWith(h),E=h.merge(x);r.push(E),a=a.difference(E)}}(l)}}),{cut:a,components:r}},Io={};[kn,B,ai,Sa,Pa,_a,ka,Ba,nr,rr,It,Et,hl,fl,yl,{hierholzer:function(t){if(!C(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,a=ml(t),o=a.root,l=a.directed,s=this,u=!1;o&&(i=c(o)?this.filter(o)[0].id():o[0].id());var h={},g={};s.forEach(l?function(L){var P=L.id();if(L.isNode()){var _=L.indegree(!0),X=L.outdegree(!0),z=_-X,F=X-_;1==z?n?u=!0:n=P:1==F?r?u=!0:r=P:(F>1||z>1)&&(u=!0),h[P]=[],L.outgoers().forEach(function(M){M.isEdge()&&h[P].push(M.id())})}else g[P]=[void 0,L.target().id()]}:function(L){var P=L.id();L.isNode()?(L.degree(!0)%2&&(n?r?u=!0:r=P:n=P),h[P]=[],L.connectedEdges().forEach(function(_){return h[P].push(_.id())})):g[P]=[L.source().id(),L.target().id()]});var x={found:!1,trail:void 0};if(u)return x;if(r&&n)if(l){if(i&&r!=i)return x;i=r}else{if(i&&r!=i&&n!=i)return x;i||(i=r)}else i||(i=s[0].id());var E=function(L){for(var P,_,X,z=L,F=[L];h[z].length;)P=h[z].shift(),_=g[P][0],z!=(X=g[P][1])?(h[X]=h[X].filter(function(M){return M!=P}),z=X):l||z==_||(h[_]=h[_].filter(function(M){return M!=P}),z=_),F.unshift(P),F.unshift(z);return F},m=[],S=[];for(S=E(i);1!=S.length;)0==h[S[0]].length?(m.unshift(s.getElementById(S.shift())),m.unshift(s.getElementById(S.shift()))):S=E(S.shift()).concat(S);for(var A in m.unshift(s.getElementById(S.shift())),h)if(h[A].length)return x;return x.found=!0,x.trail=this.spawn(m,!0),x}},{hopcroftTarjanBiconnected:Wi,htbc:Wi,htb:Wi,hopcroftTarjanBiconnectedComponents:Wi},{tarjanStronglyConnected:Ki,tsc:Ki,tscc:Ki,tarjanStronglyConnectedComponents:Ki}].forEach(function(t){W(Io,t)});var $n=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};$n.prototype={fulfill:function(t){return Po(this,1,"fulfillValue",t)},reject:function(t){return Po(this,2,"rejectReason",t)},then:function(t,e){var n=new $n;return this.onFulfilled.push(Co(t,n,"fulfill")),this.onRejected.push(Co(e,n,"reject")),Ao(this),n.proxy}};var Po=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Ao(t)),t},Ao=function(t){1===t.state?_o(t,"onFulfilled",t.fulfillValue):2===t.state&&_o(t,"onRejected",t.rejectReason)},_o=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var a=0;a<r.length;a++)r[a](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Co=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(a){return void e.reject(a)}bl(e,i)}}},bl=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===ct(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(a){return void e.reject(a)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,function(a){i||(i=!0,a===n?e.reject(new TypeError("circular thenable chain")):t(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};$n.all=function(t){return new $n(function(e,n){for(var r=new Array(t.length),i=0,a=function(l,s){r[l]=s,++i===t.length&&e(r)},o=0;o<t.length;o++)!function(l){var s=t[l];null!=s&&null!=s.then?s.then(function(u){a(l,u)},function(u){n(u)}):a(l,s)}(o)})},$n.resolve=function(t){return new $n(function(e,n){e(t)})},$n.reject=function(t){return new $n(function(e,n){n(t)})};var Hr="undefined"!=typeof Promise?Promise:$n,Ya=function(t,e,n){var r=At(t),i=!r,a=this._private=W({duration:1e3},e,n);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&D(a.complete)&&a.completes.push(a.complete),i){var o=t.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(r){var l=t.pan();a.startPan={x:l.x,y:l.y},a.startZoom=t.zoom()}this.length=1,this[0]=this},Lr=Ya.prototype;W(Lr,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),G(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(l,s){var u=t[l];null!=u&&(t[l]=t[s],t[s]=u)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],a=i.name,o=t.startStyle[a];t.startStyle[a]=i,t.style[r]=o}return e&&this.play(),this},promise:function(t){var e,n=this._private;return e="frame"===t?n.frames:n.completes,new Hr(function(r,i){e.push(function(){r()})})}}),Lr.complete=Lr.completed,Lr.run=Lr.play,Lr.running=Lr.playing;var we={};[{animated:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return!1;var e=t[0];return e?e._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var e=0;e<t.length;e++)t[e]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=void 0!==this.length,r=n?this:[this],i=this._private.cy||this,a=!n,o=!a;if(!i.styleEnabled())return this;var l=i.style();if(t=W({},t,e),0===Object.keys(t).length)return new Ya(r[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(o&&(t.style=l.getPropsList(t.style||t.css),t.css=void 0),o&&null!=t.renderedPosition){var s=t.renderedPosition,u=i.pan(),h=i.zoom();t.position=li(s,h,u)}if(a&&null!=t.panBy){var g=t.panBy,x=i.pan();t.pan={x:x.x+g.x,y:x.y+g.y}}var E=t.center||t.centre;if(a&&null!=E){var m=i.getCenterPan(E.eles,t.zoom);null!=m&&(t.pan=m)}if(a&&null!=t.fit){var S=t.fit,A=i.getFitViewport(S.eles||S.boundingBox,S.padding);null!=A&&(t.pan=A.pan,t.zoom=A.zoom)}if(a&&C(t.zoom)){var L=i.getZoomedViewport(t.zoom);null!=L?(L.zoomed&&(t.zoom=L.zoom),L.panned&&(t.pan=L.pan)):t.zoom=null}return new Ya(r[0],t)}},animate:function(){return function(t,e){var n=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=W({},t,e));for(var r=0;r<n.length;r++){var i=n[r],a=i.animated()&&(void 0===t.queue||t.queue);i.animation(t,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=void 0!==this.length?this:[this],r=this._private.cy||this;if(!r.styleEnabled())return this;for(var i=0;i<n.length;i++){for(var a=n[i]._private,o=a.animation.current,l=0;l<o.length;l++)e&&(o[l]._private.duration=0);t&&(a.animation.queue=[]),e||(a.animation.current=[])}return r.notify("draw"),this}}},{data:function(t){return t=W({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,n){},onSet:function(e){},canSet:function(e){return!0}},t),function(e,n){var r=t,i=void 0!==this.length,a=i?this:[this],o=i?this[0]:this;if(c(e)){var l;if(r.allowGetting&&void 0===n)return o&&(r.beforeGet(o),l=o._private[r.field][e]),l;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var s=k({},e,n);r.beforeSet(this,s);for(var u=0,h=a.length;u<h;u++){var g=a[u];r.canSet(g)&&(g._private[r.field][e]=n)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&C(e)){var x,E,m=e,S=Object.keys(m);r.beforeSet(this,m);for(var A=0;A<S.length;A++)if(E=m[x=S[A]],!r.immutableKeys[x])for(var L=0;L<a.length;L++){var P=a[L];r.canSet(P)&&(P._private[r.field][x]=E)}r.updateStyle&&this.updateStyle(),r.onSet(this),r.settingTriggersEvent&&this[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&D(e))this.on(r.bindingEvent,e);else if(r.allowGetting&&void 0===e){var X;return o&&(r.beforeGet(o),X=o._private[r.field]),X}return this}},removeData:function(t){return t=W({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=void 0!==this.length?this:[this];if(c(e)){for(var i=e.split(/\s+/),a=i.length,o=0;o<a;o++){var l=i[o];if(!$(l)&&!n.immutableKeys[l])for(var s=0,u=r.length;s<u;s++)r[s]._private[n.field][l]=void 0}n.triggerEvent&&this[n.triggerFnName](n.event)}else if(void 0===e){for(var h=0,g=r.length;h<g;h++)for(var x=r[h]._private[n.field],E=Object.keys(x),m=0;m<E.length;m++){var S=E[m];!n.immutableKeys[S]&&(x[S]=void 0)}n.triggerEvent&&this[n.triggerFnName](n.event)}return this}}},{eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(n,r){var i=this,a=Array.prototype.slice.call(arguments,0);return new Hr(function(o,l){var s=a.concat([function(h){i.off.apply(i,u),o(h)}]),u=s.concat([]);i.on.apply(i,s)})}}}].forEach(function(t){W(we,t)});var xl={animate:we.animate(),animation:we.animation(),animated:we.animated(),clearQueue:we.clearQueue(),delay:we.delay(),delayAnimation:we.delayAnimation(),stop:we.stop()},Qi={classes:function(t){if(void 0===t){var e=[];return this[0]._private.classes.forEach(function(g){return e.push(g)}),e}I(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],r=new zn(t),i=0;i<this.length;i++){for(var a=this[i],o=a._private,l=o.classes,s=!1,u=0;u<t.length;u++)if(!l.has(t[u])){s=!0;break}s||(s=l.size!==t.length),s&&(o.classes=r,n.push(a))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){I(t)||(t=t.match(/\S+/g)||[]);for(var n=void 0===e,r=[],i=0,a=this.length;i<a;i++)for(var o=this[i],l=o._private.classes,s=!1,u=0;u<t.length;u++){var h=t[u],g=l.has(h),x=!1;e||n&&!g?(l.add(h),x=!0):(!e||n&&g)&&(l.delete(h),x=!0),!s&&x&&(r.push(o),s=!0)}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout(function(){n.removeClass(t)},e),n}};Qi.className=Qi.classNames=Qi.classes;var ve={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:yt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};ve.variable="(?:[\\w-]|(?:\\\\"+ve.metaChar+"))+",ve.value=ve.string+"|"+ve.number,ve.className=ve.variable,ve.id=ve.variable,function(){var t,e,n;for(t=ve.comparatorOp.split("|"),n=0;n<t.length;n++)ve.comparatorOp+="|@"+(e=t[n]);for(t=ve.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(ve.comparatorOp+="|\\!"+e)}();var to=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(t,e){return-1*Nt(t.selector,e.selector)}),wl=function(){for(var t,e={},n=0;n<to.length;n++)e[(t=to[n]).selector]=t.matches;return e}(),El="("+to.map(function(t){return t.selector}).join("|")+")",Ur=function(t){return t.replace(new RegExp("\\\\("+ve.metaChar+")","g"),function(e,n){return n})},ir=function(t,e,n){t[t.length-1]=n},eo=[{name:"group",query:!0,regex:"("+ve.group+")",populate:function(t,e,n){var r=T(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:El,populate:function(t,e,n){var r=T(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+ve.id+")",populate:function(t,e,n){var r=T(n,1)[0];e.checks.push({type:8,value:Ur(r)})}},{name:"className",query:!0,regex:"\\.("+ve.className+")",populate:function(t,e,n){var r=T(n,1)[0];e.checks.push({type:9,value:Ur(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+ve.variable+")\\s*\\]",populate:function(t,e,n){var r=T(n,1)[0];e.checks.push({type:4,field:Ur(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+ve.variable+")\\s*("+ve.comparatorOp+")\\s*("+ve.value+")\\s*\\]",populate:function(t,e,n){var r=T(n,3),i=r[0],a=r[1],o=r[2];o=null!=new RegExp("^"+ve.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),e.checks.push({type:3,field:Ur(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+ve.boolOp+")\\s*("+ve.variable+")\\s*\\]",populate:function(t,e,n){var r=T(n,2),i=r[0];e.checks.push({type:5,field:Ur(r[1]),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+ve.meta+")\\s*("+ve.comparatorOp+")\\s*("+ve.number+")\\s*\\]\\]",populate:function(t,e,n){var r=T(n,3),a=r[1],o=r[2];e.checks.push({type:6,field:Ur(r[0]),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:ve.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,a=t[t.length-1];return null!=n&&(a.subject=n,t.currentSubject=null),a.edgeCount=r,a.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:ve.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:11,source:e,target:i}),ir(t,0,n),t.edgeCount++,i}var a={checks:[]},l={checks:[]};return a.checks.push({type:12,source:e,target:l}),ir(t,0,a),t.edgeCount++,l}},{name:"undirectedEdge",separator:!0,regex:ve.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},i={checks:[]};return n.checks.push({type:10,nodes:[e,i]}),ir(t,0,n),t.edgeCount++,i}var a={checks:[]},l={checks:[]};return a.checks.push({type:14,node:e,neighbor:l}),ir(t,0,a),l}},{name:"child",separator:!0,regex:ve.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:15,parent:t[t.length-1],child:r}),ir(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},h={checks:[]};return a.checks.push({type:19,left:t[t.length-1],right:l,subject:s}),s.checks=e.checks,e.checks=[{type:20}],h.checks.push({type:20}),l.checks.push({type:17,parent:h,child:u}),ir(t,0,a),t.currentSubject=s,t.compoundCount++,u}var g={checks:[]},x={checks:[]},E=[{type:17,parent:g,child:x}];return g.checks=e.checks,e.checks=E,t.compoundCount++,x}},{name:"descendant",separator:!0,regex:ve.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]};return n.checks.push({type:16,ancestor:t[t.length-1],descendant:r}),ir(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},l={checks:[]},s={checks:[]},u={checks:[]},h={checks:[]};return a.checks.push({type:19,left:t[t.length-1],right:l,subject:s}),s.checks=e.checks,e.checks=[{type:20}],h.checks.push({type:20}),l.checks.push({type:18,ancestor:h,descendant:u}),ir(t,0,a),t.currentSubject=s,t.compoundCount++,u}var g={checks:[]},x={checks:[]},E=[{type:18,ancestor:g,descendant:x}];return g.checks=e.checks,e.checks=E,t.compoundCount++,x}},{name:"subject",modifier:!0,regex:ve.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return be("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];eo.forEach(function(t){return t.regexObj=new RegExp("^"+t.regex)});var Dl=function(t){for(var e,n,r,i=0;i<eo.length;i++){var a=eo[i],o=a.name,l=t.match(a.regexObj);if(null!=l){n=l,e=a,r=o,t=t.substring(l[0].length);break}}return{expr:e,match:n,name:r,remaining:t}},Ll={parse:function(t){var u,h,e=this.inputText=t,n=this[0]={checks:[]};for(this.length=1,void 0,(h=(u=e).match(/^\s+/))&&(u=u.substring(h[0].length)),e=u;;){var r=Dl(e);if(null==r.expr)return be("The selector `"+t+"`is invalid"),!1;var i=r.match.slice(1),a=r.expr.populate(this,n,i);if(!1===a)return!1;if(null!=a&&(n=a),(e=r.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var l=0;l<this.length;l++){var s=this[l];if(s.compoundCount>0&&s.edgeCount>0)return be("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(s.edgeCount>1)return be("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===s.edgeCount&&be("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(s){return null==s?"":s},e=function(s){return c(s)?'"'+s+'"':t(s)},n=function(s){return" "+s+" "},i=function(s,u){return s.checks.reduce(function(h,g,x){return h+(u===s&&0===x?"$":"")+function(s,u){var g=s.value;switch(s.type){case 0:var x=t(g);return x.substring(0,x.length-1);case 3:return"["+s.field+n(t(s.operator))+e(g)+"]";case 5:var A=s.field;return"["+t(s.operator)+A+"]";case 4:return"["+s.field+"]";case 6:return"[["+s.field+n(t(s.operator))+e(g)+"]]";case 7:return g;case 8:return"#"+g;case 9:return"."+g;case 17:case 15:return i(s.parent,u)+n(">")+i(s.child,u);case 18:case 16:return i(s.ancestor,u)+" "+i(s.descendant,u);case 19:var P=i(s.left,u),_=i(s.subject,u),X=i(s.right,u);return P+(P.length>0?" ":"")+_+X;case 20:return""}}(g,u)},"")},a="",o=0;o<this.length;o++){var l=this[o];a+=i(l,l.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},Go=function(t,e,n){var r,i,a,o=c(t),l=N(t),s=c(n),u=!1,h=!1,g=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),h=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),u=!0),(o||s||u)&&(i=o||l?""+t:"",a=""+n),u&&(t=i=i.toLowerCase(),n=a=a.toLowerCase()),e){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=t===n;break;case">":g=!0,r=t>n;break;case">=":g=!0,r=t>=n;break;case"<":g=!0,r=t<n;break;case"<=":g=!0,r=t<=n;break;default:r=!1}return!h||null==t&&g||(r=!r),r},no=function(t,e){return t.data(e)},Ne=[],Ae=function(t,e){return t.checks.every(function(n){return Ne[n.type](n,e)})};Ne[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},Ne[7]=function(t,e){return wl[t.value](e)},Ne[8]=function(t,e){var n=t.value;return e.id()===n},Ne[9]=function(t,e){return e.hasClass(t.value)},Ne[6]=function(t,e){var r=t.operator,i=t.value;return Go(e[t.field](),r,i)},Ne[3]=function(t,e){var r=t.operator,i=t.value;return Go(no(e,t.field),r,i)},Ne[5]=function(t,e){var r=t.operator;return function(i,a){switch(a){case"?":return!!i;case"!":return!i;case"^":return void 0===i}}(no(e,t.field),r)},Ne[4]=function(t,e){return void 0!==no(e,t.field)},Ne[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),a=e.target();return Ae(n,i)&&Ae(r,a)||Ae(r,i)&&Ae(n,a)},Ne[14]=function(t,e){return Ae(t.node,e)&&e.neighborhood().some(function(n){return n.isNode()&&Ae(t.neighbor,n)})},Ne[11]=function(t,e){return Ae(t.source,e.source())&&Ae(t.target,e.target())},Ne[12]=function(t,e){return Ae(t.source,e)&&e.outgoers().some(function(n){return n.isNode()&&Ae(t.target,n)})},Ne[13]=function(t,e){return Ae(t.target,e)&&e.incomers().some(function(n){return n.isNode()&&Ae(t.source,n)})},Ne[15]=function(t,e){return Ae(t.child,e)&&Ae(t.parent,e.parent())},Ne[17]=function(t,e){return Ae(t.parent,e)&&e.children().some(function(n){return Ae(t.child,n)})},Ne[16]=function(t,e){return Ae(t.descendant,e)&&e.ancestors().some(function(n){return Ae(t.ancestor,n)})},Ne[18]=function(t,e){return Ae(t.ancestor,e)&&e.descendants().some(function(n){return Ae(t.descendant,n)})},Ne[19]=function(t,e){return Ae(t.subject,e)&&Ae(t.left,e)&&Ae(t.right,e)},Ne[20]=function(){return!0},Ne[1]=function(t,e){return t.value.has(e)},Ne[2]=function(t,e){return(0,t.value)(e)};var ar=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||c(t)&&t.match(/^\s*$/)||(G(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):D(t)?this.addQuery({checks:[{type:2,value:t}]}):c(t)?this.parse(t)||(this.invalid=!0):_e("A selector must be created from a string; found "))},or=ar.prototype;[Ll,{matches:function(t){for(var e=0;e<this.length;e++)if(Ae(this[e],t))return!0;return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(r){for(var i=0;i<e.length;i++)if(Ae(e[i],r))return!0;return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}}].forEach(function(t){return W(or,t)}),or.text=function(){return this.inputText},or.size=function(){return this.length},or.eq=function(t){return this[t]},or.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},or.addQuery=function(t){this[this.length++]=t},or.selector=or.toString;var sr={allAre:function(t){var e=new ar(t);return this.every(function(n){return e.matches(n)})},is:function(t){var e=new ar(t);return this.some(function(n){return e.matches(n)})},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every(function(n){return t.hasElementWithId(n.id())}))},anySame:function(t){return t=this.cy().collection(t),this.some(function(e){return t.hasElementWithId(e.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every(function(n){return e.hasElementWithId(n.id())})},contains:function(t){t=this.cy().collection(t);var e=this;return t.every(function(n){return e.hasElementWithId(n.id())})}};sr.allAreNeighbours=sr.allAreNeighbors,sr.has=sr.contains,sr.equal=sr.equals=sr.same;var ra,Ro,En=function(t,e){return function(n,r,i,a){var o,l=n;if(null==l?o="":G(l)&&1===l.length&&(o=l.id()),1===this.length&&o){var s=this[0]._private,u=s.traversalCache=s.traversalCache||{},h=u[e]=u[e]||[],g=Bn(o);return h[g]||(h[g]=t.call(this,n,r,i,a))}return t.call(this,n,r,i,a)}},qr={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,!0).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++)e.push(n[r]);n=n.parent()}return this.spawn(e,!0).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter(function(e){return e.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(e){return e.isChild()}).filter(t)},children:En(function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,!0).filter(t)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function n(r){for(var i=0;i<r.length;i++){var a=r[i];e.push(a),a.children().nonempty()&&n(a.children())}}(this.children()),this.spawn(e,!0).filter(t)}};function ro(t,e,n,r){for(var i=[],a=new zn,o=t.cy().hasCompoundNodes(),l=0;l<t.length;l++){var s=t[l];n?i.push(s):o&&r(i,a,s)}for(;i.length>0;){var u=i.shift();e(u),a.add(u.id()),o&&r(i,a,u)}return t}function Fo(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];e.has(a.id())||t.push(a)}}function Bo(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function Tl(t,e,n){Bo(t,e,n),Fo(t,e,n)}qr.forEachDown=function(t){return ro(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Fo)},qr.forEachUp=function(t){return ro(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Bo)},qr.forEachUpAndDown=function(t){return ro(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Tl)},qr.ancestors=qr.parents,(ra=Ro={data:we.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:we.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:we.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:we.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:we.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:we.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=ra.data,ra.removeAttr=ra.removeData;var Rn,zo,Sl=Ro,ia={};function io(t){return function(e){if(void 0===e&&(e=!0),0!==this.length&&this.isNode()&&!this.removed()){for(var n=0,r=this[0],i=r._private.edges,a=0;a<i.length;a++){var o=i[a];!e&&o.isLoop()||(n+=t(r,o))}return n}}}function $r(t,e){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][t](n);void 0===o||void 0!==r&&!e(o,r)||(r=o)}return r}}W(ia,{degree:io(function(t,e){return e.source().same(e.target())?2:1}),indegree:io(function(t,e){return e.target().same(t)?1:0}),outdegree:io(function(t,e){return e.source().same(t)?1:0})}),W(ia,{minDegree:$r("degree",function(t,e){return t<e}),maxDegree:$r("degree",function(t,e){return t>e}),minIndegree:$r("indegree",function(t,e){return t<e}),maxIndegree:$r("indegree",function(t,e){return t>e}),minOutdegree:$r("outdegree",function(t,e){return t<e}),maxOutdegree:$r("outdegree",function(t,e){return t>e})}),W(ia,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var Yo=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var a=i._private.position,o={x:null!=e.x?e.x-a.x:0,y:null!=e.y?e.y-a.y:0};!i.isParent()||0===o.x&&0===o.y||i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},Xo={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){Yo(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};(Rn=zo={position:we.data(Xo),silentPosition:we.data(W({},Xo,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){Yo(t,e,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,e){if(C(t))e?this.silentPosition(t):this.position(t);else if(D(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=n(o,i))&&(e?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(C(t)?(r={x:N(t.x)?t.x:0,y:N(t.y)?t.y:0},n=e):c(t)&&N(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],l=o.position(),s={x:l.x+r.x,y:l.y+r.y};n?o.silentPosition(s):o.position(s)}i.endBatch()}return this},silentShift:function(t,e){return C(t)?this.shift(t,!0):c(t)&&N(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=C(t)?t:void 0,l=void 0!==o||void 0!==e&&c(t);if(n&&n.isNode()){if(!l){var s=n.position();return o=Fr(s,i,a),void 0===t?o:o[t]}for(var u=0;u<this.length;u++){var h=this[u];void 0!==e?h.position(t,(e-a[t])/i):void 0!==o&&h.position(li(o,i,a))}}else if(!l)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=C(t)?t:void 0,a=void 0!==i||void 0!==e&&c(t),o=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var l=n.position(),s=o?n.parent():null,u=s&&s.length>0;u&&(s=s[0]);var g=u?s.position():{x:0,y:0};return i={x:l.x-g.x,y:l.y-g.y},void 0===t?i:i[t]}for(var x=0;x<this.length;x++){var E=this[x],m=o?E.parent():null,S=m&&m.length>0;S&&(m=m[0]);var L=S?m.position():{x:0,y:0};void 0!==e?E.position(t,e+L[t]):void 0!==i&&E.position({x:i.x+L.x,y:i.y+L.y})}}else if(!a)return;return this}}).modelPosition=Rn.point=Rn.position,Rn.modelPositions=Rn.points=Rn.positions,Rn.renderedPoint=Rn.renderedPosition,Rn.relativePoint=Rn.relativePosition;var Zr,lr,Il=zo;Zr=lr={},lr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),a=e.x1*r+i.x,o=e.x2*r+i.x,l=e.y1*r+i.y,s=e.y2*r+i.y;return{x1:a,x2:o,y1:l,y2:s,w:o-a,h:s-l}},lr.dirtyCompoundBoundsCache=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();return e.styleEnabled()&&e.hasCompoundNodes()?(this.forEachUp(function(n){if(n.isParent()){var r=n._private;r.compoundBoundsClean=!1,r.bbCache=null,t||n.emitAndNotify("bounds")}}),this):this},lr.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(o){if(o.isParent()){var l=o._private,s=o.children(),u="include"===o.pstyle("compound-sizing-wrt-labels").value,h={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},g=s.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),x=l.position;0!==g.w&&0!==g.h||((g={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue}).x1=x.x-g.w/2,g.x2=x.x+g.w/2,g.y1=x.y-g.h/2,g.y2=x.y+g.h/2);var E=h.width.left.value;"px"===h.width.left.units&&h.width.val>0&&(E=100*E/h.width.val);var m=h.width.right.value;"px"===h.width.right.units&&h.width.val>0&&(m=100*m/h.width.val);var S=h.height.top.value;"px"===h.height.top.units&&h.height.val>0&&(S=100*S/h.height.val);var A=h.height.bottom.value;"px"===h.height.bottom.units&&h.height.val>0&&(A=100*A/h.height.val);var L=M(h.width.val-g.w,E,m),P=L.biasDiff,_=L.biasComplementDiff,X=M(h.height.val-g.h,S,A),z=X.biasDiff,F=X.biasComplementDiff;l.autoPadding=function(V,Z,K,it){if("%"!==K.units)return"px"===K.units?K.pfValue:0;switch(it){case"width":return V>0?K.pfValue*V:0;case"height":return Z>0?K.pfValue*Z:0;case"average":return V>0&&Z>0?K.pfValue*(V+Z)/2:0;case"min":return V>0&&Z>0?V>Z?K.pfValue*Z:K.pfValue*V:0;case"max":return V>0&&Z>0?V>Z?K.pfValue*V:K.pfValue*Z:0;default:return 0}}(g.w,g.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),l.autoWidth=Math.max(g.w,h.width.val),x.x=(-P+g.x1+g.x2+_)/2,l.autoHeight=Math.max(g.h,h.height.val),x.y=(-z+g.y1+g.y2+F)/2}function M(V,Z,K){var it=0,ot=0,st=Z+K;return V>0&&st>0&&(it=Z/st*V,ot=K/st*V),{biasDiff:it,biasComplementDiff:ot}}}for(var r=0;r<this.length;r++){var i=this[r],a=i._private;a.compoundBoundsClean&&!t||(n(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Dn=function(t){return t===1/0||t===-1/0?0:t},Pn=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},Tr=function(t,e){return null==e?t:Pn(t,e.x1,e.y1,e.x2,e.y2)},vi=function(t,e,n){return cn(t,e,n)},aa=function(t,e,n){if(!e.cy().headless()){var r,i,a=e._private,o=a.rstyle,l=o.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var s=a.arrowBounds=a.arrowBounds||{},u=s[n]=s[n]||{};u.x1=r-l,u.y1=i-l,u.x2=r+l,u.y2=i+l,u.w=u.x2-u.x1,u.h=u.y2-u.y1,Br(u,1),Pn(t,u.x1,u.y1,u.x2,u.y2)}}},ao=function(t,e,n){if(!e.cy().headless()){var r,i=e._private,a=i.rstyle;if(e.pstyle((r=n?n+"-":"")+"label").strValue){var o,l,s,u,h=e.pstyle("text-halign"),g=e.pstyle("text-valign"),x=vi(a,"labelWidth",n),E=vi(a,"labelHeight",n),m=vi(a,"labelX",n),S=vi(a,"labelY",n),A=e.pstyle(r+"text-margin-x").pfValue,L=e.pstyle(r+"text-margin-y").pfValue,P=e.isEdge(),_=e.pstyle(r+"text-rotation"),X=e.pstyle("text-outline-width").pfValue,z=e.pstyle("text-border-width").pfValue/2,F=e.pstyle("text-background-padding").pfValue,M=E,V=x,Z=V/2,K=M/2;if(P)o=m-Z,l=m+Z,s=S-K,u=S+K;else{switch(h.value){case"left":o=m-V,l=m;break;case"center":o=m-Z,l=m+Z;break;case"right":o=m,l=m+V}switch(g.value){case"top":s=S-M,u=S;break;case"center":s=S-K,u=S+K;break;case"bottom":s=S,u=S+M}}o+=A-Math.max(X,z)-F-2,l+=A+Math.max(X,z)+F+2,s+=L-Math.max(X,z)-F-2,u+=L+Math.max(X,z)+F+2;var it=n||"main",ot=i.labelBounds,st=ot[it]=ot[it]||{};st.x1=o,st.y1=s,st.x2=l,st.y2=u,st.w=l-o,st.h=u-s;var vt=P&&"autorotate"===_.strValue;if(vt||null!=_.pfValue&&0!==_.pfValue){var et=vt?vi(i.rstyle,"labelAngle",n):_.pfValue,Pt=Math.cos(et),Lt=Math.sin(et),mt=(o+l)/2,_t=(s+u)/2;if(!P){switch(h.value){case"left":mt=l;break;case"right":mt=o}switch(g.value){case"top":_t=u;break;case"bottom":_t=s}}var bt=function(Zt,ne){return{x:(Zt-=mt)*Pt-(ne-=_t)*Lt+mt,y:Zt*Lt+ne*Pt+_t}},Tt=bt(o,s),Mt=bt(o,u),Bt=bt(l,s),Xt=bt(l,u);o=Math.min(Tt.x,Mt.x,Bt.x,Xt.x),l=Math.max(Tt.x,Mt.x,Bt.x,Xt.x),s=Math.min(Tt.y,Mt.y,Bt.y,Xt.y),u=Math.max(Tt.y,Mt.y,Bt.y,Xt.y)}var zt=it+"Rot",jt=ot[zt]=ot[zt]||{};jt.x1=o,jt.y1=s,jt.x2=l,jt.y2=u,jt.w=l-o,jt.h=u-s,Pn(t,o,s,l,u),Pn(i.labelBounds.all,o,s,l,u)}return t}},Ho=function(t){var e=0,n=function(i){return(i?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Vo=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(i){return Math.round(i)};return i=[r(e.x),r(e.y),r(n.x),r(n.y)],o={value:0,done:!1},l=0,s=i.length,Ni({next:function(){return l<s?o.value=i[l++]:o.done=!0,o}},void 0)}var i,o,l,s;return 0},Uo=function(t,e){var n,r=t._private,i=t.isEdge(),a=(null==e?qo:Ho(e))===qo,o=Vo(t),l=r.bbCachePosKey===o,s=e.useCache&&l,u=function(g){return null==g._private.bbCache||g._private.styleDirty};if(!s||u(t)||i&&u(t.source())||u(t.target())?(l||t.recalculateRenderedStyle(s),n=function(g,x){var E,m,S,A,L,P,_,X=g._private.cy,z=X.styleEnabled(),F=X.headless(),M=Ke(),V=g._private,Z=g.isNode(),K=g.isEdge(),it=V.rstyle,ot=Z&&z?g.pstyle("bounds-expansion").pfValue:[0],st=function(xt){return"none"!==xt.pstyle("display").value},vt=!z||st(g)&&(!K||st(g.source())&&st(g.target()));if(vt){var ft=0;z&&x.includeOverlays&&0!==g.pstyle("overlay-opacity").value&&(ft=g.pstyle("overlay-padding").value);var et=0;if(z&&(et=g.pstyle("width").pfValue/2),Z&&x.includeNodes){var Pt=g.position();L=Pt.x,P=Pt.y;var Lt=g.outerWidth()/2,mt=g.outerHeight()/2;Pn(M,E=L-Lt,S=P-mt,m=L+Lt,A=P+mt)}else if(K&&x.includeEdges)if(z&&!F){var _t=g.pstyle("curve-style").strValue;if(E=Math.min(it.srcX,it.midX,it.tgtX),m=Math.max(it.srcX,it.midX,it.tgtX),S=Math.min(it.srcY,it.midY,it.tgtY),A=Math.max(it.srcY,it.midY,it.tgtY),Pn(M,E-=et,S-=et,m+=et,A+=et),"haystack"===_t){var bt=it.haystackPts;if(bt&&2===bt.length){if((E=bt[0].x)>(m=bt[1].x)){var Tt=E;E=m,m=Tt}if((S=bt[0].y)>(A=bt[1].y)){var Mt=S;S=A,A=Mt}Pn(M,E-et,S-et,m+et,A+et)}}else if("bezier"===_t||"unbundled-bezier"===_t||"segments"===_t||"taxi"===_t){var Bt;switch(_t){case"bezier":case"unbundled-bezier":Bt=it.bezierPts;break;case"segments":case"taxi":Bt=it.linePts}if(null!=Bt)for(var Xt=0;Xt<Bt.length;Xt++){var zt=Bt[Xt];Pn(M,E=zt.x-et,S=zt.y-et,m=zt.x+et,A=zt.y+et)}}}else{var jt=g.source().position(),Zt=g.target().position();if((E=jt.x)>(m=Zt.x)){var ne=E;E=m,m=ne}if((S=jt.y)>(A=Zt.y)){var oe=S;S=A,A=oe}Pn(M,E-=et,S-=et,m+=et,A+=et)}if(z&&x.includeEdges&&K&&(aa(M,g,"mid-source"),aa(M,g,"mid-target"),aa(M,g,"source"),aa(M,g,"target")),z&&"yes"===g.pstyle("ghost").value){var Yt=g.pstyle("ghost-offset-x").pfValue,Wt=g.pstyle("ghost-offset-y").pfValue;Pn(M,M.x1+Yt,M.y1+Wt,M.x2+Yt,M.y2+Wt)}var Qt=V.bodyBounds=V.bodyBounds||{};xr(Qt,M),hi(Qt,ot),Br(Qt,1),z&&Pn(M,(E=M.x1)-ft,(S=M.y1)-ft,(m=M.x2)+ft,(A=M.y2)+ft);var Y=V.overlayBounds=V.overlayBounds||{};xr(Y,M),hi(Y,ot),Br(Y,1);var ht=V.labelBounds=V.labelBounds||{};null!=ht.all?((_=ht.all).x1=1/0,_.y1=1/0,_.x2=-1/0,_.y2=-1/0,_.w=0,_.h=0):ht.all=Ke(),z&&x.includeLabels&&(x.includeMainLabels&&ao(M,g,null),K&&(x.includeSourceLabels&&ao(M,g,"source"),x.includeTargetLabels&&ao(M,g,"target")))}return M.x1=Dn(M.x1),M.y1=Dn(M.y1),M.x2=Dn(M.x2),M.y2=Dn(M.y2),M.w=Dn(M.x2-M.x1),M.h=Dn(M.y2-M.y1),M.w>0&&M.h>0&&vt&&(hi(M,ot),Br(M,1)),M}(t,yi),r.bbCache=n,r.bbCachePosKey=o):n=r.bbCache,!a){var h=t.isNode();n=Ke(),(e.includeNodes&&h||e.includeEdges&&!h)&&Tr(n,e.includeOverlays?r.overlayBounds:r.bodyBounds),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?Tr(n,r.labelBounds.all):(e.includeMainLabels&&Tr(n,r.labelBounds.mainRot),e.includeSourceLabels&&Tr(n,r.labelBounds.sourceRot),e.includeTargetLabels&&Tr(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},yi={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},qo=Ho(yi),$o=Re(yi);lr.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||this[0]._private.styleDirty||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=Ke();var n=$o(t=t||yi);if(this.cy().styleEnabled())for(var r=0;r<this.length;r++){var i=this[r],a=i._private,o=Vo(i);i.recalculateRenderedStyle(n.useCache&&a.bbCachePosKey===o&&!a.styleDirty)}this.updateCompoundBounds(!t.useCache);for(var u=0;u<this.length;u++)Tr(e,Uo(this[u],n))}else t=void 0===t?yi:$o(t),e=Uo(this[0],t);return e.x1=Dn(e.x1),e.y1=Dn(e.y1),e.x2=Dn(e.x2),e.y2=Dn(e.y2),e.w=Dn(e.x2-e.x1),e.h=Dn(e.y2-e.y1),e},lr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},lr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes(),i=n.collection();if(r&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),C(t)){var a=t;t=function(){return a}}n.startBatch(),e.forEach(function(l,s){return l._private.bbAtOldPos=t(l,s)}).silentPositions(t),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var l,o={x1:(l=this.boundingBox({useCache:!1})).x1,x2:l.x2,w:l.w,y1:l.y1,y2:l.y2,h:l.h};return e.silentPositions(function(l){return l._private.bbAtOldPos}),r&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),n.endBatch(),o},Zr.boundingbox=Zr.bb=Zr.boundingBox,Zr.renderedBoundingbox=Zr.renderedBoundingBox;var mi,bi,Pl=lr;mi=bi={};var Zo=function(t){t.uppercaseName=nt(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=nt(t.outerName),mi[t.name]=function(){var e=this[0],n=e._private;if(e){if(!n.cy._private.styleEnabled)return 1;if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);return"label"===i.strValue?(e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0):i.pfValue}},mi["outer"+t.uppercaseName]=function(){var e=this[0];if(e)return e._private.cy._private.styleEnabled?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},mi["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},mi["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Zo({name:"width"}),Zo({name:"height"}),bi.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},bi.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},bi.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var Al=bi,jo={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},_l=Object.keys(jo).reduce(function(t,e){var i,n=jo[e],r="rendered"+(i=e)[0].toUpperCase()+i.substr(1);return t[e]=function(){return function(i,a){if(i.isEdge())return a(i)}(this,n.get)},t[r]=n.mult?function(){return function(i,a){if(i.isEdge()){var o=i.cy(),l=o.pan(),s=o.zoom();return a(i).map(function(u){return Fr(u,s,l)})}}(this,n.get)}:function(){return function(i,a){if(i.isEdge()){var o=i.cy();return Fr(a(i),o.zoom(),o.pan())}}(this,n.get)},t},{}),Cl=W({},Il,Pl,Al,_l),Wo=function(t,e){this.recycle(t,e)};function xi(){return!1}function oa(){return!0}Wo.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=xi,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?oa:xi):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=oa;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=oa;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=oa,this.stopPropagation()},isDefaultPrevented:xi,isPropagationStopped:xi,isImmediatePropagationStopped:xi};var Ko=/^([^.]+)(\.(?:[^.]+))?$/,Qo={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},Jo=Object.keys(Qo),Nl={};function sa(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nl,e=arguments.length>1?arguments[1]:void 0,n=0;n<Jo.length;n++){var r=Jo[n];this[r]=t[r]||Qo[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ur=sa.prototype,ts=function(t,e,n,r,i,a,o){D(r)&&(i=r,r=null),o&&(a=null==a?o:W({},a,o));for(var l=I(n)?n:n.split(/\s+/),s=0;s<l.length;s++){var u=l[s];if(!$(u)){var h=u.match(Ko);if(h&&!1===e(t,u,h[1],h[2]?h[2]:null,r,i,a))break}}},es=function(t,e){return t.addEventFields(t.context,e),new Wo(e.type,e)};ur.on=ur.addListener=function(t,e,n,r,i){return ts(this,function(a,o,l,s,u,h,g){D(h)&&a.listeners.push({event:o,callback:h,type:l,namespace:s,qualifier:u,conf:g})},t,e,n,r,i),this},ur.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},ur.removeListener=ur.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(s){var u=a[s];ts(i,function(h,g,x,E,m,S){if((u.type===x||"*"===t)&&(!E&&".*"!==u.namespace||u.namespace===E)&&(!m||h.qualifierCompare(u.qualifier,m))&&(!S||u.callback===S))return a.splice(s,1),!1},t,e,n,r)},l=a.length-1;l>=0;l--)o(l);return this},ur.removeAllListeners=function(){return this.removeListener("*")},ur.emit=ur.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,I(e)||(e=[e]),function(t,e,n){if("event"!==p(n))if(C(n))e(t,es(t,n));else for(var r=I(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!$(a)){var o=a.match(Ko);o&&e(t,es(t,{type:o[1],namespace:o[2]?o[2]:null,target:t.context}))}}else e(t,n)}(this,function(a,o){null!=n&&(i=(r=[{event:o.event,type:o.type,namespace:o.namespace,callback:n}]).length);for(var l=function(u){var h=r[u];if(h.type===o.type&&(!h.namespace||h.namespace===o.namespace||".*"===h.namespace)&&a.eventMatches(a.context,h,o)){var g=[o];null!=e&&function(m,S){for(var A=0;A<S.length;A++)m.push(S[A])}(g,e),a.beforeEmit(a.context,h,o),h.conf&&h.conf.one&&(a.listeners=a.listeners.filter(function(m){return m!==h}));var x=a.callbackContext(a.context,h,o),E=h.callback.apply(x,g);a.afterEmit(a.context,h,o),!1===E&&(o.stopPropagation(),o.preventDefault())}},s=0;s<i;s++)l(s);a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},t),this.emitting--,this};var Ml={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},la=function(t){return c(t)?new ar(t):t},ns={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new sa(Ml,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=la(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=la(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=la(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=la(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};we.eventAliasesOn(ns);var rs={nodes:function(t){return this.filter(function(e){return e.isNode()}).filter(t)},edges:function(t){return this.filter(function(e){return e.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.push(r):e.push(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(c(t)||G(t))return new ar(t).filter(this);if(D(t)){for(var n=this.spawn(),r=0;r<this.length;r++){var i=this[r];(e?t.apply(e,[i,r,this]):t(i,r,this))&&n.push(i)}return n}return this.spawn()},not:function(t){if(t){c(t)&&(t=this.filter(t));for(var e=this.spawn(),n=0;n<this.length;n++){var r=this[n];t.has(r)||e.push(r)}return e}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(c(t))return this.filter(t);for(var n=this.spawn(),i=this.length<t.length,a=i?this:t,o=i?t:this,l=0;l<a.length;l++){var s=a[l];o.has(s)&&n.push(s)}return n},xor:function(t){var e=this._private.cy;c(t)&&(t=e.$(t));var n=this.spawn(),r=t,i=function(a,o){for(var l=0;l<a.length;l++){var s=a[l];o.hasElementWithId(s._private.data.id)||n.push(s)}};return i(this,r),i(r,this),n},diff:function(t){var e=this._private.cy;c(t)&&(t=e.$(t));var n=this.spawn(),r=this.spawn(),i=this.spawn(),a=t,o=function(l,s,u){for(var h=0;h<l.length;h++){var g=l[h];s.hasElementWithId(g._private.data.id)?i.merge(g):u.push(g)}};return o(this,a,n),o(a,this,r),{left:n,right:r,both:i}},add:function(t){var e=this._private.cy;if(!t)return this;if(c(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=this.spawnSelf(),i=0;i<t.length;i++){var a=t[i];!this.has(a)&&r.push(a)}return r},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&c(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,a=0;a<t.length;a++){var o=t[a],l=o._private.data.id;if(!i.has(l)){var s=this.length++;this[s]=o,i.set(l,{ele:o,index:s})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;if(this[t]=void 0,n.delete(e),this.length>1&&t!==this.length-1){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[t]=a,n.set(o,{ele:a,index:t})}return this.length--,this},unmergeOne:function(t){var r=this._private.map.get((t=t[0])._private.data.id);return r?(this.unmergeAt(r.index),this):this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&c(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=0;r<this.length;r++){var i=this[r],a=e?t.apply(e,[i,r,this]):t(i,r,this);n.push(a)}return n},reduce:function(t,e){for(var n=e,r=0;r<this.length;r++)n=t(n,this[r],r,this);return n},max:function(t,e){for(var n,r=-1/0,i=0;i<this.length;i++){var a=this[i],o=e?t.apply(e,[a,i,this]):t(a,i,this);o>r&&(r=o,n=a)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=0;i<this.length;i++){var a=this[i],o=e?t.apply(e,[a,i,this]):t(a,i,this);o<r&&(r=o,n=a)}return{value:r,ele:n}}},ye=rs;ye.u=ye["|"]=ye["+"]=ye.union=ye.or=ye.add,ye["\\"]=ye["!"]=ye["-"]=ye.difference=ye.relativeComplement=ye.subtract=ye.not,ye.n=ye["&"]=ye["."]=ye.and=ye.intersection=ye.intersect,ye["^"]=ye["(+)"]=ye["(-)"]=ye.symmetricDifference=ye.symdiff=ye.xor,ye.fnFilter=ye.filterFn=ye.stdFilter=ye.filter,ye.complement=ye.abscomp=ye.absoluteComplement;var is=function(t,e){var n=t.cy().hasCompoundNodes();function r(s){var u=s.pstyle("z-compound-depth");return"auto"===u.value?n?s.zDepth():0:"bottom"===u.value?-1:"top"===u.value?Mr:0}var i=r(t)-r(e);if(0!==i)return i;function a(s){return"auto"===s.pstyle("z-index-compare").value&&s.isNode()?1:0}var o=a(t)-a(e);if(0!==o)return o;var l=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==l?l:t.poolIndex()-e.poolIndex()},ua={forEach:function(t,e){if(D(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!D(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(is)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:Mr-1}var i=e.target,a=e.source.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}};ua.each=ua.forEach,"undefined"!=("undefined"==typeof Symbol?"undefined":ct(Symbol))&&"undefined"!=ct(Symbol.iterator)&&(ua[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return k({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,function(){return this})});var Ol=Re({nodeDimensionsIncludeLabels:!1}),ha={layoutDimensions:function(t){var e;if(t=Ol(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes().filter(function(L){return!L.isParent()}),i=this.cy(),a=e.eles,o=function(L){return L.id()},l=O(n,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var s=e.spacingFactor&&1!==e.spacingFactor,u=function(){if(!s)return null;for(var L=Ke(),P=0;P<r.length;P++){var X=l(r[P],P);Oa(L,X.x,X.y)}return L}(),h=O(function(L,P){var X,z,F,M,V,_=l(L,P);return s&&(X=Math.abs(e.spacingFactor),_={x:(M=(z=u).x1+z.w/2)+((F=_).x-M)*X,y:(V=z.y1+z.h/2)+(F.y-V)*X}),null!=e.transform&&(_=e.transform(L,_)),_},o);if(e.animate){for(var g=0;g<r.length;g++){var x=r[g],E=h(x,g);if(null==e.animateFilter||e.animateFilter(x,g)){var m=x.animation({position:E,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(m)}else x.position(E)}if(e.fit){var S=i.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(S)}else if(void 0!==e.zoom&&void 0!==e.pan){var A=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(A)}t.animations.forEach(function(L){return L.play()}),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),Hr.all(t.animations.map(function(L){return L.promise()})).then(function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})})}else r.positions(h),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(W({},t,{eles:this}))}};function as(t,e,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[t])?r:r=a[t]=e(n)}function ca(t,e){return t=Bn(t),function(n){return as(t,e,n)}}function da(t,e){t=Bn(t);var n=function(r){return e.call(r)};return function(){var r=this[0];if(r)return as(t,n,r)}}ha.createLayout=ha.makeLayout=ha.layout;var qe={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(r){return r._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach(function(r){n(r),r.connectedEdges().forEach(n)}),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=this;t=!(!t&&void 0!==t),e.hasCompoundNodes()&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var r=n;return t?r.emitAndNotify("style"):r.emit("style"),n.forEach(function(i){return i._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var e=0;e<this.length;e++){var n=this[e];n._private.styleDirty&&(n._private.styleDirty=!1,t.style().apply(n))}},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(C(t))r.applyBypass(this,t,!1),this.emitAndNotify("style");else if(c(t)){if(void 0===e){var a=this[0];return a?r.getStylePropertyValue(a,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style();if(void 0===t)for(var r=0;r<this.length;r++)n.removeAllBypasses(this[r],!1);else{t=t.split(/\s+/);for(var a=0;a<this.length;a++)n.removeBypasses(this[a],t,!1)}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function oo(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function so(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var l=a._private;if(!e(a))return!1;if(a.isNode())return!o||oo(a,r);var s=l.source,u=l.target;return n(s)&&(!o||oo(s,n))&&(s===u||n(u)&&(!o||oo(u,n)))}}}var jr=ca("eleTakesUpSpace",function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())});qe.takesUpSpace=da("takesUpSpace",so({ok:jr}));var Gl=ca("eleInteractive",function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&jr(t)}),Rl=ca("parentInteractive",function(t){return"visible"===t.pstyle("visibility").value&&jr(t)});qe.interactive=da("interactive",so({ok:Gl,parentOk:Rl,edgeOkViaNode:jr})),qe.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Fl=ca("eleVisible",function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&jr(t)});qe.visible=da("visible",so({ok:Fl,edgeOkViaNode:jr})),qe.hidden=function(){var t=this[0];if(t)return!t.visible()},qe.isBundledBezier=da("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),qe.bypass=qe.css=qe.style,qe.renderedCss=qe.renderedStyle,qe.removeBypass=qe.removeCss=qe.removeStyle,qe.pstyle=qe.parsedStyle;var hr={};function os(t){return function(){var e=arguments,n=[];if(2===e.length)this.on(t.event,e[0],e[1]);else if(1===e.length&&D(e[0]))this.on(t.event,e[0]);else if(0===e.length||1===e.length&&I(e[0])){for(var o=1===e.length?e[0]:null,l=0;l<this.length;l++){var s=this[l],u=!t.ableField||s._private[t.ableField],h=s._private[t.field]!=t.value;if(t.overrideAble){var g=t.overrideAble(s);if(void 0!==g&&(u=g,!g))return this}u&&(s._private[t.field]=t.value,h&&n.push(s))}var x=this.spawn(n);x.updateStyle(),x.emit(t.event),o&&x.emit(o)}return this}}function Wr(t){hr[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},hr[t.on]=os({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),hr[t.off]=os({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Wr({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Wr({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Wr({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Wr({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),hr.deselect=hr.unselect,hr.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Wr({field:"active",on:"activate",off:"unactivate"}),Wr({field:"pannable",on:"panify",off:"unpanify"}),hr.inactive=function(){var t=this[0];if(t)return!t._private.active};var Je={},ss=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),l=0;l<o.length;l++){var s=o[l],u=s.source(),h=s.target();if(t.noIncomingEdges&&h===i&&u!==i||t.noOutgoingEdges&&u===i&&h!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,!0).filter(e)}},ls=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var l=a[o],s=l.source(),u=l.target();t.outgoing&&s===i?(n.push(l),n.push(u)):t.incoming&&u===i&&(n.push(l),n.push(s))}}return this.spawn(n,!0).filter(e)}},us=function(t){return function(e){for(var n=this,r=[],i={};;){var a=t.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,l=0;l<a.length;l++){var s=a[l],u=s.id();i[u]||(i[u]=!0,r.push(s),o=!0)}if(!o)break;n=a}return this.spawn(r,!0).filter(e)}};function hs(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,!0).filter(e)}}function cs(t){return function(e){var n=[],r=this._private.cy,i=t||{};c(e)&&(e=r.$(e));for(var a=0;a<e.length;a++)for(var o=e[a]._private.edges,l=0;l<o.length;l++){var s=o[l],u=s._private.data,h=this.hasElementWithId(u.source)&&e.hasElementWithId(u.target),g=e.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(h||g){if((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!h||i.thisIsTgt&&!g))continue;n.push(s)}}return this.spawn(n,!0)}}function ds(t){return t=W({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,a=0;a<r.length;a++)for(var o=r[a]._private,l=o.source,s=l._private.data.id,u=o.data.target,h=l._private.edges,g=0;g<h.length;g++){var x=h[g],E=x._private.data,m=E.target,S=E.source,A=m===u&&S===s;(i.codirected&&A||!i.codirected&&(A||s===m&&u===S))&&n.push(x)}return this.spawn(n,!0).filter(e)}}Je.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},W(Je,{roots:ss({noIncomingEdges:!0}),leaves:ss({noOutgoingEdges:!0}),outgoers:En(ls({outgoing:!0}),"outgoers"),successors:us({outgoing:!0}),incomers:En(ls({incoming:!0}),"incomers"),predecessors:us({incoming:!0})}),W(Je,{neighborhood:En(function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var l=a[o],s=l.source(),u=l.target(),h=i===s?u:s;h.length>0&&e.push(h[0]),e.push(l[0])}return this.spawn(e,!0).filter(t)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),Je.neighbourhood=Je.neighborhood,Je.closedNeighbourhood=Je.closedNeighborhood,Je.openNeighbourhood=Je.openNeighborhood,W(Je,{source:En(function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e},"source"),target:En(function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e},"target"),sources:hs({attr:"source"}),targets:hs({attr:"target"})}),W(Je,{edgesWith:En(cs(),"edgesWith"),edgesTo:En(cs({thisIsSrc:!0}),"edgesTo")}),W(Je,{connectedEdges:En(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++)e.push(i[a])}return this.spawn(e,!0).filter(t)},"connectedEdges"),connectedNodes:En(function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(t)},"connectedNodes"),parallelEdges:En(ds(),"parallelEdges"),codirectedEdges:En(ds({codirected:!0}),"codirectedEdges")}),W(Je,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),a=[];null!=t&&i.empty()&&(i=t.sources());var o=function(s,u){r.merge(s),i.unmerge(s),u.merge(s)};if(i.empty())return e.spawn();var l=function(){var s=n.collection();a.push(s);var u=i[0];o(u,s),e.bfs({directed:!1,roots:u,visit:function(h){return o(h,s)}}),s.forEach(function(h){h.connectedEdges().forEach(function(g){e.has(g)&&s.has(g.source())&&s.has(g.target())&&s.merge(g)})})};do{l()}while(i.length>0);return a},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),Je.componentsOf=Je.components;var $e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==t){var r=new mn,i=!1;if(e){if(e.length>0&&C(e[0])&&!at(e[0])){i=!0;for(var a=[],o=new zn,l=0,s=e.length;l<s;l++){var u=e[l];null==u.data&&(u.data={});var h=u.data;if(null==h.id)h.id=Fi();else if(t.hasElementWithId(h.id)||o.has(h.id))continue;var g=new Rr(t,u,!1);a.push(g),o.add(h.id)}e=a}}else e=[];this.length=0;for(var x=0,E=e.length;x<E;x++){var m=e[x][0];if(null!=m){var S=m._private.data.id;n&&r.has(S)||(n&&r.set(S,{index:this.length,ele:m}),this[this.length]=m,this.length++)}}this._private={eles:this,cy:t,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(A){this.lazyMap=A},rebuildMap:function(){for(var A=this.lazyMap=new mn,L=this.eles,P=0;P<L.length;P++){var _=L[P];A.set(_.id(),{index:P,ele:_})}}},n&&(this._private.map=r),i&&this.restore()}else _e("A collection must have a reference to the core")},Se=Rr.prototype=$e.prototype=Object.create(Array.prototype);Se.instanceString=function(){return"collection"},Se.spawn=function(t,e){return new $e(this.cy(),t,e)},Se.spawnSelf=function(){return this.spawn(this)},Se.cy=function(){return this._private.cy},Se.renderer=function(){return this._private.cy.renderer()},Se.element=function(){return this[0]},Se.collection=function(){return gt(this)?this:new $e(this._private.cy,[this])},Se.unique=function(){return new $e(this._private.cy,this,!0)},Se.hasElementWithId=function(t){return this._private.map.has(t=""+t)},Se.getElementById=function(t){var e=this._private.cy,n=this._private.map.get(t=""+t);return n?n.ele:new $e(e)},Se.$id=Se.getElementById,Se.poolIndex=function(){return this._private.cy._private.elements._private.map.get(this[0]._private.data.id).index},Se.indexOf=function(t){return this._private.map.get(t[0]._private.data.id).index},Se.indexOfId=function(t){return this._private.map.get(t=""+t).index},Se.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(C(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var a=!1,o={},l=t.data.source,s=t.data.target;null!=l&&l!=i.source&&(o.source=""+l,a=!0),null!=s&&s!=i.target&&(o.target=""+s,a=!0),a&&(e=e.move(o))}else{var h=t.data.parent;!("parent"in t.data)||null==h&&null==i.parent||h==i.parent||(void 0===h&&(h=null),null!=h&&(h=""+h),e=e.move({parent:h}))}}t.position&&e.position(t.position);var g=function(m,S,A){var L=t[m];null!=L&&L!==r[m]&&(L?e[S]():e[A]())};return g("removed","remove","restore"),g("selected","select","unselect"),g("selectable","selectify","unselectify"),g("locked","lock","unlock"),g("grabbable","grabify","ungrabify"),g("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var x={data:yn(r.data),position:yn(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:""},E=0;return r.classes.forEach(function(m){return x.classes+=0==E++?m:" "+m}),x}}},Se.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Se.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new Rr(t,r,!1);e.push(i)}return new $e(t,e)},Se.copy=Se.clone,Se.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,a=i.cy(),o=a._private,l=[],s=[],u=0,h=i.length;u<h;u++){var g=i[u];r&&!g.removed()||(g.isNode()?l.push(g):s.push(g))}t=l.concat(s);var x=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var E=t[e],m=E._private,S=m.data;if(E.clearTraversalCache(),r||m.removed)if(void 0===S.id)S.id=Fi();else if(N(S.id))S.id=""+S.id;else{if($(S.id)||!c(S.id)){_e("Can not create element with invalid string ID `"+S.id+"`"),x();continue}if(a.hasElementWithId(S.id)){_e("Can not create second element with ID `"+S.id+"`"),x();continue}}var A=S.id;if(E.isNode()){var L=m.position;null==L.x&&(L.x=0),null==L.y&&(L.y=0)}if(E.isEdge()){for(var P=E,_=["source","target"],X=_.length,z=!1,F=0;F<X;F++){var M=_[F],V=S[M];N(V)&&(V=S[M]=""+S[M]),null==V||""===V?(_e("Can not create edge `"+A+"` with unspecified "+M),z=!0):a.hasElementWithId(V)||(_e("Can not create edge `"+A+"` with nonexistant "+M+" `"+V+"`"),z=!0)}if(z){x();continue}var Z=a.getElementById(S.source),K=a.getElementById(S.target);Z.same(K)?Z._private.edges.push(P):(Z._private.edges.push(P),K._private.edges.push(P)),P._private.source=Z,P._private.target=K}m.map=new mn,m.map.set(A,{ele:E,index:0}),m.removed=!1,r&&a.addToPool(E)}for(var it=0;it<l.length;it++){var ot=l[it],st=ot._private.data;N(st.parent)&&(st.parent=""+st.parent);var vt=st.parent;if(null!=vt){var et=a.getElementById(vt);if(et.empty())st.parent=void 0;else{for(var Pt=!1,Lt=et;!Lt.empty();){if(ot.same(Lt)){Pt=!0,st.parent=void 0;break}Lt=Lt.parent()}Pt||(et[0]._private.children.push(ot),ot._private.parent=et[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var mt=t.length===i.length?i:new $e(a,t),_t=0;_t<mt.length;_t++){var bt=mt[_t];bt.isNode()||(bt.parallelEdges().clearTraversalCache(),bt.source().clearTraversalCache(),bt.target().clearTraversalCache())}(o.hasCompoundNodes?a.collection().merge(mt).merge(mt.connectedNodes()).merge(mt.parent()):mt).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?mt.emitAndNotify("add"):r&&mt.emit("add")}return i},Se.removed=function(){var t=this[0];return t&&t._private.removed},Se.inside=function(){var t=this[0];return t&&!t._private.removed},Se.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},a=n._private.cy;function o(vt){for(var ft=vt._private.edges,et=0;et<ft.length;et++)s(ft[et])}function l(vt){for(var ft=vt._private.children,et=0;et<ft.length;et++)s(ft[et])}function s(vt){var ft=i[vt.id()];e&&vt.removed()||ft||(i[vt.id()]=!0,vt.isNode()?(r.push(vt),o(vt),l(vt)):r.unshift(vt))}for(var u=0,h=n.length;u<h;u++)s(n[u]);function x(vt,ft){Cn(vt._private.edges,ft),vt.clearTraversalCache()}function E(vt){vt.clearTraversalCache()}var m=[];function S(vt,ft){ft=ft[0];var et=(vt=vt[0])._private.children,Pt=vt.id();Cn(et,ft),ft._private.parent=null,m.ids[Pt]||(m.ids[Pt]=!0,m.push(vt))}m.ids={},n.dirtyCompoundBoundsCache(),e&&a.removeFromPool(r);for(var A=0;A<r.length;A++){var L=r[A];if(L.isEdge()){var P=L.source()[0],_=L.target()[0];x(P,L),x(_,L);for(var X=L.parallelEdges(),z=0;z<X.length;z++){var F=X[z];E(F),F.isBundledBezier()&&F.dirtyBoundingBoxCache()}}else{var M=L.parent();0!==M.length&&S(M,L)}e&&(L._private.removed=!0)}var V=a._private.elements;a._private.hasCompoundNodes=!1;for(var Z=0;Z<V.length;Z++)if(V[Z].isParent()){a._private.hasCompoundNodes=!0;break}var it=new $e(this.cy(),r);it.size()>0&&(t?it.emitAndNotify("remove"):e&&it.emit("remove"));for(var ot=0;ot<m.length;ot++){var st=m[ot];e&&st.removed()||st.updateStyle()}return it},Se.move=function(t){var e=this._private.cy,n=this,r=function(h){return null==h?h:""+h};if(void 0!==t.source||void 0!==t.target){var i=r(t.source),a=r(t.target),o=null!=i&&e.hasElementWithId(i),l=null!=a&&e.hasElementWithId(a);(o||l)&&(e.batch(function(){n.remove(!1,!1),n.emitAndNotify("moveout");for(var h=0;h<n.length;h++){var g=n[h],x=g._private.data;g.isEdge()&&(o&&(x.source=i),l&&(x.target=a))}n.restore(!1,!1)}),n.emitAndNotify("move"))}else if(void 0!==t.parent){var s=r(t.parent);if(null===s||e.hasElementWithId(s)){var u=null===s?void 0:s;e.batch(function(){var h=n.remove(!1,!1);h.emitAndNotify("moveout");for(var g=0;g<n.length;g++){var x=n[g],E=x._private.data;x.isNode()&&(E.parent=u)}h.restore(!1,!1)}),n.emitAndNotify("move")}}return this},[Io,xl,Qi,sr,qr,Sl,ia,Cl,ns,rs,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},ua,ha,qe,hr,Je].forEach(function(t){W(Se,t)});var zl={add:function(t){var e,n=this;if(G(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],a=0;a<r.length;a++)i.push(r[a].json());e=new $e(n,i)}}else if(I(t))e=new $e(n,t);else if(C(t)&&(I(t.nodes)||I(t.edges))){for(var l=t,s=[],u=["nodes","edges"],h=0,g=u.length;h<g;h++){var x=u[h],E=l[x];if(I(E))for(var m=0,S=E.length;m<S;m++){var A=W({group:x},E[m]);s.push(A)}}e=new $e(n,s)}else e=new Rr(n,t).collection();return e},remove:function(t){return G(t)||c(t)&&(t=this.$(t)),t.remove()}},Yl=function(){function t(r){return-r.tension*r.x-r.friction*r.v}function e(r,i,a){var o={x:r.x+a.dx*i,v:r.v+a.dv*i,tension:r.tension,friction:r.friction};return{dx:o.v,dv:t(o)}}function n(r,i){var a={dx:r.v,dv:t(r)},o=e(r,.5*i,a),l=e(r,.5*i,o),s=e(r,i,l),h=1/6*(a.dv+2*(o.dv+l.dv)+s.dv);return r.x=r.x+1/6*(a.dx+2*(o.dx+l.dx)+s.dx)*i,r.v=r.v+h*i,r}return function r(i,a,o){var l,s,u,h={x:-1,v:0,tension:null,friction:null},g=[0],x=0;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,h.tension=i,h.friction=a,s=(l=null!==o)?(x=r(i,a))/o*.016:.016;u=n(u||h,s),g.push(1+u.x),x+=16,Math.abs(u.x)>1e-4&&Math.abs(u.v)>1e-4;);return l?function(E){return g[E*(g.length-1)|0]}:x}}(),Ie=function(t,e,n,r){var i=function(a,o,l,s){var u=4,h=.001,g=1e-7,x=10,E=11,m=1/(E-1),S="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var A=0;A<4;++A)if("number"!=typeof arguments[A]||isNaN(arguments[A])||!isFinite(arguments[A]))return!1;a=Math.min(a,1),l=Math.min(l,1),a=Math.max(a,0),l=Math.max(l,0);var L=S?new Float32Array(E):new Array(E);function P(ft,et){return 1-3*et+3*ft}function _(ft,et){return 3*et-6*ft}function X(ft){return 3*ft}function z(ft,et,Pt){return((P(et,Pt)*ft+_(et,Pt))*ft+X(et))*ft}function F(ft,et,Pt){return 3*P(et,Pt)*ft*ft+2*_(et,Pt)*ft+X(et)}function M(ft,et){for(var Pt=0;Pt<u;++Pt){var Lt=F(et,a,l);if(0===Lt)return et;et-=(z(et,a,l)-ft)/Lt}return et}function V(){for(var ft=0;ft<E;++ft)L[ft]=z(ft*m,a,l)}function Z(ft,et,Pt){var Lt,mt,_t=0;do{(Lt=z(mt=et+(Pt-et)/2,a,l)-ft)>0?Pt=mt:et=mt}while(Math.abs(Lt)>g&&++_t<x);return mt}function K(ft){for(var et=0,Pt=1,Lt=E-1;Pt!==Lt&&L[Pt]<=ft;++Pt)et+=m;--Pt;var mt=et+(ft-L[Pt])/(L[Pt+1]-L[Pt])*m,_t=F(mt,a,l);return _t>=h?M(ft,mt):0===_t?mt:Z(ft,et,et+m)}var it=!1;function ot(){it=!0,a===o&&l===s||V()}var st=function(ft){return it||ot(),a===o&&l===s?ft:0===ft?0:1===ft?1:z(K(ft),o,s)};st.getControlPoints=function(){return[{x:a,y:o},{x:l,y:s}]};var vt="generateBezier("+[a,o,l,s]+")";return st.toString=function(){return vt},st}(t,e,n,r);return function(a,o,l){return a+(o-a)*i(l)}},fa={linear:function(t,e,n){return t+(e-t)*n},ease:Ie(.25,.1,.25,1),"ease-in":Ie(.42,0,1,1),"ease-out":Ie(0,0,.58,1),"ease-in-out":Ie(.42,0,.58,1),"ease-in-sine":Ie(.47,0,.745,.715),"ease-out-sine":Ie(.39,.575,.565,1),"ease-in-out-sine":Ie(.445,.05,.55,.95),"ease-in-quad":Ie(.55,.085,.68,.53),"ease-out-quad":Ie(.25,.46,.45,.94),"ease-in-out-quad":Ie(.455,.03,.515,.955),"ease-in-cubic":Ie(.55,.055,.675,.19),"ease-out-cubic":Ie(.215,.61,.355,1),"ease-in-out-cubic":Ie(.645,.045,.355,1),"ease-in-quart":Ie(.895,.03,.685,.22),"ease-out-quart":Ie(.165,.84,.44,1),"ease-in-out-quart":Ie(.77,0,.175,1),"ease-in-quint":Ie(.755,.05,.855,.06),"ease-out-quint":Ie(.23,1,.32,1),"ease-in-out-quint":Ie(.86,0,.07,1),"ease-in-expo":Ie(.95,.05,.795,.035),"ease-out-expo":Ie(.19,1,.22,1),"ease-in-out-expo":Ie(1,0,0,1),"ease-in-circ":Ie(.6,.04,.98,.335),"ease-out-circ":Ie(.075,.82,.165,1),"ease-in-out-circ":Ie(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return fa.linear;var r=Yl(t,e,n);return function(i,a,o){return i+(a-i)*r(o)}},"cubic-bezier":Ie};function fs(t,e,n,r,i){if(1===r||e===n)return n;var a=i(e,n,r);return null==t||((t.roundValue||t.color)&&(a=Math.round(a)),void 0!==t.min&&(a=Math.max(a,t.min)),void 0!==t.max&&(a=Math.min(a,t.max))),a}function ps(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function Kr(t,e,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=ps(t,i),l=ps(e,i);if(N(o)&&N(l))return fs(a,o,l,n,r);if(I(o)&&I(l)){for(var s=[],u=0;u<l.length;u++){var h=o[u],g=l[u];if(null!=h&&null!=g){var x=fs(a,h,g,n,r);s.push(x)}else s.push(g)}return s}}function Xl(t,e,n,r){var i=!r,a=t._private,o=e._private,l=o.easing,s=o.startTime,u=(r?t:t.cy()).style();if(!o.easingImpl)if(null==l)o.easingImpl=fa.linear;else{var h,g,x;h=c(l)?u.parse("transition-timing-function",l).value:l,c(h)?(g=h,x=[]):(g=h[1],x=h.slice(2).map(function(et){return+et})),x.length>0?("spring"===g&&x.push(o.duration),o.easingImpl=fa[g].apply(null,x)):o.easingImpl=fa[g]}var E,m=o.easingImpl;if(E=0===o.duration?1:(n-s)/o.duration,o.applying&&(E=o.progress),E<0?E=0:E>1&&(E=1),null==o.delay){var S=o.startPosition,A=o.position;if(A&&i&&!t.locked()){var L={};wi(S.x,A.x)&&(L.x=Kr(S.x,A.x,E,m)),wi(S.y,A.y)&&(L.y=Kr(S.y,A.y,E,m)),t.position(L)}var P=o.startPan,_=o.pan,X=a.pan,z=null!=_&&r;z&&(wi(P.x,_.x)&&(X.x=Kr(P.x,_.x,E,m)),wi(P.y,_.y)&&(X.y=Kr(P.y,_.y,E,m)),t.emit("pan"));var F=o.startZoom,M=o.zoom,V=null!=M&&r;V&&(wi(F,M)&&(a.zoom=br(a.minZoom,Kr(F,M,E,m),a.maxZoom)),t.emit("zoom")),(z||V)&&t.emit("viewport");var Z=o.style;if(Z&&Z.length>0&&i){for(var K=0;K<Z.length;K++){var it=Z[K],ot=it.name,vt=o.startStyle[ot],ft=Kr(vt,it,E,m,u.properties[vt.name]);u.overrideBypass(t,ot,ft)}t.emit("style")}}return o.progress=E,E}function wi(t,e){return!(null==t||null==e||!(N(t)&&N(e)||t&&e))}function Hl(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function gs(t,e){var n=e._private.aniEles,r=[];function i(u,h){var g=u._private,x=g.animation.current,E=g.animation.queue,m=!1;if(0===x.length){var S=E.shift();S&&x.push(S)}for(var A=function(X){for(var z=X.length-1;z>=0;z--)(0,X[z])();X.splice(0,X.length)},L=x.length-1;L>=0;L--){var P=x[L],_=P._private;_.stopped?(x.splice(L,1),_.hooked=!1,_.playing=!1,_.started=!1,A(_.frames)):(_.playing||_.applying)&&(_.playing&&_.applying&&(_.applying=!1),_.started||Hl(0,P,t),Xl(u,P,t,h),_.applying&&(_.applying=!1),A(_.frames),null!=_.step&&_.step(t),P.completed()&&(x.splice(L,1),_.hooked=!1,_.playing=!1,_.started=!1,A(_.completes)),m=!0)}return h||0!==x.length||0!==E.length||r.push(u),m}for(var a=!1,o=0;o<n.length;o++){var l=i(n[o]);a=a||l}var s=i(e,!0);(a||s)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var Vl={animate:we.animate(),animation:we.animation(),animated:we.animated(),clearQueue:we.clearQueue(),delay:we.delay(),delayAnimation:we.delayAnimation(),stop:we.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender(function(n,r){gs(r,t)},e.beforeRenderPriorities.animations):function n(){t._private.animationsRunning&&gr(function(r){gs(r,t),n()})}()}}},Ul={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&at(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},pa=function(t){return c(t)?new ar(t):t},vs={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new sa(Ul,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,pa(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,pa(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,pa(e),n),this},once:function(t,e,n){return this.emitter().one(t,pa(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};we.eventAliasesOn(vs);var lo={png:function(t){return this._private.renderer.png(t=t||{})},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};lo.jpeg=lo.jpg;var ga={layout:function(t){if(null!=t)if(null!=t.name){var r,e=t.name,n=this.extension("layout",e);if(null!=n)return r=c(t.eles)?this.$(t.eles):null!=t.eles?t.eles:this.$(),new n(W({},t,{cy:this,eles:r}));_e("No such layout `"+e+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else _e("A `name` must be specified to make a layout");else _e("Layout options must be specified to make a layout")}};ga.createLayout=ga.makeLayout=ga.layout;var ql={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach(function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch(function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];e.getElementById(i).data(a)}})}},$l=Re({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),uo={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this.extension("renderer",t.name);if(null!=e){void 0!==t.wheelSensitivity&&be("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=$l(t);n.cy=this,this._private.renderer=new e(n),this.notify("init")}else _e("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){this.notify("destroy");var t=this.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var n=e._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};uo.invalidateDimensions=uo.resize;var va={collection:function(t,e){return c(t)?this.$(t):G(t)?t.collection():I(t)?new $e(this,t,e):new $e(this)},nodes:function(t){var e=this.$(function(n){return n.isNode()});return t?e.filter(t):e},edges:function(t){var e=this.$(function(n){return n.isEdge()});return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};va.elements=va.filter=va.$;var tn={apply:function(t){for(var e=this._private.cy.collection(),n=0;n<t.length;n++){var r=t[n],i=this.getContextMeta(r);if(!i.empty){var a=this.getContextStyle(i),o=this.applyContextStyle(i,a,r);r._private.appliedInitStyle?this.updateTransitions(r,o.diffProps):r._private.appliedInitStyle=!0,this.updateStyleHints(r)&&e.push(r)}}return e},getPropertiesDiff:function(t,e){var n=this._private.propDiffs=this._private.propDiffs||{},r=t+"-"+e,i=n[r];if(i)return i;for(var a=[],o={},l=0;l<this.length;l++){var s=this[l],h="t"===e[l],g="t"===t[l]!==h,x=s.mappedProperties.length>0;if(g||h&&x){var E=void 0;g&&x||g?E=s.properties:x&&(E=s.mappedProperties);for(var m=0;m<E.length;m++){for(var S=E[m],A=S.name,L=!1,P=l+1;P<this.length&&("t"!==e[P]||!(L=null!=this[P].properties[S.name]));P++);o[A]||L||(o[A]=!0,a.push(A))}}}return n[r]=a,a},getContextMeta:function(t){for(var e,n="",r=t._private.styleCxtKey||"",i=0;i<this.length;i++){var a=this[i];n+=a.selector&&a.selector.matches(t)?"t":"f"}return e=this.getPropertiesDiff(r,n),t._private.styleCxtKey=n,{key:n,diffPropNames:e,empty:0===e.length}},getContextStyle:function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var a=this[i];if("t"===e[i])for(var o=0;o<a.properties.length;o++){var l=a.properties[o];r[l.name]=l}}return n[e]=r,r},applyContextStyle:function(t,e,n){for(var r=t.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var l=r[o],s=e[l],u=n.pstyle(l);if(!s){if(!u)continue;s=u.bypass?{name:l,deleteBypassed:!0}:{name:l,delete:!0}}if(u!==s){if(s.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===s.value){var h=u.mapping;if((h.fnValue=s.value(n))===h.prevFnValue)continue}var g=i[l]={prev:u};this.applyParsedProperty(n,s),g.next=n.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}},updateStyleHints:function(t){var r,e=t._private,n=this,i=n.propertyGroupKeys,a=function(Zt,ne,oe){return n.getPropertiesHash(Zt,ne,oe)},o=e.styleKey;if(t.removed())return!1;var Zt,ne,l="nodes"===e.group,s=t._private.style;r=Object.keys(s);for(var u=0;u<i.length;u++)e.styleKeys[i[u]]=[9261,5381];for(var g,x=function(Zt,ne){return e.styleKeys[ne][0]=Jn(Zt,e.styleKeys[ne][0])},E=function(Zt,ne){return e.styleKeys[ne][1]=vr(Zt,e.styleKeys[ne][1])},S=function(Zt,ne){for(var oe=0;oe<Zt.length;oe++){var Yt=Zt.charCodeAt(oe);x(Yt,ne),E(Yt,ne)}},A=0;A<r.length;A++){var L=r[A],P=s[L];if(null!=P){var _=this.properties[L],X=_.type,z=_.groupKey,F=void 0;null!=_.hashOverride?F=_.hashOverride(t,P):null!=P.pfValue&&(F=P.pfValue);var M=null==_.enums?P.value:null,V=null!=F,K=P.units;!X.number||!V&&null==M||X.multiple?S(P.strValue,z):(Zt=-128<(g=V?F:M)&&g<128&&Math.floor(g)!==g?2e9-(1024*g|0):g,x(Zt,ne=z),E(Zt,ne),V||null==K||S(K,z))}}for(var st=[9261,5381],vt=0;vt<i.length;vt++){var et=e.styleKeys[i[vt]];st[0]=Jn(et[0],st[0]),st[1]=vr(et[1],st[1])}e.styleKey=2097152*st[0]+st[1];var Pt=e.styleKeys;e.labelDimsKey=_n(Pt.labelDimensions);var Lt=a(t,["label"],Pt.labelDimensions);if(e.labelKey=_n(Lt),e.labelStyleKey=_n(yr(Pt.commonLabel,Lt)),!l){var mt=a(t,["source-label"],Pt.labelDimensions);e.sourceLabelKey=_n(mt),e.sourceLabelStyleKey=_n(yr(Pt.commonLabel,mt));var _t=a(t,["target-label"],Pt.labelDimensions);e.targetLabelKey=_n(_t),e.targetLabelStyleKey=_n(yr(Pt.commonLabel,_t))}if(l){var bt=e.styleKeys,zt=bt.pie,jt=[bt.nodeBody,bt.nodeBorder,bt.backgroundImage,bt.compound,zt].filter(function(Zt){return null!=Zt}).reduce(yr,[9261,5381]);e.nodeKey=_n(jt),e.hasPie=null!=zt&&9261!==zt[0]&&5381!==zt[1]}return o!==e.styleKey},clearStyleHints:function(t){var e=t._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},applyParsedProperty:function(t,e){var n,r=this,i=e,a=t._private.style,o=r.types,l=r.properties[i.name].type,s=i.bypass,u=a[i.name],h=u&&u.bypass,g=t._private,x=function(mt){return null==mt?null:null!=mt.pfValue?mt.pfValue:mt.value},E=function(){var mt=x(u),_t=x(i);r.checkTriggers(t,i.name,mt,_t)};if(i&&"pie"===i.name.substr(0,3)&&be("The pie style properties are deprecated.  Create charts using background images instead."),"curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",s)),i.delete)return a[i.name]=void 0,E(),!0;if(i.deleteBypassed)return u?!!u.bypass&&(u.bypassed=void 0,E(),!0):(E(),!0);if(i.deleteBypass)return u?!!u.bypass&&(a[i.name]=u.bypassed,E(),!0):(E(),!0);var m=function(){be("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var S,A=i.field.split("."),L=g.data,P=0;P<A.length&&L;P++)L=L[A[P]];if(null==L)return m(),!1;if(!N(L))return be("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+L+"` for `"+t.id()+"` is non-numeric)"),!1;var _=i.fieldMax-i.fieldMin;if((S=0===_?0:(L-i.fieldMin)/_)<0?S=0:S>1&&(S=1),l.color){var X=i.valueMin[0],F=i.valueMin[1],M=i.valueMax[1],V=i.valueMin[2],Z=i.valueMax[2],K=null==i.valueMin[3]?1:i.valueMin[3],it=null==i.valueMax[3]?1:i.valueMax[3],ot=[Math.round(X+(i.valueMax[0]-X)*S),Math.round(F+(M-F)*S),Math.round(V+(Z-V)*S),Math.round(K+(it-K)*S)];n={bypass:i.bypass,name:i.name,value:ot,strValue:"rgb("+ot[0]+", "+ot[1]+", "+ot[2]+")"}}else{if(!l.number)return!1;n=this.parse(i.name,i.valueMin+(i.valueMax-i.valueMin)*S,i.bypass,"mapping")}if(!n)return m(),!1;n.mapping=i,i=n;break;case o.data:for(var vt=i.field.split("."),ft=g.data,et=0;et<vt.length&&ft;et++)ft=ft[vt[et]];if(null!=ft&&(n=this.parse(i.name,ft,i.bypass,"mapping")),!n)return m(),!1;n.mapping=i,i=n;break;case o.fn:var Lt=null!=i.fnValue?i.fnValue:(0,i.value)(t);if(i.prevFnValue=Lt,null==Lt)return be("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,Lt,i.bypass,"mapping")))return be("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=yn(i),i=n;break;case void 0:break;default:return!1}return s?(i.bypassed=h?u.bypassed:u,a[i.name]=i):h?u.bypassed=i:a[i.name]=i,E(),!0},cleanElements:function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var l=a[o],s=i[l];null!=s&&(s.bypass?s.bypassed=null:i[l]=null)}else r._private.style={}}},update:function(){this._private.cy.mutableElements().updateStyle()},updateTransitions:function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var l={},s=!1,u=0;u<i.length;u++){var h=i[u],g=t.pstyle(h),x=e[h];if(x){var E=x.prev,m=null!=x.next?x.next:g,S=!1,A=void 0;E&&(N(E.pfValue)&&N(m.pfValue)?A=E.pfValue+1e-6*(S=m.pfValue-E.pfValue):N(E.value)&&N(m.value)?A=E.value+1e-6*(S=m.value-E.value):I(E.value)&&I(m.value)&&(S=E.value[0]!==m.value[0]||E.value[1]!==m.value[1]||E.value[2]!==m.value[2],A=E.strValue),S&&(l[h]=m.strValue,this.applyBypass(t,h,A),s=!0))}}if(!s)return;r.transitioning=!0,new Hr(function(L){o>0?t.delayAnimation(o).play().promise().then(L):L()}).then(function(){return t.animation({style:l,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1})}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},checkTrigger:function(t,e,n,r,i,a){var o=this.properties[e],l=i(o);null!=l&&l(n,r)&&a(o)},checkZOrderTrigger:function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",t)})},checkBoundsTrigger:function(t,e,n,r){this.checkTrigger(t,e,n,r,function(i){return i.triggersBounds},function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"curve-style"!==e||"bezier"!==n&&"bezier"!==r||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach(function(a){a.isBundledBezier()&&a.dirtyBoundingBoxCache()})})},checkTriggers:function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)}},Zl={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var l=this.parse(this.properties[a].name,n,!0);l&&i.push(l)}}else if(c(e)){var s=this.parse(e,n,!0);s&&i.push(s)}else{if(!C(e))return!1;var u=e;r=n;for(var h=Object.keys(u),g=0;g<h.length;g++){var x=h[g],E=u[x];if(void 0===E&&(E=u[j(x)]),void 0!==E){var m=this.parse(x,E,!0);m&&i.push(m)}}}if(0===i.length)return!1;for(var S=!1,A=0;A<t.length;A++){for(var L=t[A],P={},_=void 0,X=0;X<i.length;X++){var z=i[X];if(r){var F=L.pstyle(z.name);_=P[z.name]={prev:F}}S=this.applyParsedProperty(L,yn(z))||S,r&&(_.next=L.pstyle(z.name))}S&&this.updateStyleHints(L),r&&this.updateTransitions(L,P,!0)}return S},overrideBypass:function(t,e,n){e=H(e);for(var r=0;r<t.length;r++){var i=t[r],a=i._private.style[e],o=this.properties[e].type,l=o.color,s=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=l?"rgb("+n.join(",")+")":s?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,u,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],a={},o=0;o<e.length;o++){var l=e[o],s=this.properties[l],u=i.pstyle(s.name);if(u&&u.bypass){var h=this.parse(l,"",!0),g=a[s.name]={prev:u};this.applyParsedProperty(i,h),g.next=i.pstyle(s.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}}},jl={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(w&&e&&w.getComputedStyle)return w.getComputedStyle(e).getPropertyValue(t)}},ho={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){if(t=t[0]){for(var n={},r=0;r<this.properties.length;r++){var i=this.properties[r],a=this.getStylePropertyValue(t,i.name,e);null!=a&&(n[i.name]=a,n[j(i.name)]=a)}return n}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,a=t.pstyle(r.name);if(a){var o=a.value,l=a.units,s=a.strValue;if(n&&i.number&&null!=o&&N(o)){var u=t.cy().zoom(),h=function(E){return E*u},g=function(E,m){return h(E)+m},x=I(o);return(x?l.every(function(E){return null!=E}):null!=l)?x?o.map(function(E,m){return g(E,l[m])}).join(" "):g(o,l):x?o.map(function(E){return c(E)?E:""+h(E)}).join(" "):""+h(o)}if(null!=s)return s}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,a=t.pstyle(i);void 0!==a&&(a=C(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],l=n[o],s=r[o]||r[H(o)],u=this.parse(s.name,l);u&&e.push(u)}return e},getNonDefaultPropertiesHash:function(t,e,n){var i,a,o,l,s,u=n.slice();for(l=0;l<e.length;l++)if(null!=(i=t.pstyle(e[l],!1)))if(null!=i.pfValue)u[0]=Jn(o,u[0]),u[1]=vr(o,u[1]);else for(a=i.strValue,s=0;s<a.length;s++)o=a.charCodeAt(s),u[0]=Jn(o,u[0]),u[1]=vr(o,u[1]);return u}};ho.getPropertiesHash=ho.getNonDefaultPropertiesHash;var Wl={appendFromJson:function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n.selector,i=n.style||n.css,a=Object.keys(i);this.selector(r);for(var o=0;o<a.length;o++){var l=a[o];this.css(l,i[l])}}return this},fromJson:function(t){return this.resetToDefault(),this.appendFromJson(t),this},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var l=i[o];a[l.name]=l.strValue}t.push({selector:r?r.toString():"core",style:a})}return t}},Kl={appendFromString:function(t){var e,n,r,i=""+t;function a(){i=i.length>e.length?i.substr(e.length):""}function o(){n=n.length>r.length?n.substr(r.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var l=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!l){be("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}e=l[0];var s=l[1];if("core"!==s&&new ar(s).invalid)be("Skipping parsing of block: Invalid selector found in string stylesheet: "+s),a();else{var u=l[2],h=!1;n=u;for(var g=[];!n.match(/^\s*$/);){var x=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!x){be("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),h=!0;break}r=x[0];var E=x[1],m=x[2];this.properties[E]?this.parse(E,m)?(g.push({name:E,val:m}),o()):(be("Skipping property: Invalid property definition in: "+r),o()):(be("Skipping property: Invalid property name in: "+r),o())}if(h){a();break}this.selector(s);for(var S=0;S<g.length;S++){var A=g[S];this.css(A.name,A.val)}a()}}return this},fromString:function(t){return this.resetToDefault(),this.appendFromString(t),this}},Ze={};(function(){var t=yt,e=function(Tt){return"^"+Tt+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},n=function(Tt){var Mt=t+"|\\w+|rgb[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|hsl[a]?\\((?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*(?:(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+Tt+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+Mt+")\\s*\\,\\s*("+Mt+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Ze.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:n("mapData")},mapLayoutData:{mapping:!0,regex:n("mapLayoutData")},mapScratch:{mapping:!0,regex:n("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(Tt,Mt){switch(Tt.length){case 2:return"deg"!==Mt[0]&&"rad"!==Mt[0]&&"deg"!==Mt[1]&&"rad"!==Mt[1];case 1:return c(Tt[0])||"deg"===Mt[0]||"rad"===Mt[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(Tt){var Mt=Tt.length;return 1===Mt||2===Mt||4===Mt}}};var i={zeroNonZero:function(Tt,Mt){return(null==Tt||null==Mt)&&Tt!==Mt||0==Tt&&0!=Mt||0!=Tt&&0==Mt},any:function(Tt,Mt){return Tt!=Mt},emptyNonEmpty:function(Tt,Mt){var Bt=$(Tt),Xt=$(Mt);return Bt&&!Xt||!Bt&&Xt}},a=Ze.types,o=[{name:"label",type:a.text,triggersBounds:i.any,triggersZOrder:i.emptyNonEmpty},{name:"text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any}],l=[{name:"source-label",type:a.text,triggersBounds:i.any},{name:"source-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"source-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"source-text-offset",type:a.size,triggersBounds:i.any}],s=[{name:"target-label",type:a.text,triggersBounds:i.any},{name:"target-text-rotation",type:a.textRotation,triggersBounds:i.any},{name:"target-text-margin-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-margin-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"target-text-offset",type:a.size,triggersBounds:i.any}],u=[{name:"font-family",type:a.fontFamily,triggersBounds:i.any},{name:"font-style",type:a.fontStyle,triggersBounds:i.any},{name:"font-weight",type:a.fontWeight,triggersBounds:i.any},{name:"font-size",type:a.size,triggersBounds:i.any},{name:"text-transform",type:a.textTransform,triggersBounds:i.any},{name:"text-wrap",type:a.textWrap,triggersBounds:i.any},{name:"text-overflow-wrap",type:a.textOverflowWrap,triggersBounds:i.any},{name:"text-max-width",type:a.size,triggersBounds:i.any},{name:"text-outline-width",type:a.size,triggersBounds:i.any},{name:"line-height",type:a.positiveNumber,triggersBounds:i.any}],h=[{name:"text-valign",type:a.valign,triggersBounds:i.any},{name:"text-halign",type:a.halign,triggersBounds:i.any},{name:"color",type:a.color},{name:"text-outline-color",type:a.color},{name:"text-outline-opacity",type:a.zeroOneNumber},{name:"text-background-color",type:a.color},{name:"text-background-opacity",type:a.zeroOneNumber},{name:"text-background-padding",type:a.size,triggersBounds:i.any},{name:"text-border-opacity",type:a.zeroOneNumber},{name:"text-border-color",type:a.color},{name:"text-border-width",type:a.size,triggersBounds:i.any},{name:"text-border-style",type:a.borderStyle,triggersBounds:i.any},{name:"text-background-shape",type:a.textBackgroundShape,triggersBounds:i.any},{name:"text-justification",type:a.justification}],g=[{name:"events",type:a.bool},{name:"text-events",type:a.bool}],x=[{name:"display",type:a.display,triggersZOrder:i.any,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:a.visibility,triggersZOrder:i.any},{name:"opacity",type:a.zeroOneNumber,triggersZOrder:i.zeroNonZero},{name:"text-opacity",type:a.zeroOneNumber},{name:"min-zoomed-font-size",type:a.size},{name:"z-compound-depth",type:a.zCompoundDepth,triggersZOrder:i.any},{name:"z-index-compare",type:a.zIndexCompare,triggersZOrder:i.any},{name:"z-index",type:a.nonNegativeInt,triggersZOrder:i.any}],E=[{name:"overlay-padding",type:a.size,triggersBounds:i.any},{name:"overlay-color",type:a.color},{name:"overlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"overlay-shape",type:a.overlayShape,triggersBounds:i.any}],m=[{name:"underlay-padding",type:a.size,triggersBounds:i.any},{name:"underlay-color",type:a.color},{name:"underlay-opacity",type:a.zeroOneNumber,triggersBounds:i.zeroNonZero},{name:"underlay-shape",type:a.overlayShape,triggersBounds:i.any}],S=[{name:"transition-property",type:a.propList},{name:"transition-duration",type:a.time},{name:"transition-delay",type:a.time},{name:"transition-timing-function",type:a.easing}],A=function(Tt,Mt){return"label"===Mt.value?-Tt.poolIndex():Mt.pfValue},L=[{name:"height",type:a.nodeSize,triggersBounds:i.any,hashOverride:A},{name:"width",type:a.nodeSize,triggersBounds:i.any,hashOverride:A},{name:"shape",type:a.nodeShape,triggersBounds:i.any},{name:"shape-polygon-points",type:a.polygonPointList,triggersBounds:i.any},{name:"background-color",type:a.color},{name:"background-fill",type:a.fill},{name:"background-opacity",type:a.zeroOneNumber},{name:"background-blacken",type:a.nOneOneNumber},{name:"background-gradient-stop-colors",type:a.colors},{name:"background-gradient-stop-positions",type:a.percentages},{name:"background-gradient-direction",type:a.gradientDirection},{name:"padding",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"padding-relative-to",type:a.paddingRelativeTo,triggersBounds:i.any},{name:"bounds-expansion",type:a.boundsExpansion,triggersBounds:i.any}],P=[{name:"border-color",type:a.color},{name:"border-opacity",type:a.zeroOneNumber},{name:"border-width",type:a.size,triggersBounds:i.any},{name:"border-style",type:a.borderStyle}],_=[{name:"background-image",type:a.urls},{name:"background-image-crossorigin",type:a.bgCrossOrigin},{name:"background-image-opacity",type:a.zeroOneNumbers},{name:"background-image-containment",type:a.bgContainment},{name:"background-image-smoothing",type:a.bools},{name:"background-position-x",type:a.bgPos},{name:"background-position-y",type:a.bgPos},{name:"background-width-relative-to",type:a.bgRelativeTo},{name:"background-height-relative-to",type:a.bgRelativeTo},{name:"background-repeat",type:a.bgRepeat},{name:"background-fit",type:a.bgFit},{name:"background-clip",type:a.bgClip},{name:"background-width",type:a.bgWH},{name:"background-height",type:a.bgWH},{name:"background-offset-x",type:a.bgPos},{name:"background-offset-y",type:a.bgPos}],X=[{name:"position",type:a.position,triggersBounds:i.any},{name:"compound-sizing-wrt-labels",type:a.compoundIncludeLabels,triggersBounds:i.any},{name:"min-width",type:a.size,triggersBounds:i.any},{name:"min-width-bias-left",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-width-bias-right",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height",type:a.size,triggersBounds:i.any},{name:"min-height-bias-top",type:a.sizeMaybePercent,triggersBounds:i.any},{name:"min-height-bias-bottom",type:a.sizeMaybePercent,triggersBounds:i.any}],z=[{name:"line-style",type:a.lineStyle},{name:"line-color",type:a.color},{name:"line-fill",type:a.fill},{name:"line-cap",type:a.lineCap},{name:"line-opacity",type:a.zeroOneNumber},{name:"line-dash-pattern",type:a.numbers},{name:"line-dash-offset",type:a.number},{name:"line-gradient-stop-colors",type:a.colors},{name:"line-gradient-stop-positions",type:a.percentages},{name:"curve-style",type:a.curveStyle,triggersBounds:i.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:a.zeroOneNumber,triggersBounds:i.any},{name:"source-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"target-endpoint",type:a.edgeEndpoint,triggersBounds:i.any},{name:"control-point-step-size",type:a.size,triggersBounds:i.any},{name:"control-point-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"control-point-weights",type:a.numbers,triggersBounds:i.any},{name:"segment-distances",type:a.bidirectionalSizes,triggersBounds:i.any},{name:"segment-weights",type:a.numbers,triggersBounds:i.any},{name:"taxi-turn",type:a.bidirectionalSizeMaybePercent,triggersBounds:i.any},{name:"taxi-turn-min-distance",type:a.size,triggersBounds:i.any},{name:"taxi-direction",type:a.axisDirection,triggersBounds:i.any},{name:"edge-distances",type:a.edgeDistances,triggersBounds:i.any},{name:"arrow-scale",type:a.positiveNumber,triggersBounds:i.any},{name:"loop-direction",type:a.angle,triggersBounds:i.any},{name:"loop-sweep",type:a.angle,triggersBounds:i.any},{name:"source-distance-from-node",type:a.size,triggersBounds:i.any},{name:"target-distance-from-node",type:a.size,triggersBounds:i.any}],F=[{name:"ghost",type:a.bool,triggersBounds:i.any},{name:"ghost-offset-x",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-offset-y",type:a.bidirectionalSize,triggersBounds:i.any},{name:"ghost-opacity",type:a.zeroOneNumber}],M=[{name:"selection-box-color",type:a.color},{name:"selection-box-opacity",type:a.zeroOneNumber},{name:"selection-box-border-color",type:a.color},{name:"selection-box-border-width",type:a.size},{name:"active-bg-color",type:a.color},{name:"active-bg-opacity",type:a.zeroOneNumber},{name:"active-bg-size",type:a.size},{name:"outside-texture-bg-color",type:a.color},{name:"outside-texture-bg-opacity",type:a.zeroOneNumber}],V=[];Ze.pieBackgroundN=16,V.push({name:"pie-size",type:a.sizeMaybePercent});for(var Z=1;Z<=Ze.pieBackgroundN;Z++)V.push({name:"pie-"+Z+"-background-color",type:a.color}),V.push({name:"pie-"+Z+"-background-size",type:a.percent}),V.push({name:"pie-"+Z+"-background-opacity",type:a.zeroOneNumber});var K=[],it=Ze.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:a.arrowShape,triggersBounds:i.any},{name:"arrow-color",type:a.color},{name:"arrow-fill",type:a.arrowFill}].forEach(function(Tt){it.forEach(function(Mt){K.push({name:Mt+"-"+Tt.name,type:Tt.type,triggersBounds:Tt.triggersBounds})})},{});var ot=Ze.properties=[].concat(g,S,x,E,m,F,h,u,o,l,s,L,P,_,V,X,z,K,M),st=Ze.propertyGroups={behavior:g,transition:S,visibility:x,overlay:E,underlay:m,ghost:F,commonLabel:h,labelDimensions:u,mainLabel:o,sourceLabel:l,targetLabel:s,nodeBody:L,nodeBorder:P,backgroundImage:_,pie:V,compound:X,edgeLine:z,edgeArrow:K,core:M},vt=Ze.propertyGroupNames={};(Ze.propertyGroupKeys=Object.keys(st)).forEach(function(Tt){vt[Tt]=st[Tt].map(function(Mt){return Mt.name}),st[Tt].forEach(function(Mt){return Mt.groupKey=Tt})});var ft=Ze.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ze.propertyNames=ot.map(function(Tt){return Tt.name});for(var et=0;et<ot.length;et++){var Pt=ot[et];ot[Pt.name]=Pt}for(var Lt=0;Lt<ft.length;Lt++){var mt=ft[Lt],bt={name:mt.name,alias:!0,pointsTo:ot[mt.pointsTo]};ot.push(bt),ot[mt.name]=bt}})(),Ze.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Ze.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=W({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(s,u){for(var h=1;h<=Ze.pieBackgroundN;h++)s[u.name.replace("{{i}}",h)]=u.value;return s},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce(function(s,u){return Ze.arrowPrefixes.forEach(function(h){s[h+"-"+u.name]=u.value}),s},{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,l=this.parse(a,e[a]);n[a]=l}}return t.defaultProperties=n,t.defaultProperties},Ze.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var ys={parse:function(t,e,n,r){if(D(e))return this.parseImplWarn(t,e,n,r);var i,a=ki(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(i=yn(i))&&(i.value=yn(i.value)),i},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||be("The style property `".concat(t,": ").concat(e,"` is invalid")),!i||"width"!==i.name&&"height"!==i.name||"label"!==e||be("The style value of `label` is deprecated for `"+i.name+"`"),i},parseImpl:function(t,e,n,r){t=H(t);var i=this.properties[t],a=e,o=this.types;if(!i||void 0===e)return null;i.alias&&(t=(i=i.pointsTo).name);var l=c(e);l&&(e=e.trim());var s,u,h=i.type;if(!h)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(D(e))return{name:t,value:e,strValue:"fn",mapped:o.fn,bypass:n};if(!(!l||r||e.length<7||"a"!==e[1])){if(e.length>=7&&"d"===e[0]&&(s=new RegExp(o.data.regex).exec(e)))return!n&&{name:t,value:s,strValue:""+e,mapped:o.data,field:s[1],bypass:n};if(e.length>=10&&"m"===e[0]&&(u=new RegExp(o.mapData.regex).exec(e))){if(n||h.multiple)return!1;var x=o.mapData;if(!h.color&&!h.number)return!1;var E=this.parse(t,u[4]);if(!E||E.mapped)return!1;var m=this.parse(t,u[5]);if(!m||m.mapped)return!1;if(E.pfValue===m.pfValue||E.strValue===m.strValue)return be("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+E.strValue+"`"),this.parse(t,E.strValue);if(h.color){var S=E.value,A=m.value;if(!(S[0]!==A[0]||S[1]!==A[1]||S[2]!==A[2]||S[3]!==A[3]&&(null!=S[3]&&1!==S[3]||null!=A[3]&&1!==A[3])))return!1}return{name:t,value:u,strValue:""+e,mapped:x,field:u[1],fieldMin:parseFloat(u[2]),fieldMax:parseFloat(u[3]),valueMin:E.value,valueMax:m.value,bypass:n}}}if(h.multiple&&"multiple"!==r){var L;if(L=l?e.split(/\s+/):I(e)?e:[e],h.evenMultiple&&L.length%2!=0)return null;for(var P=[],_=[],X=[],z="",F=!1,M=0;M<L.length;M++){var V=this.parse(t,L[M],n,"multiple");F=F||c(V.value),P.push(V.value),X.push(null!=V.pfValue?V.pfValue:V.value),_.push(V.units),z+=(M>0?" ":"")+V.strValue}return h.validate&&!h.validate(P,_)?null:h.singleEnum&&F?1===P.length&&c(P[0])?{name:t,value:P[0],strValue:P[0],bypass:n}:null:{name:t,value:P,pfValue:X,strValue:z,bypass:n,units:_}}var K,it=function(){for(var jt=0;jt<h.enums.length;jt++)if(h.enums[jt]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(h.number){var ot,st="px";if(h.units&&(ot=h.units),h.implicitUnits&&(st=h.implicitUnits),!h.unitless)if(l){var vt="px|em"+(h.allowPercent?"|\\%":"");ot&&(vt=ot);var ft=e.match("^("+yt+")("+vt+")?$");ft&&(e=ft[1],ot=ft[2]||st)}else ot&&!h.implicitUnits||(ot=st);if(e=parseFloat(e),isNaN(e)&&void 0===h.enums)return null;if(isNaN(e)&&void 0!==h.enums)return e=a,it();if(h.integer&&(!N(K=e)||Math.floor(K)!==K)||void 0!==h.min&&(e<h.min||h.strictMin&&e===h.min)||void 0!==h.max&&(e>h.max||h.strictMax&&e===h.max))return null;var et={name:t,value:e,strValue:""+e+(ot||""),units:ot,bypass:n};return et.pfValue=h.unitless||"px"!==ot&&"em"!==ot?e:"px"!==ot&&ot?this.getEmSizeInPixels()*e:e,"ms"!==ot&&"s"!==ot||(et.pfValue="ms"===ot?e:1e3*e),"deg"!==ot&&"rad"!==ot||(et.pfValue="rad"===ot?e:Math.PI*e/180),"%"===ot&&(et.pfValue=e/100),et}if(h.propList){var Pt=[],Lt=""+e;if("none"!==Lt){for(var mt=Lt.split(/\s*,\s*|\s+/),_t=0;_t<mt.length;_t++){var bt=mt[_t].trim();this.properties[bt]?Pt.push(bt):be("`"+bt+"` is not a valid property name")}if(0===Pt.length)return null}return{name:t,value:Pt,strValue:0===Pt.length?"none":Pt.join(" "),bypass:n}}if(h.color){var Tt=function(t){return(I(t)?t:null)||dt[t.toLowerCase()]||function(e){var n,r,i;if((4===e.length||7===e.length)&&"#"===e[0])return 4===e.length?(n=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),i=parseInt(e[3]+e[3],16)):(n=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),i=parseInt(e[5]+e[6],16)),[n,r,i]}(t)||function(e){var n,r=new RegExp("^rgb[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%]?)(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(r){n=[];for(var i=[],a=1;a<=3;a++){var o=r[a];if("%"===o[o.length-1]&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;n.push(Math.floor(o))}if((i[1]||i[2]||i[3])&&!(i[1]&&i[2]&&i[3]))return;var u=r[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;n.push(u)}}return n}(t)||function(e){var n,r,i,a,o,l,s,u;function h(m,S,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?m+6*(S-m)*A:A<.5?S:A<2/3?m+(S-m)*(2/3-A)*6:m}var g=new RegExp("^hsl[a]?\\(((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?)))\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))[%])(?:\\s*,\\s*((?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))))?\\)$").exec(e);if(g){if((r=parseInt(g[1]))<0?r=(360- -1*r%360)%360:r>360&&(r%=360),r/=360,(i=parseFloat(g[2]))<0||i>100||(i/=100,(a=parseFloat(g[3]))<0||a>100)||(a/=100,void 0!==(o=g[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===i)l=s=u=Math.round(255*a);else{var x=a<.5?a*(1+i):a+i-a*i,E=2*a-x;l=Math.round(255*h(E,x,r+1/3)),s=Math.round(255*h(E,x,r)),u=Math.round(255*h(E,x,r-1/3))}n=[l,s,u,o]}return n}(t)}(e);return Tt?{name:t,value:Tt,pfValue:Tt,strValue:"rgb("+Tt[0]+","+Tt[1]+","+Tt[2]+")",bypass:n}:null}if(h.regex||h.regexes){if(h.enums){var Mt=it();if(Mt)return Mt}for(var Bt=h.regexes?h.regexes:[h.regex],Xt=0;Xt<Bt.length;Xt++){var zt=new RegExp(Bt[Xt]).exec(e);if(zt)return{name:t,value:h.singleRegexMatchValue?zt[1]:zt,strValue:""+e,bypass:n}}return null}return h.string?{name:t,value:""+e,strValue:""+e,bypass:n}:h.enums?it():null}},en=function t(e){if(!(this instanceof t))return new t(e);At(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):_e("A style must have a core reference")},nn=en.prototype;nn.instanceString=function(){return"style"},nn.clear=function(){for(var t=this._private,e=t.cy.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,t.contextStyles={},t.propDiffs={},this.cleanElements(e,!0),e.forEach(function(r){var i=r[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this},nn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},nn.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},nn.selector=function(t){var e="core"===t?null:new ar(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},nn.css=function(){var t=this,e=arguments;if(1===e.length)for(var n=e[0],r=0;r<t.properties.length;r++){var i=t.properties[r],a=n[i.name];void 0===a&&(a=n[j(i.name)]),void 0!==a&&this.cssRule(i.name,a)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},nn.style=nn.css,nn.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},nn.append=function(t){return q(t)?t.appendToStyle(this):I(t)?this.appendFromJson(t):c(t)&&this.appendFromString(t),this},en.fromJson=function(t,e){var n=new en(t);return n.fromJson(e),n},en.fromString=function(t,e){return new en(t).fromString(e)},[tn,Zl,jl,ho,Wl,Kl,Ze,ys].forEach(function(t){W(nn,t)}),en.types=nn.types,en.properties=nn.properties,en.propertyGroups=nn.propertyGroups,en.propertyGroupNames=nn.propertyGroupNames,en.propertyGroupKeys=nn.propertyGroupKeys;var Ql={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return e.style=q(t)?t.generateStyle(this):I(t)?en.fromJson(this,t):c(t)?en.fromString(this,t):en(this),e.style},updateStyle:function(){this.mutableElements().updateStyle()}},Sr={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(c(a[0]))return o[t=a[0]];if(C(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,N(r)&&(o.x=r),N(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[1],"x"!==(t=a[0])&&"y"!==t||!N(e)||(o[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,a,o,l=arguments,s=this._private.pan;if(!this._private.panningEnabled)return this;switch(l.length){case 1:C(t)&&(a=(i=l[0]).x,o=i.y,N(a)&&(s.x+=a),N(o)&&(s.y+=o),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!N(r)||(s[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){var n,r;if(N(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled&&(c(t)?t=this.$(t):C(r=t)&&N(r.x1)&&N(r.x2)&&N(r.y1)&&N(r.y2)?((n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1):G(t)||(t=this.mutableElements()),!G(t)||!t.empty())){n=n||t.boundingBox();var o,l=this.width(),s=this.height();if(e=N(e)?e:0,!isNaN(l)&&!isNaN(s)&&l>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:o=(o=(o=Math.min((l-2*e)/n.w,(s-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(l-o*(n.x1+n.x2))/2,y:(s-o*(n.y1+n.y2))/2}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return N(t)&&N(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):N(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:N(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,a=r.zoom,o=!1;return r.zoomingEnabled||(o=!0),N(t)?n=t:C(t)&&(n=t.level,null!=t.position?e=Fr(t.position,a,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,!o&&N(n)&&n!==a&&(null==e||N(e.x)&&N(e.y))?null!=e?{zoomed:!0,panned:!0,zoom:n,pan:{x:-n/a*(e.x-i.x)+e.x,y:-n/a*(e.y-i.y)+e.y}}:{zoomed:!0,panned:!1,zoom:n,pan:i}:null},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],a=!1,o=!1;if(!t)return this;if(N(t.zoom)||(n=!1),C(t.pan)||(r=!1),!n&&!r)return this;if(n){var l=t.zoom;l<e.minZoom||l>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=l,i.push("zoom"))}if(r&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var s=t.pan;N(s.x)&&(e.pan.x=s.x,o=!1),N(s.y)&&(e.pan.y=s.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(c(t)){var n=t;t=this.mutableElements().filter(n)}else G(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),a=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(a-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=w.getComputedStyle(r),{width:r.clientWidth-(e=function(i){return parseFloat(t.getPropertyValue(i))})("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}},multiClickDebounceTime:function(t){return t?(this._private.multiClickDebounceTime=t,this):this._private.multiClickDebounceTime}};Sr.centre=Sr.center,Sr.autolockNodes=Sr.autolock,Sr.autoungrabifyNodes=Sr.autoungrabify;var Ei={data:we.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:we.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:we.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:we.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Ei.attr=Ei.data,Ei.removeAttr=Ei.removeData;var Di=function(t){var e=this,n=(t=W({},t)).container;n&&!U(n)&&U(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var a=void 0!==w&&void 0!==n&&!t.headless,o=t;o.layout=W({name:a?"grid":"null"},o.layout),o.renderer=W({name:a?"canvas":"null"},o.renderer);var l=function(h,g,x){return void 0!==g?g:void 0!==x?x:h},s=this._private={container:n,ready:!1,options:o,elements:new $e(this),listeners:[],aniEles:new $e(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:N(o.zoom)?o.zoom:1,pan:{x:C(o.pan)&&N(o.pan.x)?o.pan.x:0,y:C(o.pan)&&N(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),s.styleEnabled&&e.setStyle([]);var u=W({},o,o.renderer);e.initRenderer(u),function(h,g){if(h.some(rt))return Hr.all(h).then(g);g(h)}([o.style,o.elements],function(h){var g=h[0],x=h[1];s.styleEnabled&&e.style().append(g),function(E,m,S){e.notifications(!1);var A=e.mutableElements();A.length>0&&A.remove(),null!=E&&(C(E)||I(E))&&e.add(E),e.one("layoutready",function(P){e.notifications(!0),e.emit(P),e.one("load",m),e.emitAndNotify("load")}).one("layoutstop",function(){e.one("done",S),e.emit("done")});var L=W({},e._private.options.layout);L.eles=e.elements(),e.layout(L).run()}(x,function(){e.startAnimationLoop(),s.ready=!0,D(o.ready)&&e.on("ready",o.ready);for(var E=0;E<i.length;E++)e.on("ready",i[E]);r&&(r.readies=[]),e.emit("ready")},o.done)})},ya=Di.prototype;W(ya,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!U(t)&&U(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(W({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return yn(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(C(t)){if(e.startBatch(),t.elements){var i={},a=function(A,L){for(var P=[],_=[],X=0;X<A.length;X++){var z=A[X];if(z.data.id){var F=""+z.data.id,M=e.getElementById(F);i[F]=!0,0!==M.length?_.push({ele:M,json:z}):(L&&(z.group=L),P.push(z))}else be("cy.json() cannot handle elements without an ID attribute")}e.add(P);for(var V=0;V<_.length;V++){var Z=_[V];Z.ele.json(Z.json)}};if(I(t.elements))a(t.elements);else for(var o=["nodes","edges"],l=0;l<o.length;l++){var s=o[l],u=t.elements[s];I(u)&&a(u,s)}var h=e.collection();r.filter(function(A){return!i[A.id()]}).forEach(function(A){A.isParent()?h.merge(A):A.remove()}),h.forEach(function(A){return A.children().move({parent:null})}),h.forEach(function(A){return(L=A,e.getElementById(L.id())).remove();var L})}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],x=0;x<g.length;x++){var E=g[x];null!=t[E]&&e[E](t[E])}return e.endBatch(),this}var m={};t?m.elements=this.elements().map(function(A){return A.json()}):(m.elements={},r.forEach(function(A){var L=A.group();m.elements[L]||(m.elements[L]=[]),m.elements[L].push(A.json())})),this._private.styleEnabled&&(m.style=e.style().json()),m.data=yn(e.data());var S=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=yn(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=yn(S.renderer),m.hideEdgesOnViewport=S.hideEdgesOnViewport,m.textureOnViewport=S.textureOnViewport,m.wheelSensitivity=S.wheelSensitivity,m.motionBlur=S.motionBlur,m.multiClickDebounceTime=S.multiClickDebounceTime,m}}),ya.$id=ya.getElementById,[zl,Vl,vs,lo,ga,ql,uo,va,Ql,Sr,Ei].forEach(function(t){W(ya,t)});var Jl={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},Qr=function(t){return t.scratch("breadthfirst")},ms=function(t,e){return t.scratch("breadthfirst",e)};function bs(t){this.options=W({},Jl,t)}bs.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,a=i.nodes().filter(function(Yt){return!Yt.isParent()}),o=i,l=n.directed,s=n.maximal||n.maximalAdjustments>0,u=Ke(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(G(n.roots))t=n.roots;else if(I(n.roots)){for(var h=[],g=0;g<n.roots.length;g++){var E=r.getElementById(n.roots[g]);h.push(E)}t=r.collection(h)}else if(c(n.roots))t=r.$(n.roots);else if(l)t=a.roots();else{var m=i.components();t=r.collection();for(var S=function(Yt){var Wt=m[Yt],Qt=Wt.maxDegree(!1),Y=Wt.filter(function(ht){return ht.degree(!1)===Qt});t=t.add(Y)},A=0;A<m.length;A++)S(A)}var L=[],P={},_=function(Yt,Wt){null==L[Wt]&&(L[Wt]=[]);var Qt=L[Wt].length;L[Wt].push(Yt),ms(Yt,{index:Qt,depth:Wt})};o.bfs({roots:t,directed:n.directed,visit:function(Yt,Wt,Qt,Y,ht){var xt=Yt[0],Ct=xt.id();_(xt,ht),P[Ct]=!0}});for(var X=[],z=0;z<a.length;z++){var F=a[z];P[F.id()]||X.push(F)}var M=function(Yt){for(var Wt=L[Yt],Qt=0;Qt<Wt.length;Qt++){var Y=Wt[Qt];null!=Y?ms(Y,{depth:Yt,index:Qt}):(Wt.splice(Qt,1),Qt--)}},V=function(){for(var Yt=0;Yt<L.length;Yt++)M(Yt)},Z=function(Yt,Wt){for(var Qt=Qr(Yt),Y=Yt.incomers().filter(function(Gt){return Gt.isNode()&&i.has(Gt)}),ht=-1,xt=Yt.id(),Ct=0;Ct<Y.length;Ct++){var Ht=Qr(Y[Ct]);ht=Math.max(ht,Ht.depth)}return Qt.depth<=ht&&(Wt[xt]?null:(Kt=ht+1,ae=Qr(Gt=Yt),L[ae.depth][ae.index]=null,_(Gt,Kt),Wt[xt]=!0,!0));var Gt,Kt,ae};if(l&&s){var K=[],it={},ot=function(Yt){return K.push(Yt)};for(a.forEach(function(Yt){return K.push(Yt)});K.length>0;){var st=K.shift(),vt=Z(st,it);if(vt)st.outgoers().filter(function(Yt){return Yt.isNode()&&i.has(Yt)}).forEach(ot);else if(null===vt){be("Detected double maximal shift for node `"+st.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}V();var ft=0;if(n.avoidOverlap)for(var et=0;et<a.length;et++){var Pt=a[et].layoutDimensions(n);ft=Math.max(ft,Pt.w,Pt.h)}for(var _t={},bt=function(Yt){if(_t[Yt.id()])return _t[Yt.id()];for(var Wt=Qr(Yt).depth,Qt=Yt.neighborhood(),Y=0,ht=0,xt=0;xt<Qt.length;xt++){var Ct=Qt[xt];if(!Ct.isEdge()&&!Ct.isParent()&&a.has(Ct)){var wt=Qr(Ct);if(null!=wt){var Ht=wt.index,Gt=wt.depth;null!=Ht&&null!=Gt&&Gt<Wt&&(Y+=Ht/L[Gt].length,ht++)}}}return Y/=ht=Math.max(1,ht),0===ht&&(Y=0),_t[Yt.id()]=Y,Y},Tt=function(Yt,Wt){var Qt=bt(Yt)-bt(Wt);return 0===Qt?Nt(Yt.id(),Wt.id()):Qt},Mt=0;Mt<L.length;Mt++)L[Mt].sort(Tt),M(Mt);for(var Bt=[],Xt=0;Xt<X.length;Xt++)Bt.push(X[Xt]);L.unshift(Bt),V();for(var zt=0,jt=0;jt<L.length;jt++)zt=Math.max(L[jt].length,zt);var Zt=u.x1+u.w/2,ne=u.x1+u.h/2,oe=L.reduce(function(Yt,Wt){return Math.max(Yt,Wt.length)},0);return i.nodes().layoutPositions(this,n,function(Yt){var Wt=Qr(Yt),Qt=Wt.depth,Y=Wt.index,ht=L[Qt].length,xt=Math.max(u.w/((n.grid?oe:ht)+1),ft),Ct=Math.max(u.h/(L.length+1),ft),wt=Math.min(u.w/2/L.length,u.h/2/L.length);if(wt=Math.max(wt,ft),n.circle){var Ht=wt*Qt+wt-(L.length>0&&L[0].length<=3?wt/2:0),Gt=2*Math.PI/L[Qt].length*Y;return 0===Qt&&1===L[0].length&&(Ht=1),{x:Zt+Ht*Math.cos(Gt),y:ne+Ht*Math.sin(Gt)}}return{x:Zt+(Y+1-(ht+1)/2)*xt,y:(Qt+1)*Ct}}),this};var tu={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function xs(t){this.options=W({},tu,t)}xs.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,a=r.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o,l=Ke(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s=l.x1+l.w/2,u=l.y1+l.h/2,h=(void 0===e.sweep?2*Math.PI-2*Math.PI/a.length:e.sweep)/Math.max(1,a.length-1),g=0,x=0;x<a.length;x++){var E=a[x].layoutDimensions(e);g=Math.max(g,E.w,E.h)}if(o=N(e.radius)?e.radius:a.length<=1?0:Math.min(l.h,l.w)/2-g,a.length>1&&e.avoidOverlap){g*=1.75;var A=Math.cos(h)-Math.cos(0),L=Math.sin(h)-Math.sin(0),P=Math.sqrt(g*g/(A*A+L*L));o=Math.max(P,o)}return r.nodes().layoutPositions(this,e,function(_,X){var z=e.startAngle+X*h*(i?1:-1),F=o*Math.cos(z),M=o*Math.sin(z);return{x:s+F,y:u+M}}),this};var ws,eu={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Es(t){this.options=W({},eu,t)}Es.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles,a=i.nodes().not(":parent"),o=Ke(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),l=o.x1+o.w/2,s=o.y1+o.h/2,u=[],h=0,g=0;g<a.length;g++){var x,E=a[g];x=e.concentric(E),u.push({value:x,node:E}),E._private.scratch.concentric=x}a.updateStyle();for(var m=0;m<a.length;m++){var S=a[m].layoutDimensions(e);h=Math.max(h,S.w,S.h)}u.sort(function(Yt,Wt){return Wt.value-Yt.value});for(var A=e.levelWidth(a),L=[[]],P=L[0],_=0;_<u.length;_++){var X=u[_];P.length>0&&Math.abs(P[0].value-X.value)>=A&&L.push(P=[]),P.push(X)}var z=h+e.minNodeSpacing;if(!e.avoidOverlap){var F=L.length>0&&L[0].length>1,M=(Math.min(o.w,o.h)/2-z)/(L.length+F?1:0);z=Math.min(z,M)}for(var V=0,Z=0;Z<L.length;Z++){var K=L[Z],it=void 0===e.sweep?2*Math.PI-2*Math.PI/K.length:e.sweep,ot=K.dTheta=it/Math.max(1,K.length-1);if(K.length>1&&e.avoidOverlap){var st=Math.cos(ot)-Math.cos(0),vt=Math.sin(ot)-Math.sin(0),ft=Math.sqrt(z*z/(st*st+vt*vt));V=Math.max(ft,V)}K.r=V,V+=z}if(e.equidistant){for(var et=0,Pt=0,Lt=0;Lt<L.length;Lt++)et=Math.max(et,L[Lt].r-Pt);Pt=0;for(var _t=0;_t<L.length;_t++){var bt=L[_t];0===_t&&(Pt=bt.r),bt.r=Pt,Pt+=et}}for(var Tt={},Mt=0;Mt<L.length;Mt++)for(var Bt=L[Mt],Xt=Bt.dTheta,zt=Bt.r,jt=0;jt<Bt.length;jt++){var Zt=Bt[jt],ne=e.startAngle+(n?1:-1)*Xt*jt,oe={x:l+zt*Math.cos(ne),y:s+zt*Math.sin(ne)};Tt[Zt.node.id()]=oe}return i.nodes().layoutPositions(this,e,function(Yt){var Wt=Yt.id();return Tt[Wt]}),this};var nu={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function ma(t){this.options=W({},nu,t),this.options.layout=this}ma.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),ws=!0===t.debug;var r=ru(e,n,t);ws&&(void 0)(r),t.randomize&&ou(r);var i=hn(),a=function(){su(r,e,t),!0===t.fit&&e.fit(t.padding)},o=function(h){return!(n.stopped||h>=t.numIter||(lu(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},l=function(){if(!0===t.animate||!1===t.animate)a(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var h=t.eles.nodes(),g=Ds(r,t,h);h.layoutPositions(n,t,g)}},s=0,u=!0;if(!0===t.animate)!function h(){for(var g=0;u&&g<t.refresh;)u=o(s),s++,g++;u?(hn()-i>=t.animationThreshold&&a(),gr(h)):(Ts(r,t),l())}();else{for(;u;)u=o(s),s++;Ts(r,t),l()}return this},ma.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},ma.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var ru=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:Ke(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},o=n.eles.components(),l={},s=0;s<o.length;s++)for(var u=o[s],h=0;h<u.length;h++)l[u[h].id()]=s;for(s=0;s<a.nodeSize;s++){var g=(A=i[s]).layoutDimensions(n);(et={}).isLocked=A.locked(),et.id=A.data("id"),et.parentId=A.data("parent"),et.cmptId=l[A.id()],et.children=[],et.positionX=A.position("x"),et.positionY=A.position("y"),et.offsetX=0,et.offsetY=0,et.height=g.w,et.width=g.h,et.maxX=et.positionX+et.width/2,et.minX=et.positionX-et.width/2,et.maxY=et.positionY+et.height/2,et.minY=et.positionY-et.height/2,et.padLeft=parseFloat(A.style("padding")),et.padRight=parseFloat(A.style("padding")),et.padTop=parseFloat(A.style("padding")),et.padBottom=parseFloat(A.style("padding")),et.nodeRepulsion=D(n.nodeRepulsion)?n.nodeRepulsion(A):n.nodeRepulsion,a.layoutNodes.push(et),a.idToIndex[et.id]=s}var x=[],E=0,m=-1,S=[];for(s=0;s<a.nodeSize;s++){var A,L=(A=a.layoutNodes[s]).parentId;null!=L?a.layoutNodes[a.idToIndex[L]].children.push(A.id):(x[++m]=A.id,S.push(A.id))}for(a.graphSet.push(S);E<=m;){var P=x[E++],X=a.layoutNodes[a.idToIndex[P]].children;if(X.length>0)for(a.graphSet.push(X),s=0;s<X.length;s++)x[++m]=X[s]}for(s=0;s<a.graphSet.length;s++){var z=a.graphSet[s];for(h=0;h<z.length;h++)a.indexToGraph[a.idToIndex[z[h]]]=s}for(s=0;s<a.edgeSize;s++){var M=r[s],V={};V.id=M.data("id"),V.sourceId=M.data("source"),V.targetId=M.data("target");var Z=D(n.idealEdgeLength)?n.idealEdgeLength(M):n.idealEdgeLength,K=D(n.edgeElasticity)?n.edgeElasticity(M):n.edgeElasticity,it=a.idToIndex[V.sourceId],ot=a.idToIndex[V.targetId];if(a.indexToGraph[it]!=a.indexToGraph[ot]){for(var st=iu(V.sourceId,V.targetId,a),vt=a.graphSet[st],ft=0,et=a.layoutNodes[it];-1===vt.indexOf(et.id);)et=a.layoutNodes[a.idToIndex[et.parentId]],ft++;for(et=a.layoutNodes[ot];-1===vt.indexOf(et.id);)et=a.layoutNodes[a.idToIndex[et.parentId]],ft++;Z*=ft*n.nestingFactor}V.idealLength=Z,V.elasticity=K,a.layoutEdges.push(V)}return a},iu=function(t,e,n){var r=au(t,e,0,n);return 2>r.count?0:r.graph},au=function t(e,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(e)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,l=0;l<a.length;l++){var h=i.layoutNodes[i.idToIndex[a[l]]].children;if(0!==h.length){var g=t(e,n,i.indexToGraph[i.idToIndex[h[0]]],i);if(0!==g.count){if(1!==g.count)return g;if(2==++o)break}}}return{count:o,graph:r}},ou=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},Ds=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach(function(a){var o=t.layoutNodes[t.idToIndex[a.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(a,o){var l=t.layoutNodes[t.idToIndex[a.data("id")]];return e.boundingBox?{x:r.x1+(l.positionX-i.x1)/i.w*r.w,y:r.y1+(l.positionY-i.y1)/i.h*r.h}:{x:l.positionX,y:l.positionY}}},su=function(t,e,n){var r=n.layout,i=n.eles.nodes(),a=Ds(t,n,i);i.positions(a),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},lu=function(t,e,n){uu(t,e),du(t),fu(t,e),pu(t),gu(t)},uu=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=t.layoutNodes[t.idToIndex[r[a]]],l=a+1;l<i;l++)hu(o,t.layoutNodes[t.idToIndex[r[l]]],t,e)},Ls=function(t){return-t+2*t*Math.random()},hu=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,a=e.positionY-t.positionY;0===i&&0===a&&(i=Ls(1),a=Ls(1));var o=cu(t,e,i,a);if(o>0)var l=(u=r.nodeOverlap*o)*i/(S=Math.sqrt(i*i+a*a)),s=u*a/S;else{var u,h=ba(t,i,a),g=ba(e,-1*i,-1*a),x=g.x-h.x,E=g.y-h.y,m=x*x+E*E,S=Math.sqrt(m);l=(u=(t.nodeRepulsion+e.nodeRepulsion)/m)*x/S,s=u*E/S}t.isLocked||(t.offsetX-=l,t.offsetY-=s),e.isLocked||(e.offsetX+=l,e.offsetY+=s)}},cu=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var a=t.maxY-e.minY;else a=e.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},ba=function(t,e,n){var r=t.positionX,i=t.positionY,a=t.height||1,o=t.width||1,l=n/e,s=a/o,u={};return 0===e&&0<n||0===e&&0>n?(u.x=r,u.y=i+a/2,u):0<e&&-1*s<=l&&l<=s?(u.x=r+o/2,u.y=i+o*n/2/e,u):0>e&&-1*s<=l&&l<=s?(u.x=r-o/2,u.y=i-o*n/2/e,u):0<n&&(l<=-1*s||l>=s)?(u.x=r+a*e/2/n,u.y=i+a/2,u):(0>n&&(l<=-1*s||l>=s)&&(u.x=r-a*e/2/n,u.y=i-a/2),u)},du=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],a=t.layoutNodes[t.idToIndex[r.sourceId]],l=t.layoutNodes[t.idToIndex[r.targetId]],s=l.positionX-a.positionX,u=l.positionY-a.positionY;if(0!==s||0!==u){var h=ba(a,s,u),g=ba(l,-1*s,-1*u),x=g.x-h.x,E=g.y-h.y,m=Math.sqrt(x*x+E*E),S=Math.pow(r.idealLength-m,2)/r.elasticity;if(0!==m)var A=S*x/m,L=S*E/m;else A=0,L=0;a.isLocked||(a.offsetX+=A,a.offsetY+=L),l.isLocked||(l.offsetX-=A,l.offsetY-=L)}}},fu=function(t,e){if(0!==e.gravity)for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var a=t.clientHeight/2,o=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[t.layoutNodes[t.idToIndex[r[0]]].parentId]];a=s.positionX,o=s.positionY}for(var u=0;u<i;u++){var h=t.layoutNodes[t.idToIndex[r[u]]];if(!h.isLocked){var g=a-h.positionX,x=o-h.positionY,E=Math.sqrt(g*g+x*x);if(E>1){var S=e.gravity*x/E;h.offsetX+=e.gravity*g/E,h.offsetY+=S}}}}},pu=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var a=n[r++],l=t.layoutNodes[t.idToIndex[a]],s=l.children;if(0<s.length&&!l.isLocked){for(var u=l.offsetX,h=l.offsetY,g=0;g<s.length;g++){var x=t.layoutNodes[t.idToIndex[s[g]]];x.offsetX+=u,x.offsetY+=h,n[++i]=s[g]}l.offsetX=0,l.offsetY=0}}},gu=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=vu(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,yu(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},vu=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},yu=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a?t(i,n):void 0}},Ts=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}var l=0;for(i=0;i<r.length;i++)if(S=r[i]){S.x1=1/0,S.x2=-1/0,S.y1=1/0,S.y2=-1/0;for(var s=0;s<S.length;s++){var u=S[s];S.x1=Math.min(S.x1,u.positionX-u.width/2),S.x2=Math.max(S.x2,u.positionX+u.width/2),S.y1=Math.min(S.y1,u.positionY-u.height/2),S.y2=Math.max(S.y2,u.positionY+u.height/2)}S.w=S.x2-S.x1,S.h=S.y2-S.y1,l+=S.w*S.h}r.sort(function(A,L){return L.w*L.h-A.w*A.h});var h=0,g=0,x=0,E=0,m=Math.sqrt(l)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var S;if(S=r[i]){for(s=0;s<S.length;s++)(u=S[s]).isLocked||(u.positionX+=h-S.x1,u.positionY+=g-S.y1);h+=S.w+e.componentSpacing,x+=S.w+e.componentSpacing,E=Math.max(E,S.h),x>m&&(g+=E+e.componentSpacing,h=0,x=0,E=0)}}},mu={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ss(t){this.options=W({},mu,t)}Ss.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=r.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=Ke(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===a.h||0===a.w)r.nodes().layoutPositions(this,e,function(Tt){return{x:a.x1,y:a.y1}});else{var o=i.size(),l=Math.sqrt(o*a.h/a.w),s=Math.round(l),u=Math.round(a.w/a.h*l),h=function(Tt){if(null==Tt)return Math.min(s,u);Math.min(s,u)==s?s=Tt:u=Tt},g=function(Tt){if(null==Tt)return Math.max(s,u);Math.max(s,u)==s?s=Tt:u=Tt},x=e.rows,E=null!=e.cols?e.cols:e.columns;if(null!=x&&null!=E)s=x,u=E;else if(null!=x&&null==E)s=x,u=Math.ceil(o/s);else if(null==x&&null!=E)u=E,s=Math.ceil(o/u);else if(u*s>o){var m=h(),S=g();(m-1)*S>=o?h(m-1):(S-1)*m>=o&&g(S-1)}else for(;u*s<o;){var A=h(),L=g();(L+1)*A>=o?g(L+1):h(A+1)}var P=a.w/u,_=a.h/s;if(e.condense&&(P=0,_=0),e.avoidOverlap)for(var X=0;X<i.length;X++){var z=i[X],F=z._private.position;null!=F.x&&null!=F.y||(F.x=0,F.y=0);var M=z.layoutDimensions(e),V=e.avoidOverlapPadding,K=M.h+V;P=Math.max(P,M.w+V),_=Math.max(_,K)}for(var it={},ot=function(Tt,Mt){return!!it["c-"+Tt+"-"+Mt]},st=function(Tt,Mt){it["c-"+Tt+"-"+Mt]=!0},vt=0,ft=0,et=function(){++ft>=u&&(ft=0,vt++)},Pt={},Lt=0;Lt<i.length;Lt++){var mt=i[Lt],_t=e.position(mt);if(_t&&(void 0!==_t.row||void 0!==_t.col)){var bt={row:_t.row,col:_t.col};if(void 0===bt.col)for(bt.col=0;ot(bt.row,bt.col);)bt.col++;else if(void 0===bt.row)for(bt.row=0;ot(bt.row,bt.col);)bt.row++;Pt[mt.id()]=bt,st(bt.row,bt.col)}}i.layoutPositions(this,e,function(Tt,Mt){var Bt,Xt;if(Tt.locked()||Tt.isParent())return!1;var zt=Pt[Tt.id()];if(zt)Bt=zt.col*P+P/2+a.x1,Xt=zt.row*_+_/2+a.y1;else{for(;ot(vt,ft);)et();Bt=ft*P+P/2+a.x1,Xt=vt*_+_/2+a.y1,st(vt,ft),et()}return{x:Bt,y:Xt}})}return this};var bu={ready:function(){},stop:function(){}};function co(t){this.options=W({},bu,t)}co.prototype.run=function(){var t=this.options,e=t.eles;return this.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",t.ready),this.emit("layoutready"),this.one("layoutstop",t.stop),this.emit("layoutstop"),this},co.prototype.stop=function(){return this};var xu={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Is(t){this.options=W({},xu,t)}Is.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=D(t.positions);return e.layoutPositions(this,t,function(r,i){var a=function(o){if(null==t.positions)return{x:(s=o.position()).x,y:s.y};var s;if(n)return t.positions(o);var l=t.positions[o._private.data.id];return null==l?null:l}(r);return!r.locked()&&null!=a&&a}),this};var wu={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ps(t){this.options=W({},wu,t)}Ps.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles,r=Ke(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.nodes().layoutPositions(this,t,function(i,a){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}}),this};var Eu=[{name:"breadthfirst",impl:bs},{name:"circle",impl:xs},{name:"concentric",impl:Es},{name:"cose",impl:ma},{name:"grid",impl:Ss},{name:"null",impl:co},{name:"preset",impl:Is},{name:"random",impl:Ps}];function As(t){this.options=t,this.notifications=0}var _s=function(){},Cs=function(){throw new Error("A headless instance can not render images")};As.prototype={recalculateRenderedStyle:_s,notify:function(){this.notifications++},init:_s,isHeadless:function(){return!0},png:Cs,jpg:Cs};var Du={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(s,u,h,g,x,E,m){return x.x-h/2-m<=s&&s<=x.x+h/2+m&&x.y-h/2-m<=u&&u<=x.y+h/2+m},r=function(s,u,h,g,x){var E=s*Math.cos(g)-u*Math.sin(g),m=(s*Math.sin(g)+u*Math.cos(g))*h;return{x:E*h+x.x,y:m+x.y}},i=function(s,u,h,g){for(var x=[],E=0;E<s.length;E+=2)x.push(r(s[E],s[E+1],u,h,g));return x},a=function(s){for(var u=[],h=0;h<s.length;h++){var g=s[h];u.push(g.x,g.y)}return u},o=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},l=function(s,u){c(u)&&(u=t[u]),t[s]=W({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(h,g,x,E,m,S){var A=a(i(this.points,x+2*S,E,m));return Qe(h,g,A)},roughCollide:n,draw:function(h,g,x,E){var m=i(this.points,g,x,E);e.arrowShapeImpl("polygon")(h,m)},spacing:function(h){return 0},gap:o},u)};l("none",{collide:Or,roughCollide:Or,draw:ri,spacing:Gi,gap:Gi}),l("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),l("arrow","triangle"),l("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(s,u,h,g,x){var E=i(this.points,u,h,g),m=this.controlPoint,S=r(m[0],m[1],u,h,g);e.arrowShapeImpl(this.name)(s,E,S)},gap:function(s){return.8*o(s)}}),l("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,u,h,g,x,E,m){var S=a(i(this.points,h+2*m,g,x)),A=a(i(this.pointsTee,h+2*m,g,x));return Qe(s,u,S)||Qe(s,u,A)},draw:function(s,u,h,g,x){var E=i(this.points,u,h,g),m=i(this.pointsTee,u,h,g);e.arrowShapeImpl(this.name)(s,E,m)}}),l("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,u,h,g,x,E,m){var S=x,A=Math.pow(S.x-s,2)+Math.pow(S.y-u,2)<=Math.pow((h+2*m)*this.radius,2),L=a(i(this.points,h+2*m,g,x));return Qe(s,u,L)||A},draw:function(s,u,h,g,x){var E=i(this.pointsTr,u,h,g);e.arrowShapeImpl(this.name)(s,E,g.x,g.y,this.radius*u)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,u){var h=this.baseCrossLinePts.slice(),g=u/s;return h[3]=h[3]-g,h[5]=h[5]-g,h},collide:function(s,u,h,g,x,E,m){var S=a(i(this.points,h+2*m,g,x)),A=a(i(this.crossLinePts(h,E),h+2*m,g,x));return Qe(s,u,S)||Qe(s,u,A)},draw:function(s,u,h,g,x){var E=i(this.points,u,h,g),m=i(this.crossLinePts(u,x),u,h,g);e.arrowShapeImpl(this.name)(s,E,m)}}),l("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return.525*o(s)}}),l("circle",{radius:.15,collide:function(s,u,h,g,x,E,m){var S=x;return Math.pow(S.x-s,2)+Math.pow(S.y-u,2)<=Math.pow((h+2*m)*this.radius,2)},draw:function(s,u,h,g,x){e.arrowShapeImpl(this.name)(s,g.x,g.y,this.radius*u)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),l("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),l("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),l("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),l("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return.95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})}},Lu={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],l=n.pan(),s=n.zoom();return[((t-i)/o-l.x)/s,((e-a)/o-l.y)/s]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=w.getComputedStyle(t),r=function(z){return parseFloat(n.getPropertyValue(z))},i=r("padding-left"),a=r("padding-right"),o=r("padding-top"),l=r("padding-bottom"),s=r("border-left-width"),u=r("border-right-width"),h=r("border-top-width"),g=(r("border-bottom-width"),t.clientWidth);return this.containerBB=[e.left+i+s,e.top+o+h,g-(i+a),t.clientHeight-(o+l),e.width/(g+(s+u))]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,a,o=this,l=this,s=l.getCachedZSortedEles(),u=[],h=l.cy.zoom(),g=l.cy.hasCompoundNodes(),x=(r?24:8)/h,E=(r?8:2)/h,m=(r?8:2)/h,S=1/0;function A(M,V){if(M.isNode()){if(a)return;a=M,u.push(M)}if(M.isEdge()&&(null==V||V<S))if(i){if(i.pstyle("z-compound-depth").value===M.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===M.pstyle("z-compound-depth").value)for(var Z=0;Z<u.length;Z++)if(u[Z].isEdge()){u[Z]=M,i=M,S=null!=V?V:S;break}}else u.push(M),i=M,S=null!=V?V:S}function L(M){var V=M.outerWidth()+2*E,Z=M.outerHeight()+2*E,K=V/2,it=Z/2,ot=M.position();if(ot.x-K<=t&&t<=ot.x+K&&ot.y-it<=e&&e<=ot.y+it&&l.nodeShapes[o.getNodeShape(M)].checkPoint(t,e,0,V,Z,ot.x,ot.y))return A(M,0),!0}function P(M){var V,Z=M._private,K=Z.rscratch,it=M.pstyle("width").pfValue,ot=M.pstyle("arrow-scale").value,st=it/2+x,vt=st*st,ft=2*st,et=Z.source,Pt=Z.target;if("segments"===K.edgeType||"straight"===K.edgeType||"haystack"===K.edgeType){for(var Lt=K.allpts,mt=0;mt+3<Lt.length;mt+=2)if(Ga(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],ft)&&vt>(V=Ra(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3])))return A(M,V),!0}else if("bezier"===K.edgeType||"multibezier"===K.edgeType||"self"===K.edgeType||"compound"===K.edgeType)for(Lt=K.allpts,mt=0;mt+5<K.allpts.length;mt+=4)if(xo(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],Lt[mt+4],Lt[mt+5],ft)&&vt>(V=Hi(t,e,Lt[mt],Lt[mt+1],Lt[mt+2],Lt[mt+3],Lt[mt+4],Lt[mt+5])))return A(M,V),!0;et=et||Z.source,Pt=Pt||Z.target;var _t=o.getArrowWidth(it,ot),bt=[{name:"source",x:K.arrowStartX,y:K.arrowStartY,angle:K.srcArrowAngle},{name:"target",x:K.arrowEndX,y:K.arrowEndY,angle:K.tgtArrowAngle},{name:"mid-source",x:K.midX,y:K.midY,angle:K.midsrcArrowAngle},{name:"mid-target",x:K.midX,y:K.midY,angle:K.midtgtArrowAngle}];for(mt=0;mt<bt.length;mt++){var Tt=bt[mt],Mt=l.arrowShapes[M.pstyle(Tt.name+"-arrow-shape").value],Bt=M.pstyle("width").pfValue;if(Mt.roughCollide(t,e,_t,Tt.angle,{x:Tt.x,y:Tt.y},Bt,x)&&Mt.collide(t,e,_t,Tt.angle,{x:Tt.x,y:Tt.y},Bt,x))return A(M),!0}g&&u.length>0&&(L(et),L(Pt))}function _(M,V,Z){return cn(M,V,Z)}function X(M,V){var Z,K=M._private,it=m;Z=V?V+"-":"",M.boundingBox();var ot=K.labelBounds[V||"main"],st=M.pstyle(Z+"label").value;if("yes"===M.pstyle("text-events").strValue&&st){var vt=_(K.rscratch,"labelX",V),ft=_(K.rscratch,"labelY",V),et=_(K.rscratch,"labelAngle",V),Pt=M.pstyle(Z+"text-margin-x").pfValue,Lt=M.pstyle(Z+"text-margin-y").pfValue,mt=ot.x1-it-Pt,_t=ot.x2+it-Pt,bt=ot.y1-it-Lt,Tt=ot.y2+it-Lt;if(et){var Mt=Math.cos(et),Bt=Math.sin(et),Xt=function(Yt,Wt){return{x:(Yt-=vt)*Mt-(Wt-=ft)*Bt+vt,y:Yt*Bt+Wt*Mt+ft}},zt=Xt(mt,bt),jt=Xt(mt,Tt),Zt=Xt(_t,bt),ne=Xt(_t,Tt);if(Qe(t,e,[zt.x+Pt,zt.y+Lt,Zt.x+Pt,Zt.y+Lt,ne.x+Pt,ne.y+Lt,jt.x+Pt,jt.y+Lt]))return A(M),!0}else if(er(ot,t,e))return A(M),!0}}n&&(s=s.interactive);for(var z=s.length-1;z>=0;z--){var F=s[z];F.isNode()?L(F)||X(F):P(F)||X(F)||X(F,"source")||X(F,"target")}return u},getAllInBox:function(t,e,n,r){for(var a,o=this.getCachedZSortedEles().interactive,l=[],s=Math.min(t,n),u=Math.max(t,n),h=Math.min(e,r),g=Math.max(e,r),x=Ke({x1:t=s,y1:e=h,x2:n=u,y2:r=g}),E=0;E<o.length;E++){var m=o[E];if(m.isNode()){var S=m,A=S.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ci(x,A)&&!Yi(A,x)&&l.push(S)}else{var L=m,P=L._private,_=P.rscratch;if(null!=_.startX&&null!=_.startY&&!er(x,_.startX,_.startY)||null!=_.endX&&null!=_.endY&&!er(x,_.endX,_.endY))continue;if("bezier"===_.edgeType||"multibezier"===_.edgeType||"self"===_.edgeType||"compound"===_.edgeType||"segments"===_.edgeType||"haystack"===_.edgeType){for(var X=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts,z=!0,F=0;F<X.length;F++)if(!er(x,(a=X[F]).x,a.y)){z=!1;break}z&&l.push(L)}else"haystack"!==_.edgeType&&"straight"!==_.edgeType||l.push(L)}}return l}},fo={calculateArrowAngles:function(t){var e,n,r,i,a,o,l=t._private.rscratch,s="haystack"===l.edgeType,u="bezier"===l.edgeType,h="multibezier"===l.edgeType,g="segments"===l.edgeType,x="compound"===l.edgeType,E="self"===l.edgeType;s?(r=l.haystackPts[0],i=l.haystackPts[1],a=l.haystackPts[2],o=l.haystackPts[3]):(r=l.arrowStartX,i=l.arrowStartY,a=l.arrowEndX,o=l.arrowEndY),S=l.midX,A=l.midY,g?(e=r-l.segpts[0],n=i-l.segpts[1]):h||x||E||u?(e=r-Oe((m=l.allpts)[0],m[2],m[4],.1),n=i-Oe(m[1],m[3],m[5],.1)):(e=r-S,n=i-A),l.srcArrowAngle=mr(e,n);var S=l.midX,A=l.midY;if(s&&(S=(r+a)/2,A=(i+o)/2),e=a-r,n=o-i,g)if((m=l.allpts).length/2%2==0){var L=(P=m.length/2)-2;e=m[P]-m[L],n=m[P+1]-m[L+1]}else{L=(P=m.length/2-1)-2;var P,_=P+2;e=m[P]-m[L],n=m[P+1]-m[L+1]}else if(h||x||E){var X,z,F,M,m=l.allpts;if(l.ctrlpts.length/2%2==0){var V=2+(Z=2+(K=m.length/2-1));X=Oe(m[K],m[Z],m[V],0),z=Oe(m[K+1],m[Z+1],m[V+1],0),F=Oe(m[K],m[Z],m[V],1e-4),M=Oe(m[K+1],m[Z+1],m[V+1],1e-4)}else{var Z,K;V=2+(Z=m.length/2-1),X=Oe(m[K=Z-2],m[Z],m[V],.4999),z=Oe(m[K+1],m[Z+1],m[V+1],.4999),F=Oe(m[K],m[Z],m[V],.5),M=Oe(m[K+1],m[Z+1],m[V+1],.5)}e=F-X,n=M-z}if(l.midtgtArrowAngle=mr(e,n),l.midDispX=e,l.midDispY=n,e*=-1,n*=-1,g&&((m=l.allpts).length/2%2==0||(e=-(m[_=2+(P=m.length/2-1)]-m[P]),n=-(m[_+1]-m[P+1]))),l.midsrcArrowAngle=mr(e,n),g)e=a-l.segpts[l.segpts.length-2],n=o-l.segpts[l.segpts.length-1];else if(h||x||E||u){var it=(m=l.allpts).length;e=a-Oe(m[it-6],m[it-4],m[it-2],.9),n=o-Oe(m[it-5],m[it-3],m[it-1],.9)}else e=a-S,n=o-A;l.tgtArrowAngle=mr(e,n)}};fo.getArrowWidth=fo.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var an={};function Ns(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2)e.push({x:t[n],y:t[n+1]});return e}}an.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,l=r.target,s=o.position(),u=l.position(),h=o.width(),g=l.width(),x=o.height(),E=l.height(),m=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*h*m+s.x,i.source.y*x*m+s.y,i.target.x*g*m+u.x,i.target.y*E*m+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},an.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,a=e.vectorNormInverse,o=t.pstyle("edge-distances").value,l=t.pstyle("segment-weights"),s=t.pstyle("segment-distances"),u=Math.min(l.pfValue.length,s.pfValue.length);n.edgeType="segments",n.segpts=[];for(var h=0;h<u;h++){var g=l.pfValue[h],x=s.pfValue[h],E=1-g,S="node-position"===o?r:i,A={x:S.x1*E+S.x2*g,y:S.y1*E+S.y2*g};n.segpts.push(A.x+a.x*x,A.y+a.y*x)}},an.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,a=e.dirCounts,o=e.srcPos,l=t.pstyle("control-point-distances"),s=l?l.pfValue[0]:void 0,u=t.pstyle("loop-direction").pfValue,h=t.pstyle("loop-sweep").pfValue,g=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var x=n,E=g;r&&(x=0,E=s);var m=u-Math.PI/2,S=m-h/2,A=m+h/2,L=String(u+"_"+h);x=void 0===a[L]?a[L]=0:++a[L],i.ctrlpts=[o.x+1.4*Math.cos(S)*E*(x/3+1),o.y+1.4*Math.sin(S)*E*(x/3+1),o.x+1.4*Math.cos(A)*E*(x/3+1),o.y+1.4*Math.sin(A)*E*(x/3+1)]},an.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,l=e.srcW,s=e.srcH,u=e.tgtW,h=e.tgtH,g=t.pstyle("control-point-step-size").pfValue,x=t.pstyle("control-point-distances"),m=n,S=g;r&&(m=0,S=x?x.pfValue[0]:void 0);var A={x:a.x-l/2,y:a.y-s/2},L={x:o.x-u/2,y:o.y-h/2},P={x:Math.min(A.x,L.x),y:Math.min(A.y,L.y)},_=Math.max(.5,Math.log(.01*l)),X=Math.max(.5,Math.log(.01*u));i.ctrlpts=[P.x,P.y-(1+Math.pow(50,1.12)/100)*S*(m/3+1)*_,P.x-(1+Math.pow(50,1.12)/100)*S*(m/3+1)*X,P.y]},an.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},an.findBezierPoints=function(t,e,n,r,i){var a=t._private.rscratch,o=e.vectorNormInverse,l=e.posPts,s=e.intersectionPts,u=t.pstyle("edge-distances").value,h=t.pstyle("control-point-step-size").pfValue,g=t.pstyle("control-point-distances"),x=t.pstyle("control-point-weights"),E=g&&x?Math.min(g.value.length,x.value.length):1,m=g?g.pfValue[0]:void 0,S=x.value[0],A=r;a.edgeType=A?"multibezier":"bezier",a.ctrlpts=[];for(var L=0;L<E;L++){var _,P=(.5-e.eles.length/2+n)*h*(i?-1:1),X=zi(P);A&&(m=g?g.pfValue[L]:h,S=x.value[L]);var z=void 0!==(_=r?m:void 0!==m?X*m:void 0)?_:P,F=1-S,V="node-position"===u?l:s,Z={x:V.x1*F+V.x2*S,y:V.y1*F+V.y2*S};a.ctrlpts.push(Z.x+o.x*z,Z.y+o.y*z)}},an.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r=e.posPts,i=e.srcW,a=e.srcH,o=e.tgtW,l=e.tgtH,s="node-position"!==t.pstyle("edge-distances").value,u=t.pstyle("taxi-direction").value,h=u,g=t.pstyle("taxi-turn"),x="%"===g.units,E=g.pfValue,m=E<0,S=t.pstyle("taxi-turn-min-distance").pfValue,L=s?(a+l)/2:0,P=r.x2-r.x1,_=r.y2-r.y1,X=function(Ht,Gt){return Ht>0?Math.max(Ht-Gt,0):Math.min(Ht+Gt,0)},z=X(P,s?(i+o)/2:0),F=X(_,L),M=!1;"auto"===h?u=Math.abs(z)>Math.abs(F)?"horizontal":"vertical":"upward"===h||"downward"===h?(u="vertical",M=!0):"leftward"!==h&&"rightward"!==h||(u="horizontal",M=!0);var V,Z="vertical"===u,K=Z?F:z,it=Z?_:P,ot=zi(it),st=!1;M&&(x||m)||!("downward"===h&&it<0||"upward"===h&&it>0||"leftward"===h&&it>0||"rightward"===h&&it<0)||(K=(ot*=-1)*Math.abs(K),st=!0);var vt=function(Ht){return Math.abs(Ht)<S||Math.abs(Ht)>=Math.abs(K)},ft=vt(V=x?(E<0?1+E:E)*K:(E<0?K:0)+E*ot),et=vt(Math.abs(K)-Math.abs(V));if(!ft&&!et||st)if(Z){var Qt=r.y1+V+(s?a/2*ot:0);n.segpts=[r.x1,Qt,r.x2,Qt]}else{var xt=r.x1+V+(s?i/2*ot:0);n.segpts=[xt,r.y1,xt,r.y2]}else if(Z){var Pt=Math.abs(it)<=a/2,Lt=Math.abs(P)<=o/2;if(Pt){var mt=(r.x1+r.x2)/2;n.segpts=[mt,r.y1,mt,r.y2]}else if(Lt){var Tt=(r.y1+r.y2)/2;n.segpts=[r.x1,Tt,r.x2,Tt]}else n.segpts=[r.x1,r.y2]}else{var Xt=Math.abs(it)<=i/2,zt=Math.abs(_)<=l/2;if(Xt){var jt=(r.y1+r.y2)/2;n.segpts=[r.x1,jt,r.x2,jt]}else if(zt){var oe=(r.x1+r.x2)/2;n.segpts=[oe,r.y1,oe,r.y2]}else n.segpts=[r.x2,r.y1]}},an.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,l=e.tgtW,s=e.tgtH,u=e.srcShape,h=e.tgtShape,g=!N(n.startX)||!N(n.startY),x=!N(n.arrowStartX)||!N(n.arrowStartY),E=!N(n.endX)||!N(n.endY),m=!N(n.arrowEndX)||!N(n.arrowEndY),S=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,A=Xn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),L=A<S,P=Xn({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),_=P<S,X=!1;if(g||x||L){X=!0;var z={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},F=Math.sqrt(z.x*z.x+z.y*z.y),M={x:z.x/F,y:z.y/F},V=Math.max(a,o),Z={x:n.ctrlpts[0]+2*M.x*V,y:n.ctrlpts[1]+2*M.y*V},K=u.intersectLine(r.x,r.y,a,o,Z.x,Z.y,0);L?(n.ctrlpts[0]=n.ctrlpts[0]+M.x*(S-A),n.ctrlpts[1]=n.ctrlpts[1]+M.y*(S-A)):(n.ctrlpts[0]=K[0]+M.x*S,n.ctrlpts[1]=K[1]+M.y*S)}if(E||m||_){X=!0;var it={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},ot=Math.sqrt(it.x*it.x+it.y*it.y),st={x:it.x/ot,y:it.y/ot},vt=Math.max(a,o),ft={x:n.ctrlpts[0]+2*st.x*vt,y:n.ctrlpts[1]+2*st.y*vt},et=h.intersectLine(i.x,i.y,l,s,ft.x,ft.y,0);_?(n.ctrlpts[0]=n.ctrlpts[0]+st.x*(S-P),n.ctrlpts[1]=n.ctrlpts[1]+st.y*(S-P)):(n.ctrlpts[0]=et[0]+st.x*S,n.ctrlpts[1]=et[1]+st.y*S)}X&&this.findEndpoints(t)}},an.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(e.midX=e.allpts[r=e.allpts.length/2-1],e.midY=e.allpts[r+1]):(e.midX=Oe(e.allpts[r=e.allpts.length/2-3],e.allpts[r+2],e.allpts[r+4],.5),e.midY=Oe(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,a=i-2;e.midX=(e.segpts[a]+e.segpts[i])/2,e.midY=(e.segpts[a+1]+e.segpts[i+1])/2}else{var o=e.segpts.length/2-1;e.midX=e.segpts[o],e.midY=e.segpts[o+1]}},an.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||N(e.startX)&&N(e.startY)&&N(e.endX)&&N(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,be("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},an.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new mn,get:function(_){var X=this.map.get(_[0]);return null!=X?X.get(_[1]):null},set:function(_,X){var z=this.map.get(_[0]);null==z&&(z=new mn,this.map.set(_[0],z)),z.set(_[1],X)}},a=[],o=[],l=0;l<t.length;l++){var s=t[l],u=s._private,h=s.pstyle("curve-style").value;if(!s.removed()&&s.takesUpSpace())if("haystack"!==h){var g="unbundled-bezier"===h||"segments"===h||"straight"===h||"straight-triangle"===h||"taxi"===h,x="unbundled-bezier"===h||"bezier"===h,m=u.target,S=[u.source.poolIndex(),m.poolIndex()].sort(),A=i.get(S);null==A&&(i.set(S,A={eles:[]}),a.push(S)),A.eles.push(s),g&&(A.hasUnbundled=!0),x&&(A.hasBezier=!0)}else o.push(s)}for(var L=function(_){var z=i.get(a[_]),F=void 0;if(!z.hasUnbundled){var M=z.eles[0].parallelEdges().filter(function(Ht){return Ht.isBundledBezier()});Gr(z.eles),M.forEach(function(Ht){return z.eles.push(Ht)}),z.eles.sort(function(Ht,Gt){return Ht.poolIndex()-Gt.poolIndex()})}var V=z.eles[0],Z=V.source(),K=V.target();if(Z.poolIndex()>K.poolIndex()){var it=Z;Z=K,K=it}var ot=z.srcPos=Z.position(),st=z.tgtPos=K.position(),vt=z.srcW=Z.outerWidth(),ft=z.srcH=Z.outerHeight(),et=z.tgtW=K.outerWidth(),Pt=z.tgtH=K.outerHeight(),Lt=z.srcShape=n.nodeShapes[e.getNodeShape(Z)],mt=z.tgtShape=n.nodeShapes[e.getNodeShape(K)];z.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _t=0;_t<z.eles.length;_t++){var bt=z.eles[_t],Tt=bt[0]._private.rscratch,Mt=bt.pstyle("curve-style").value,Bt="unbundled-bezier"===Mt||"segments"===Mt||"taxi"===Mt,Xt=!Z.same(bt.source());if(!z.calculatedIntersection&&Z!==K&&(z.hasBezier||z.hasUnbundled)){z.calculatedIntersection=!0;var zt=Lt.intersectLine(ot.x,ot.y,vt,ft,st.x,st.y,0),jt=z.srcIntn=zt,Zt=mt.intersectLine(st.x,st.y,et,Pt,ot.x,ot.y,0),ne=z.tgtIntn=Zt,oe=z.intersectionPts={x1:zt[0],x2:Zt[0],y1:zt[1],y2:Zt[1]},Yt=z.posPts={x1:ot.x,x2:st.x,y1:ot.y,y2:st.y},Wt=Zt[1]-zt[1],Qt=Zt[0]-zt[0],Y=Math.sqrt(Qt*Qt+Wt*Wt),ht=z.vector={x:Qt,y:Wt},xt=z.vectorNorm={x:ht.x/Y,y:ht.y/Y},Ct={x:-xt.y,y:xt.x};z.nodesOverlap=!N(Y)||mt.checkPoint(zt[0],zt[1],0,et,Pt,st.x,st.y)||Lt.checkPoint(Zt[0],Zt[1],0,vt,ft,ot.x,ot.y),z.vectorNormInverse=Ct,F={nodesOverlap:z.nodesOverlap,dirCounts:z.dirCounts,calculatedIntersection:!0,hasBezier:z.hasBezier,hasUnbundled:z.hasUnbundled,eles:z.eles,srcPos:st,tgtPos:ot,srcW:et,srcH:Pt,tgtW:vt,tgtH:ft,srcIntn:ne,tgtIntn:jt,srcShape:mt,tgtShape:Lt,posPts:{x1:Yt.x2,y1:Yt.y2,x2:Yt.x1,y2:Yt.y1},intersectionPts:{x1:oe.x2,y1:oe.y2,x2:oe.x1,y2:oe.y1},vector:{x:-ht.x,y:-ht.y},vectorNorm:{x:-xt.x,y:-xt.y},vectorNormInverse:{x:-Ct.x,y:-Ct.y}}}var wt=Xt?F:z;Tt.nodesOverlap=wt.nodesOverlap,Tt.srcIntn=wt.srcIntn,Tt.tgtIntn=wt.tgtIntn,r&&(Z.isParent()||Z.isChild()||K.isParent()||K.isChild())&&(Z.parents().anySame(K)||K.parents().anySame(Z)||Z.same(K)&&Z.isParent())?e.findCompoundLoopPoints(bt,wt,_t,Bt):Z===K?e.findLoopPoints(bt,wt,_t,Bt):"segments"===Mt?e.findSegmentsPoints(bt,wt):"taxi"===Mt?e.findTaxiPoints(bt,wt):"straight"===Mt||!Bt&&z.eles.length%2==1&&_t===Math.floor(z.eles.length/2)?e.findStraightEdgePoints(bt):e.findBezierPoints(bt,wt,_t,Bt,Xt),e.findEndpoints(bt),e.tryToCorrectInvalidPoints(bt,wt),e.checkForInvalidEdgeWarning(bt),e.storeAllpts(bt),e.storeEdgeProjections(bt),e.calculateArrowAngles(bt),e.recalculateEdgeLabelProjections(bt),e.calculateLabelAngles(bt)}},P=0;P<a.length;P++)L(P);this.findHaystackPoints(o)}},an.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Ns(e.segpts)},an.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Ns(e.ctrlpts)},an.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var Tu={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var a=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(a[0]=a[0]*r),"%"===e.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var o=e.pfValue[0];o=-Math.PI/2+o;var l=2*Math.max(r,i),s=[n.x+Math.cos(o)*l,n.y+Math.sin(o)*l];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,s[0],s[1],0)},findEndpoints:function(t){var e,n,r,i,a,o=this,l=t.source()[0],s=t.target()[0],u=l.position(),h=s.position(),g=t.pstyle("target-arrow-shape").value,x=t.pstyle("source-arrow-shape").value,E=t.pstyle("target-distance-from-node").pfValue,m=t.pstyle("source-distance-from-node").pfValue,S=t.pstyle("curve-style").value,A=t._private.rscratch,L=A.edgeType,P="self"===L||"compound"===L,_="bezier"===L||"multibezier"===L||P,X="bezier"!==L,z="straight"===L||"segments"===L,F="segments"===L,M=_||X||z,V=P||"taxi"===S,Z=t.pstyle("source-endpoint"),K=V?"outside-to-node":Z.value,it=t.pstyle("target-endpoint"),ot=V?"outside-to-node":it.value;if(A.srcManEndpt=Z,A.tgtManEndpt=it,_){var st=[A.ctrlpts[0],A.ctrlpts[1]];n=X?[A.ctrlpts[A.ctrlpts.length-2],A.ctrlpts[A.ctrlpts.length-1]]:st,r=st}else if(z){var vt=F?A.segpts.slice(0,2):[h.x,h.y];n=F?A.segpts.slice(A.segpts.length-2):[u.x,u.y],r=vt}if("inside-to-node"===ot)e=[h.x,h.y];else if(it.units)e=this.manualEndptToPx(s,it);else if("outside-to-line"===ot)e=A.tgtIntn;else if("outside-to-node"===ot||"outside-to-node-or-label"===ot?i=n:"outside-to-line"!==ot&&"outside-to-line-or-label"!==ot||(i=[u.x,u.y]),e=o.nodeShapes[this.getNodeShape(s)].intersectLine(h.x,h.y,s.outerWidth(),s.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===ot||"outside-to-line-or-label"===ot){var ft=s._private.rscratch,Lt=ft.labelX,mt=ft.labelY,_t=ft.labelWidth/2,bt=ft.labelHeight/2,Tt=s.pstyle("text-valign").value;"top"===Tt?mt-=bt:"bottom"===Tt&&(mt+=bt);var Mt=s.pstyle("text-halign").value;"left"===Mt?Lt-=_t:"right"===Mt&&(Lt+=_t);var Bt=Er(i[0],i[1],[Lt-_t,mt-bt,Lt+_t,mt-bt,Lt+_t,mt+bt,Lt-_t,mt+bt],h.x,h.y);if(Bt.length>0){var Xt=u,zt=Hn(Xt,Yn(e)),jt=Hn(Xt,Yn(Bt)),Zt=zt;jt<zt&&(e=Bt,Zt=jt),Bt.length>2&&Hn(Xt,{x:Bt[2],y:Bt[3]})<Zt&&(e=[Bt[2],Bt[3]])}}var ne=zr(e,n,o.arrowShapes[g].spacing(t)+E),oe=zr(e,n,o.arrowShapes[g].gap(t)+E);if(A.endX=oe[0],A.endY=oe[1],A.arrowEndX=ne[0],A.arrowEndY=ne[1],"inside-to-node"===K)e=[u.x,u.y];else if(Z.units)e=this.manualEndptToPx(l,Z);else if("outside-to-line"===K)e=A.srcIntn;else if("outside-to-node"===K||"outside-to-node-or-label"===K?a=r:"outside-to-line"!==K&&"outside-to-line-or-label"!==K||(a=[h.x,h.y]),e=o.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===K||"outside-to-line-or-label"===K){var Yt=l._private.rscratch,Y=Yt.labelX,ht=Yt.labelY,xt=Yt.labelWidth/2,Ct=Yt.labelHeight/2,wt=l.pstyle("text-valign").value;"top"===wt?ht-=Ct:"bottom"===wt&&(ht+=Ct);var Ht=l.pstyle("text-halign").value;"left"===Ht?Y-=xt:"right"===Ht&&(Y+=xt);var Gt=Er(a[0],a[1],[Y-xt,ht-Ct,Y+xt,ht-Ct,Y+xt,ht+Ct,Y-xt,ht+Ct],u.x,u.y);if(Gt.length>0){var Kt=h,ae=Hn(Kt,Yn(e)),ue=Hn(Kt,Yn(Gt)),ce=ae;ue<ae&&(e=[Gt[0],Gt[1]],ce=ue),Gt.length>2&&Hn(Kt,{x:Gt[2],y:Gt[3]})<ce&&(e=[Gt[2],Gt[3]])}}var re=zr(e,r,o.arrowShapes[x].spacing(t)+m),fe=zr(e,r,o.arrowShapes[x].gap(t)+m);A.startX=fe[0],A.startY=fe[1],A.arrowStartX=re[0],A.arrowStartY=re[1],M&&(A.badLine=!(N(A.startX)&&N(A.startY)&&N(A.endX)&&N(A.endY)))},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return"haystack"===(this.recalculateRenderedStyle(t),e.edgeType)?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},po={};function Su(t,e,n){for(var r=function(l,s,u,h){return Oe(l,s,u,h)},i=e._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var o=t.bezierProjPcts[a];i.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}po.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)Su(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var a=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var o=n.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},po.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Zn={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!$(e)){var n,r,i=t._private,a=t.width(),o=t.height(),l=t.padding(),s=t.position(),u=t.pstyle("text-halign").strValue,h=t.pstyle("text-valign").strValue,g=i.rscratch,x=i.rstyle;switch(u){case"left":n=s.x-a/2-l;break;case"right":n=s.x+a/2+l;break;default:n=s.x}switch(h){case"top":r=s.y-o/2-l;break;case"bottom":r=s.y+o/2+l;break;default:r=s.y}g.labelX=n,g.labelY=r,x.labelX=n,x.labelY=r,this.calculateLabelAngles(t),this.applyLabelDimensions(t)}}},ks=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},Ms=function(t,e){return ks(e.x-t.x,e.y-t.y)};Zn.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){var o=function(u,h,g){Nn(n.rscratch,u,h,g),Nn(n.rstyle,u,h,g)};o("labelX",null,(e={x:r.midX,y:r.midY}).x),o("labelY",null,e.y);var l=ks(r.midDispX,r.midDispY);o("labelAutoAngle",null,l);var s=function(u){var h,mt,_t,bt,Tt,Mt,Bt,Xt,zt,g="source"===u;if(a[u]){var x=t.pstyle(u+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var E,m=function mt(){if(mt.cache)return mt.cache;for(var _t=[],bt=0;bt+5<r.allpts.length;bt+=4)_t.push({p0:{x:r.allpts[bt],y:r.allpts[bt+1]},p1:{x:r.allpts[bt+2],y:r.allpts[bt+3]},p2:{x:r.allpts[bt+4],y:r.allpts[bt+5]},startDist:0,length:0,segments:[]});var Xt=n.rstyle.bezierPts,zt=i.bezierProjPcts.length;function jt(Wt,Qt,Y,ht,xt){var Ct=Xn(Qt,Y),wt=Wt.segments[Wt.segments.length-1];Wt.segments.push({p0:Qt,p1:Y,t0:ht,t1:xt,startDist:wt?wt.startDist+wt.length:0,length:Ct}),Wt.length+=Ct}for(var Zt=0;Zt<_t.length;Zt++){var ne=_t[Zt],oe=_t[Zt-1];oe&&(ne.startDist=oe.startDist+oe.length),jt(ne,ne.p0,Xt[Zt*zt],0,i.bezierProjPcts[0]);for(var Yt=0;Yt<zt-1;Yt++)jt(ne,Xt[Zt*zt+Yt],Xt[Zt*zt+Yt+1],i.bezierProjPcts[Yt],i.bezierProjPcts[Yt+1]);jt(ne,Xt[Zt*zt+zt-1],ne.p2,i.bezierProjPcts[zt-1],1)}return mt.cache=_t}(),S=0,A=0,L=0;L<m.length;L++){for(var P=m[g?L:m.length-1-L],_=0;_<P.segments.length;_++){var X=P.segments[g?_:P.segments.length-1-_];if(S=A,(A+=X.length)>=x||L===m.length-1&&_===P.segments.length-1){E={cp:P,segment:X};break}}if(E)break}var F=E.cp,M=E.segment,V=(x-S)/M.length,Z=M.t1-M.t0,K=g?M.t0+Z*V:M.t1-Z*V;K=br(0,K,1),e=Vn(F.p0,F.p1,F.p2,K),mt=F.p0,_t=F.p1,bt=F.p2,Mt=br(0,(Tt=K)-.001,1),Bt=br(0,Tt+.001,1),Xt=Vn(mt,_t,bt,Mt),zt=Vn(mt,_t,bt,Bt),h=Ms(Xt,zt);break;case"straight":case"segments":case"haystack":for(var it,ot,st,vt,ft=0,et=r.allpts.length,Pt=0;Pt+3<et&&(g?(st={x:r.allpts[Pt],y:r.allpts[Pt+1]},vt={x:r.allpts[Pt+2],y:r.allpts[Pt+3]}):(st={x:r.allpts[et-2-Pt],y:r.allpts[et-1-Pt]},vt={x:r.allpts[et-4-Pt],y:r.allpts[et-3-Pt]}),ot=ft,!((ft+=it=Xn(st,vt))>=x));Pt+=2);var Lt=(x-ot)/it;Lt=br(0,Lt,1),e=function(mt,_t,bt,Tt){var Mt=_t.x-mt.x,Bt=_t.y-mt.y,Xt=Xn(mt,_t);return bt=null==bt?0:bt,{x:mt.x+Mt/Xt*(Tt=null!=Tt?Tt:bt*Xt),y:mt.y+Bt/Xt*Tt}}(st,vt,Lt),h=Ms(st,vt)}o("labelX",u,e.x),o("labelY",u,e.y),o("labelAutoAngle",u,h)}};s("source"),s("target"),this.applyLabelDimensions(t)}},Zn.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Zn.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,l=cn(n.rscratch,"labelWrapCachedLines",e)||[],s="wrap"!==o?1:Math.max(l.length,1),u=i.height/s,h=u*a,g=i.width,x=i.height+(s-1)*(a-1)*u;Nn(n.rstyle,"labelWidth",e,g),Nn(n.rscratch,"labelWidth",e,g),Nn(n.rstyle,"labelHeight",e,x),Nn(n.rscratch,"labelHeight",e,x),Nn(n.rscratch,"labelLineHeight",e,h)},Zn.getLabelText=function(t,e){var n=t._private,i=t.pstyle((e?e+"-":"")+"label").strValue,a=t.pstyle("text-transform").value,o=function(ot,st){return st?(Nn(n.rscratch,ot,e,st),st):cn(n.rscratch,ot,e)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var l=t.pstyle("text-wrap").value;if("wrap"===l){var s=o("labelKey");if(null!=s&&o("labelWrapKey")===s)return o("labelWrapCachedText");for(var u=i.split("\n"),h=t.pstyle("text-max-width").pfValue,g="anywhere"===t.pstyle("text-overflow-wrap").value,x=[],E=/[\s\u200b]+/,m=g?"":" ",S=0;S<u.length;S++){var A=u[S],L=this.calculateLabelDimensions(t,A).width;if(g){var P=A.split("").join("\u200b");A=P}if(L>h){for(var _=A.split(E),X="",z=0;z<_.length;z++){var F=_[z];this.calculateLabelDimensions(t,0===X.length?F:X+m+F).width<=h?X+=F+m:(X&&x.push(X),X=F+m)}X.match(/^[\s\u200b]+$/)||x.push(X)}else x.push(A)}o("labelWrapCachedLines",x),i=o("labelWrapCachedText",x.join("\n")),o("labelWrapKey",s)}else if("ellipsis"===l){var V=t.pstyle("text-max-width").pfValue,Z="",K=!1;if(this.calculateLabelDimensions(t,i).width<V)return i;for(var it=0;it<i.length&&!(this.calculateLabelDimensions(t,Z+i[it]+"\u2026").width>V);it++)Z+=i[it],it===i.length-1&&(K=!0);return K||(Z+="\u2026"),Z}return i},Zn.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Zn.calculateLabelDimensions=function(t,e){var n=Bn(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var a=t.pstyle("font-style").strValue,o=t.pstyle("font-size").pfValue,l=t.pstyle("font-family").strValue,s=t.pstyle("font-weight").strValue,u=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=document.createElement("canvas"),h=this.labelCalcCanvasContext=u.getContext("2d");var g=u.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}h.font="".concat(a," ").concat(s," ").concat(o,"px ").concat(l);for(var x=0,E=0,m=e.split("\n"),S=0;S<m.length;S++){var L=h.measureText(m[S]),P=Math.ceil(L.width),_=o;x=Math.max(P,x),E+=_}return r[n]={width:x+=0,height:E+=0}},Zn.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),a=t.pstyle((e?e+"-":"")+"text-rotation"),o=a.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:a.pfValue},Zn.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var Os={},Gs=!1;Os.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return Gs||(be("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Gs=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var Rs={};[Lu,fo,an,Tu,po,Zn,Os,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(a),o)for(var l=0;l<a.length;l++){var h=a[l]._private.rstyle;h.clean=!1,h.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",function(a){r(a.target)}).on("style.* background.*",function(a){r(a.target,!1)});var i=function(a){if(a){var o=n.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var s=e[l],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(o)for(var h=0;h<o.length;h++)(0,o[h])(a,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(L){return L._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var a=0;a<t.length;a++){var o=t[a],l=o._private,s=l.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(s.clean=!1),e&&s.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===l.group?i.push(o):r.push(o),s.clean=!0)}for(var u=0;u<i.length;u++){var h=i[u],g=h._private.rstyle,x=h.position();this.recalculateNodeLabelProjection(h),g.nodeX=x.x,g.nodeY=x.y,g.nodeW=h.pstyle("width").pfValue,g.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var E=0;E<r.length;E++){var m=r[E]._private,S=m.rstyle,A=m.rscratch;S.srcX=A.arrowStartX,S.srcY=A.arrowStartY,S.tgtX=A.arrowEndX,S.tgtY=A.arrowEndY,S.midX=A.midX,S.midY=A.midY,S.labelAngle=A.labelAngle,S.sourceLabelAngle=A.sourceLabelAngle,S.targetLabelAngle=A.targetLabelAngle}}}},{updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(is),e.interactive=e.filter(function(n){return n.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}}].forEach(function(t){W(Rs,t)});var Au={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[t]=r[t]||{}).image=new Image;return a.addEventListener("load",n),a.addEventListener("error",function(){a.error=!0}),"data:"===t.substring(0,"data:".length).toLowerCase()||(a.crossOrigin=e),a.src=t,a}},Li={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(t);return a.on.apply(a,i)},binder:function(t){var n=this,r=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==n.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});window.addEventListener("test",null,a)}catch(l){}n.supportsPassiveEvents=i}var o=function(l,s,u){var h=Array.prototype.slice.call(arguments);return r&&n.supportsPassiveEvents&&(h[2]={capture:null!=u&&u,passive:!1,once:!1}),n.bindings.push({target:t,args:h}),(t.addEventListener||t.on).apply(t,h),this};return{on:o,addEventListener:o,addListener:o,bind:o}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()},load:function(){var t=this,e=function(Y){return Y.selected()},n=function(Y,ht,xt,Ct){null==Y&&(Y=t.cy);for(var wt=0;wt<ht.length;wt++)Y.emit({originalEvent:xt,type:ht[wt],position:Ct})},r=function(Y){return Y.shiftKey||Y.metaKey||Y.ctrlKey},i=function(Y,ht){var xt=!0;if(t.cy.hasCompoundNodes()&&Y&&Y.pannable()){for(var Ct=0;ht&&Ct<ht.length;Ct++)if((Y=ht[Ct]).isNode()&&Y.isParent()&&!Y.pannable()){xt=!1;break}}else xt=!0;return xt},a=function(Y){Y[0]._private.rscratch.inDragLayer=!0},o=function(Y){Y[0]._private.rscratch.isGrabTarget=!0},l=function(Y,ht){var xt=ht.addToList;xt.has(Y)||(xt.merge(Y),Y[0]._private.grabbed=!0)},s=function(Y,ht){ht=ht||{};var xt=Y.cy().hasCompoundNodes();ht.inDragLayer&&(Y.forEach(a),Y.neighborhood().stdFilter(function(Ct){return!xt||Ct.isEdge()}).forEach(a)),ht.addToList&&Y.forEach(function(Ct){l(Ct,ht)}),function(Ct,wt){if(Ct.cy().hasCompoundNodes()&&(null!=wt.inDragLayer||null!=wt.addToList)){var Ht=Ct.descendants();wt.inDragLayer&&(Ht.forEach(a),Ht.connectedEdges().forEach(a)),wt.addToList&&wt.addToList.unmerge(Ht)}}(Y,ht),g(Y,{inDragLayer:ht.inDragLayer}),t.updateCachedGrabbedEles()},u=s,h=function(Y){Y&&(t.getCachedZSortedEles().forEach(function(ht){ht[0]._private.grabbed=!1,ht[0]._private.rscratch.inDragLayer=!1,function(xt){xt[0]._private.rscratch.isGrabTarget=!1}(ht)}),t.updateCachedGrabbedEles())},g=function(Y,ht){if((null!=ht.inDragLayer||null!=ht.addToList)&&Y.cy().hasCompoundNodes()){var xt=Y.ancestors().orphans();if(!xt.same(Y)){var Ct=xt.descendants().spawnSelf().merge(xt).unmerge(Y).unmerge(Y.descendants()),wt=Ct.connectedEdges();ht.inDragLayer&&(wt.forEach(a),Ct.forEach(a)),ht.addToList&&Ct.forEach(function(Ht){l(Ht,ht)})}}},x=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},E="undefined"!=typeof MutationObserver,m="undefined"!=typeof ResizeObserver;E?(t.removeObserver=new MutationObserver(function(Y){for(var ht=0;ht<Y.length;ht++){var xt=Y[ht].removedNodes;if(xt)for(var Ct=0;Ct<xt.length;Ct++)if(xt[Ct]===t.container){t.destroy();break}}}),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",function(Y){t.destroy()});var S=Ge(function(){t.cy.resize()},100);E&&(t.styleObserver=new MutationObserver(S),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",S),m&&(t.resizeObserver=new ResizeObserver(S),t.resizeObserver.observe(t.container));var A=function(){t.invalidateContainerClientCoordsCache()};(function(Y,ht){for(;null!=Y;)ht(Y),Y=Y.parentNode})(t.container,function(Y){t.registerBinding(Y,"transitionend",A),t.registerBinding(Y,"animationend",A),t.registerBinding(Y,"scroll",A)}),t.registerBinding(t.container,"contextmenu",function(Y){Y.preventDefault()});var L,P,_,X=function(Y){for(var ht=t.findContainerClientCoords(),xt=ht[0],Ct=ht[1],wt=ht[2],Ht=ht[3],Gt=Y.touches?Y.touches:[Y],Kt=!1,ae=0;ae<Gt.length;ae++){var ue=Gt[ae];if(xt<=ue.clientX&&ue.clientX<=xt+wt&&Ct<=ue.clientY&&ue.clientY<=Ct+Ht){Kt=!0;break}}if(!Kt)return!1;for(var ce=t.container,re=Y.target.parentNode,fe=!1;re;){if(re===ce){fe=!0;break}re=re.parentNode}return!!fe};t.registerBinding(t.container,"mousedown",function(Y){if(X(Y)){Y.preventDefault(),x(),t.hoverData.capture=!0,t.hoverData.which=Y.which;var ht=t.cy,xt=[Y.clientX,Y.clientY],Ct=t.projectIntoViewport(xt[0],xt[1]),wt=t.selection,Ht=t.findNearestElements(Ct[0],Ct[1],!0,!1),Gt=Ht[0],Kt=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=Ct,t.hoverData.mdownGPos=xt,3==Y.which){t.hoverData.cxtStarted=!0;var ae={originalEvent:Y,type:"cxttapstart",position:{x:Ct[0],y:Ct[1]}};Gt?(Gt.activate(),Gt.emit(ae),t.hoverData.down=Gt):ht.emit(ae),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==Y.which){if(Gt&&Gt.activate(),null!=Gt&&t.nodeIsGrabbable(Gt)){var ue=function(re){return{originalEvent:Y,type:re,position:{x:Ct[0],y:Ct[1]}}};if(o(Gt),Gt.selected()){Kt=t.dragData.possibleDragElements=ht.collection();var ce=ht.$(function(re){return re.isNode()&&re.selected()&&t.nodeIsGrabbable(re)});s(ce,{addToList:Kt}),Gt.emit(ue("grabon")),ce.forEach(function(re){re.emit(ue("grab"))})}else Kt=t.dragData.possibleDragElements=ht.collection(),u(Gt,{addToList:Kt}),Gt.emit(ue("grabon")).emit(ue("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=Gt,t.hoverData.downs=Ht,t.hoverData.downTime=(new Date).getTime(),n(Gt,["mousedown","tapstart","vmousedown"],Y,{x:Ct[0],y:Ct[1]}),null==Gt?(wt[4]=1,t.data.bgActivePosistion={x:Ct[0],y:Ct[1]},t.redrawHint("select",!0),t.redraw()):Gt.pannable()&&(wt[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout(function(){if(!t.hoverData.tapholdCancelled){var re=t.hoverData.down;re?re.emit({originalEvent:Y,type:"taphold",position:{x:Ct[0],y:Ct[1]}}):ht.emit({originalEvent:Y,type:"taphold",position:{x:Ct[0],y:Ct[1]}})}},t.tapholdDuration)}wt[0]=wt[2]=Ct[0],wt[1]=wt[3]=Ct[1]}},!1),t.registerBinding(window,"mousemove",function(Y){if(t.hoverData.capture||X(Y)){var ht=!1,xt=t.cy,Ct=xt.zoom(),wt=[Y.clientX,Y.clientY],Ht=t.projectIntoViewport(wt[0],wt[1]),Gt=t.hoverData.mdownPos,Kt=t.hoverData.mdownGPos,ae=t.selection,ue=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(ue=t.findNearestElement(Ht[0],Ht[1],!0,!1));var ce,re=t.hoverData.last,fe=t.hoverData.down,ke=[Ht[0]-ae[2],Ht[1]-ae[3]],We=t.dragData.possibleDragElements;if(Kt){var Ln=wt[0]-Kt[0],gn=wt[1]-Kt[1];t.hoverData.isOverThresholdDrag=ce=Ln*Ln+gn*gn>=t.desktopTapThreshold2}var fr=r(Y);ce&&(t.hoverData.tapholdCancelled=!0),ht=!0,n(ue,["mousemove","vmousemove","tapdrag"],Y,{x:Ht[0],y:Ht[1]});var pr=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||xt.emit({originalEvent:Y,type:"boxstart",position:{x:Ht[0],y:Ht[1]}}),ae[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(ce){var vn={originalEvent:Y,type:"cxtdrag",position:{x:Ht[0],y:Ht[1]}};fe?fe.emit(vn):xt.emit(vn),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&ue===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:Y,type:"cxtdragout",position:{x:Ht[0],y:Ht[1]}}),t.hoverData.cxtOver=ue,ue&&ue.emit({originalEvent:Y,type:"cxtdragover",position:{x:Ht[0],y:Ht[1]}}))}}else if(t.hoverData.dragging){if(ht=!0,xt.panningEnabled()&&xt.userPanningEnabled()){var Tn;if(t.hoverData.justStartedPan){var Pi=t.hoverData.mdownPos;Tn={x:(Ht[0]-Pi[0])*Ct,y:(Ht[1]-Pi[1])*Ct},t.hoverData.justStartedPan=!1}else Tn={x:ke[0]*Ct,y:ke[1]*Ct};xt.panBy(Tn),xt.emit("dragpan"),t.hoverData.dragged=!0}Ht=t.projectIntoViewport(Y.clientX,Y.clientY)}else if(1!=ae[4]||null!=fe&&!fe.pannable()){if(fe&&fe.pannable()&&fe.active()&&fe.unactivate(),fe&&fe.grabbed()||ue==re||(re&&n(re,["mouseout","tapdragout"],Y,{x:Ht[0],y:Ht[1]}),ue&&n(ue,["mouseover","tapdragover"],Y,{x:Ht[0],y:Ht[1]}),t.hoverData.last=ue),fe)if(ce){if(xt.boxSelectionEnabled()&&fr)fe&&fe.grabbed()&&(h(We),fe.emit("freeon"),We.emit("free"),t.dragData.didDrag&&(fe.emit("dragfreeon"),We.emit("dragfree"))),pr();else if(fe&&fe.grabbed()&&t.nodeIsDraggable(fe)){var _r=!t.dragData.didDrag;_r&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var Ai=xt.collection();t.hoverData.draggingEles||s(We,{inDragLayer:!0});var Cr={x:0,y:0};if(N(ke[0])&&N(ke[1])&&(Cr.x+=ke[0],Cr.y+=ke[1],_r)){var Nr=t.hoverData.dragDelta;Nr&&N(Nr[0])&&N(Nr[1])&&(Cr.x+=Nr[0],Cr.y+=Nr[1])}for(var _i=0;_i<We.length;_i++){var jn=We[_i];t.nodeIsDraggable(jn)&&jn.grabbed()&&Ai.push(jn)}t.hoverData.draggingEles=!0,Ai.silentShift(Cr).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else 0===(Wn=t.hoverData.dragDelta=t.hoverData.dragDelta||[]).length?(Wn.push(ke[0]),Wn.push(ke[1])):(Wn[0]+=ke[0],Wn[1]+=ke[1]);ht=!0}else ce&&(t.hoverData.dragging||!xt.boxSelectionEnabled()||!fr&&xt.panningEnabled()&&xt.userPanningEnabled()?!t.hoverData.selecting&&xt.panningEnabled()&&xt.userPanningEnabled()&&i(fe,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,ae[4]=0,t.data.bgActivePosistion=Yn(Gt),t.redrawHint("select",!0),t.redraw()):pr(),fe&&fe.pannable()&&fe.active()&&fe.unactivate());return ae[2]=Ht[0],ae[3]=Ht[1],ht?(Y.stopPropagation&&Y.stopPropagation(),Y.preventDefault&&Y.preventDefault(),!1):void 0}var Wn},!1),t.registerBinding(window,"mouseup",function(Y){if(t.hoverData.capture){t.hoverData.capture=!1;var ht=t.cy,xt=t.projectIntoViewport(Y.clientX,Y.clientY),Ct=t.selection,wt=t.findNearestElement(xt[0],xt[1],!0,!1),Ht=t.dragData.possibleDragElements,Gt=t.hoverData.down,Kt=r(Y);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,Gt&&Gt.unactivate(),3===t.hoverData.which){var ae={originalEvent:Y,type:"cxttapend",position:{x:xt[0],y:xt[1]}};if(Gt?Gt.emit(ae):ht.emit(ae),!t.hoverData.cxtDragged){var ue={originalEvent:Y,type:"cxttap",position:{x:xt[0],y:xt[1]}};Gt?Gt.emit(ue):ht.emit(ue)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(wt,["mouseup","tapend","vmouseup"],Y,{x:xt[0],y:xt[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||(n(Gt,["click","tap","vclick"],Y,{x:xt[0],y:xt[1]}),P=!1,Y.timeStamp-_<=ht.multiClickDebounceTime()?(L&&clearTimeout(L),P=!0,_=null,n(Gt,["dblclick","dbltap","vdblclick"],Y,{x:xt[0],y:xt[1]})):(L=setTimeout(function(){P||n(Gt,["oneclick","onetap","voneclick"],Y,{x:xt[0],y:xt[1]})},ht.multiClickDebounceTime()),_=Y.timeStamp)),null!=Gt||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(Y)||(ht.$(e).unselect(["tapunselect"]),Ht.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=Ht=ht.collection()),wt!=Gt||t.dragData.didDrag||t.hoverData.selecting||null!=wt&&wt._private.selectable&&(t.hoverData.dragging||("additive"===ht.selectionType()||Kt?wt.selected()?wt.unselect(["tapunselect"]):wt.select(["tapselect"]):Kt||(ht.$(e).unmerge(wt).unselect(["tapunselect"]),wt.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var ce=ht.collection(t.getAllInBox(Ct[0],Ct[1],Ct[2],Ct[3]));t.redrawHint("select",!0),ce.length>0&&t.redrawHint("eles",!0),ht.emit({type:"boxend",originalEvent:Y,position:{x:xt[0],y:xt[1]}});"additive"===ht.selectionType()||Kt||ht.$(e).unmerge(ce).unselect(),ce.emit("box").stdFilter(function(ke){return ke.selectable()&&!ke.selected()}).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!Ct[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var fe=Gt&&Gt.grabbed();h(Ht),fe&&(Gt.emit("freeon"),Ht.emit("free"),t.dragData.didDrag&&(Gt.emit("dragfreeon"),Ht.emit("dragfree")))}}Ct[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}},!1);var z,F,M,V,Z,K,it,ot,st,vt,ft,et,Pt,Lt=function(Y){if(!t.scrollingPage){var ht=t.cy,xt=ht.zoom(),Ct=ht.pan(),wt=t.projectIntoViewport(Y.clientX,Y.clientY),Ht=[wt[0]*xt+Ct.x,wt[1]*xt+Ct.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])Y.preventDefault();else if(ht.panningEnabled()&&ht.userPanningEnabled()&&ht.zoomingEnabled()&&ht.userZoomingEnabled()){var Gt;Y.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout(function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()},150),Gt=null!=Y.deltaY?Y.deltaY/-250:null!=Y.wheelDeltaY?Y.wheelDeltaY/1e3:Y.wheelDelta/1e3,Gt*=t.wheelSensitivity,1===Y.deltaMode&&(Gt*=33);var Kt=ht.zoom()*Math.pow(10,Gt);"gesturechange"===Y.type&&(Kt=t.gestureStartZoom*Y.scale),ht.zoom({level:Kt,renderedPosition:{x:Ht[0],y:Ht[1]}}),ht.emit("gesturechange"===Y.type?"pinchzoom":"scrollzoom")}}};t.registerBinding(t.container,"wheel",Lt,!0),t.registerBinding(window,"scroll",function(Y){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout(function(){t.scrollingPage=!1},250)},!0),t.registerBinding(t.container,"gesturestart",function(Y){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||Y.preventDefault()},!0),t.registerBinding(t.container,"gesturechange",function(Y){t.hasTouchStarted||Lt(Y)},!0),t.registerBinding(t.container,"mouseout",function(Y){var ht=t.projectIntoViewport(Y.clientX,Y.clientY);t.cy.emit({originalEvent:Y,type:"mouseout",position:{x:ht[0],y:ht[1]}})},!1),t.registerBinding(t.container,"mouseover",function(Y){var ht=t.projectIntoViewport(Y.clientX,Y.clientY);t.cy.emit({originalEvent:Y,type:"mouseover",position:{x:ht[0],y:ht[1]}})},!1);var mt,_t,bt,Tt,Mt,Bt,Xt,zt=function(Y,ht,xt,Ct){return Math.sqrt((xt-Y)*(xt-Y)+(Ct-ht)*(Ct-ht))},jt=function(Y,ht,xt,Ct){return(xt-Y)*(xt-Y)+(Ct-ht)*(Ct-ht)};if(t.registerBinding(t.container,"touchstart",mt=function(Y){if(t.hasTouchStarted=!0,X(Y)){x(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var ht=t.cy,xt=t.touchData.now,Ct=t.touchData.earlier;if(Y.touches[0]){var wt=t.projectIntoViewport(Y.touches[0].clientX,Y.touches[0].clientY);xt[0]=wt[0],xt[1]=wt[1]}if(Y.touches[1]&&(wt=t.projectIntoViewport(Y.touches[1].clientX,Y.touches[1].clientY),xt[2]=wt[0],xt[3]=wt[1]),Y.touches[2]&&(wt=t.projectIntoViewport(Y.touches[2].clientX,Y.touches[2].clientY),xt[4]=wt[0],xt[5]=wt[1]),Y.touches[1]){t.touchData.singleTouchMoved=!0,h(t.dragData.touchDragEles);var Ht=t.findContainerClientCoords();ft=Ht[2],et=Ht[3],F=Y.touches[0].clientY-(vt=Ht[1]),M=Y.touches[1].clientX-(st=Ht[0]),V=Y.touches[1].clientY-vt,Pt=0<=(z=Y.touches[0].clientX-st)&&z<=ft&&0<=M&&M<=ft&&0<=F&&F<=et&&0<=V&&V<=et;var Gt=ht.pan(),Kt=ht.zoom();if(Z=zt(z,F,M,V),K=jt(z,F,M,V),ot=[((it=[(z+M)/2,(F+V)/2])[0]-Gt.x)/Kt,(it[1]-Gt.y)/Kt],K<4e4&&!Y.touches[2]){var ae=t.findNearestElement(xt[0],xt[1],!0,!0),ue=t.findNearestElement(xt[2],xt[3],!0,!0);return ae&&ae.isNode()?(ae.activate().emit({originalEvent:Y,type:"cxttapstart",position:{x:xt[0],y:xt[1]}}),t.touchData.start=ae):ue&&ue.isNode()?(ue.activate().emit({originalEvent:Y,type:"cxttapstart",position:{x:xt[0],y:xt[1]}}),t.touchData.start=ue):ht.emit({originalEvent:Y,type:"cxttapstart",position:{x:xt[0],y:xt[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(Y.touches[2])ht.boxSelectionEnabled()&&Y.preventDefault();else if(!Y.touches[1]&&Y.touches[0]){var ce=t.findNearestElements(xt[0],xt[1],!0,!0),re=ce[0];if(null!=re&&(re.activate(),t.touchData.start=re,t.touchData.starts=ce,t.nodeIsGrabbable(re))){var fe=t.dragData.touchDragEles=ht.collection(),ke=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),re.selected()?(ke=ht.$(function(Ye){return Ye.selected()&&t.nodeIsGrabbable(Ye)}),s(ke,{addToList:fe})):u(re,{addToList:fe}),o(re);var We=function(Ye){return{originalEvent:Y,type:Ye,position:{x:xt[0],y:xt[1]}}};re.emit(We("grabon")),ke?ke.forEach(function(Ye){Ye.emit(We("grab"))}):re.emit(We("grab"))}n(re,["touchstart","tapstart","vmousedown"],Y,{x:xt[0],y:xt[1]}),null==re&&(t.data.bgActivePosistion={x:wt[0],y:wt[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout(function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],Y,{x:xt[0],y:xt[1]})},t.tapholdDuration)}if(Y.touches.length>=1){for(var Ln=t.touchData.startPosition=[],rn=0;rn<xt.length;rn++)Ln[rn]=Ct[rn]=xt[rn];var gn=Y.touches[0];t.touchData.startGPosition=[gn.clientX,gn.clientY]}}},!1),t.registerBinding(window,"touchmove",_t=function(Y){var ht=t.touchData.capture;if(ht||X(Y)){var xt=t.selection,Ct=t.cy,wt=t.touchData.now,Ht=t.touchData.earlier,Gt=Ct.zoom();if(Y.touches[0]){var Kt=t.projectIntoViewport(Y.touches[0].clientX,Y.touches[0].clientY);wt[0]=Kt[0],wt[1]=Kt[1]}Y.touches[1]&&(Kt=t.projectIntoViewport(Y.touches[1].clientX,Y.touches[1].clientY),wt[2]=Kt[0],wt[3]=Kt[1]),Y.touches[2]&&(Kt=t.projectIntoViewport(Y.touches[2].clientX,Y.touches[2].clientY),wt[4]=Kt[0],wt[5]=Kt[1]);var ae,ue=t.touchData.startGPosition;if(ht&&Y.touches[0]&&ue){for(var ce=[],re=0;re<wt.length;re++)ce[re]=wt[re]-Ht[re];var fe=Y.touches[0].clientX-ue[0],We=Y.touches[0].clientY-ue[1];ae=fe*fe+We*We>=t.touchTapThreshold2}if(ht&&t.touchData.cxt){Y.preventDefault();var Ln=Y.touches[0].clientX-st,rn=Y.touches[0].clientY-vt,gn=Y.touches[1].clientX-st,Ye=Y.touches[1].clientY-vt,fr=jt(Ln,rn,gn,Ye);if(fr/K>=2.25||fr>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var pr={originalEvent:Y,type:"cxttapend",position:{x:wt[0],y:wt[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(pr),t.touchData.start=null):Ct.emit(pr)}}if(ht&&t.touchData.cxt){pr={originalEvent:Y,type:"cxtdrag",position:{x:wt[0],y:wt[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(pr):Ct.emit(pr),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var vn=t.findNearestElement(wt[0],wt[1],!0,!0);t.touchData.cxtOver&&vn===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:Y,type:"cxtdragout",position:{x:wt[0],y:wt[1]}}),t.touchData.cxtOver=vn,vn&&vn.emit({originalEvent:Y,type:"cxtdragover",position:{x:wt[0],y:wt[1]}}))}else if(ht&&Y.touches[2]&&Ct.boxSelectionEnabled())Y.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||Ct.emit({originalEvent:Y,type:"boxstart",position:{x:wt[0],y:wt[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,xt[4]=1,xt&&0!==xt.length&&void 0!==xt[0]?(xt[2]=(wt[0]+wt[2]+wt[4])/3,xt[3]=(wt[1]+wt[3]+wt[5])/3):(xt[0]=(wt[0]+wt[2]+wt[4])/3,xt[1]=(wt[1]+wt[3]+wt[5])/3,xt[2]=(wt[0]+wt[2]+wt[4])/3+1,xt[3]=(wt[1]+wt[3]+wt[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(ht&&Y.touches[1]&&!t.touchData.didSelect&&Ct.zoomingEnabled()&&Ct.panningEnabled()&&Ct.userZoomingEnabled()&&Ct.userPanningEnabled()){if(Y.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),Kn=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var Tn=0;Tn<Kn.length;Tn++){var Pi=Kn[Tn]._private;Pi.grabbed=!1,Pi.rscratch.inDragLayer=!1}}var _r=t.touchData.start,Ai=zt(Ln=Y.touches[0].clientX-st,rn=Y.touches[0].clientY-vt,gn=Y.touches[1].clientX-st,Ye=Y.touches[1].clientY-vt),Cr=Ai/Z;if(Pt){var Nr=(Ln-z+(gn-M))/2,_i=(rn-F+(Ye-V))/2,jn=Ct.zoom(),Wn=jn*Cr,xa=Ct.pan(),sl=ot[0]*jn+xa.x,ll=ot[1]*jn+xa.y,Wu={x:-Wn/jn*(sl-xa.x-Nr)+sl,y:-Wn/jn*(ll-xa.y-_i)+ll};if(_r&&_r.active()){var Kn=t.dragData.touchDragEles;h(Kn),t.redrawHint("drag",!0),t.redrawHint("eles",!0),_r.unactivate().emit("freeon"),Kn.emit("free"),t.dragData.didDrag&&(_r.emit("dragfreeon"),Kn.emit("dragfree"))}Ct.viewport({zoom:Wn,pan:Wu,cancelOnFailedZoom:!0}),Ct.emit("pinchzoom"),Z=Ai,z=Ln,F=rn,M=gn,V=Ye,t.pinching=!0}Y.touches[0]&&(Kt=t.projectIntoViewport(Y.touches[0].clientX,Y.touches[0].clientY),wt[0]=Kt[0],wt[1]=Kt[1]),Y.touches[1]&&(Kt=t.projectIntoViewport(Y.touches[1].clientX,Y.touches[1].clientY),wt[2]=Kt[0],wt[3]=Kt[1]),Y.touches[2]&&(Kt=t.projectIntoViewport(Y.touches[2].clientX,Y.touches[2].clientY),wt[4]=Kt[0],wt[5]=Kt[1])}else if(Y.touches[0]&&!t.touchData.didSelect){var An=t.touchData.start,bo=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(vn=t.findNearestElement(wt[0],wt[1],!0,!0)),ht&&null!=An&&Y.preventDefault(),ht&&null!=An&&t.nodeIsDraggable(An))if(ae){Kn=t.dragData.touchDragEles;var ul=!t.dragData.didDrag;ul&&s(Kn,{inDragLayer:!0}),t.dragData.didDrag=!0;var Ci={x:0,y:0};N(ce[0])&&N(ce[1])&&(Ci.x+=ce[0],Ci.y+=ce[1],ul&&(t.redrawHint("eles",!0),(Fn=t.touchData.dragDelta)&&N(Fn[0])&&N(Fn[1])&&(Ci.x+=Fn[0],Ci.y+=Fn[1]))),t.hoverData.draggingEles=!0,Kn.silentShift(Ci).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==Ht[0]&&t.touchData.startPosition[1]==Ht[1]&&t.redrawHint("eles",!0),t.redraw()}else{var Fn;0===(Fn=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(Fn.push(ce[0]),Fn.push(ce[1])):(Fn[0]+=ce[0],Fn[1]+=ce[1])}if(n(An||vn,["touchmove","tapdrag","vmousemove"],Y,{x:wt[0],y:wt[1]}),An&&An.grabbed()||vn==bo||(bo&&bo.emit({originalEvent:Y,type:"tapdragout",position:{x:wt[0],y:wt[1]}}),vn&&vn.emit({originalEvent:Y,type:"tapdragover",position:{x:wt[0],y:wt[1]}})),t.touchData.last=vn,ht)for(Tn=0;Tn<wt.length;Tn++)wt[Tn]&&t.touchData.startPosition[Tn]&&ae&&(t.touchData.singleTouchMoved=!0);ht&&(null==An||An.pannable())&&Ct.panningEnabled()&&Ct.userPanningEnabled()&&(i(An,t.touchData.starts)&&(Y.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Yn(t.touchData.startPosition)),t.swipePanning?(Ct.panBy({x:ce[0]*Gt,y:ce[1]*Gt}),Ct.emit("dragpan")):ae&&(t.swipePanning=!0,Ct.panBy({x:fe*Gt,y:We*Gt}),Ct.emit("dragpan"),An&&(An.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),Kt=t.projectIntoViewport(Y.touches[0].clientX,Y.touches[0].clientY),wt[0]=Kt[0],wt[1]=Kt[1])}for(re=0;re<wt.length;re++)Ht[re]=wt[re];ht&&Y.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",bt=function(Y){var ht=t.touchData.start;t.touchData.capture=!1,ht&&ht.unactivate()}),t.registerBinding(window,"touchend",Tt=function(Y){var ht=t.touchData.start;if(t.touchData.capture){0===Y.touches.length&&(t.touchData.capture=!1),Y.preventDefault();var xt=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var Ct,wt=t.cy,Ht=wt.zoom(),Gt=t.touchData.now,Kt=t.touchData.earlier;if(Y.touches[0]){var ae=t.projectIntoViewport(Y.touches[0].clientX,Y.touches[0].clientY);Gt[0]=ae[0],Gt[1]=ae[1]}if(Y.touches[1]&&(ae=t.projectIntoViewport(Y.touches[1].clientX,Y.touches[1].clientY),Gt[2]=ae[0],Gt[3]=ae[1]),Y.touches[2]&&(ae=t.projectIntoViewport(Y.touches[2].clientX,Y.touches[2].clientY),Gt[4]=ae[0],Gt[5]=ae[1]),ht&&ht.unactivate(),t.touchData.cxt){if(Ct={originalEvent:Y,type:"cxttapend",position:{x:Gt[0],y:Gt[1]}},ht?ht.emit(Ct):wt.emit(Ct),!t.touchData.cxtDragged){var ue={originalEvent:Y,type:"cxttap",position:{x:Gt[0],y:Gt[1]}};ht?ht.emit(ue):wt.emit(ue)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!Y.touches[2]&&wt.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var ce=wt.collection(t.getAllInBox(xt[0],xt[1],xt[2],xt[3]));xt[0]=void 0,xt[1]=void 0,xt[2]=void 0,xt[3]=void 0,xt[4]=0,t.redrawHint("select",!0),wt.emit({type:"boxend",originalEvent:Y,position:{x:Gt[0],y:Gt[1]}}),ce.emit("box").stdFilter(function(fr){return fr.selectable()&&!fr.selected()}).select().emit("boxselect"),ce.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=ht&&ht.unactivate(),Y.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(!Y.touches[1]&&!Y.touches[0]&&!Y.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var re=t.dragData.touchDragEles;if(null!=ht){var fe=ht._private.grabbed;h(re),t.redrawHint("drag",!0),t.redrawHint("eles",!0),fe&&(ht.emit("freeon"),re.emit("free"),t.dragData.didDrag&&(ht.emit("dragfreeon"),re.emit("dragfree"))),n(ht,["touchend","tapend","vmouseup","tapdragout"],Y,{x:Gt[0],y:Gt[1]}),ht.unactivate(),t.touchData.start=null}else{var ke=t.findNearestElement(Gt[0],Gt[1],!0,!0);n(ke,["touchend","tapend","vmouseup","tapdragout"],Y,{x:Gt[0],y:Gt[1]})}var We=t.touchData.startPosition[0]-Gt[0],rn=t.touchData.startPosition[1]-Gt[1],gn=(We*We+rn*rn)*Ht*Ht;t.touchData.singleTouchMoved||(ht||wt.$(":selected").unselect(["tapunselect"]),n(ht,["tap","vclick"],Y,{x:Gt[0],y:Gt[1]}),Mt=!1,Y.timeStamp-Xt<=wt.multiClickDebounceTime()?(Bt&&clearTimeout(Bt),Mt=!0,Xt=null,n(ht,["dbltap","vdblclick"],Y,{x:Gt[0],y:Gt[1]})):(Bt=setTimeout(function(){Mt||n(ht,["onetap","voneclick"],Y,{x:Gt[0],y:Gt[1]})},wt.multiClickDebounceTime()),Xt=Y.timeStamp)),null!=ht&&!t.dragData.didDrag&&ht._private.selectable&&gn<t.touchTapThreshold2&&!t.pinching&&("single"===wt.selectionType()?(wt.$(e).unmerge(ht).unselect(["tapunselect"]),ht.select(["tapselect"])):ht.selected()?ht.unselect(["tapunselect"]):ht.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var Ye=0;Ye<Gt.length;Ye++)Kt[Ye]=Gt[Ye];t.dragData.didDrag=!1,0===Y.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),Y.touches.length<2&&(1===Y.touches.length&&(t.touchData.startGPosition=[Y.touches[0].clientX,Y.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var Zt=[],ne=function(Y){return{clientX:Y.clientX,clientY:Y.clientY,force:1,identifier:Y.pointerId,pageX:Y.pageX,pageY:Y.pageY,radiusX:Y.width/2,radiusY:Y.height/2,screenX:Y.screenX,screenY:Y.screenY,target:Y.target}},Yt=function(Y){for(var ht=0;ht<Zt.length;ht++)if(Zt[ht].event.pointerId===Y.pointerId)return void Zt.splice(ht,1)},Wt=function(Y){Y.touches=Zt.map(function(ht){return ht.touch})},Qt=function(Y){return"mouse"===Y.pointerType||4===Y.pointerType};t.registerBinding(t.container,"pointerdown",function(Y){Qt(Y)||(Y.preventDefault(),function(Y){var ht;Zt.push({event:ht=Y,touch:ne(ht)})}(Y),Wt(Y),mt(Y))}),t.registerBinding(t.container,"pointerup",function(Y){Qt(Y)||(Yt(Y),Wt(Y),Tt(Y))}),t.registerBinding(t.container,"pointercancel",function(Y){Qt(Y)||(Yt(Y),Wt(Y),bt())}),t.registerBinding(t.container,"pointermove",function(Y){var ht,xt;Qt(Y)||(Y.preventDefault(),ht=Y,(xt=Zt.filter(function(Ct){return Ct.event.pointerId===ht.pointerId})[0]).event=ht,xt.touch=ne(ht),Wt(Y),_t(Y))})}}},cr={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(n,r,i,a,o){this.renderer.nodeShapeImpl("polygon",n,r,i,a,o,this.points)},intersectLine:function(n,r,i,a,o,l,s){return Er(o,l,this.points,n,r,i/2,a/2,s)},checkPoint:function(n,r,i,a,o,l,s){return In(n,r,this.points,l,s,a,o,[0,-1],i)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return function(l,s,u,h,g,x){var E=u-l,m=h-s;E/=g,m/=x;var S=Math.sqrt(E*E+m*m),A=S-1;if(A<0)return[];var L=A/S;return[(u-l)*L+l,(h-s)*L+s]}(i,a,t,e,n/2+o,r/2+o)},checkPoint:function(t,e,n,r,i,a,o){return Un(t,e,r,i,a,o,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var a,i=2*r;a=r<e.length/2-1?2*(r+1):0,n[4*r]=e[i],n[4*r+1]=e[i+1];var o=e[a]-e[i],l=e[a+1]-e[i+1],s=Math.sqrt(o*o+l*l);n[4*r+2]=o/s,n[4*r+3]=l/s}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(u,h,g,x,E){this.renderer.nodeShapeImpl("round-polygon",u,h,g,x,E,this.points)},intersectLine:function(u,h,g,x,E,m,S){return function(A,L,P,_,X,z,F,M){for(var V,Z=[],K=new Array(P.length),it=z/2,ot=F/2,st=pi(z,F),vt=0;vt<P.length/4;vt++){var ft,et;et=0===vt?P.length-2:4*vt-2,ft=4*vt+2;var Pt=_+it*P[4*vt],Lt=X+ot*P[4*vt+1],_t=st/Math.tan(Math.acos(-P[et]*P[ft]-P[et+1]*P[ft+1])/2),bt=Pt-_t*P[et],Tt=Lt-_t*P[et+1],Mt=Pt+_t*P[ft],Bt=Lt+_t*P[ft+1];0===vt?(K[P.length-2]=bt,K[P.length-1]=Tt):(K[4*vt-2]=bt,K[4*vt-1]=Tt),K[4*vt]=Mt,K[4*vt+1]=Bt;var Xt=P[et+1],zt=-P[et];Xt*P[ft]+zt*P[ft+1]<0&&(Xt*=-1,zt*=-1),0!==(V=wr(A,L,_,X,bt+Xt*st,Tt+zt*st,st)).length&&Z.push(V[0],V[1])}for(var jt=0;jt<K.length/4;jt++)0!==(V=Mn(A,L,_,X,K[4*jt],K[4*jt+1],K[4*jt+2],K[4*jt+3],!1)).length&&Z.push(V[0],V[1]);if(Z.length>2){for(var Zt=[Z[0],Z[1]],ne=Math.pow(Zt[0]-A,2)+Math.pow(Zt[1]-L,2),oe=1;oe<Z.length/2;oe++){var Yt=Math.pow(Z[2*oe]-A,2)+Math.pow(Z[2*oe+1]-L,2);Yt<=ne&&(Zt[0]=Z[2*oe],Zt[1]=Z[2*oe+1],ne=Yt)}return Zt}return Z}(E,m,this.points,u,h,g,x)},checkPoint:function(u,h,g,x,E,m,S){return function(A,L,P,_,X,z,F){for(var M=new Array(P.length),V=z/2,Z=F/2,K=pi(z,F),it=K*K,ot=0;ot<P.length/4;ot++){var st,vt;vt=0===ot?P.length-2:4*ot-2,st=4*ot+2;var ft=_+V*P[4*ot],et=X+Z*P[4*ot+1],Lt=K/Math.tan(Math.acos(-P[vt]*P[st]-P[vt+1]*P[st+1])/2),mt=ft-Lt*P[vt],_t=et-Lt*P[vt+1],bt=ft+Lt*P[st],Tt=et+Lt*P[st+1];M[4*ot]=mt,M[4*ot+1]=_t,M[4*ot+2]=bt,M[4*ot+3]=Tt;var Mt=P[vt+1],Bt=-P[vt];Mt*P[st]+Bt*P[st+1]<0&&(Mt*=-1,Bt*=-1);var zt=_t+Bt*K;if(Math.pow(mt+Mt*K-A,2)+Math.pow(zt-L,2)<=it)return!0}return Qe(A,L,M)}(u,h,this.points,m,S,x,E)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return Xi(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var l=Dr(r,i),s=2*l;return!!(In(t,e,this.points,a,o,r,i-s,[0,-1],n)||In(t,e,this.points,a,o,r-s,i,[0,-1],n)||Un(t,e,s,s,a-r/2+l,o-i/2+l,n)||Un(t,e,s,s,a+r/2-l,o-i/2+l,n)||Un(t,e,s,s,a+r/2-l,o+i/2-l,n)||Un(t,e,s,s,a-r/2+l,o+i/2-l,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,a=e/2,o=t/2,l=n-o,s=n+o,u=r-a,h=r+a;return{topLeft:[l,u+i,l+i,u,l+i,u+i],topRight:[s-i,u,s,u+i,s-i,u+i],bottomRight:[s,h-i,s-i,h,s-i,h-i],bottomLeft:[l+i,h,l,h-i,l+i,h-i]}},intersectLine:function(t,e,n,r,i,a,o){var l=this.generateCutTrianglePts(n+2*o,r+2*o,t,e),s=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Er(i,a,s,t,e)},checkPoint:function(t,e,n,r,i,a,o){if(In(t,e,this.points,a,o,r,i-2*this.cornerLength,[0,-1],n)||In(t,e,this.points,a,o,r-2*this.cornerLength,i,[0,-1],n))return!0;var l=this.generateCutTrianglePts(r,i,a,o);return Qe(t,e,l.topLeft)||Qe(t,e,l.topRight)||Qe(t,e,l.bottomRight)||Qe(t,e,l.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var l=this.generateBarrelBezierPts(n+2*o,r+2*o,t,e),s=function(h){var g=Vn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.15),x=Vn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.5),E=Vn({x:h[0],y:h[1]},{x:h[2],y:h[3]},{x:h[4],y:h[5]},.85);return[h[0],h[1],g.x,g.y,x.x,x.y,E.x,E.y,h[4],h[5]]},u=[].concat(s(l.topLeft),s(l.topRight),s(l.bottomRight),s(l.bottomLeft));return Er(i,a,u,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,a=t/2,o=n-a,l=n+a,s=r-i,u=r+i,h=gi(t,e),g=h.heightOffset,x=h.widthOffset,E=h.ctrlPtOffsetPct*t,m={topLeft:[o,s+g,o+E,s,o+x,s],topRight:[l-x,s,l-E,s,l,s+g],bottomRight:[l,u-g,l-E,u,l-x,u],bottomLeft:[o+x,u,o+E,u,o,u-g]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(t,e,n,r,i,a,o){var l=gi(r,i),u=l.widthOffset;if(In(t,e,this.points,a,o,r,i-2*l.heightOffset,[0,-1],n)||In(t,e,this.points,a,o,r-2*u,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,a,o),g=function(X,z,F){var M,V,Z=F[4],K=F[2],it=F[0],ot=F[5],st=F[1],vt=Math.min(Z,it),ft=Math.max(Z,it),et=Math.min(ot,st),Pt=Math.max(ot,st);if(vt<=X&&X<=ft&&et<=z&&z<=Pt){var Lt=[(M=Z)-2*(V=K)+it,2*(V-M),M],mt=function(_t,bt,Tt,Mt){var Bt=bt*bt-4*_t*(Tt-=Mt);if(Bt<0)return[];var Xt=Math.sqrt(Bt),zt=2*_t;return[(-bt+Xt)/zt,(-bt-Xt)/zt]}(Lt[0],Lt[1],Lt[2],X).filter(function(_t){return 0<=_t&&_t<=1});if(mt.length>0)return mt[0]}return null},x=Object.keys(h),E=0;E<x.length;E++){var m=h[x[E]],S=g(t,e,m);if(null!=S){var _=Oe(m[5],m[3],m[1],S);if(m.isTop&&_<=e||m.isBottom&&e<=_)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ue(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var l=e-(r/2+o),s=Mn(i,a,t,e,t-(n/2+o),l,t+(n/2+o),l,!1);return s.length>0?s:Xi(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var l=Dr(r,i),s=2*l;if(In(t,e,this.points,a,o,r,i-s,[0,-1],n)||In(t,e,this.points,a,o,r-s,i,[0,-1],n))return!0;var u=r/2+2*n,h=i/2+2*n;return!!Qe(t,e,[a-u,o-h,a-u,o,a+u,o,a+u,o-h])||!!Un(t,e,s,s,a+r/2-l,o+i/2-l,n)||!!Un(t,e,s,s,a-r/2+l,o+i/2-l,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Ue(3,0)),this.generateRoundPolygon("round-triangle",Ue(3,0)),this.generatePolygon("rectangle",Ue(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Ue(5,0)),this.generateRoundPolygon("round-pentagon",Ue(5,0)),this.generatePolygon("hexagon",Ue(6,0)),this.generateRoundPolygon("round-hexagon",Ue(6,0)),this.generatePolygon("heptagon",Ue(7,0)),this.generateRoundPolygon("round-heptagon",Ue(7,0)),this.generatePolygon("octagon",Ue(8,0)),this.generateRoundPolygon("round-octagon",Ue(8,0));var r=new Array(20),i=fi(5,0),a=fi(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var l=0;l<a.length/2;l++)a[2*l]*=o,a[2*l+1]*=o;for(l=0;l<5;l++)r[4*l]=i[2*l],r[4*l+1]=i[2*l+1],r[4*l+2]=a[2*l],r[4*l+3]=a[2*l+1];r=qi(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var s=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",s),this.generateRoundPolygon("round-tag",s),t.makePolygon=function(u){var h,g="polygon-"+u.join("$");return(h=this[g])?h:e.generatePolygon(g,u)}}},Fs={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||Bi();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&_e("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort(function(r,i){return i.priority-r.priority})}}},Bs=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};Fs.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,gr(function n(r){if(!t.destroyed){if(!e.batching())if(t.requestedFrame&&!t.skipFrame){Bs(t,!0,r);var i=hn();t.render(t.renderOptions);var a=t.lastDrawTime=hn();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var o=a-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Bs(t,!1,r);t.skipFrame=!1,gr(n)}}))};var zs=function(t){this.init(t)},Jr=zs.prototype;Jr.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Jr.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(w){var r=w.document,i=r.head,a="__________cytoscape_container",o=null!=r.getElementById("__________cytoscape_stylesheet");if(n.className.indexOf(a)<0&&(n.className=(n.className||"")+" "+a),!o){var l=r.createElement("style");l.id="__________cytoscape_stylesheet",l.innerHTML="."+a+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===w.getComputedStyle(n).getPropertyValue("position")&&be("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=N(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Jr.notify=function(t,e){var n=this;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&n.cy.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Jr.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(i){}},Jr.isHeadless=function(){return!1},[Du,Rs,Au,Li,cr,Fs].forEach(function(t){W(Jr,t)});var Ys=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=Ge(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold);n.beforeRender(function(a,o){var l=hn(),s=n.averageRedrawTime,u=n.lastRedrawTime,h=[],g=n.cy.extent(),x=n.getPixelRatio();for(a||n.flushRenderedStyleQueue();;){var E=hn(),m=E-l,S=E-o;if(u<1e3/60){if(S>=t.deqFastCost*(1e3/60-(a?s:0)))break}else if(a){if(m>=t.deqCost*u||m>=t.deqAvgCost*s)break}else if(S>=t.deqNoDrawCost*(1e3/60))break;var L=t.deq(e,x,g);if(!(L.length>0))break;for(var P=0;P<L.length;P++)h.push(L[P])}h.length>0&&(t.onDeqd(e,h),!a&&t.shouldRedraw(e,h,x,g)&&r())},(t.priority||ri)(e))}}},_u=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;ut(this,t),this.idsByKey=new mn,this.keyForId=new mn,this.cachesByLvl=new mn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return R(t,[{key:"getIdsFor",value:function(e){null==e&&_e("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new zn,n.set(e,r)),r}},{key:"addIdForKey",value:function(e,n){null!=e&&this.getIdsFor(e).add(n)}},{key:"deleteIdForKey",value:function(e,n){null!=e&&this.getIdsFor(e).delete(n)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var n=e.id(),r=this.keyForId.get(n),i=this.getKey(e);this.deleteIdForKey(r,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(e){var n=e.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(e){var n=e.id();return this.keyForId.get(n)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var n=this.cachesByLvl,r=this.lvls,i=n.get(e);return i||(i=new mn,n.set(e,i),r.push(e)),i}},{key:"getCache",value:function(e,n){return this.getCachesAt(n).get(e)}},{key:"get",value:function(e,n){var r=this.getKey(e),i=this.getCache(r,n);return null!=i&&this.updateKeyMappingFor(e),i}},{key:"getForCachedKey",value:function(e,n){var r=this.keyForId.get(e.id());return this.getCache(r,n)}},{key:"hasCache",value:function(e,n){return this.getCachesAt(n).has(e)}},{key:"has",value:function(e,n){var r=this.getKey(e);return this.hasCache(r,n)}},{key:"setCache",value:function(e,n,r){r.key=e,this.getCachesAt(n).set(e,r)}},{key:"set",value:function(e,n,r){var i=this.getKey(e);this.setCache(i,n,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,n){this.getCachesAt(n).delete(e)}},{key:"delete",value:function(e,n){var r=this.getKey(e);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(e){var n=this;this.lvls.forEach(function(r){return n.deleteCache(e,r)})}},{key:"invalidate",value:function(e){var n=e.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(e);var i=this.doesEleInvalidateKey(e);return i&&this.invalidateKey(r),i||0===this.getNumberOfIdsForKey(r)}}]),t}(),ti={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Cu=Re({getKey:null,doesEleInvalidateKey:Or,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Oi,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ti=function(t,e){this.renderer=t,this.onDequeues=[];var n=Cu(e);W(this,n),this.lookup=new _u(n.getKey,n.doesEleInvalidateKey),this.setupDequeueing()},ze=Ti.prototype;ze.reasons=ti,ze.getTextureQueue=function(t){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[t]=this.eleImgCaches[t]||[]},ze.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},ze.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new Sn(function(t,e){return e.reqs-t.reqs})},ze.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},ze.getElement=function(t,e,n,r,i){var a=this,o=this.renderer,l=o.cy.zoom(),s=this.lookup;if(!e||0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible()||t.removed()||!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil(ui(l*n))),r<-4)r=-4;else if(l>=7.99||r>3)return null;var u=Math.pow(2,r),h=e.h*u,g=e.w*u,x=o.eleTextBiggerThanMin(t,u);if(!this.isVisible(t,x))return null;var E,m=s.get(t,r);if(m&&m.invalidated&&(m.invalidated=!1,m.texture.invalidatedWidth-=m.width),m)return m;if(E=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||g>1024)return null;var S=a.getTextureQueue(E),A=S[S.length-2],L=function(){return a.recycleTexture(E,g)||a.addTexture(E,g)};A||(A=S[S.length-1]),A||(A=L()),A.width-A.usedWidth<g&&(A=L());for(var P,_=function(ft){return ft&&ft.scaledLabelShown===x},X=i&&i===ti.dequeue,z=i&&i===ti.highQuality,F=i&&i===ti.downscale,M=r+1;M<=3;M++){var V=s.get(t,M);if(V){P=V;break}}var Z=P&&P.level===r+1?P:null,K=function(){A.context.drawImage(Z.texture.canvas,Z.x,0,Z.width,Z.height,A.usedWidth,0,g,h)};if(A.context.setTransform(1,0,0,1,0,0),A.context.clearRect(A.usedWidth,0,g,E),_(Z))K();else if(_(P)){if(!z)return a.queueElement(t,P.level-1),P;for(var it=P.level;it>r;it--)Z=a.getElement(t,e,n,it,ti.downscale);K()}else{var ot;if(!X&&!z&&!F)for(var st=r-1;st>=-4;st--){var vt=s.get(t,st);if(vt){ot=vt;break}}if(_(ot))return a.queueElement(t,r),ot;A.context.translate(A.usedWidth,0),A.context.scale(u,u),this.drawElement(A.context,t,e,x,!1),A.context.scale(1/u,1/u),A.context.translate(-A.usedWidth,0)}return m={x:A.usedWidth,texture:A,level:r,scale:u,width:g,height:h,scaledLabelShown:x},A.usedWidth+=Math.ceil(g+8),A.eleCaches.push(m),s.set(t,r,m),a.checkTextureFullness(A),m},ze.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},ze.invalidateElement=function(t){var e=this.lookup,n=[];if(e.isInvalid(t)){for(var r=-4;r<=3;r++){var i=e.getForCachedKey(t,r);i&&n.push(i)}if(e.invalidate(t))for(var a=0;a<n.length;a++){var o=n[a],l=o.texture;l.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(l)}this.removeFromQueue(t)}},ze.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},ze.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Cn(e,t):t.fullnessChecks++},ze.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Cn(n,t),t.retired=!0;for(var i=t.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}Gr(i),this.getRetiredTextureQueue(e).push(t)},ze.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},ze.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var a=r[i];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,Gr(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Cn(r,a),n.push(a),a}},ze.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),a=r[i];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,n.updateItem(a);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),r[i]=o}},ze.dequeue=function(t){for(var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=[],i=this.lookup,a=0;a<1&&e.size()>0;a++){var o=e.pop(),l=o.key,s=o.eles[0],u=i.hasCache(s,o.level);if(n[l]=null,!u){r.push(o);var h=this.getBoundingBox(s);this.getElement(s,h,t,o.level,ti.dequeue)}}return r},ze.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=Mr,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},ze.onDequeue=function(t){this.onDequeues.push(t)},ze.offDequeue=function(t){Cn(this.onDequeues,t)},ze.setupDequeueing=Ys({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var a=e[i].eles,o=0;o<a.length;o++){var l=a[o].boundingBox();if(ci(l,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var Xs=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=hn()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=Ge(function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)},50),n.beforeRender(function(i,a){e.skipping=a-e.lastInvalidationTime<=250},n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new Sn(function(i,a){return a.reqs-i.reqs}),e.setupDequeueing()},je=Xs.prototype,Hs=0,Nu=Math.pow(2,53)-1;je.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:Hs=++Hs%Nu,bb:t,level:e,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},l=o.context,s=-o.bb.x1,u=-o.bb.y1;return l.scale(n,n),l.translate(s,u),o},je.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),a=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil(ui(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var o,l,s=r.layersByLevel,u=Math.pow(2,n),h=s[n]=s[n]||[];if(r.levelIsComplete(n,t))return h;!function(){var X=function(V){if(r.validateLayersElesOrdering(V,t),r.levelIsComplete(V,t))return l=s[V],!0},z=function(V){if(!l)for(var Z=n+V;-4<=Z&&Z<=2&&!X(Z);Z+=V);};z(1),z(-1);for(var F=h.length-1;F>=0;F--){var M=h[F];M.invalid&&Cn(h,M)}}();var g=function(X){var z=(X=X||{}).after;if(function(){if(!o){o=Ke();for(var V=0;V<t.length;V++)Z=o,K=t[V].boundingBox(),Z.x1=Math.min(Z.x1,K.x1),Z.x2=Math.max(Z.x2,K.x2),Z.w=Z.x2-Z.x1,Z.y1=Math.min(Z.y1,K.y1),Z.y2=Math.max(Z.y2,K.y2),Z.h=Z.y2-Z.y1}var Z,K}(),o.w*u*(o.h*u)>16e6)return null;var F=r.makeLayer(o,n);if(null!=z){var M=h.indexOf(z)+1;h.splice(M,0,F)}else(void 0===X.insert||X.insert)&&h.unshift(F);return F};if(r.skipping&&!a)return null;for(var x=null,E=t.length/1,m=!a,S=0;S<t.length;S++){var A=t[S],L=A._private.rscratch,P=L.imgLayerCaches=L.imgLayerCaches||{},_=P[n];if(_)x=_;else{if((!x||x.eles.length>=E||!Yi(x.bb,A.boundingBox()))&&!(x=g({insert:!0,after:x})))return null;l||m?r.queueLayer(x,A):r.drawEleInLayer(x,A,n,e),x.eles.push(A),P[n]=x}}return l||(m?null:h)},je.getEleLevelForLayerLevel=function(t,e){return t},je.drawEleInLayer=function(t,e,n,r){var i=this.renderer,a=t.context,o=e.boundingBox();0!==o.w&&0!==o.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,e,null,null,n,!0),i.setImgSmoothing(a,!0))},je.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0||a.invalid)return!1;r+=a.eles.length}return r===e.length},je.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var l=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==e[l+o]){this.invalidateLayer(i);break}}}},je.updateElementsInLayers=function(t,e){for(var n=at(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],a=n?t[r]:t[r].ele,o=a._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},s=-4;s<=2;s++){var u=l[s];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||e(u,a,i))}},je.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},je.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=hn(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,function(n,r,i){e.invalidateLayer(n)}))},je.invalidateLayer=function(t){if(this.lastInvalidationTime=hn(),!t.invalid){var e=t.level,n=t.eles;Cn(this.layersByLevel[e],t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var a=n[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},je.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,function(n,r,i){var a=n.replacement;if(a||((a=n.replacement=e.makeLayer(n.bb,n.level)).replaces=n,a.eles=n.eles),!a.reqs)for(var o=0;o<a.eles.length;o++)e.queueLayer(a,a.eles[o])})},je.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},je.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},je.dequeue=function(t){for(var e=this.layersQueue,n=[],r=0;r<1&&0!==e.size();){var i=e.peek();if(i.replacement)e.pop();else if(i.replaces&&i!==i.replaces.replacement)e.pop();else if(i.invalid)e.pop();else{var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,t),r++),0===n.length&&n.push(!0),0===i.elesQueue.length&&(e.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}}return n},je.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var a=t.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[t.level]=t)}this.requestRedraw()}},je.requestRedraw=Ge(function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()},100),je.setupDequeueing=Ys({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:ri,shouldRedraw:Oi,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Vs,Us={};function ku(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function Mu(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i];0===i&&(r=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function qs(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var a=r[i];t.lineTo(a.x,a.y)}var o=n,l=n[0];for(t.moveTo(l.x,l.y),i=1;i<o.length;i++)t.lineTo((a=o[i]).x,a.y);t.closePath&&t.closePath()}function Ou(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var a=e,o=a[0];t.moveTo(o.x,o.y);for(var l=0;l<a.length;l++){var s=a[l];t.lineTo(s.x,s.y)}t.closePath&&t.closePath()}function Gu(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}Us.arrowShapeImpl=function(t){return(Vs||(Vs={polygon:ku,"triangle-backcurve":Mu,"triangle-tee":qs,"circle-triangle":Ou,"triangle-cross":qs,circle:Gu}))[t]};var ei={drawElement:function(t,e,n,r,i,a){e.isNode()?this.drawNode(t,e,n,r,i,a):this.drawEdge(t,e,n,r,i,a)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawElementUnderlay:function(t,e){e.isNode()?this.drawNodeUnderlay(t,e):this.drawEdgeUnderlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,a,o,l){var s=this,u=n.getBoundingBox(e);if(0!==u.w&&0!==u.h){var h=n.getElement(e,u,r,i,a);if(null!=h){var g=l(s,e);if(0===g)return;var x,E,m,S,A,L,P=o(s,e),_=u.x1,X=u.y1,z=u.w,F=u.h;if(0!==P){var M=n.getRotationPoint(e);t.translate(m=M.x,S=M.y),t.rotate(P),(A=s.getImgSmoothing(t))||s.setImgSmoothing(t,!0);var V=n.getRotationOffset(e);x=V.x,E=V.y}else x=_,E=X;1!==g&&(t.globalAlpha=(L=t.globalAlpha)*g),t.drawImage(h.texture.canvas,h.x,0,h.width,h.height,x,E,z,F),1!==g&&(t.globalAlpha=L),0!==P&&(t.rotate(-P),t.translate(-m,-S),A||s.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},Ru=function(){return 0},Fu=function(t,e){return t.getTextAngle(e,null)},Bu=function(t,e){return t.getTextAngle(e,"source")},zu=function(t,e){return t.getTextAngle(e,"target")},Yu=function(t,e){return e.effectiveOpacity()},go=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};ei.drawCachedElement=function(t,e,n,r,i,a){var o=this,l=o.data,s=l.eleTxrCache,u=l.lblTxrCache,h=l.slbTxrCache,g=l.tlbTxrCache,x=e.boundingBox(),E=!0===a?s.reasons.highQuality:null;if(0!==x.w&&0!==x.h&&e.visible()&&(!r||ci(x,r))){var m=e.isEdge(),S=e.element()._private.rscratch.badLine;o.drawElementUnderlay(t,e),o.drawCachedElementPortion(t,e,s,n,i,E,Ru,Yu),m&&S||o.drawCachedElementPortion(t,e,u,n,i,E,Fu,go),m&&!S&&(o.drawCachedElementPortion(t,e,h,n,i,E,Bu,go),o.drawCachedElementPortion(t,e,g,n,i,E,zu,go)),o.drawElementOverlay(t,e)}},ei.drawElements=function(t,e){for(var n=0;n<e.length;n++)this.drawElement(t,e[n])},ei.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++)this.drawCachedElement(t,e[i],n,r)},ei.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var a=e[i];a.isNode()&&this.drawCachedElement(t,a,n,r)}},ei.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],l=o.bb;0!==l.w&&0!==l.h&&t.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else this.drawCachedElements(t,e,n,r)};var dr={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,l=e._private.rscratch;if((!a||e.visible())&&!l.badLine&&null!=l.allpts&&!isNaN(l.allpts[0])){var s;n&&t.translate(-(s=n).x1,-s.y1);var u=a?e.pstyle("opacity").value:1,h=a?e.pstyle("line-opacity").value:1,g=e.pstyle("curve-style").value,x=e.pstyle("line-style").value,E=e.pstyle("width").pfValue,m=e.pstyle("line-cap").value,S=u*h,A=u*h,L=function(){var it=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;"straight-triangle"===g?(o.eleStrokeStyle(t,e,it),o.drawEdgeTrianglePath(e,t,l.allpts)):(t.lineWidth=E,t.lineCap=m,o.eleStrokeStyle(t,e,it),o.drawEdgePath(e,t,l.allpts,x),t.lineCap="butt")},P=function(){i&&o.drawEdgeOverlay(t,e)},_=function(){i&&o.drawEdgeUnderlay(t,e)},X=function(){o.drawArrowheads(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:A)},z=function(){o.drawElementText(t,e,null,r)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var M=e.pstyle("ghost-offset-x").pfValue,V=e.pstyle("ghost-offset-y").pfValue,Z=e.pstyle("ghost-opacity").value,K=S*Z;t.translate(M,V),L(K),X(K),t.translate(-M,-V)}_(),L(),X(),P(),z(),n&&t.translate(s.x1,s.y1)}}},$s=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n){if(n.visible()){var r=n.pstyle("".concat(t,"-opacity")).value;if(0!==r){var i=this,a=i.usePaths(),o=n._private.rscratch,l=2*n.pstyle("".concat(t,"-padding")).pfValue,s=n.pstyle("".concat(t,"-color")).value;e.lineWidth=l,e.lineCap="self"!==o.edgeType||a?"round":"butt",i.colorStrokeStyle(e,s[0],s[1],s[2],r),i.drawEdgePath(n,e,o.allpts,"solid")}}}};dr.drawEdgeOverlay=$s("overlay"),dr.drawEdgeUnderlay=$s("underlay"),dr.drawEdgePath=function(t,e,n,r){var i,a=t._private.rscratch,o=e,l=!1,s=this.usePaths(),u=t.pstyle("line-dash-pattern").pfValue,h=t.pstyle("line-dash-offset").pfValue;if(s){var g=n.join("$");a.pathCacheKey&&a.pathCacheKey===g?(i=e=a.pathCache,l=!0):(i=e=new Path2D,a.pathCacheKey=g,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(u),o.lineDashOffset=h;break;case"solid":o.setLineDash([])}if(!l&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var x=2;x+3<n.length;x+=4)e.quadraticCurveTo(n[x],n[x+1],n[x+2],n[x+3]);break;case"straight":case"segments":case"haystack":for(var E=2;E+1<n.length;E+=2)e.lineTo(n[E],n[E+1])}e=o,s?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},dr.drawEdgeTrianglePath=function(t,e,n){e.fillStyle=e.strokeStyle;for(var r=t.pstyle("width").pfValue,i=0;i+1<n.length;i+=2){var a=[n[i+2]-n[i],n[i+3]-n[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=[a[1]/o,-a[0]/o],s=[l[0]*r/2,l[1]*r/2];e.beginPath(),e.moveTo(n[i]-s[0],n[i+1]-s[1]),e.lineTo(n[i]+s[0],n[i+1]+s[1]),e.lineTo(n[i+2],n[i+3]),e.closePath(),e.fill()}},dr.drawArrowheads=function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},dr.drawArrowhead=function(t,e,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var l=e.pstyle(n+"-arrow-shape").value;if("none"!==l){var s="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",u=e.pstyle(n+"-arrow-fill").value,h=e.pstyle("width").pfValue,g=e.pstyle("opacity").value;void 0===o&&(o=g);var x=t.globalCompositeOperation;1===o&&"hollow"!==u||(t.globalCompositeOperation="destination-out",this.colorFillStyle(t,255,255,255,1),this.colorStrokeStyle(t,255,255,255,1),this.drawArrowShape(e,t,s,h,l,r,i,a),t.globalCompositeOperation=x);var E=e.pstyle(n+"-arrow-color").value;this.colorFillStyle(t,E[0],E[1],E[2],o),this.colorStrokeStyle(t,E[0],E[1],E[2],o),this.drawArrowShape(e,t,u,h,l,r,i,a)}}},dr.drawArrowShape=function(t,e,n,r,i,a,o,l){var s,u=this,h=this.usePaths()&&"triangle-cross"!==i,g=!1,x=e,E={x:a,y:o},m=t.pstyle("arrow-scale").value,S=this.getArrowWidth(r,m),A=u.arrowShapes[i];if(h){var L=u.arrowPathCache=u.arrowPathCache||[],P=Bn(i),_=L[P];null!=_?(s=e=_,g=!0):(s=e=new Path2D,L[P]=s)}g||(e.beginPath&&e.beginPath(),h?A.draw(e,1,0,{x:0,y:0},1):A.draw(e,S,l,E,r),e.closePath&&e.closePath()),e=x,h&&(e.translate(a,o),e.rotate(l),e.scale(S,S)),"filled"!==n&&"both"!==n||(h?e.fill(s):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(A.matchEdgeWidth?r:1)/(h?S:1),e.lineJoin="miter",h?e.stroke(s):e.stroke()),h&&(e.scale(1/S,1/S),e.rotate(-l),e.translate(-a,-o))};var Xu={safeDrawImage:function(t,e,n,r,i,a,o,l,s,u){i<=0||a<=0||s<=0||u<=0||t.drawImage(e,n,r,i,a,o,l,s,u)},drawInscribedImage:function(t,e,n,r,i){var a=this,o=n.position(),l=o.x,s=o.y,u=n.cy().style(),h=u.getIndexedStyle.bind(u),g=h(n,"background-fit","value",r),x=h(n,"background-repeat","value",r),E=n.width(),m=n.height(),S=2*n.padding(),A=E+("inner"===h(n,"background-width-relative-to","value",r)?0:S),L=m+("inner"===h(n,"background-height-relative-to","value",r)?0:S),P=n._private.rscratch,_="node"===h(n,"background-clip","value",r),X=h(n,"background-image-opacity","value",r)*i,z=h(n,"background-image-smoothing","value",r),F=e.width||e.cachedW,M=e.height||e.cachedH;null!=F&&null!=M||(document.body.appendChild(e),F=e.cachedW=e.width||e.offsetWidth,M=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var V=F,Z=M;if("auto"!==h(n,"background-width","value",r)&&(V="%"===h(n,"background-width","units",r)?h(n,"background-width","pfValue",r)*A:h(n,"background-width","pfValue",r)),"auto"!==h(n,"background-height","value",r)&&(Z="%"===h(n,"background-height","units",r)?h(n,"background-height","pfValue",r)*L:h(n,"background-height","pfValue",r)),0!==V&&0!==Z){if("contain"===g)V*=K=Math.min(A/V,L/Z),Z*=K;else if("cover"===g){var K;V*=K=Math.max(A/V,L/Z),Z*=K}var it=l-A/2,ot=h(n,"background-position-x","units",r),st=h(n,"background-position-x","pfValue",r);it+="%"===ot?(A-V)*st:st;var vt=h(n,"background-offset-x","units",r),ft=h(n,"background-offset-x","pfValue",r);it+="%"===vt?(A-V)*ft:ft;var et=s-L/2,Pt=h(n,"background-position-y","units",r),Lt=h(n,"background-position-y","pfValue",r);et+="%"===Pt?(L-Z)*Lt:Lt;var mt=h(n,"background-offset-y","units",r),_t=h(n,"background-offset-y","pfValue",r);et+="%"===mt?(L-Z)*_t:_t,P.pathCache&&(it-=l,et-=s,l=0,s=0);var bt=t.globalAlpha;t.globalAlpha=X;var Tt=a.getImgSmoothing(t),Mt=!1;if("no"===z&&Tt?(a.setImgSmoothing(t,!1),Mt=!0):"yes"!==z||Tt||(a.setImgSmoothing(t,!0),Mt=!0),"no-repeat"===x)_&&(t.save(),P.pathCache?t.clip(P.pathCache):(a.nodeShapes[a.getNodeShape(n)].draw(t,l,s,A,L),t.clip())),a.safeDrawImage(t,e,0,0,F,M,it,et,V,Z),_&&t.restore();else{var Bt=t.createPattern(e,x);t.fillStyle=Bt,a.nodeShapes[a.getNodeShape(n)].draw(t,l,s,A,L),t.translate(it,et),t.fill(),t.translate(-it,-et)}t.globalAlpha=bt,Mt&&a.setImgSmoothing(t,Tt)}}},Ir={};function Hu(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill()}Ir.eleTextBiggerThanMin=function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil(ui(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},Ir.drawElementText=function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==r){if(a&&!o.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var l=e.pstyle("label");if(!l||!l.value)return;var s=o.getLabelJustification(e);t.textAlign=s,t.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,h=e.pstyle("label"),g=e.pstyle("source-label"),x=e.pstyle("target-label");if(u||(!h||!h.value)&&(!g||!g.value)&&(!x||!x.value))return;t.textAlign="center",t.textBaseline="bottom"}var E,m=!n;n&&t.translate(-(E=n).x1,-E.y1),null==i?(o.drawText(t,e,null,m,a),e.isEdge()&&(o.drawText(t,e,"source",m,a),o.drawText(t,e,"target",m,a))):o.drawText(t,e,i,m,a),n&&t.translate(E.x1,E.y1)},Ir.getFontCache=function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return this.fontCaches.push(e={context:t}),e},Ir.setupTextStyle=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,l=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,s=e.pstyle("text-outline-opacity").value*l,u=e.pstyle("color").value,h=e.pstyle("text-outline-color").value;t.font=r+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,u[0],u[1],u[2],l),this.colorStrokeStyle(t,h[0],h[1],h[2],s)},Ir.getTextAngle=function(t,e){var n=t._private.rscratch,i=t.pstyle((e?e+"-":"")+"text-rotation"),a=cn(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},Ir.drawText=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e._private.rscratch,l=i?e.effectiveOpacity():1;if(!i||0!==l&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,h=cn(o,"labelX",n),g=cn(o,"labelY",n),x=this.getLabelText(e,n);if(null!=x&&""!==x&&!isNaN(h)&&!isNaN(g)){this.setupTextStyle(t,e,i);var E,m=n?n+"-":"",S=cn(o,"labelWidth",n),A=cn(o,"labelHeight",n),L=e.pstyle(m+"text-margin-x").pfValue,P=e.pstyle(m+"text-margin-y").pfValue,_=e.isEdge(),X=e.pstyle("text-halign").value,z=e.pstyle("text-valign").value;switch(_&&(X="center",z="center"),h+=L,g+=P,0!==(E=r?this.getTextAngle(e,n):0)&&(t.translate(s=h,u=g),t.rotate(E),h=0,g=0),z){case"top":break;case"center":g+=A/2;break;case"bottom":g+=A}var F=e.pstyle("text-background-opacity").value,M=e.pstyle("text-border-opacity").value,V=e.pstyle("text-border-width").pfValue,Z=e.pstyle("text-background-padding").pfValue;if(F>0||V>0&&M>0){var K=h-Z;switch(X){case"left":K-=S;break;case"center":K-=S/2}var it=g-A-Z,ot=S+2*Z,st=A+2*Z;if(F>0){var vt=t.fillStyle,ft=e.pstyle("text-background-color").value;t.fillStyle="rgba("+ft[0]+","+ft[1]+","+ft[2]+","+F*l+")",0===e.pstyle("text-background-shape").strValue.indexOf("round")?Hu(t,K,it,ot,st,2):t.fillRect(K,it,ot,st),t.fillStyle=vt}if(V>0&&M>0){var Pt=t.strokeStyle,Lt=t.lineWidth,mt=e.pstyle("text-border-color").value,_t=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+mt[0]+","+mt[1]+","+mt[2]+","+M*l+")",t.lineWidth=V,t.setLineDash)switch(_t){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=V/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(K,it,ot,st),"double"===_t){var bt=V/2;t.strokeRect(K+bt,it+bt,ot-2*bt,st-2*bt)}t.setLineDash&&t.setLineDash([]),t.lineWidth=Lt,t.strokeStyle=Pt}}var Tt=2*e.pstyle("text-outline-width").pfValue;if(Tt>0&&(t.lineWidth=Tt),"wrap"===e.pstyle("text-wrap").value){var Mt=cn(o,"labelWrapCachedLines",n),Bt=cn(o,"labelLineHeight",n),Xt=S/2,zt=this.getLabelJustification(e);switch("auto"===zt||("left"===X?"left"===zt?h+=-S:"center"===zt&&(h+=-Xt):"center"===X?"left"===zt?h+=-Xt:"right"===zt&&(h+=Xt):"right"===X&&("center"===zt?h+=Xt:"right"===zt&&(h+=S))),z){case"top":case"center":case"bottom":g-=(Mt.length-1)*Bt}for(var jt=0;jt<Mt.length;jt++)Tt>0&&t.strokeText(Mt[jt],h,g),t.fillText(Mt[jt],h,g),g+=Bt}else Tt>0&&t.strokeText(x,h,g),t.fillText(x,h,g);0!==E&&(t.rotate(-E),t.translate(-s,-u))}}};var Si={drawNode:function(t,e,n){var r,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=this,u=e._private,h=u.rscratch,g=e.position();if(N(g.x)&&N(g.y)&&(!l||e.visible())){var x,E,m=l?e.effectiveOpacity():1,S=s.usePaths(),A=!1,L=e.padding();r=e.width()+2*L,i=e.height()+2*L,n&&t.translate(-(E=n).x1,-E.y1);for(var _=e.pstyle("background-image").value,X=new Array(_.length),z=new Array(_.length),F=0,M=0;M<_.length;M++){var V=_[M];if(X[M]=null!=V&&"none"!==V){var K=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",M);F++,z[M]=s.getCachedImage(V,K,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var it=e.pstyle("background-blacken").value,ot=e.pstyle("border-width").pfValue,st=e.pstyle("background-opacity").value*m,vt=e.pstyle("border-color").value,ft=e.pstyle("border-style").value,et=e.pstyle("border-opacity").value*m;t.lineJoin="miter";var Pt=function(){s.eleFillStyle(t,e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:st)},Lt=function(){s.colorStrokeStyle(t,vt[0],vt[1],vt[2],arguments.length>0&&void 0!==arguments[0]?arguments[0]:et)},mt=e.pstyle("shape").strValue,_t=e.pstyle("shape-polygon-points").pfValue;if(S){t.translate(g.x,g.y);var bt=s.nodePathCache=s.nodePathCache||[],Tt=ki("polygon"===mt?mt+","+_t.join(","):mt,""+i,""+r),Mt=bt[Tt];null!=Mt?(A=!0,h.pathCache=x=Mt):(x=new Path2D,bt[Tt]=h.pathCache=x)}var Bt=function(){if(!A){var Ct=g;S&&(Ct={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(x||t,Ct.x,Ct.y,r,i)}S?t.fill(x):t.fill()},Xt=function(){for(var Ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,wt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Ht=u.backgrounding,Gt=0,Kt=0;Kt<z.length;Kt++){var ae=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Kt);wt&&"over"===ae||!wt&&"inside"===ae?Gt++:X[Kt]&&z[Kt].complete&&!z[Kt].error&&(Gt++,s.drawInscribedImage(t,z[Kt],e,Kt,Ct))}u.backgrounding=Gt!==F,Ht!==u.backgrounding&&e.updateStyle(!1)},zt=function(){var Ct=arguments.length>0&&void 0!==arguments[0]&&arguments[0],wt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;s.hasPie(e)&&(s.drawPie(t,e,wt),Ct&&(S||s.nodeShapes[s.getNodeShape(e)].draw(t,g.x,g.y,r,i)))},jt=function(){var Ht=it>0?0:255;0!==it&&(s.colorFillStyle(t,Ht,Ht,Ht,(it>0?it:-it)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:m)),S?t.fill(x):t.fill())},Zt=function(){if(ot>0){if(t.lineWidth=ot,t.lineCap="butt",t.setLineDash)switch(ft){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(S?t.stroke(x):t.stroke(),"double"===ft){t.lineWidth=ot/3;var Ct=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",S?t.stroke(x):t.stroke(),t.globalCompositeOperation=Ct}t.setLineDash&&t.setLineDash([])}},ne=function(){o&&s.drawNodeOverlay(t,e,g,r,i)},oe=function(){o&&s.drawNodeUnderlay(t,e,g,r,i)},Yt=function(){s.drawElementText(t,e,null,a)};if("yes"===e.pstyle("ghost").value){var Qt=e.pstyle("ghost-offset-x").pfValue,Y=e.pstyle("ghost-offset-y").pfValue,ht=e.pstyle("ghost-opacity").value,xt=ht*m;t.translate(Qt,Y),Pt(ht*st),Bt(),Xt(xt,!0),Lt(ht*et),Zt(),zt(0!==it||0!==ot),Xt(xt,!1),jt(xt),t.translate(-Qt,-Y)}S&&t.translate(-g.x,-g.y),oe(),S&&t.translate(g.x,g.y),Pt(),Bt(),Xt(m,!0),Lt(),Zt(),zt(0!==it||0!==ot),Xt(m,!1),jt(),S&&t.translate(-g.x,-g.y),Yt(),ne(),n&&t.translate(E.x1,E.y1)}}},Zs=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(e,n,r,i,a){if(n.visible()){var o=n.pstyle("".concat(t,"-padding")).pfValue,l=n.pstyle("".concat(t,"-opacity")).value,s=n.pstyle("".concat(t,"-color")).value,u=n.pstyle("".concat(t,"-shape")).value;if(l>0){if(r=r||n.position(),null==i||null==a){var h=n.padding();i=n.width()+2*h,a=n.height()+2*h}this.colorFillStyle(e,s[0],s[1],s[2],l),this.nodeShapes[u].draw(e,r.x,r.y,i+2*o,a+2*o),e.fill()}}}};Si.drawNodeOverlay=Zs("overlay"),Si.drawNodeUnderlay=Zs("underlay"),Si.hasPie=function(t){return(t=t[0])._private.hasPie},Si.drawPie=function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=r.x,l=r.y,s=e.width(),u=e.height(),h=Math.min(s,u)/2,g=0;this.usePaths()&&(o=0,l=0),"%"===a.units?h*=a.pfValue:void 0!==a.pfValue&&(h=a.pfValue/2);for(var x=1;x<=i.pieBackgroundN;x++){var E=e.pstyle("pie-"+x+"-background-size").value,m=e.pstyle("pie-"+x+"-background-color").value,S=e.pstyle("pie-"+x+"-background-opacity").value*n,A=E/100;A+g>1&&(A=1-g);var L=1.5*Math.PI+2*Math.PI*g,P=L+2*Math.PI*A;0===E||g>=1||g+A>1||(t.beginPath(),t.moveTo(o,l),t.arc(o,l,h,L,P),t.closePath(),this.colorFillStyle(t,m[0],m[1],m[2],S),t.fill(),g+=A)}};for(var pn={getPixelRatio:function(){var t=this.data.contexts[0];return null!=this.forcedPixelRatio?this.forcedPixelRatio:(window.devicePixelRatio||1)/(t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&n.push(e={context:t}),e},createGradientStyleFor:function(t,e,n,r,i){var a,o=this.usePaths(),l=n.pstyle(e+"-gradient-stop-colors").value,s=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var u=n.sourceEndpoint(),h=n.targetEndpoint(),g=n.midpoint(),x=Xn(u,g),E=Xn(h,g);a=t.createRadialGradient(g.x,g.y,0,g.x,g.y,Math.max(x,E))}else{var m=o?{x:0,y:0}:n.position(),S=n.paddedWidth(),A=n.paddedHeight();a=t.createRadialGradient(m.x,m.y,0,m.x,m.y,Math.max(S,A))}else if(n.isEdge()){var L=n.sourceEndpoint(),P=n.targetEndpoint();a=t.createLinearGradient(L.x,L.y,P.x,P.y)}else{var _=o?{x:0,y:0}:n.position(),X=n.paddedWidth()/2,z=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=t.createLinearGradient(_.x,_.y-z,_.x,_.y+z);break;case"to-top":a=t.createLinearGradient(_.x,_.y+z,_.x,_.y-z);break;case"to-left":a=t.createLinearGradient(_.x+X,_.y,_.x-X,_.y);break;case"to-right":a=t.createLinearGradient(_.x-X,_.y,_.x+X,_.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(_.x-X,_.y-z,_.x+X,_.y+z);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(_.x-X,_.y+z,_.x+X,_.y-z);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(_.x+X,_.y-z,_.x-X,_.y+z);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(_.x+X,_.y+z,_.x-X,_.y-z)}}if(!a)return null;for(var F=s.length===l.length,M=l.length,V=0;V<M;V++)a.addColorStop(F?s[V]:V/(M-1),"rgba("+l[V][0]+","+l[V][1]+","+l[V][2]+","+i+")");return a},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],a=r[3],o=e.getPixelRatio();t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(o=e.motionBlurPxRatio);var s,u=i*o,h=a*o;if(u!==e.canvasWidth||h!==e.canvasHeight){e.fontCaches=null;var g=n.canvasContainer;g.style.width=i+"px",g.style.height=a+"px";for(var x=0;x<e.CANVAS_LAYERS;x++)(s=n.canvases[x]).width=u,s.height=h,s.style.width=i+"px",s.style.height=a+"px";for(x=0;x<e.BUFFER_COUNT;x++)(s=n.bufferCanvases[x]).width=u,s.height=h,s.style.width=i+"px",s.style.height=a+"px";e.textureMult=1,o<=1&&(s=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,s.width=u*e.textureMult,s.height=h*e.textureMult),e.canvasWidth=u,e.canvasHeight=h}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||Bi()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,a=t.forcedPan,o=this,l=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,s=o.cy,u=o.data,h=u.canvasNeedsRedraw,g=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),x=void 0!==t.motionBlur?t.motionBlur:o.motionBlur,E=o.motionBlurPxRatio,m=s.hasCompoundNodes(),S=o.hoverData.draggingEles,L=x=x&&!e&&o.motionBlurEnabled&&!(o.hoverData.selecting||o.touchData.selecting);e||(o.prevPxRatio!==l&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=l),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),x&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(L=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!g&&(h[o.NODE]=!0,h[o.SELECT_BOX]=!0);var P=s.style(),_=s.zoom(),X=void 0!==i?i:_,z=s.pan(),F={x:z.x,y:z.y},M={zoom:_,pan:{x:z.x,y:z.y}},V=o.prevViewport;void 0===V||M.zoom!==V.zoom||M.pan.x!==V.pan.x||M.pan.y!==V.pan.y||S&&!m||(o.motionBlurPxRatio=1),a&&(F=a),X*=l,F.x*=l,F.y*=l;var Z=o.getCachedZSortedEles();function K(Yt,Wt,Qt,Y,ht){var xt=Yt.globalCompositeOperation;Yt.globalCompositeOperation="destination-out",o.colorFillStyle(Yt,255,255,255,o.motionBlurTransparency),Yt.fillRect(Wt,Qt,Y,ht),Yt.globalCompositeOperation=xt}function it(Yt,Wt){var Qt,Y,ht,xt;o.clearingMotionBlur||Yt!==u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&Yt!==u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(Qt=F,Y=X,ht=o.canvasWidth,xt=o.canvasHeight):(Qt={x:z.x*E,y:z.y*E},Y=_*E,ht=o.canvasWidth*E,xt=o.canvasHeight*E),Yt.setTransform(1,0,0,1,0,0),"motionBlur"===Wt?K(Yt,0,0,ht,xt):e||void 0!==Wt&&!Wt||Yt.clearRect(0,0,ht,xt),n||(Yt.translate(Qt.x,Qt.y),Yt.scale(Y,Y)),a&&Yt.translate(a.x,a.y),i&&Yt.scale(i,i)}if(g||(o.textureDrawLastFrame=!1),g){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=s.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var ot=o.data.bufferContexts[o.TEXTURE_BUFFER];ot.setTransform(1,0,0,1,0,0),ot.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:ot,drawOnlyNodeLayer:!0,forcedPxRatio:l*o.textureMult}),(M=o.textureCache.viewport={zoom:s.zoom(),pan:s.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-M.pan.x)/M.zoom,y:(0-M.pan.y)/M.zoom}}h[o.DRAG]=!1,h[o.NODE]=!1;var st=u.contexts[o.NODE],vt=o.textureCache.texture;M=o.textureCache.viewport,st.setTransform(1,0,0,1,0,0),x?K(st,0,0,M.width,M.height):st.clearRect(0,0,M.width,M.height);var ft=P.core("outside-texture-bg-color").value,et=P.core("outside-texture-bg-opacity").value;o.colorFillStyle(st,ft[0],ft[1],ft[2],et),st.fillRect(0,0,M.width,M.height),_=s.zoom(),it(st,!1),st.clearRect(M.mpan.x,M.mpan.y,M.width/M.zoom/l,M.height/M.zoom/l),st.drawImage(vt,M.mpan.x,M.mpan.y,M.width/M.zoom/l,M.height/M.zoom/l)}else o.textureOnViewport&&!e&&(o.textureCache=null);var Pt=s.extent(),Lt=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),mt=o.hideEdgesOnViewport&&Lt,_t=[];if(_t[o.NODE]=!h[o.NODE]&&x&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,_t[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),_t[o.DRAG]=!h[o.DRAG]&&x&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,_t[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),h[o.NODE]||n||r||_t[o.NODE]){var bt=x&&!_t[o.NODE]&&1!==E;it(st=e||(bt?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),x&&!bt?"motionBlur":void 0),mt?o.drawCachedNodes(st,Z.nondrag,l,Pt):o.drawLayeredElements(st,Z.nondrag,l,Pt),o.debug&&o.drawDebugPoints(st,Z.nondrag),n||x||(h[o.NODE]=!1)}if(!r&&(h[o.DRAG]||n||_t[o.DRAG])&&(bt=x&&!_t[o.DRAG]&&1!==E,it(st=e||(bt?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]),x&&!bt?"motionBlur":void 0),mt?o.drawCachedNodes(st,Z.drag,l,Pt):o.drawCachedElements(st,Z.drag,l,Pt),o.debug&&o.drawDebugPoints(st,Z.drag),n||x||(h[o.DRAG]=!1)),o.showFps||!r&&h[o.SELECT_BOX]&&!n){if(it(st=e||u.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){_=o.cy.zoom();var Tt=P.core("selection-box-border-width").value/_;st.lineWidth=Tt,st.fillStyle="rgba("+P.core("selection-box-color").value[0]+","+P.core("selection-box-color").value[1]+","+P.core("selection-box-color").value[2]+","+P.core("selection-box-opacity").value+")",st.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),Tt>0&&(st.strokeStyle="rgba("+P.core("selection-box-border-color").value[0]+","+P.core("selection-box-border-color").value[1]+","+P.core("selection-box-border-color").value[2]+","+P.core("selection-box-opacity").value+")",st.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){_=o.cy.zoom();var Mt=u.bgActivePosistion;st.fillStyle="rgba("+P.core("active-bg-color").value[0]+","+P.core("active-bg-color").value[1]+","+P.core("active-bg-color").value[2]+","+P.core("active-bg-opacity").value+")",st.beginPath(),st.arc(Mt.x,Mt.y,P.core("active-bg-size").pfValue/_,0,2*Math.PI),st.fill()}var Bt=o.lastRedrawTime;if(o.showFps&&Bt){Bt=Math.round(Bt);var Xt=Math.round(1e3/Bt);st.setTransform(1,0,0,1,0,0),st.fillStyle="rgba(255, 0, 0, 0.75)",st.strokeStyle="rgba(255, 0, 0, 0.75)",st.lineWidth=1,st.fillText("1 frame = "+Bt+" ms = "+Xt+" fps",0,20),st.strokeRect(0,30,250,20),st.fillRect(0,30,250*Math.min(Xt/60,1),20)}n||(h[o.SELECT_BOX]=!1)}if(x&&1!==E){var Zt=u.contexts[o.DRAG],ne=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],oe=function(Yt,Wt,Qt){Yt.setTransform(1,0,0,1,0,0),Qt||!L?Yt.clearRect(0,0,o.canvasWidth,o.canvasHeight):K(Yt,0,0,o.canvasWidth,o.canvasHeight),Yt.drawImage(Wt,0,0,o.canvasWidth*E,o.canvasHeight*E,0,0,o.canvasWidth,o.canvasHeight)};(h[o.NODE]||_t[o.NODE])&&(oe(u.contexts[o.NODE],o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],_t[o.NODE]),h[o.NODE]=!1),(h[o.DRAG]||_t[o.DRAG])&&(oe(Zt,ne,_t[o.DRAG]),h[o.DRAG]=!1)}o.prevViewport=M,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),x&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!g,o.mbFrames=0,h[o.NODE]=!0,h[o.DRAG]=!0,o.redraw()},100)),e||s.emit("render")}},js={drawPolygonPath:function(t,e,n,r,i,a){var o=r/2,l=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],n+l*a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(e+o*a[2*s],n+l*a[2*s+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,a){var o=r/2,l=i/2,s=pi(r,i);t.beginPath&&t.beginPath();for(var u=0;u<a.length/4;u++){var h,g;g=0===u?a.length-2:4*u-2,h=4*u+2;var x=e+o*a[4*u],E=n+l*a[4*u+1],S=s/Math.tan(Math.acos(-a[g]*a[h]-a[g+1]*a[h+1])/2),A=x-S*a[g],L=E-S*a[g+1],P=x+S*a[h],_=E+S*a[h+1];0===u?t.moveTo(A,L):t.lineTo(A,L),t.arcTo(x,E,P,_,s)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,l=Dr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.arcTo(e+a,n-o,e+a,n,l),t.arcTo(e+a,n+o,e,n+o,l),t.arcTo(e-a,n+o,e-a,n,l),t.arcTo(e-a,n-o,e,n-o,l),t.lineTo(e,n-o),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,l=Dr(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.lineTo(e+a,n-o),t.lineTo(e+a,n),t.arcTo(e+a,n+o,e,n+o,l),t.arcTo(e-a,n+o,e-a,n,l),t.lineTo(e-a,n-o),t.lineTo(e,n-o),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-a+8,n-o),t.lineTo(e+a-8,n-o),t.lineTo(e+a,n-o+8),t.lineTo(e+a,n+o-8),t.lineTo(e+a-8,n+o),t.lineTo(e-a+8,n+o),t.lineTo(e-a,n+o-8),t.lineTo(e-a,n-o+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var a=r/2,o=i/2,l=e-a,s=e+a,u=n-o,h=n+o,g=gi(r,i),x=g.widthOffset,E=g.heightOffset,m=g.ctrlPtOffsetPct*x;t.beginPath&&t.beginPath(),t.moveTo(l,u+E),t.lineTo(l,h-E),t.quadraticCurveTo(l+m,h,l+x,h),t.lineTo(s-x,h),t.quadraticCurveTo(s-m,h,s,h-E),t.lineTo(s,u+E),t.quadraticCurveTo(s-m,u,s-x,u),t.lineTo(l+x,u),t.quadraticCurveTo(l+m,u,l,u+E),t.closePath()}},Ws=Math.sin(0),Ks=Math.cos(0),vo={},yo={},Qs=Math.PI/40,ni=0*Math.PI;ni<2*Math.PI;ni+=Qs)vo[ni]=Math.sin(ni),yo[ni]=Math.cos(ni);js.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,l=r/2,s=i/2,u=0*Math.PI;u<2*Math.PI;u+=Qs)a=e-l*vo[u]*Ws+l*yo[u]*Ks,o=n+s*yo[u]*Ws+s*vo[u]*Ks,0===u?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var Ii={};function Js(t){var e=t.indexOf(",");return t.substr(e+1)}function tl(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Hr(function(i,a){try{e.toBlob(function(o){null!=o?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},n,t.quality)}catch(o){a(o)}});case"blob":return function(i,a){for(var o=atob(i),l=new ArrayBuffer(o.length),s=new Uint8Array(l),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return new Blob([l],{type:a})}(Js(r()),n);case"base64":return Js(r());default:return r()}}Ii.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Ii.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],a=t.full?Math.ceil(n.h):r[3],o=N(t.maxWidth)||N(t.maxHeight),l=this.getPixelRatio(),s=1;if(void 0!==t.scale)i*=t.scale,a*=t.scale,s=t.scale;else if(o){var u=1/0,h=1/0;N(t.maxWidth)&&(u=s*t.maxWidth/i),N(t.maxHeight)&&(h=s*t.maxHeight/a),i*=s=Math.min(u,h),a*=s}o||(i*=l,a*=l,s*=l);var g=document.createElement("canvas");g.width=i,g.height=a,g.style.width=i+"px",g.style.height=a+"px";var x=g.getContext("2d");if(i>0&&a>0){x.clearRect(0,0,i,a),x.globalCompositeOperation="source-over";var E=this.getCachedZSortedEles();if(t.full)x.translate(-n.x1*s,-n.y1*s),x.scale(s,s),this.drawElements(x,E),x.scale(1/s,1/s),x.translate(n.x1*s,n.y1*s);else{var m=e.pan(),S={x:m.x*s,y:m.y*s};s*=e.zoom(),x.translate(S.x,S.y),x.scale(s,s),this.drawElements(x,E),x.scale(1/s,1/s),x.translate(-S.x,-S.y)}t.bg&&(x.globalCompositeOperation="destination-over",x.fillStyle=t.bg,x.rect(0,0,i,a),x.fill())}return g},Ii.png=function(t){return tl(t,this.bufferCanvasImage(t),"image/png")},Ii.jpg=function(t){return tl(t,this.bufferCanvasImage(t),"image/jpeg")};var Uu=el,me=el.prototype;function el(t){var e=this;e.data={canvases:new Array(me.CANVAS_LAYERS),contexts:new Array(me.CANVAS_LAYERS),canvasNeedsRedraw:new Array(me.CANVAS_LAYERS),bufferCanvases:new Array(me.BUFFER_COUNT),bufferContexts:new Array(me.CANVAS_LAYERS)},e.data.canvasContainer=document.createElement("div");var n=e.data.canvasContainer.style;e.data.canvasContainer.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",n.position="relative",n.zIndex="0",n.overflow="hidden";var r=t.cy.container();r.appendChild(e.data.canvasContainer),r.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)";var i={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};b&&b.userAgent.match(/msie|trident|edge/i)&&(i["-ms-touch-action"]="none",i["touch-action"]="none");for(var a=0;a<me.CANVAS_LAYERS;a++){var o=e.data.canvases[a]=document.createElement("canvas");e.data.contexts[a]=o.getContext("2d"),Object.keys(i).forEach(function(F){o.style[F]=i[F]}),o.style.position="absolute",o.setAttribute("data-id","layer"+a),o.style.zIndex=String(me.CANVAS_LAYERS-a),e.data.canvasContainer.appendChild(o),e.data.canvasNeedsRedraw[a]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[me.NODE].setAttribute("data-id","layer"+me.NODE+"-node"),e.data.canvases[me.SELECT_BOX].setAttribute("data-id","layer"+me.SELECT_BOX+"-selectbox"),e.data.canvases[me.DRAG].setAttribute("data-id","layer"+me.DRAG+"-drag"),a=0;a<me.BUFFER_COUNT;a++)e.data.bufferCanvases[a]=document.createElement("canvas"),e.data.bufferContexts[a]=e.data.bufferCanvases[a].getContext("2d"),e.data.bufferCanvases[a].style.position="absolute",e.data.bufferCanvases[a].setAttribute("data-id","buffer"+a),e.data.bufferCanvases[a].style.zIndex=String(-a-1),e.data.bufferCanvases[a].style.visibility="hidden";e.pathsEnabled=!0;var l=Ke(),s=function(F){return{x:-F.w/2,y:-F.h/2}},u=function(F){return F.boundingBox(),F[0]._private.bodyBounds},h=function(F){return F.boundingBox(),F[0]._private.labelBounds.main||l},g=function(F){return F.boundingBox(),F[0]._private.labelBounds.source||l},x=function(F){return F.boundingBox(),F[0]._private.labelBounds.target||l},E=function(F,M){return M},m=function(F,M,V){var Z=F?F+"-":"";return{x:M.x+V.pstyle(Z+"text-margin-x").pfValue,y:M.y+V.pstyle(Z+"text-margin-y").pfValue}},S=function(F,M,V){var Z=F[0]._private.rscratch;return{x:Z[M],y:Z[V]}},A=e.data.eleTxrCache=new Ti(e,{getKey:function(F){return F[0]._private.nodeKey},doesEleInvalidateKey:function(F){var M=F[0]._private;return M.oldBackgroundTimestamp!==M.backgroundTimestamp},drawElement:function(F,M,V,Z,K){return e.drawElement(F,M,V,!1,!1,K)},getBoundingBox:u,getRotationPoint:function(F){return{x:((M=u(F)).x1+M.x2)/2,y:(M.y1+M.y2)/2};var M},getRotationOffset:function(F){return s(u(F))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),L=e.data.lblTxrCache=new Ti(e,{getKey:function(F){return F[0]._private.labelStyleKey},drawElement:function(F,M,V,Z,K){return e.drawElementText(F,M,V,Z,"main",K)},getBoundingBox:h,getRotationPoint:function(F){return m("",S(F,"labelX","labelY"),F)},getRotationOffset:function(F){var M=h(F),V=s(h(F));if(F.isNode()){switch(F.pstyle("text-halign").value){case"left":V.x=-M.w;break;case"right":V.x=0}switch(F.pstyle("text-valign").value){case"top":V.y=-M.h;break;case"bottom":V.y=0}}return V},isVisible:E}),P=e.data.slbTxrCache=new Ti(e,{getKey:function(F){return F[0]._private.sourceLabelStyleKey},drawElement:function(F,M,V,Z,K){return e.drawElementText(F,M,V,Z,"source",K)},getBoundingBox:g,getRotationPoint:function(F){return m("source",S(F,"sourceLabelX","sourceLabelY"),F)},getRotationOffset:function(F){return s(g(F))},isVisible:E}),_=e.data.tlbTxrCache=new Ti(e,{getKey:function(F){return F[0]._private.targetLabelStyleKey},drawElement:function(F,M,V,Z,K){return e.drawElementText(F,M,V,Z,"target",K)},getBoundingBox:x,getRotationPoint:function(F){return m("target",S(F,"targetLabelX","targetLabelY"),F)},getRotationOffset:function(F){return s(x(F))},isVisible:E}),X=e.data.lyrTxrCache=new Xs(e);e.onUpdateEleCalcs(function(F,M){A.invalidateElements(M),L.invalidateElements(M),P.invalidateElements(M),_.invalidateElements(M),X.invalidateElements(M);for(var V=0;V<M.length;V++){var Z=M[V]._private;Z.oldBackgroundTimestamp=Z.backgroundTimestamp}});var z=function(F){for(var M=0;M<F.length;M++)X.enqueueElementRefinement(F[M].ele)};A.onDequeue(z),L.onDequeue(z),P.onDequeue(z),_.onDequeue(z)}me.CANVAS_LAYERS=3,me.SELECT_BOX=0,me.DRAG=1,me.NODE=2,me.BUFFER_COUNT=3,me.TEXTURE_BUFFER=0,me.MOTIONBLUR_BUFFER_NODE=1,me.MOTIONBLUR_BUFFER_DRAG=2,me.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[me.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[me.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[me.SELECT_BOX]=e}};var qu="undefined"!=typeof Path2D;me.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},me.usePaths=function(){return qu&&this.pathsEnabled},me.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},me.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},me.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":ct(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[Us,ei,dr,Xu,Ir,Si,pn,js,Ii,{nodeShapeImpl:function(t,e,n,r,i,a,o){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,a);case"polygon":return this.drawPolygonPath(e,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,a);case"barrel":return this.drawBarrelPath(e,n,r,i,a)}}}].forEach(function(t){W(me,t)});var $u=[{type:"layout",extensions:Eu},{type:"renderer",extensions:[{name:"null",impl:As},{name:"base",impl:zs},{name:"canvas",impl:Uu}]}],nl={},rl={};function il(t,e,n){var r=n,i=function(F){be("Can not register `"+e+"` for `"+t+"` since `"+F+"` already exists in the prototype and can not be overridden")};if("core"===t){if(Di.prototype[e])return i(e);Di.prototype[e]=n}else if("collection"===t){if($e.prototype[e])return i(e);$e.prototype[e]=n}else if("layout"===t){for(var a=function(F){this.options=F,n.call(this,F),C(this._private)||(this._private={}),this._private.cy=F.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),l=[],s=0;s<l.length;s++){var u=l[s];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var h=n.prototype.stop;o.stop=function(){var F=this.options;if(F&&F.animate){var M=this.animations;if(M)for(var V=0;V<M.length;V++)M[V].stop()}return h?h.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var g=function(F){return F._private.cy},x={addEventFields:function(F,M){M.layout=F,M.cy=g(F),M.target=F},bubble:function(){return!0},parent:function(F){return g(F)}};W(o,{createEmitter:function(){return this._private.emitter=new sa(x,this),this},emitter:function(){return this._private.emitter},on:function(F,M){return this.emitter().on(F,M),this},one:function(F,M){return this.emitter().one(F,M),this},once:function(F,M){return this.emitter().one(F,M),this},removeListener:function(F,M){return this.emitter().removeListener(F,M),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(F,M){return this.emitter().emit(F,M),this}}),we.eventAliasesOn(o),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var E=al("renderer","base"),m=E.prototype,S=n,A=n.prototype,L=function(){E.apply(this,arguments),S.apply(this,arguments)},P=L.prototype;for(var _ in m){var X=m[_];if(null!=A[_])return i(_);P[_]=X}for(var z in A)P[z]=A[z];m.clientFunctions.forEach(function(F){P[F]=P[F]||function(){_e("Renderer does not implement `renderer."+F+"()` on its prototype")}}),r=L}return Dt({map:nl,keys:[t,e],value:r})}function al(t,e){return Ot({map:nl,keys:[t,e]})}function Zu(t,e,n,r,i){return Dt({map:rl,keys:[t,e,n,r],value:i})}function ju(t,e,n,r){return Ot({map:rl,keys:[t,e,n,r]})}var mo=function(){return 2===arguments.length?al.apply(null,arguments):3===arguments.length?il.apply(null,arguments):4===arguments.length?ju.apply(null,arguments):5===arguments.length?Zu.apply(null,arguments):void _e("Invalid extension access syntax")};Di.prototype.extension=mo,$u.forEach(function(t){t.extensions.forEach(function(e){il(t.type,e.name,e.impl)})});var ol=function t(){if(!(this instanceof t))return new t;this.length=0},Pr=ol.prototype;Pr.instanceString=function(){return"stylesheet"},Pr.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Pr.css=function(t,e){var n=this.length-1;if(c(t))this[n].properties.push({name:t,value:e});else if(C(t))for(var r=t,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],l=r[o];if(null!=l){var s=en.properties[o]||en.properties[j(o)];null!=s&&this[n].properties.push({name:s.name,value:l})}}return this},Pr.style=Pr.css,Pr.generateStyle=function(t){var e=new en(t);return this.appendToStyle(e)},Pr.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],i=n.properties;t.selector(n.selector);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var Ar=function(t){return void 0===t&&(t={}),C(t)?new Di(t):c(t)?mo.apply(mo,arguments):void 0};return Ar.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ar),t.apply(null,e),this},Ar.warnings=function(t){return Ri(t)},Ar.version="3.20.0",Ar.stylesheet=Ar.Stylesheet=ol,Ar}()},5805:function(Ee){Ee.exports=function(ct){var ut={};function pt(R){if(ut[R])return ut[R].exports;var k=ut[R]={i:R,l:!1,exports:{}};return ct[R].call(k.exports,k,k.exports,pt),k.l=!0,k.exports}return pt.m=ct,pt.c=ut,pt.i=function(R){return R},pt.d=function(R,k,T){pt.o(R,k)||Object.defineProperty(R,k,{configurable:!1,enumerable:!0,get:T})},pt.n=function(R){var k=R&&R.__esModule?function(){return R.default}:function(){return R};return pt.d(k,"a",k),k},pt.o=function(R,k){return Object.prototype.hasOwnProperty.call(R,k)},pt.p="",pt(pt.s=26)}([function(ct,ut,pt){"use strict";function R(){}R.QUALITY=1,R.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,R.DEFAULT_INCREMENTAL=!1,R.DEFAULT_ANIMATION_ON_LAYOUT=!0,R.DEFAULT_ANIMATION_DURING_LAYOUT=!1,R.DEFAULT_ANIMATION_PERIOD=50,R.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,R.DEFAULT_GRAPH_MARGIN=15,R.NODE_DIMENSIONS_INCLUDE_LABELS=!1,R.SIMPLE_NODE_HALF_SIZE=(R.SIMPLE_NODE_SIZE=40)/2,R.EMPTY_COMPOUND_NODE_SIZE=40,R.MIN_EDGE_LENGTH=1,R.INITIAL_WORLD_BOUNDARY=(R.WORLD_BOUNDARY=1e6)/1e3,R.WORLD_CENTER_X=1200,R.WORLD_CENTER_Y=900,ct.exports=R},function(ct,ut,pt){"use strict";var R=pt(2),k=pt(8),T=pt(9);function w(v,f,y){R.call(this,y),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=y,this.bendpoints=[],this.source=v,this.target=f}for(var b in w.prototype=Object.create(R.prototype),R)w[b]=R[b];w.prototype.getSource=function(){return this.source},w.prototype.getTarget=function(){return this.target},w.prototype.isInterGraph=function(){return this.isInterGraph},w.prototype.getLength=function(){return this.length},w.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},w.prototype.getBendpoints=function(){return this.bendpoints},w.prototype.getLca=function(){return this.lca},w.prototype.getSourceInLca=function(){return this.sourceInLca},w.prototype.getTargetInLca=function(){return this.targetInLca},w.prototype.getOtherEnd=function(v){if(this.source===v)return this.target;if(this.target===v)return this.source;throw"Node is not incident with this edge"},w.prototype.getOtherEndInGraph=function(v,f){for(var y=this.getOtherEnd(v),d=f.getGraphManager().getRoot();;){if(y.getOwner()==f)return y;if(y.getOwner()==d)break;y=y.getOwner().getParent()}return null},w.prototype.updateLength=function(){var v=new Array(4);this.isOverlapingSourceAndTarget=k.getIntersection(this.target.getRect(),this.source.getRect(),v),this.isOverlapingSourceAndTarget||(this.lengthX=v[0]-v[2],this.lengthY=v[1]-v[3],Math.abs(this.lengthX)<1&&(this.lengthX=T.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=T.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},w.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=T.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=T.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},ct.exports=w},function(ct,ut,pt){"use strict";ct.exports=function(k){this.vGraphObject=k}},function(ct,ut,pt){"use strict";var R=pt(2),k=pt(10),T=pt(13),w=pt(0),b=pt(16),v=pt(4);function f(d,p,c,D){null==c&&null==D&&(D=p),R.call(this,D),null!=d.graphManager&&(d=d.graphManager),this.estimatedSize=k.MIN_VALUE,this.inclusionTreeDepth=k.MAX_VALUE,this.vGraphObject=D,this.edges=[],this.graphManager=d,this.rect=null!=c&&null!=p?new T(p.x,p.y,c.width,c.height):new T}for(var y in f.prototype=Object.create(R.prototype),R)f[y]=R[y];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(d){this.rect.width=d},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(d){this.rect.height=d},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new v(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new v(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(d,p){this.rect.x=d.x,this.rect.y=d.y,this.rect.width=p.width,this.rect.height=p.height},f.prototype.setCenter=function(d,p){this.rect.x=d-this.rect.width/2,this.rect.y=p-this.rect.height/2},f.prototype.setLocation=function(d,p){this.rect.x=d,this.rect.y=p},f.prototype.moveBy=function(d,p){this.rect.x+=d,this.rect.y+=p},f.prototype.getEdgeListToNode=function(d){var p=[],D=this;return D.edges.forEach(function(I){if(I.target==d){if(I.source!=D)throw"Incorrect edge source!";p.push(I)}}),p},f.prototype.getEdgesBetween=function(d){var p=[],D=this;return D.edges.forEach(function(I){if(I.source!=D&&I.target!=D)throw"Incorrect edge source and/or target";(I.target==d||I.source==d)&&p.push(I)}),p},f.prototype.getNeighborsList=function(){var d=new Set,p=this;return p.edges.forEach(function(c){if(c.source==p)d.add(c.target);else{if(c.target!=p)throw"Incorrect incidency!";d.add(c.source)}}),d},f.prototype.withChildren=function(){var d=new Set;if(d.add(this),null!=this.child)for(var D=this.child.getNodes(),I=0;I<D.length;I++)D[I].withChildren().forEach(function(C){d.add(C)});return d},f.prototype.getNoOfChildren=function(){var d=0;if(null==this.child)d=1;else for(var c=this.child.getNodes(),D=0;D<c.length;D++)d+=c[D].getNoOfChildren();return 0==d&&(d=1),d},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==k.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var d,p,c=-w.INITIAL_WORLD_BOUNDARY,D=w.INITIAL_WORLD_BOUNDARY;d=w.WORLD_CENTER_X+b.nextDouble()*(D-c)+c;var I=-w.INITIAL_WORLD_BOUNDARY,C=w.INITIAL_WORLD_BOUNDARY;p=w.WORLD_CENTER_Y+b.nextDouble()*(C-I)+I,this.rect.x=d,this.rect.y=p},f.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var d=this.getChild();if(d.updateBounds(!0),this.rect.x=d.getLeft(),this.rect.y=d.getTop(),this.setWidth(d.getRight()-d.getLeft()),this.setHeight(d.getBottom()-d.getTop()),w.NODE_DIMENSIONS_INCLUDE_LABELS){var p=d.getRight()-d.getLeft(),c=d.getBottom()-d.getTop();this.labelWidth>p&&(this.rect.x-=(this.labelWidth-p)/2,this.setWidth(this.labelWidth)),this.labelHeight>c&&("center"==this.labelPos?this.rect.y-=(this.labelHeight-c)/2:"top"==this.labelPos&&(this.rect.y-=this.labelHeight-c),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==k.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(d){var p=this.rect.x;p>w.WORLD_BOUNDARY?p=w.WORLD_BOUNDARY:p<-w.WORLD_BOUNDARY&&(p=-w.WORLD_BOUNDARY);var c=this.rect.y;c>w.WORLD_BOUNDARY?c=w.WORLD_BOUNDARY:c<-w.WORLD_BOUNDARY&&(c=-w.WORLD_BOUNDARY);var D=new v(p,c),I=d.inverseTransformPoint(D);this.setLocation(I.x,I.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},ct.exports=f},function(ct,ut,pt){"use strict";function R(k,T){null==k&&null==T?(this.x=0,this.y=0):(this.x=k,this.y=T)}R.prototype.getX=function(){return this.x},R.prototype.getY=function(){return this.y},R.prototype.setX=function(k){this.x=k},R.prototype.setY=function(k){this.y=k},R.prototype.getDifference=function(k){return new DimensionD(this.x-k.x,this.y-k.y)},R.prototype.getCopy=function(){return new R(this.x,this.y)},R.prototype.translate=function(k){return this.x+=k.width,this.y+=k.height,this},ct.exports=R},function(ct,ut,pt){"use strict";var R=pt(2),k=pt(10),T=pt(0),w=pt(6),b=pt(3),v=pt(1),f=pt(13),y=pt(12),d=pt(11);function p(D,I,C){R.call(this,C),this.estimatedSize=k.MIN_VALUE,this.margin=T.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=D,null!=I&&I instanceof w?this.graphManager=I:null!=I&&I instanceof Layout&&(this.graphManager=I.graphManager)}for(var c in p.prototype=Object.create(R.prototype),R)p[c]=R[c];p.prototype.getNodes=function(){return this.nodes},p.prototype.getEdges=function(){return this.edges},p.prototype.getGraphManager=function(){return this.graphManager},p.prototype.getParent=function(){return this.parent},p.prototype.getLeft=function(){return this.left},p.prototype.getRight=function(){return this.right},p.prototype.getTop=function(){return this.top},p.prototype.getBottom=function(){return this.bottom},p.prototype.isConnected=function(){return this.isConnected},p.prototype.add=function(D,I,C){if(null==I&&null==C){var N=D;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(N)>-1)throw"Node already in graph!";return N.owner=this,this.getNodes().push(N),N}var U=D;if(!(this.getNodes().indexOf(I)>-1&&this.getNodes().indexOf(C)>-1))throw"Source or target not in graph!";if(I.owner!=C.owner||I.owner!=this)throw"Both owners must be this graph!";return I.owner!=C.owner?null:(U.source=I,U.target=C,U.isInterGraph=!1,this.getEdges().push(U),I.edges.push(U),C!=I&&C.edges.push(U),U)},p.prototype.remove=function(D){var I=D;if(D instanceof b){if(null==I)throw"Node is null!";if(null==I.owner||I.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var C=I.edges.slice(),U=C.length,G=0;G<U;G++)(N=C[G]).isInterGraph?this.graphManager.remove(N):N.source.owner.remove(N);if(-1==(at=this.nodes.indexOf(I)))throw"Node not in owner node list!";this.nodes.splice(at,1)}else if(D instanceof v){var N;if(null==(N=D))throw"Edge is null!";if(null==N.source||null==N.target)throw"Source and/or target is null!";if(null==N.source.owner||null==N.target.owner||N.source.owner!=this||N.target.owner!=this)throw"Source and/or target owner is invalid!";var at,gt=N.source.edges.indexOf(N),At=N.target.edges.indexOf(N);if(!(gt>-1&&At>-1))throw"Source and/or target doesn't know this edge!";if(N.source.edges.splice(gt,1),N.target!=N.source&&N.target.edges.splice(At,1),-1==(at=N.source.owner.getEdges().indexOf(N)))throw"Not in owner's edge list!";N.source.owner.getEdges().splice(at,1)}},p.prototype.updateLeftTop=function(){for(var C,N,U,D=k.MAX_VALUE,I=k.MAX_VALUE,G=this.getNodes(),at=G.length,gt=0;gt<at;gt++){var At=G[gt];D>(C=At.getTop())&&(D=C),I>(N=At.getLeft())&&(I=N)}return D==k.MAX_VALUE?null:(U=null!=G[0].getParent().paddingLeft?G[0].getParent().paddingLeft:this.margin,this.left=I-U,this.top=D-U,new y(this.left,this.top))},p.prototype.updateBounds=function(D){for(var G,at,gt,At,q,I=k.MAX_VALUE,C=-k.MAX_VALUE,N=k.MAX_VALUE,U=-k.MAX_VALUE,$=this.nodes,rt=$.length,O=0;O<rt;O++){var H=$[O];D&&null!=H.child&&H.updateBounds(),I>(G=H.getLeft())&&(I=G),C<(at=H.getRight())&&(C=at),N>(gt=H.getTop())&&(N=gt),U<(At=H.getBottom())&&(U=At)}var j=new f(I,N,C-I,U-N);I==k.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),q=null!=$[0].getParent().paddingLeft?$[0].getParent().paddingLeft:this.margin,this.left=j.x-q,this.right=j.x+j.width+q,this.top=j.y-q,this.bottom=j.y+j.height+q},p.calculateBounds=function(D){for(var G,at,gt,At,I=k.MAX_VALUE,C=-k.MAX_VALUE,N=k.MAX_VALUE,U=-k.MAX_VALUE,q=D.length,$=0;$<q;$++){var rt=D[$];I>(G=rt.getLeft())&&(I=G),C<(at=rt.getRight())&&(C=at),N>(gt=rt.getTop())&&(N=gt),U<(At=rt.getBottom())&&(U=At)}return new f(I,N,C-I,U-N)},p.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},p.prototype.getEstimatedSize=function(){if(this.estimatedSize==k.MIN_VALUE)throw"assert failed";return this.estimatedSize},p.prototype.calcEstimatedSize=function(){for(var D=0,I=this.nodes,C=I.length,N=0;N<C;N++)D+=I[N].calcEstimatedSize();return this.estimatedSize=0==D?T.EMPTY_COMPOUND_NODE_SIZE:D/Math.sqrt(this.nodes.length),this.estimatedSize},p.prototype.updateConnected=function(){var D=this;if(0!=this.nodes.length){var U,G,I=new d,C=new Set,N=this.nodes[0];for(N.withChildren().forEach(function(O){I.push(O),C.add(O)});0!==I.length;)for(var gt=(U=(N=I.shift()).getEdges()).length,At=0;At<gt;At++)null==(G=U[At].getOtherEndInGraph(N,this))||C.has(G)||G.withChildren().forEach(function(O){I.push(O),C.add(O)});if(this.isConnected=!1,C.size>=this.nodes.length){var rt=0;C.forEach(function(O){O.owner==D&&rt++}),rt==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},ct.exports=p},function(ct,ut,pt){"use strict";var R,k=pt(1);function T(w){R=pt(5),this.layout=w,this.graphs=[],this.edges=[]}T.prototype.addRoot=function(){var w=this.layout.newGraph(),b=this.layout.newNode(null),v=this.add(w,b);return this.setRootGraph(v),this.rootGraph},T.prototype.add=function(w,b,v,f,y){if(null==v&&null==f&&null==y){if(null==w)throw"Graph is null!";if(null==b)throw"Parent node is null!";if(this.graphs.indexOf(w)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(w),null!=w.parent)throw"Already has a parent!";if(null!=b.child)throw"Already has a child!";return w.parent=b,b.child=w,w}y=v,v=w;var d=(f=b).getOwner(),p=y.getOwner();if(null==d||d.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==p||p.getGraphManager()!=this)throw"Target not in this graph mgr!";if(d==p)return v.isInterGraph=!1,d.add(v,f,y);if(v.isInterGraph=!0,v.source=f,v.target=y,this.edges.indexOf(v)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(v),null==v.source||null==v.target)throw"Edge source and/or target is null!";if(-1!=v.source.edges.indexOf(v)||-1!=v.target.edges.indexOf(v))throw"Edge already in source and/or target incidency list!";return v.source.edges.push(v),v.target.edges.push(v),v},T.prototype.remove=function(w){if(w instanceof R){var b=w;if(b.getGraphManager()!=this)throw"Graph not in this graph mgr";if(b!=this.rootGraph&&(null==b.parent||b.parent.graphManager!=this))throw"Invalid parent node!";for(var f,v=[],y=(v=v.concat(b.getEdges())).length,d=0;d<y;d++)b.remove(f=v[d]);var p=[];for(y=(p=p.concat(b.getNodes())).length,d=0;d<y;d++)b.remove(p[d]);b==this.rootGraph&&this.setRootGraph(null);var D=this.graphs.indexOf(b);this.graphs.splice(D,1),b.parent=null}else if(w instanceof k){if(null==(f=w))throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(null==f.source||null==f.target)throw"Source and/or target is null!";if(-1==f.source.edges.indexOf(f)||-1==f.target.edges.indexOf(f))throw"Source and/or target doesn't know this edge!";if(D=f.source.edges.indexOf(f),f.source.edges.splice(D,1),D=f.target.edges.indexOf(f),f.target.edges.splice(D,1),null==f.source.owner||null==f.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==f.source.owner.getGraphManager().edges.indexOf(f))throw"Not in owner graph manager's edge list!";D=f.source.owner.getGraphManager().edges.indexOf(f),f.source.owner.getGraphManager().edges.splice(D,1)}},T.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},T.prototype.getGraphs=function(){return this.graphs},T.prototype.getAllNodes=function(){if(null==this.allNodes){for(var w=[],b=this.getGraphs(),v=b.length,f=0;f<v;f++)w=w.concat(b[f].getNodes());this.allNodes=w}return this.allNodes},T.prototype.resetAllNodes=function(){this.allNodes=null},T.prototype.resetAllEdges=function(){this.allEdges=null},T.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},T.prototype.getAllEdges=function(){if(null==this.allEdges){for(var w=[],b=this.getGraphs(),f=0;f<b.length;f++)w=w.concat(b[f].getEdges());w=w.concat(this.edges),this.allEdges=w}return this.allEdges},T.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},T.prototype.setAllNodesToApplyGravitation=function(w){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=w},T.prototype.getRoot=function(){return this.rootGraph},T.prototype.setRootGraph=function(w){if(w.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=w,null==w.parent&&(w.parent=this.layout.newNode("Root node"))},T.prototype.getLayout=function(){return this.layout},T.prototype.isOneAncestorOfOther=function(w,b){if(null==w||null==b)throw"assert failed";if(w==b)return!0;for(var f,v=w.getOwner();null!=(f=v.getParent());){if(f==b)return!0;if(null==(v=f.getOwner()))break}for(v=b.getOwner();null!=(f=v.getParent());){if(f==w)return!0;if(null==(v=f.getOwner()))break}return!1},T.prototype.calcLowestCommonAncestors=function(){for(var w,b,v,f,y,d=this.getAllEdges(),p=d.length,c=0;c<p;c++)if(b=(w=d[c]).source,v=w.target,w.lca=null,w.sourceInLca=b,w.targetInLca=v,b!=v){for(f=b.getOwner();null==w.lca;){for(w.targetInLca=v,y=v.getOwner();null==w.lca;){if(y==f){w.lca=y;break}if(y==this.rootGraph)break;if(null!=w.lca)throw"assert failed";w.targetInLca=y.getParent(),y=w.targetInLca.getOwner()}if(f==this.rootGraph)break;null==w.lca&&(w.sourceInLca=f.getParent(),f=w.sourceInLca.getOwner())}if(null==w.lca)throw"assert failed"}else w.lca=b.getOwner()},T.prototype.calcLowestCommonAncestor=function(w,b){if(w==b)return w.getOwner();for(var v=w.getOwner();null!=v;){for(var f=b.getOwner();null!=f;){if(f==v)return f;f=f.getParent().getOwner()}v=v.getParent().getOwner()}return v},T.prototype.calcInclusionTreeDepths=function(w,b){null==w&&null==b&&(w=this.rootGraph,b=1);for(var v,f=w.getNodes(),y=f.length,d=0;d<y;d++)(v=f[d]).inclusionTreeDepth=b,null!=v.child&&this.calcInclusionTreeDepths(v.child,b+1)},T.prototype.includesInvalidEdge=function(){for(var w,b=this.edges.length,v=0;v<b;v++)if(this.isOneAncestorOfOther((w=this.edges[v]).source,w.target))return!0;return!1},ct.exports=T},function(ct,ut,pt){"use strict";var R=pt(0);function k(){}for(var T in R)k[T]=R[T];k.MAX_ITERATIONS=2500,k.DEFAULT_EDGE_LENGTH=50,k.DEFAULT_SPRING_STRENGTH=.45,k.DEFAULT_REPULSION_STRENGTH=4500,k.DEFAULT_GRAVITY_STRENGTH=.4,k.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,k.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,k.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,k.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,k.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,k.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,k.COOLING_ADAPTATION_FACTOR=.33,k.ADAPTATION_LOWER_NODE_LIMIT=1e3,k.ADAPTATION_UPPER_NODE_LIMIT=5e3,k.MAX_NODE_DISPLACEMENT=3*(k.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),k.MIN_REPULSION_DIST=k.DEFAULT_EDGE_LENGTH/10,k.CONVERGENCE_CHECK_PERIOD=100,k.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,k.MIN_EDGE_LENGTH=1,k.GRID_CALCULATION_CHECK_PERIOD=10,ct.exports=k},function(ct,ut,pt){"use strict";var R=pt(12);function k(){}k.calcSeparationAmount=function(T,w,b,v){if(!T.intersects(w))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(T,w,f),b[0]=Math.min(T.getRight(),w.getRight())-Math.max(T.x,w.x),b[1]=Math.min(T.getBottom(),w.getBottom())-Math.max(T.y,w.y),T.getX()<=w.getX()&&T.getRight()>=w.getRight()?b[0]+=Math.min(w.getX()-T.getX(),T.getRight()-w.getRight()):w.getX()<=T.getX()&&w.getRight()>=T.getRight()&&(b[0]+=Math.min(T.getX()-w.getX(),w.getRight()-T.getRight())),T.getY()<=w.getY()&&T.getBottom()>=w.getBottom()?b[1]+=Math.min(w.getY()-T.getY(),T.getBottom()-w.getBottom()):w.getY()<=T.getY()&&w.getBottom()>=T.getBottom()&&(b[1]+=Math.min(T.getY()-w.getY(),w.getBottom()-T.getBottom()));var y=Math.abs((w.getCenterY()-T.getCenterY())/(w.getCenterX()-T.getCenterX()));w.getCenterY()===T.getCenterY()&&w.getCenterX()===T.getCenterX()&&(y=1);var d=y*b[0],p=b[1]/y;b[0]<p?p=b[0]:d=b[1],b[0]=-1*f[0]*(p/2+v),b[1]=-1*f[1]*(d/2+v)},k.decideDirectionsForOverlappingNodes=function(T,w,b){b[0]=T.getCenterX()<w.getCenterX()?-1:1,b[1]=T.getCenterY()<w.getCenterY()?-1:1},k.getIntersection2=function(T,w,b){var v=T.getCenterX(),f=T.getCenterY(),y=w.getCenterX(),d=w.getCenterY();if(T.intersects(w))return b[0]=v,b[1]=f,b[2]=y,b[3]=d,!0;var p=T.getX(),c=T.getY(),D=T.getRight(),I=T.getX(),C=T.getBottom(),N=T.getRight(),U=T.getWidthHalf(),G=T.getHeightHalf(),at=w.getX(),gt=w.getY(),At=w.getRight(),q=w.getX(),$=w.getBottom(),rt=w.getRight(),O=w.getWidthHalf(),H=w.getHeightHalf(),j=!1,J=!1;if(v===y){if(f>d)return b[0]=v,b[1]=c,b[2]=y,b[3]=$,!1;if(f<d)return b[0]=v,b[1]=C,b[2]=y,b[3]=gt,!1}else if(f===d){if(v>y)return b[0]=p,b[1]=f,b[2]=At,b[3]=d,!1;if(v<y)return b[0]=D,b[1]=f,b[2]=at,b[3]=d,!1}else{var nt=T.height/T.width,yt=w.height/w.width,Nt=(d-f)/(y-v),W=void 0,tt=void 0,Dt=void 0,St=void 0;if(-nt===Nt?v>y?(b[0]=I,b[1]=C,j=!0):(b[0]=D,b[1]=c,j=!0):nt===Nt&&(v>y?(b[0]=p,b[1]=c,j=!0):(b[0]=N,b[1]=C,j=!0)),-yt===Nt?y>v?(b[2]=q,b[3]=$,J=!0):(b[2]=At,b[3]=gt,J=!0):yt===Nt&&(y>v?(b[2]=at,b[3]=gt,J=!0):(b[2]=rt,b[3]=$,J=!0)),j&&J)return!1;if(v>y?f>d?(W=this.getCardinalDirection(nt,Nt,4),tt=this.getCardinalDirection(yt,Nt,2)):(W=this.getCardinalDirection(-nt,Nt,3),tt=this.getCardinalDirection(-yt,Nt,1)):f>d?(W=this.getCardinalDirection(-nt,Nt,1),tt=this.getCardinalDirection(-yt,Nt,3)):(W=this.getCardinalDirection(nt,Nt,2),tt=this.getCardinalDirection(yt,Nt,4)),!j)switch(W){case 1:Dt=c,b[0]=v+-G/Nt,b[1]=Dt;break;case 2:Dt=f+U*Nt,b[0]=N,b[1]=Dt;break;case 3:Dt=C,b[0]=v+G/Nt,b[1]=Dt;break;case 4:Dt=f+-U*Nt,b[0]=I,b[1]=Dt}if(!J)switch(tt){case 1:St=gt,b[2]=y+-H/Nt,b[3]=St;break;case 2:St=d+O*Nt,b[2]=rt,b[3]=St;break;case 3:St=$,b[2]=y+H/Nt,b[3]=St;break;case 4:St=d+-O*Nt,b[2]=q,b[3]=St}}return!1},k.getCardinalDirection=function(T,w,b){return T>w?b:1+b%4},k.getIntersection=function(T,w,b,v){if(null==v)return this.getIntersection2(T,w,b);var G,at,gt,At,q,$,rt,f=T.x,y=T.y,d=w.x,p=w.y,c=b.x,D=b.y,I=v.x,C=v.y;return q=d*y-f*p,$=I*D-c*C,0==(rt=(G=p-y)*(At=c-I)-(at=C-D)*(gt=f-d))?null:new R((gt*$-At*q)/rt,(at*q-G*$)/rt)},k.angleOfVector=function(T,w,b,v){var f=void 0;return T!==b?(f=Math.atan((v-w)/(b-T)),b<T?f+=Math.PI:v<w&&(f+=this.TWO_PI)):f=v<w?this.ONE_AND_HALF_PI:this.HALF_PI,f},k.doIntersect=function(T,w,b,v){var f=T.x,y=T.y,d=w.x,p=w.y,c=b.x,D=b.y,I=v.x,C=v.y,N=(d-f)*(C-D)-(I-c)*(p-y);if(0===N)return!1;var U=((C-D)*(I-f)+(c-I)*(C-y))/N,G=((y-p)*(I-f)+(d-f)*(C-y))/N;return 0<U&&U<1&&0<G&&G<1},k.HALF_PI=.5*Math.PI,k.ONE_AND_HALF_PI=1.5*Math.PI,k.TWO_PI=2*Math.PI,k.THREE_PI=3*Math.PI,ct.exports=k},function(ct,ut,pt){"use strict";function R(){}R.sign=function(k){return k>0?1:k<0?-1:0},R.floor=function(k){return k<0?Math.ceil(k):Math.floor(k)},R.ceil=function(k){return k<0?Math.floor(k):Math.ceil(k)},ct.exports=R},function(ct,ut,pt){"use strict";function R(){}R.MAX_VALUE=2147483647,R.MIN_VALUE=-2147483648,ct.exports=R},function(ct,ut,pt){"use strict";var R=function(){function f(y,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(y,c.key,c)}}return function(y,d,p){return d&&f(y.prototype,d),p&&f(y,p),y}}();var T=function(y){return{value:y,next:null,prev:null}},w=function(y,d,p,c){return null!==y?y.next=d:c.head=d,null!==p?p.prev=d:c.tail=d,d.prev=y,d.next=p,c.length++,d},b=function(y,d){var p=y.prev,c=y.next;return null!==p?p.next=c:d.head=c,null!==c?c.prev=p:d.tail=p,y.prev=y.next=null,d.length--,y},v=function(){function f(y){var d=this;(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,f),this.length=0,this.head=null,this.tail=null,null!=y&&y.forEach(function(p){return d.push(p)})}return R(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(d,p){return w(p.prev,T(d),p,this)}},{key:"insertAfter",value:function(d,p){return w(p,T(d),p.next,this)}},{key:"insertNodeBefore",value:function(d,p){return w(p.prev,d,p,this)}},{key:"insertNodeAfter",value:function(d,p){return w(p,d,p.next,this)}},{key:"push",value:function(d){return w(this.tail,T(d),null,this)}},{key:"unshift",value:function(d){return w(null,T(d),this.head,this)}},{key:"remove",value:function(d){return b(d,this)}},{key:"pop",value:function(){return b(this.tail,this).value}},{key:"popNode",value:function(){return b(this.tail,this)}},{key:"shift",value:function(){return b(this.head,this).value}},{key:"shiftNode",value:function(){return b(this.head,this)}},{key:"get_object_at",value:function(d){if(d<=this.length()){for(var p=1,c=this.head;p<d;)c=c.next,p++;return c.value}}},{key:"set_object_at",value:function(d,p){if(d<=this.length()){for(var c=1,D=this.head;c<d;)D=D.next,c++;D.value=p}}}]),f}();ct.exports=v},function(ct,ut,pt){"use strict";function R(k,T,w){this.x=null,this.y=null,null==k&&null==T&&null==w?(this.x=0,this.y=0):"number"==typeof k&&"number"==typeof T&&null==w?(this.x=k,this.y=T):"Point"==k.constructor.name&&null==T&&null==w&&(this.x=(w=k).x,this.y=w.y)}R.prototype.getX=function(){return this.x},R.prototype.getY=function(){return this.y},R.prototype.getLocation=function(){return new R(this.x,this.y)},R.prototype.setLocation=function(k,T,w){"Point"==k.constructor.name&&null==T&&null==w?this.setLocation((w=k).x,w.y):"number"==typeof k&&"number"==typeof T&&null==w&&(parseInt(k)==k&&parseInt(T)==T?this.move(k,T):(this.x=Math.floor(k+.5),this.y=Math.floor(T+.5)))},R.prototype.move=function(k,T){this.x=k,this.y=T},R.prototype.translate=function(k,T){this.x+=k,this.y+=T},R.prototype.equals=function(k){return"Point"==k.constructor.name?this.x==k.x&&this.y==k.y:this==k},R.prototype.toString=function(){return(new R).constructor.name+"[x="+this.x+",y="+this.y+"]"},ct.exports=R},function(ct,ut,pt){"use strict";function R(k,T,w,b){this.x=0,this.y=0,this.width=0,this.height=0,null!=k&&null!=T&&null!=w&&null!=b&&(this.x=k,this.y=T,this.width=w,this.height=b)}R.prototype.getX=function(){return this.x},R.prototype.setX=function(k){this.x=k},R.prototype.getY=function(){return this.y},R.prototype.setY=function(k){this.y=k},R.prototype.getWidth=function(){return this.width},R.prototype.setWidth=function(k){this.width=k},R.prototype.getHeight=function(){return this.height},R.prototype.setHeight=function(k){this.height=k},R.prototype.getRight=function(){return this.x+this.width},R.prototype.getBottom=function(){return this.y+this.height},R.prototype.intersects=function(k){return!(this.getRight()<k.x||this.getBottom()<k.y||k.getRight()<this.x||k.getBottom()<this.y)},R.prototype.getCenterX=function(){return this.x+this.width/2},R.prototype.getMinX=function(){return this.getX()},R.prototype.getMaxX=function(){return this.getX()+this.width},R.prototype.getCenterY=function(){return this.y+this.height/2},R.prototype.getMinY=function(){return this.getY()},R.prototype.getMaxY=function(){return this.getY()+this.height},R.prototype.getWidthHalf=function(){return this.width/2},R.prototype.getHeightHalf=function(){return this.height/2},ct.exports=R},function(ct,ut,pt){"use strict";var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(T){return typeof T}:function(T){return T&&"function"==typeof Symbol&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T};function k(){}k.lastID=0,k.createID=function(T){return k.isPrimitive(T)?T:(null!=T.uniqueID||(T.uniqueID=k.getString(),k.lastID++),T.uniqueID)},k.getString=function(T){return null==T&&(T=k.lastID),"Object#"+T},k.isPrimitive=function(T){var w=void 0===T?"undefined":R(T);return null==T||"object"!=w&&"function"!=w},ct.exports=k},function(ct,ut,pt){"use strict";function R(c){if(Array.isArray(c)){for(var D=0,I=Array(c.length);D<c.length;D++)I[D]=c[D];return I}return Array.from(c)}var k=pt(0),T=pt(6),w=pt(3),b=pt(1),v=pt(5),f=pt(4),y=pt(17),d=pt(27);function p(c){d.call(this),this.layoutQuality=k.QUALITY,this.createBendsAsNeeded=k.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=k.DEFAULT_INCREMENTAL,this.animationOnLayout=k.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=k.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=k.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=k.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new T(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=c&&(this.isRemoteUse=c)}p.RANDOM_SEED=1,(p.prototype=Object.create(d.prototype)).getGraphManager=function(){return this.graphManager},p.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},p.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},p.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},p.prototype.newGraphManager=function(){var c=new T(this);return this.graphManager=c,c},p.prototype.newGraph=function(c){return new v(null,this.graphManager,c)},p.prototype.newNode=function(c){return new w(this.graphManager,c)},p.prototype.newEdge=function(c){return new b(null,null,c)},p.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},p.prototype.runLayout=function(){var c;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),c=!this.checkLayoutSuccess()&&this.layout(),"during"!==k.ANIMATE&&(c&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,c)},p.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},p.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var D=this.graphManager.getAllEdges(),I=0;I<D.length;I++);var N=this.graphManager.getRoot().getNodes();for(I=0;I<N.length;I++);this.update(this.graphManager.getRoot())}},p.prototype.update=function(c){if(null==c)this.update2();else if(c instanceof w){var D=c;if(null!=D.getChild())for(var I=D.getChild().getNodes(),C=0;C<I.length;C++)update(I[C]);null!=D.vGraphObject&&D.vGraphObject.update(D)}else c instanceof b?null!=c.vGraphObject&&c.vGraphObject.update(c):c instanceof v&&null!=c.vGraphObject&&c.vGraphObject.update(c)},p.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=k.QUALITY,this.animationDuringLayout=k.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=k.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=k.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=k.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=k.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=k.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},p.prototype.transform=function(c){if(null==c)this.transform(new f(0,0));else{var D=new y,I=this.graphManager.getRoot().updateLeftTop();if(null!=I){D.setWorldOrgX(c.x),D.setWorldOrgY(c.y),D.setDeviceOrgX(I.x),D.setDeviceOrgY(I.y);for(var C=this.getAllNodes(),U=0;U<C.length;U++)C[U].transform(D)}}},p.prototype.positionNodesRandomly=function(c){if(null==c)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var D,I,C=c.getNodes(),N=0;N<C.length;N++)null==(I=(D=C[N]).getChild())||0==I.getNodes().length?D.scatter():(this.positionNodesRandomly(I),D.updateBounds())},p.prototype.getFlatForest=function(){for(var c=[],D=!0,I=this.graphManager.getRoot().getNodes(),C=!0,N=0;N<I.length;N++)null!=I[N].getChild()&&(C=!1);if(!C)return c;var U=new Set,G=[],at=new Map,gt=[];for(gt=gt.concat(I);gt.length>0&&D;){for(G.push(gt[0]);G.length>0&&D;){var At=G[0];G.splice(0,1),U.add(At);var q=At.getEdges();for(N=0;N<q.length;N++){var $=q[N].getOtherEnd(At);if(at.get(At)!=$){if(U.has($)){D=!1;break}G.push($),at.set($,At)}}}if(D){var rt=[].concat(R(U));for(c.push(rt),N=0;N<rt.length;N++){var H=gt.indexOf(rt[N]);H>-1&&gt.splice(H,1)}U=new Set,at=new Map}else c=[]}return c},p.prototype.createDummyNodesForBendpoints=function(c){for(var D=[],I=c.source,C=this.graphManager.calcLowestCommonAncestor(c.source,c.target),N=0;N<c.bendpoints.length;N++){var U=this.newNode(null);U.setRect(new Point(0,0),new Dimension(1,1)),C.add(U);var G=this.newEdge(null);this.graphManager.add(G,I,U),D.add(U),I=U}return G=this.newEdge(null),this.graphManager.add(G,I,c.target),this.edgeToDummyNodes.set(c,D),c.isInterGraph()?this.graphManager.remove(c):C.remove(c),D},p.prototype.createBendpointsFromDummyNodes=function(){var c=[];c=c.concat(this.graphManager.getAllEdges()),c=[].concat(R(this.edgeToDummyNodes.keys())).concat(c);for(var D=0;D<c.length;D++){var I=c[D];if(I.bendpoints.length>0){for(var C=this.edgeToDummyNodes.get(I),N=0;N<C.length;N++){var U=C[N],G=new f(U.getCenterX(),U.getCenterY()),at=I.bendpoints.get(N);at.x=G.x,at.y=G.y,U.getOwner().remove(U)}this.graphManager.add(I,I.source,I.target)}}},p.transform=function(c,D,I,C){if(null!=I&&null!=C){var N=D;return c<=50?N-=(D-D/I)/50*(50-c):N+=(D*C-D)/50*(c-50),N}var at,gt;return c<=50?(at=9*D/500,gt=D/10):(at=9*D/50,gt=-8*D),at*c+gt},p.findCenterOfTree=function(c){var D=[];D=D.concat(c);var I=[],C=new Map,N=!1,U=null;(1==D.length||2==D.length)&&(N=!0,U=D[0]);for(var G=0;G<D.length;G++){var gt=(at=D[G]).getNeighborsList().size;C.set(at,at.getNeighborsList().size),1==gt&&I.push(at)}var At=[];for(At=At.concat(I);!N;){var q=[];for(q=q.concat(At),At=[],G=0;G<D.length;G++){var at,$=D.indexOf(at=D[G]);$>=0&&D.splice($,1),at.getNeighborsList().forEach(function(j){if(I.indexOf(j)<0){var nt=C.get(j)-1;1==nt&&At.push(j),C.set(j,nt)}})}I=I.concat(At),(1==D.length||2==D.length)&&(N=!0,U=D[0])}return U},p.prototype.setGraphManager=function(c){this.graphManager=c},ct.exports=p},function(ct,ut,pt){"use strict";function R(){}R.seed=1,R.x=0,R.nextDouble=function(){return(R.x=1e4*Math.sin(R.seed++))-Math.floor(R.x)},ct.exports=R},function(ct,ut,pt){"use strict";var R=pt(4);function k(T,w){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}k.prototype.getWorldOrgX=function(){return this.lworldOrgX},k.prototype.setWorldOrgX=function(T){this.lworldOrgX=T},k.prototype.getWorldOrgY=function(){return this.lworldOrgY},k.prototype.setWorldOrgY=function(T){this.lworldOrgY=T},k.prototype.getWorldExtX=function(){return this.lworldExtX},k.prototype.setWorldExtX=function(T){this.lworldExtX=T},k.prototype.getWorldExtY=function(){return this.lworldExtY},k.prototype.setWorldExtY=function(T){this.lworldExtY=T},k.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},k.prototype.setDeviceOrgX=function(T){this.ldeviceOrgX=T},k.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},k.prototype.setDeviceOrgY=function(T){this.ldeviceOrgY=T},k.prototype.getDeviceExtX=function(){return this.ldeviceExtX},k.prototype.setDeviceExtX=function(T){this.ldeviceExtX=T},k.prototype.getDeviceExtY=function(){return this.ldeviceExtY},k.prototype.setDeviceExtY=function(T){this.ldeviceExtY=T},k.prototype.transformX=function(T){var w=0,b=this.lworldExtX;return 0!=b&&(w=this.ldeviceOrgX+(T-this.lworldOrgX)*this.ldeviceExtX/b),w},k.prototype.transformY=function(T){var w=0,b=this.lworldExtY;return 0!=b&&(w=this.ldeviceOrgY+(T-this.lworldOrgY)*this.ldeviceExtY/b),w},k.prototype.inverseTransformX=function(T){var w=0,b=this.ldeviceExtX;return 0!=b&&(w=this.lworldOrgX+(T-this.ldeviceOrgX)*this.lworldExtX/b),w},k.prototype.inverseTransformY=function(T){var w=0,b=this.ldeviceExtY;return 0!=b&&(w=this.lworldOrgY+(T-this.ldeviceOrgY)*this.lworldExtY/b),w},k.prototype.inverseTransformPoint=function(T){return new R(this.inverseTransformX(T.x),this.inverseTransformY(T.y))},ct.exports=k},function(ct,ut,pt){"use strict";var k=pt(15),T=pt(7),w=pt(0),b=pt(8),v=pt(9);function f(){k.call(this),this.useSmartIdealEdgeLengthCalculation=T.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=T.DEFAULT_EDGE_LENGTH,this.springConstant=T.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=T.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=T.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=T.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*T.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=T.MAX_ITERATIONS}for(var y in f.prototype=Object.create(k.prototype),k)f[y]=k[y];f.prototype.initParameters=function(){k.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=T.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var d,p,c,D,I,C,N=this.getGraphManager().getAllEdges(),U=0;U<N.length;U++)(d=N[U]).idealLength=this.idealEdgeLength,d.isInterGraph&&(c=d.getSource(),D=d.getTarget(),I=d.getSourceInLca().getEstimatedSize(),C=d.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(d.idealLength+=I+C-2*w.SIMPLE_NODE_SIZE),p=d.getLca().getInclusionTreeDepth(),d.idealLength+=T.DEFAULT_EDGE_LENGTH*T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(c.getInclusionTreeDepth()+D.getInclusionTreeDepth()-2*p))},f.prototype.initSpringEmbedder=function(){var d=this.getAllNodes().length;this.incremental?(d>T.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*T.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(d-T.ADAPTATION_LOWER_NODE_LIMIT)/(T.ADAPTATION_UPPER_NODE_LIMIT-T.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-T.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=T.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=d>T.ADAPTATION_LOWER_NODE_LIMIT?Math.max(T.COOLING_ADAPTATION_FACTOR,1-(d-T.ADAPTATION_LOWER_NODE_LIMIT)/(T.ADAPTATION_UPPER_NODE_LIMIT-T.ADAPTATION_LOWER_NODE_LIMIT)*(1-T.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=T.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var p,d=this.getAllEdges(),c=0;c<d.length;c++)this.calcSpringForce(p=d[c],p.idealLength)},f.prototype.calcRepulsionForces=function(){var c,D,I,C,U,d=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],N=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%T.GRID_CALCULATION_CHECK_PERIOD==1&&d&&this.updateGrid(),U=new Set,c=0;c<N.length;c++)this.calculateRepulsionForceOfANode(I=N[c],U,d,p),U.add(I);else for(c=0;c<N.length;c++)for(I=N[c],D=c+1;D<N.length;D++)C=N[D],I.getOwner()==C.getOwner()&&this.calcRepulsionForce(I,C)},f.prototype.calcGravitationalForces=function(){for(var p=this.getAllNodesToApplyGravitation(),c=0;c<p.length;c++)this.calcGravitationalForce(p[c])},f.prototype.moveNodes=function(){for(var d=this.getAllNodes(),c=0;c<d.length;c++)d[c].move()},f.prototype.calcSpringForce=function(d,p){var I,C,N,U,c=d.getSource(),D=d.getTarget();if(this.uniformLeafNodeSizes&&null==c.getChild()&&null==D.getChild())d.updateLengthSimple();else if(d.updateLength(),d.isOverlapingSourceAndTarget)return;0!=(I=d.getLength())&&(U=(C=this.springConstant*(I-p))*(d.lengthY/I),c.springForceX+=N=C*(d.lengthX/I),c.springForceY+=U,D.springForceX-=N,D.springForceY-=U)},f.prototype.calcRepulsionForce=function(d,p){var N,U,G,at,gt,At,q,c=d.getRect(),D=p.getRect(),I=new Array(2),C=new Array(4);if(c.intersects(D)){b.calcSeparationAmount(c,D,I,T.DEFAULT_EDGE_LENGTH/2),q=2*I[1];var $=d.noOfChildren*p.noOfChildren/(d.noOfChildren+p.noOfChildren);d.repulsionForceX-=$*(At=2*I[0]),d.repulsionForceY-=$*q,p.repulsionForceX+=$*At,p.repulsionForceY+=$*q}else this.uniformLeafNodeSizes&&null==d.getChild()&&null==p.getChild()?(N=D.getCenterX()-c.getCenterX(),U=D.getCenterY()-c.getCenterY()):(b.getIntersection(c,D,C),N=C[2]-C[0],U=C[3]-C[1]),Math.abs(N)<T.MIN_REPULSION_DIST&&(N=v.sign(N)*T.MIN_REPULSION_DIST),Math.abs(U)<T.MIN_REPULSION_DIST&&(U=v.sign(U)*T.MIN_REPULSION_DIST),G=N*N+U*U,at=Math.sqrt(G),q=(gt=this.repulsionConstant*d.noOfChildren*p.noOfChildren/G)*U/at,d.repulsionForceX-=At=gt*N/at,d.repulsionForceY-=q,p.repulsionForceX+=At,p.repulsionForceY+=q},f.prototype.calcGravitationalForce=function(d){var p,c,D,I,C,N,U,G;c=((p=d.getOwner()).getRight()+p.getLeft())/2,D=(p.getTop()+p.getBottom())/2,I=d.getCenterX()-c,C=d.getCenterY()-D,N=Math.abs(I)+d.getWidth()/2,U=Math.abs(C)+d.getHeight()/2,d.getOwner()==this.graphManager.getRoot()?(N>(G=p.getEstimatedSize()*this.gravityRangeFactor)||U>G)&&(d.gravitationForceX=-this.gravityConstant*I,d.gravitationForceY=-this.gravityConstant*C):(N>(G=p.getEstimatedSize()*this.compoundGravityRangeFactor)||U>G)&&(d.gravitationForceX=-this.gravityConstant*I*this.compoundGravityConstant,d.gravitationForceY=-this.gravityConstant*C*this.compoundGravityConstant)},f.prototype.isConverged=function(){var d,p=!1;return this.totalIterations>this.maxIterations/3&&(p=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),d=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,d||p},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var d,p=this.graphManager.getAllNodes(),c=0;c<p.length;c++)(d=p[c]).noOfChildren=d.getNoOfChildren()},f.prototype.calcGrid=function(d){var p,c;p=parseInt(Math.ceil((d.getRight()-d.getLeft())/this.repulsionRange)),c=parseInt(Math.ceil((d.getBottom()-d.getTop())/this.repulsionRange));for(var D=new Array(p),I=0;I<p;I++)D[I]=new Array(c);for(I=0;I<p;I++)for(var C=0;C<c;C++)D[I][C]=new Array;return D},f.prototype.addNodeToGrid=function(d,p,c){var D,I,C,N;D=parseInt(Math.floor((d.getRect().x-p)/this.repulsionRange)),I=parseInt(Math.floor((d.getRect().width+d.getRect().x-p)/this.repulsionRange)),C=parseInt(Math.floor((d.getRect().y-c)/this.repulsionRange)),N=parseInt(Math.floor((d.getRect().height+d.getRect().y-c)/this.repulsionRange));for(var U=D;U<=I;U++)for(var G=C;G<=N;G++)this.grid[U][G].push(d),d.setGridCoordinates(D,I,C,N)},f.prototype.updateGrid=function(){var d,c=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),d=0;d<c.length;d++)this.addNodeToGrid(c[d],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(d,p,c,D){if(this.totalIterations%T.GRID_CALCULATION_CHECK_PERIOD==1&&c||D){var I=new Set;d.surrounding=new Array;for(var C,N=this.grid,U=d.startX-1;U<d.finishX+2;U++)for(var G=d.startY-1;G<d.finishY+2;G++)if(!(U<0||G<0||U>=N.length||G>=N[0].length))for(var at=0;at<N[U][G].length;at++)if(C=N[U][G][at],d.getOwner()==C.getOwner()&&d!=C&&!p.has(C)&&!I.has(C)){var gt=Math.abs(d.getCenterX()-C.getCenterX())-(d.getWidth()/2+C.getWidth()/2),At=Math.abs(d.getCenterY()-C.getCenterY())-(d.getHeight()/2+C.getHeight()/2);gt<=this.repulsionRange&&At<=this.repulsionRange&&I.add(C)}d.surrounding=[].concat(function(d){if(Array.isArray(d)){for(var p=0,c=Array(d.length);p<d.length;p++)c[p]=d[p];return c}return Array.from(d)}(I))}for(U=0;U<d.surrounding.length;U++)this.calcRepulsionForce(d,d.surrounding[U])},f.prototype.calcRepulsionRange=function(){return 0},ct.exports=f},function(ct,ut,pt){"use strict";var R=pt(1),k=pt(7);function T(b,v,f){R.call(this,b,v,f),this.idealLength=k.DEFAULT_EDGE_LENGTH}for(var w in T.prototype=Object.create(R.prototype),R)T[w]=R[w];ct.exports=T},function(ct,ut,pt){"use strict";var R=pt(3);function k(w,b,v,f){R.call(this,w,b,v,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var T in k.prototype=Object.create(R.prototype),R)k[T]=R[T];k.prototype.setGridCoordinates=function(w,b,v,f){this.startX=w,this.finishX=b,this.startY=v,this.finishY=f},ct.exports=k},function(ct,ut,pt){"use strict";function R(k,T){this.width=0,this.height=0,null!==k&&null!==T&&(this.height=T,this.width=k)}R.prototype.getWidth=function(){return this.width},R.prototype.setWidth=function(k){this.width=k},R.prototype.getHeight=function(){return this.height},R.prototype.setHeight=function(k){this.height=k},ct.exports=R},function(ct,ut,pt){"use strict";var R=pt(14);function k(){this.map={},this.keys=[]}k.prototype.put=function(T,w){var b=R.createID(T);this.contains(b)||(this.map[b]=w,this.keys.push(T))},k.prototype.contains=function(T){return R.createID(T),null!=this.map[T]},k.prototype.get=function(T){var w=R.createID(T);return this.map[w]},k.prototype.keySet=function(){return this.keys},ct.exports=k},function(ct,ut,pt){"use strict";var R=pt(14);function k(){this.set={}}k.prototype.add=function(T){var w=R.createID(T);this.contains(w)||(this.set[w]=T)},k.prototype.remove=function(T){delete this.set[R.createID(T)]},k.prototype.clear=function(){this.set={}},k.prototype.contains=function(T){return this.set[R.createID(T)]==T},k.prototype.isEmpty=function(){return 0===this.size()},k.prototype.size=function(){return Object.keys(this.set).length},k.prototype.addAllTo=function(T){for(var w=Object.keys(this.set),b=w.length,v=0;v<b;v++)T.push(this.set[w[v]])},k.prototype.size=function(){return Object.keys(this.set).length},k.prototype.addAll=function(T){for(var w=T.length,b=0;b<w;b++)this.add(T[b])},ct.exports=k},function(ct,ut,pt){"use strict";var R=function(){function b(v,f){for(var y=0;y<f.length;y++){var d=f[y];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(v,d.key,d)}}return function(v,f,y){return f&&b(v.prototype,f),y&&b(v,y),v}}();var T=pt(11),w=function(){function b(v,f){(function(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")})(this,b),(null!==f||void 0!==f)&&(this.compareFunction=this._defaultCompareFunction);var y;y=v instanceof T?v.size():v.length,this._quicksort(v,0,y-1)}return R(b,[{key:"_quicksort",value:function(f,y,d){if(y<d){var p=this._partition(f,y,d);this._quicksort(f,y,p),this._quicksort(f,p+1,d)}}},{key:"_partition",value:function(f,y,d){for(var p=this._get(f,y),c=y,D=d;;){for(;this.compareFunction(p,this._get(f,D));)D--;for(;this.compareFunction(this._get(f,c),p);)c++;if(!(c<D))return D;this._swap(f,c,D),c++,D--}}},{key:"_get",value:function(f,y){return f instanceof T?f.get_object_at(y):f[y]}},{key:"_set",value:function(f,y,d){f instanceof T?f.set_object_at(y,d):f[y]=d}},{key:"_swap",value:function(f,y,d){var p=this._get(f,y);this._set(f,y,this._get(f,d)),this._set(f,d,p)}},{key:"_defaultCompareFunction",value:function(f,y){return y>f}}]),b}();ct.exports=w},function(ct,ut,pt){"use strict";var R=function(){function w(b,v){for(var f=0;f<v.length;f++){var y=v[f];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,v,f){return v&&w(b.prototype,v),f&&w(b,f),b}}();function k(w,b){if(!(w instanceof b))throw new TypeError("Cannot call a class as a function")}var T=function(){function w(b,v){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,y=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;k(this,w),this.sequence1=b,this.sequence2=v,this.match_score=f,this.mismatch_penalty=y,this.gap_penalty=d,this.iMax=b.length+1,this.jMax=v.length+1,this.grid=new Array(this.iMax);for(var p=0;p<this.iMax;p++){this.grid[p]=new Array(this.jMax);for(var c=0;c<this.jMax;c++)this.grid[p][c]=0}this.tracebackGrid=new Array(this.iMax);for(var D=0;D<this.iMax;D++){this.tracebackGrid[D]=new Array(this.jMax);for(var I=0;I<this.jMax;I++)this.tracebackGrid[D][I]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return R(w,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var v=1;v<this.jMax;v++)this.grid[0][v]=this.grid[0][v-1]+this.gap_penalty,this.tracebackGrid[0][v]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var y=1;y<this.iMax;y++)for(var d=1;d<this.jMax;d++){var I=[this.sequence1[y-1]===this.sequence2[d-1]?this.grid[y-1][d-1]+this.match_score:this.grid[y-1][d-1]+this.mismatch_penalty,this.grid[y-1][d]+this.gap_penalty,this.grid[y][d-1]+this.gap_penalty],C=this.arrayAllMaxIndexes(I);this.grid[y][d]=I[C[0]],this.tracebackGrid[y][d]=[C.includes(0),C.includes(1),C.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var v=[];for(v.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});v[0];){var f=v[0],y=this.tracebackGrid[f.pos[0]][f.pos[1]];y[0]&&v.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),y[1]&&v.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),y[2]&&v.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),0===f.pos[0]&&0===f.pos[1]&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),v.shift()}return this.alignments}},{key:"getAllIndexes",value:function(v,f){for(var y=[],d=-1;-1!==(d=v.indexOf(f,d+1));)y.push(d);return y}},{key:"arrayAllMaxIndexes",value:function(v){return this.getAllIndexes(v,Math.max.apply(null,v))}}]),w}();ct.exports=T},function(ct,ut,pt){"use strict";var R=function(){};R.FDLayout=pt(18),R.FDLayoutConstants=pt(7),R.FDLayoutEdge=pt(19),R.FDLayoutNode=pt(20),R.DimensionD=pt(21),R.HashMap=pt(22),R.HashSet=pt(23),R.IGeometry=pt(8),R.IMath=pt(9),R.Integer=pt(10),R.Point=pt(12),R.PointD=pt(4),R.RandomSeed=pt(16),R.RectangleD=pt(13),R.Transform=pt(17),R.UniqueIDGeneretor=pt(14),R.Quicksort=pt(24),R.LinkedList=pt(11),R.LGraphObject=pt(2),R.LGraph=pt(5),R.LEdge=pt(1),R.LGraphManager=pt(6),R.LNode=pt(3),R.Layout=pt(15),R.LayoutConstants=pt(0),R.NeedlemanWunsch=pt(25),ct.exports=R},function(ct,ut,pt){"use strict";function R(){this.listeners=[]}var k=R.prototype;k.addListener=function(T,w){this.listeners.push({event:T,callback:w})},k.removeListener=function(T,w){for(var b=this.listeners.length;b>=0;b--){var v=this.listeners[b];v.event===T&&v.callback===w&&this.listeners.splice(b,1)}},k.emit=function(T,w){for(var b=0;b<this.listeners.length;b++){var v=this.listeners[b];T===v.event&&v.callback(w)}},ct.exports=R}])},2103:(Ee,ct,ut)=>{"use strict";function pt(R){for(var k in R)ct.hasOwnProperty(k)||(ct[k]=R[k])}Object.defineProperty(ct,"__esModule",{value:!0}),pt(ut(7100)),pt(ut(1213)),pt(ut(6400)),pt(ut(6542)),pt(ut(4308)),pt(ut(7109)),pt(ut(5581)),pt(ut(8453)),pt(ut(5302)),pt(ut(1703)),pt(ut(7992)),pt(ut(4655)),pt(ut(1182)),pt(ut(1717)),pt(ut(9474)),pt(ut(6482))},7100:function(Ee,ct,ut){"use strict";var w,pt=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ct,"__esModule",{value:!0});var R=ut(5581),k=function(w){function b(v){var f=w.call(this)||this,d=v;return d.trigger&&(f.trigger=d.trigger),d.kick&&(f.kick=d.kick),d.drag&&(f.drag=d.drag),d.on&&(f.on=d.on),f.dragstart=f.dragStart=R.Layout.dragStart,f.dragend=f.dragEnd=R.Layout.dragEnd,f}return pt(b,w),b.prototype.trigger=function(v){},b.prototype.kick=function(){},b.prototype.drag=function(){},b.prototype.on=function(v,f){return this},b}(R.Layout);ct.LayoutAdaptor=k,ct.adaptor=function(w){return new k(w)}},6482:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var pt=ut(5581),R=ut(4308);ct.gridify=function(b,v,f,y){b.cola.start(0,0,0,10,!1);var d=function(b,v,f,y){b.forEach(function(p){p.routerNode={name:p.name,bounds:p.bounds.inflate(-f)}}),v.forEach(function(p){p.routerNode={bounds:p.bounds.inflate(-y),children:(void 0!==p.groups?p.groups.map(function(c){return b.length+c.id}):[]).concat(void 0!==p.leaves?p.leaves.map(function(c){return c.index}):[])}});var d=b.concat(v).map(function(p,c){return p.routerNode.id=c,p.routerNode});return new R.GridRouter(d,{getChildren:function(p){return p.children},getBounds:function(p){return p.bounds}},f-y)}(b.cola.nodes(),b.cola.groups(),f,y);return d.routeEdges(b.powerGraph.powerEdges,v,function(p){return p.source.routerNode.id},function(p){return p.target.routerNode.id})},ct.powerGraphGridLayout=function(b,v,f){var y;b.nodes.forEach(function(D,I){return D.index=I}),(new pt.Layout).avoidOverlaps(!1).nodes(b.nodes).links(b.links).powerGraphGroups(function(D){(y=D).groups.forEach(function(I){return I.padding=f})});var d=b.nodes.length,p=[],c=b.nodes.slice(0);return c.forEach(function(D,I){return D.index=I}),y.groups.forEach(function(D){var I=D.index=D.id+d;c.push(D),void 0!==D.leaves&&D.leaves.forEach(function(C){return p.push({source:I,target:C.index})}),void 0!==D.groups&&D.groups.forEach(function(C){return p.push({source:I,target:C.id+d})})}),y.powerEdges.forEach(function(D){p.push({source:D.source.index,target:D.target.index})}),(new pt.Layout).size(v).nodes(c).links(p).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new pt.Layout).convergenceThreshold(.001).size(v).avoidOverlaps(!0).nodes(b.nodes).links(b.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(D){(y=D).groups.forEach(function(I){I.padding=f})}).start(50,0,100,0,!1),powerGraph:y}}},1213:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var pt=ut(2297),R=ut(4850);ct.d3adaptor=function(w){return!w||function(w){return w.version&&null!==w.version.match(/^3\./)}(w)?new pt.D3StyleLayoutAdaptor:new R.D3StyleLayoutAdaptor(w)}},2297:function(Ee,ct,ut){"use strict";var w,pt=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ct,"__esModule",{value:!0});var R=ut(5581),k=function(w){function b(){var v=w.call(this)||this;v.event=d3.dispatch(R.EventType[R.EventType.start],R.EventType[R.EventType.tick],R.EventType[R.EventType.end]);var f=v;return v.drag=function(){if(!d)var d=d3.behavior.drag().origin(R.Layout.dragOrigin).on("dragstart.d3adaptor",R.Layout.dragStart).on("drag.d3adaptor",function(p){R.Layout.drag(p,d3.event),f.resume()}).on("dragend.d3adaptor",R.Layout.dragEnd);if(!arguments.length)return d;this.call(d)},v}return pt(b,w),b.prototype.trigger=function(v){var f={type:R.EventType[v.type],alpha:v.alpha,stress:v.stress};this.event[f.type](f)},b.prototype.kick=function(){var v=this;d3.timer(function(){return w.prototype.tick.call(v)})},b.prototype.on=function(v,f){return this.event.on("string"==typeof v?v:R.EventType[v],f),this},b}(R.Layout);ct.D3StyleLayoutAdaptor=k,ct.d3adaptor=function(){return new k}},4850:function(Ee,ct,ut){"use strict";var T,pt=this&&this.__extends||(T=function(w,b){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,f){v.__proto__=f}||function(v,f){for(var y in f)f.hasOwnProperty(y)&&(v[y]=f[y])})(w,b)},function(w,b){function v(){this.constructor=w}T(w,b),w.prototype=null===b?Object.create(b):(v.prototype=b.prototype,new v)});Object.defineProperty(ct,"__esModule",{value:!0});var R=ut(5581),k=function(T){function w(b){var v=T.call(this)||this;v.d3Context=b,v.event=b.dispatch(R.EventType[R.EventType.start],R.EventType[R.EventType.tick],R.EventType[R.EventType.end]);var f=v;return v.drag=function(){if(!d)var d=b.drag().subject(R.Layout.dragOrigin).on("start.d3adaptor",R.Layout.dragStart).on("drag.d3adaptor",function(p){R.Layout.drag(p,b.event),f.resume()}).on("end.d3adaptor",R.Layout.dragEnd);if(!arguments.length)return d;arguments[0].call(d)},v}return pt(w,T),w.prototype.trigger=function(b){var v={type:R.EventType[b.type],alpha:b.alpha,stress:b.stress};this.event.call(v.type,v)},w.prototype.kick=function(){var b=this,v=this.d3Context.timer(function(){return T.prototype.tick.call(b)&&v.stop()})},w.prototype.on=function(b,v){return this.event.on("string"==typeof b?b:R.EventType[b],v),this},w}(R.Layout);ct.D3StyleLayoutAdaptor=k},6400:(Ee,ct)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var ut=function(){function k(){this.locks={}}return k.prototype.add=function(T,w){this.locks[T]=w},k.prototype.clear=function(){this.locks={}},k.prototype.isEmpty=function(){for(var T in this.locks)return!1;return!0},k.prototype.apply=function(T){for(var w in this.locks)T(Number(w),this.locks[w])},k}();ct.Locks=ut;var pt=function(){function k(T,w,b){void 0===b&&(b=null),this.D=w,this.G=b,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new R,this.project=null,this.x=T,this.k=T.length;var v=this.n=T[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new ut,this.minD=Number.MAX_VALUE;for(var y,f=v;f--;)for(y=v;--y>f;){var d=w[f][y];d>0&&d<this.minD&&(this.minD=d)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),f=this.k;f--;){for(this.g[f]=new Array(v),this.H[f]=new Array(v),y=v;y--;)this.H[f][y]=new Array(v);this.Hd[f]=new Array(v),this.a[f]=new Array(v),this.b[f]=new Array(v),this.c[f]=new Array(v),this.d[f]=new Array(v),this.e[f]=new Array(v),this.ia[f]=new Array(v),this.ib[f]=new Array(v),this.xtmp[f]=new Array(v)}}return k.createSquareMatrix=function(T,w){for(var b=new Array(T),v=0;v<T;++v){b[v]=new Array(T);for(var f=0;f<T;++f)b[v][f]=w(v,f)}return b},k.prototype.offsetDir=function(){for(var T=this,w=new Array(this.k),b=0,v=0;v<this.k;++v){var f=w[v]=this.random.getNextBetween(.01,1)-.5;b+=f*f}return b=Math.sqrt(b),w.map(function(y){return y*(T.minD/b)})},k.prototype.computeDerivatives=function(T){var w=this,b=this.n;if(!(b<1)){for(var v,f=new Array(this.k),y=new Array(this.k),d=new Array(this.k),p=0,c=0;c<b;++c){for(v=0;v<this.k;++v)d[v]=this.g[v][c]=0;for(var D=0;D<b;++D)if(c!==D){for(var I=b;I--;){var C=0;for(v=0;v<this.k;++v){var N=f[v]=T[v][c]-T[v][D];C+=y[v]=N*N}if(C>1e-9)break;var U=this.offsetDir();for(v=0;v<this.k;++v)T[v][D]+=U[v]}var G=Math.sqrt(C),at=this.D[c][D],gt=null!=this.G?this.G[c][D]:1;if(gt>1&&G>at||!isFinite(at)){for(v=0;v<this.k;++v)this.H[v][c][D]=0;continue}gt>1&&(gt=1);var At=at*at,q=2*gt*(G-at)/(At*G),$=G*G*G,rt=2*-gt/(At*$);for(isFinite(q)||console.log(q),v=0;v<this.k;++v)this.g[v][c]+=f[v]*q,d[v]-=this.H[v][c][D]=rt*($+at*(y[v]-C)+G*C)}for(v=0;v<this.k;++v)p=Math.max(p,this.H[v][c][c]=d[v])}var O=this.snapGridSize/2,H=this.snapGridSize,J=this.snapStrength/(O*O),nt=this.numGridSnapNodes;for(c=0;c<nt;++c)for(v=0;v<this.k;++v){var yt=this.x[v][c],Nt=yt/H,W=Nt%1,tt=Nt-W;-O<(N=Math.abs(W)<=.5?yt-tt*H:yt>0?yt-(tt+1)*H:yt-(tt-1)*H)&&N<=O&&(this.scaleSnapByMaxH?(this.g[v][c]+=p*J*N,this.H[v][c][c]+=p*J):(this.g[v][c]+=J*N,this.H[v][c][c]+=J))}this.locks.isEmpty()||this.locks.apply(function(Dt,Ot){for(v=0;v<w.k;++v)w.H[v][Dt][Dt]+=p,w.g[v][Dt]-=p*(Ot[v]-T[v][Dt])})}},k.dotProd=function(T,w){for(var b=0,v=T.length;v--;)b+=T[v]*w[v];return b},k.rightMultiply=function(T,w,b){for(var v=T.length;v--;)b[v]=k.dotProd(T[v],w)},k.prototype.computeStepSize=function(T){for(var w=0,b=0,v=0;v<this.k;++v)w+=k.dotProd(this.g[v],T[v]),k.rightMultiply(this.H[v],T[v],this.Hd[v]),b+=k.dotProd(T[v],this.Hd[v]);return 0!==b&&isFinite(b)?1*w/b:0},k.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var T=this.computeStepSize(this.g),w=0;w<this.k;++w)this.takeDescentStep(this.x[w],this.g[w],T);return this.computeStress()},k.copy=function(T,w){for(var b=T.length,v=w[0].length,f=0;f<b;++f)for(var y=0;y<v;++y)w[f][y]=T[f][y]},k.prototype.stepAndProject=function(T,w,b,v){k.copy(T,w),this.takeDescentStep(w[0],b[0],v),this.project&&this.project[0](T[0],T[1],w[0]),this.takeDescentStep(w[1],b[1],v),this.project&&this.project[1](w[0],T[1],w[1]);for(var f=2;f<this.k;f++)this.takeDescentStep(w[f],b[f],v)},k.mApply=function(T,w,b){for(var v=T;v-- >0;)for(var f=w;f-- >0;)b(v,f)},k.prototype.matrixApply=function(T){k.mApply(this.k,this.n,T)},k.prototype.computeNextPosition=function(T,w){var b=this;this.computeDerivatives(T);var v=this.computeStepSize(this.g);if(this.stepAndProject(T,w,this.g,v),this.project){this.matrixApply(function(y,d){return b.e[y][d]=T[y][d]-w[y][d]});var f=this.computeStepSize(this.e);f=Math.max(.2,Math.min(f,1)),this.stepAndProject(T,w,this.e,f)}},k.prototype.run=function(T){for(var w=Number.MAX_VALUE,b=!1;!b&&T-- >0;){var v=this.rungeKutta();b=Math.abs(w/v-1)<this.threshold,w=v}return w},k.prototype.rungeKutta=function(){var T=this;this.computeNextPosition(this.x,this.a),k.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),k.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var w=0;return this.matrixApply(function(b,v){var f=(T.a[b][v]+2*T.b[b][v]+2*T.c[b][v]+T.d[b][v])/6,y=T.x[b][v]-f;w+=y*y,T.x[b][v]=f}),w},k.mid=function(T,w,b){k.mApply(T.length,T[0].length,function(v,f){return b[v][f]=T[v][f]+(w[v][f]-T[v][f])/2})},k.prototype.takeDescentStep=function(T,w,b){for(var v=0;v<this.n;++v)T[v]=T[v]-b*w[v]},k.prototype.computeStress=function(){for(var T=0,w=0,b=this.n-1;w<b;++w)for(var v=w+1,f=this.n;v<f;++v){for(var y=0,d=0;d<this.k;++d){var p=this.x[d][w]-this.x[d][v];y+=p*p}y=Math.sqrt(y);var c=this.D[w][v];if(isFinite(c)){var D=c-y;T+=D*D/(c*c)}}return T},k.zeroDistance=1e-10,k}();ct.Descent=pt;var R=function(){function k(T){void 0===T&&(T=1),this.seed=T,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return k.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},k.prototype.getNextBetween=function(T,w){return T+this.getNext()*(w-T)},k}();ct.PseudoRandom=R},6542:function(Ee,ct,ut){"use strict";var W,pt=this&&this.__extends||(W=function(tt,dt){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Dt,Ot){Dt.__proto__=Ot}||function(Dt,Ot){for(var St in Ot)Ot.hasOwnProperty(St)&&(Dt[St]=Ot[St])})(tt,dt)},function(tt,dt){function Dt(){this.constructor=tt}W(tt,dt),tt.prototype=null===dt?Object.create(dt):(Dt.prototype=dt.prototype,new Dt)});Object.defineProperty(ct,"__esModule",{value:!0});var R=ut(1182),k=function(){};ct.Point=k;var T=function(tt,dt,Dt,Ot){this.x1=tt,this.y1=dt,this.x2=Dt,this.y2=Ot};ct.LineSegment=T;var w=function(W){function tt(){return null!==W&&W.apply(this,arguments)||this}return pt(tt,W),tt}(k);function b(W,tt,dt){return(tt.x-W.x)*(dt.y-W.y)-(dt.x-W.x)*(tt.y-W.y)}function v(W,tt,dt){return b(W,tt,dt)>0}function f(W,tt,dt){return b(W,tt,dt)<0}function D(W,tt){var dt=tt.slice(0);return dt.push(tt[0]),{rtan:I(W,dt),ltan:C(W,dt)}}function I(W,tt){var Dt,Ot,St,Vt,dt=tt.length-1;if(f(W,tt[1],tt[0])&&!v(W,tt[dt-1],tt[0]))return 0;for(Dt=0,Ot=dt;;){if(Ot-Dt==1)return v(W,tt[Dt],tt[Ot])?Dt:Ot;if((Vt=f(W,tt[(St=Math.floor((Dt+Ot)/2))+1],tt[St]))&&!v(W,tt[St-1],tt[St]))return St;v(W,tt[Dt+1],tt[Dt])?Vt||v(W,tt[Dt],tt[St])?Ot=St:Dt=St:Vt&&f(W,tt[Dt],tt[St])?Ot=St:Dt=St}}function C(W,tt){var Dt,Ot,St,Vt,dt=tt.length-1;if(v(W,tt[dt-1],tt[0])&&!f(W,tt[1],tt[0]))return 0;for(Dt=0,Ot=dt;;){if(Ot-Dt==1)return f(W,tt[Dt],tt[Ot])?Dt:Ot;if(Vt=f(W,tt[(St=Math.floor((Dt+Ot)/2))+1],tt[St]),v(W,tt[St-1],tt[St])&&!Vt)return St;f(W,tt[Dt+1],tt[Dt])?Vt?f(W,tt[Dt],tt[St])?Ot=St:Dt=St:Ot=St:Vt?Dt=St:v(W,tt[Dt],tt[St])?Ot=St:Dt=St}}function N(W,tt,dt,Dt,Ot,St){var Rt,Vt;Vt=Dt(W[Rt=dt(tt[0],W)],tt);for(var te=!1;!te;){for(te=!0;Rt===W.length-1&&(Rt=0),!Ot(tt[Vt],W[Rt],W[Rt+1]);)++Rt;for(;0===Vt&&(Vt=tt.length-1),!St(W[Rt],tt[Vt],tt[Vt-1]);)--Vt,te=!1}return{t1:Rt,t2:Vt}}function G(W,tt){return N(W,tt,I,C,v,f)}ct.PolyPoint=w,ct.isLeft=b,ct.ConvexHull=function(W){var Dt,tt=W.slice(0).sort(function(De,Le){return De.x!==Le.x?Le.x-De.x:Le.y-De.y}),dt=W.length,St=tt[0].x;for(Dt=1;Dt<dt&&tt[Dt].x===St;++Dt);var Rt=Dt-1,Vt=[];if(Vt.push(tt[0]),Rt===dt-1)tt[Rt].y!==tt[0].y&&Vt.push(tt[Rt]);else{var te,he=dt-1,de=tt[dt-1].x;for(Dt=dt-2;Dt>=0&&tt[Dt].x===de;Dt--);for(te=Dt+1,Dt=Rt;++Dt<=te;)if(!(b(tt[0],tt[te],tt[Dt])>=0&&Dt<te)){for(;Vt.length>1&&!(b(Vt[Vt.length-2],Vt[Vt.length-1],tt[Dt])>0);)Vt.length-=1;0!=Dt&&Vt.push(tt[Dt])}he!=te&&Vt.push(tt[he]);var se=Vt.length;for(Dt=te;--Dt>=Rt;)if(!(b(tt[he],tt[Rt],tt[Dt])>=0&&Dt>Rt)){for(;Vt.length>se&&!(b(Vt[Vt.length-2],Vt[Vt.length-1],tt[Dt])>0);)Vt.length-=1;0!=Dt&&Vt.push(tt[Dt])}}return Vt},ct.clockwiseRadialSweep=function(W,tt,dt){tt.slice(0).sort(function(Dt,Ot){return Math.atan2(Dt.y-W.y,Dt.x-W.x)-Math.atan2(Ot.y-W.y,Ot.x-W.x)}).forEach(dt)},ct.tangent_PolyPolyC=N,ct.LRtangent_PolyPolyC=function(W,tt){var dt=G(tt,W);return{t1:dt.t2,t2:dt.t1}},ct.RLtangent_PolyPolyC=G,ct.LLtangent_PolyPolyC=function(W,tt){return N(W,tt,C,C,f,f)},ct.RRtangent_PolyPolyC=function(W,tt){return N(W,tt,I,I,v,v)};var At=function(tt,dt){this.t1=tt,this.t2=dt};ct.BiTangent=At;var q=function(){};ct.BiTangents=q;var $=function(W){function tt(){return null!==W&&W.apply(this,arguments)||this}return pt(tt,W),tt}(k);ct.TVGPoint=$;var rt=function(tt,dt,Dt,Ot){this.id=tt,this.polyid=dt,this.polyvertid=Dt,this.p=Ot,Ot.vv=this};ct.VisibilityVertex=rt;var O=function(){function W(tt,dt){this.source=tt,this.target=dt}return W.prototype.length=function(){var tt=this.source.p.x-this.target.p.x,dt=this.source.p.y-this.target.p.y;return Math.sqrt(tt*tt+dt*dt)},W}();ct.VisibilityEdge=O;var H=function(){function W(tt,dt){if(this.P=tt,this.V=[],this.E=[],dt)this.V=dt.V.slice(0),this.E=dt.E.slice(0);else{for(var Dt=tt.length,Ot=0;Ot<Dt;Ot++){for(var St=tt[Ot],Rt=0;Rt<St.length;++Rt){var te=new rt(this.V.length,Ot,Rt,St[Rt]);this.V.push(te),Rt>0&&this.E.push(new O(St[Rt-1].vv,te))}St.length>1&&this.E.push(new O(St[0].vv,St[St.length-1].vv))}for(Ot=0;Ot<Dt-1;Ot++){var he=tt[Ot];for(Rt=Ot+1;Rt<Dt;Rt++){var de=tt[Rt],se=J(he,de);for(var De in se){var Le=se[De];this.addEdgeIfVisible(he[Le.t1],de[Le.t2],Ot,Rt)}}}}}return W.prototype.addEdgeIfVisible=function(tt,dt,Dt,Ot){this.intersectsPolys(new T(tt.x,tt.y,dt.x,dt.y),Dt,Ot)||this.E.push(new O(tt.vv,dt.vv))},W.prototype.addPoint=function(tt,dt){var Dt=this.P.length;this.V.push(new rt(this.V.length,Dt,0,tt));for(var Ot=0;Ot<Dt;++Ot)if(Ot!==dt){var St=this.P[Ot],Rt=D(tt,St);this.addEdgeIfVisible(tt,St[Rt.ltan],dt,Ot),this.addEdgeIfVisible(tt,St[Rt.rtan],dt,Ot)}return tt.vv},W.prototype.intersectsPolys=function(tt,dt,Dt){for(var Ot=0,St=this.P.length;Ot<St;++Ot)if(Ot!=dt&&Ot!=Dt&&j(tt,this.P[Ot]).length>0)return!0;return!1},W}();function j(W,tt){for(var dt=[],Dt=1,Ot=tt.length;Dt<Ot;++Dt){var St=R.Rectangle.lineIntersection(W.x1,W.y1,W.x2,W.y2,tt[Dt-1].x,tt[Dt-1].y,tt[Dt].x,tt[Dt].y);St&&dt.push(St)}return dt}function J(W,tt){for(var dt=W.length-1,Dt=tt.length-1,Ot=new q,St=0;St<dt;++St)for(var Rt=0;Rt<Dt;++Rt){var Vt=W[0==St?dt-1:St-1],te=W[St],he=W[St+1],de=tt[0==Rt?Dt-1:Rt-1],se=tt[Rt],De=tt[Rt+1],Le=b(Vt,te,se),Ut=b(te,de,se),Jt=b(te,se,De),ie=b(de,se,te),pe=b(se,Vt,te),xe=b(se,te,he);Le>=0&&Ut>=0&&Jt<0&&ie>=0&&pe>=0&&xe<0?Ot.ll=new At(St,Rt):Le<=0&&Ut<=0&&Jt>0&&ie<=0&&pe<=0&&xe>0?Ot.rr=new At(St,Rt):Le<=0&&Ut>0&&Jt<=0&&ie>=0&&pe<0&&xe>=0?Ot.rl=new At(St,Rt):Le>=0&&Ut<0&&Jt>=0&&ie<=0&&pe>0&&xe<=0&&(Ot.lr=new At(St,Rt))}return Ot}function yt(W,tt){return!W.every(function(dt){return!function(W,tt){for(var dt=1,Dt=tt.length;dt<Dt;++dt)if(f(tt[dt-1],tt[dt],W))return!1;return!0}(dt,tt)})}ct.TangentVisibilityGraph=H,ct.tangents=J,ct.polysOverlap=function(W,tt){if(yt(W,tt)||yt(tt,W))return!0;for(var dt=1,Dt=W.length;dt<Dt;++dt){var Ot=W[dt],St=W[dt-1];if(j(new T(St.x,St.y,Ot.x,Ot.y),tt).length>0)return!0}return!1}},4308:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var pt=ut(1182),R=ut(9474),k=ut(1717),T=function(y,d,p){this.id=y,this.rect=d,this.children=p,this.leaf=void 0===p||0===p.length};ct.NodeWrapper=T;var w=function(y,d,p,c,D){void 0===c&&(c=null),void 0===D&&(D=null),this.id=y,this.x=d,this.y=p,this.node=c,this.line=D};ct.Vert=w;var b=function(){function f(y,d){this.s=y,this.t=d;var p=f.findMatch(y,d),c=d.slice(0).reverse(),D=f.findMatch(y,c);p.length>=D.length?(this.length=p.length,this.si=p.si,this.ti=p.ti,this.reversed=!1):(this.length=D.length,this.si=D.si,this.ti=d.length-D.ti-D.length,this.reversed=!0)}return f.findMatch=function(y,d){for(var p=y.length,c=d.length,D={length:0,si:-1,ti:-1},I=new Array(p),C=0;C<p;C++){I[C]=new Array(c);for(var N=0;N<c;N++)if(y[C]===d[N]){var U=I[C][N]=0===C||0===N?1:I[C-1][N-1]+1;U>D.length&&(D.length=U,D.si=C-U+1,D.ti=N-U+1)}else I[C][N]=0}return D},f.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},f}();ct.LongestCommonSubsequence=b;var v=function(){function f(y,d,p){var c=this;void 0===p&&(p=12),this.originalnodes=y,this.groupPadding=p,this.leaves=null,this.nodes=y.map(function($,rt){return new T(rt,d.getBounds($),d.getChildren($))}),this.leaves=this.nodes.filter(function($){return $.leaf}),this.groups=this.nodes.filter(function($){return!$.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function($){return $.children.forEach(function(rt){return c.nodes[rt].parent=$})}),this.root={children:[]},this.nodes.forEach(function($){void 0===$.parent&&($.parent=c.root,c.root.children.push($.id)),$.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function($,rt){return c.getDepth($)-c.getDepth(rt)}),this.backToFront.slice(0).reverse().filter(function($){return!$.leaf}).forEach(function($){var rt=pt.Rectangle.empty();$.children.forEach(function(O){return rt=rt.union(c.nodes[O].rect)}),$.rect=rt.inflate(c.groupPadding)});var I=this.midPoints(this.cols.map(function($){return $.pos})),C=this.midPoints(this.rows.map(function($){return $.pos})),N=I[0],U=I[I.length-1],G=C[0],at=C[C.length-1],gt=this.rows.map(function($){return{x1:N,x2:U,y1:$.pos,y2:$.pos}}).concat(C.map(function($){return{x1:N,x2:U,y1:$,y2:$}})),At=this.cols.map(function($){return{x1:$.pos,x2:$.pos,y1:G,y2:at}}).concat(I.map(function($){return{x1:$,x2:$,y1:G,y2:at}})),q=gt.concat(At);q.forEach(function($){return $.verts=[]}),this.verts=[],this.edges=[],gt.forEach(function($){return At.forEach(function(rt){var O=new w(c.verts.length,rt.x1,$.y1);$.verts.push(O),rt.verts.push(O),c.verts.push(O);for(var H=c.backToFront.length;H-- >0;){var j=c.backToFront[H],J=j.rect,nt=Math.abs(O.x-J.cx()),yt=Math.abs(O.y-J.cy());if(nt<J.width()/2&&yt<J.height()/2){O.node=j;break}}})}),q.forEach(function($,rt){c.nodes.forEach(function(yt,Nt){yt.rect.lineIntersections($.x1,$.y1,$.x2,$.y2).forEach(function(W,tt){var dt=new w(c.verts.length,W.x,W.y,yt,$);c.verts.push(dt),$.verts.push(dt),yt.ports.push(dt)})});var O=Math.abs($.y1-$.y2)<.1,H=function(yt,Nt){return O?Nt.x-yt.x:Nt.y-yt.y};$.verts.sort(H);for(var j=1;j<$.verts.length;j++){var J=$.verts[j-1],nt=$.verts[j];J.node&&J.node===nt.node&&J.node.leaf||c.edges.push({source:J.id,target:nt.id,length:Math.abs(H(J,nt))})}})}return f.prototype.avg=function(y){return y.reduce(function(d,p){return d+p})/y.length},f.prototype.getGridLines=function(y){for(var d=[],p=this.leaves.slice(0,this.leaves.length);p.length>0;){var c=p.filter(function(I){return I.rect["overlap"+y.toUpperCase()](p[0].rect)}),D={nodes:c,pos:this.avg(c.map(function(I){return I.rect["c"+y]()}))};d.push(D),D.nodes.forEach(function(I){return p.splice(p.indexOf(I),1)})}return d.sort(function(I,C){return I.pos-C.pos}),d},f.prototype.getDepth=function(y){for(var d=0;y.parent!==this.root;)d++,y=y.parent;return d},f.prototype.midPoints=function(y){for(var d=y[1]-y[0],p=[y[0]-d/2],c=1;c<y.length;c++)p.push((y[c]+y[c-1])/2);return p.push(y[y.length-1]+d/2),p},f.prototype.findLineage=function(y){var d=[y];do{d.push(y=y.parent)}while(y!==this.root);return d.reverse()},f.prototype.findAncestorPathBetween=function(y,d){for(var p=this.findLineage(y),c=this.findLineage(d),D=0;p[D]===c[D];)D++;return{commonAncestor:p[D-1],lineages:p.slice(D).concat(c.slice(D))}},f.prototype.siblingObstacles=function(y,d){var p=this,c=this.findAncestorPathBetween(y,d),D={};c.lineages.forEach(function(C){return D[C.id]={}});var I=c.commonAncestor.children.filter(function(C){return!(C in D)});return c.lineages.filter(function(C){return C.parent!==c.commonAncestor}).forEach(function(C){return I=I.concat(C.parent.children.filter(function(N){return N!==C.id}))}),I.map(function(C){return p.nodes[C]})},f.getSegmentSets=function(y,d,p){for(var c=[],D=0;D<y.length;D++)for(var I=y[D],C=0;C<I.length;C++)(N=I[C]).edgeid=D,N.i=C,Math.abs(N[1][d]-N[0][d])<.1&&c.push(N);c.sort(function(At,q){return At[0][d]-q[0][d]});for(var G=[],at=null,gt=0;gt<c.length;gt++){var N=c[gt];(!at||Math.abs(N[0][d]-at.pos)>.1)&&G.push(at={pos:N[0][d],segments:[]}),at.segments.push(N)}return G},f.nudgeSegs=function(y,d,p,c,D,I){var C=c.length;if(!(C<=1)){for(var N=c.map(function(j){return new R.Variable(j[0][y])}),U=[],G=0;G<C;G++)for(var at=0;at<C;at++)if(G!==at){var gt=c[G],q=gt.edgeid,$=c[at].edgeid,rt=-1,O=-1;"x"==y?D(q,$)&&(gt[0][d]<gt[1][d]?(rt=at,O=G):(rt=G,O=at)):D(q,$)&&(gt[0][d]<gt[1][d]?(rt=G,O=at):(rt=at,O=G)),rt>=0&&U.push(new R.Constraint(N[rt],N[O],I))}new R.Solver(N,U).solve(),N.forEach(function(j,J){var nt=c[J],yt=j.position();nt[0][y]=nt[1][y]=yt;var Nt=p[nt.edgeid];nt.i>0&&(Nt[nt.i-1][1][y]=yt),nt.i<Nt.length-1&&(Nt[nt.i+1][0][y]=yt)})}},f.nudgeSegments=function(y,d,p,c,D){for(var I=f.getSegmentSets(y,d,p),C=0;C<I.length;C++){for(var N=I[C],U=[],G=0;G<N.segments.length;G++){var at=N.segments[G];U.push({type:0,s:at,pos:Math.min(at[0][p],at[1][p])}),U.push({type:1,s:at,pos:Math.max(at[0][p],at[1][p])})}U.sort(function(q,$){return q.pos-$.pos+q.type-$.type});var gt=[],At=0;U.forEach(function(q){0===q.type?(gt.push(q.s),At++):At--,0==At&&(f.nudgeSegs(d,p,y,gt,c,D),gt=[])})}},f.prototype.routeEdges=function(y,d,p,c){var D=this,I=y.map(function(U){return D.route(p(U),c(U))}),C=f.orderEdges(I),N=I.map(function(U){return f.makeSegments(U)});return f.nudgeSegments(N,"x","y",C,d),f.nudgeSegments(N,"y","x",C,d),f.unreverseEdges(N,I),N},f.unreverseEdges=function(y,d){y.forEach(function(p,c){d[c].reversed&&(p.reverse(),p.forEach(function(I){I.reverse()}))})},f.angleBetween2Lines=function(y,d){var p=Math.atan2(y[0].y-y[1].y,y[0].x-y[1].x),c=Math.atan2(d[0].y-d[1].y,d[0].x-d[1].x),D=p-c;return(D>Math.PI||D<-Math.PI)&&(D=c-p),D},f.isLeft=function(y,d,p){return(d.x-y.x)*(p.y-y.y)-(d.y-y.y)*(p.x-y.x)<=0},f.getOrder=function(y){for(var d={},p=0;p<y.length;p++){var c=y[p];void 0===d[c.l]&&(d[c.l]={}),d[c.l][c.r]=!0}return function(D,I){return void 0!==d[D]&&d[D][I]}},f.orderEdges=function(y){for(var d=[],p=0;p<y.length-1;p++)for(var c=p+1;c<y.length;c++){var N,U,G,D=y[p],I=y[c],C=new b(D,I);if(0!==C.length){if(C.reversed&&(I.reverse(),I.reversed=!0,C=new b(D,I)),(C.si<=0||C.ti<=0)&&(C.si+C.length>=D.length||C.ti+C.length>=I.length)){d.push({l:p,r:c});continue}C.si+C.length>=D.length||C.ti+C.length>=I.length?(N=D[C.si+1],G=D[C.si-1],U=I[C.ti-1]):(N=D[C.si+C.length-2],U=D[C.si+C.length],G=I[C.ti+C.length]),f.isLeft(N,U,G)?d.push({l:c,r:p}):d.push({l:p,r:c})}}return f.getOrder(d)},f.makeSegments=function(y){function d(U){return{x:U.x,y:U.y}}for(var c=[],D=d(y[0]),I=1;I<y.length;I++){var C=d(y[I]),N=I<y.length-1?y[I+1]:null;(!N||(U=D,G=C,at=N,!(Math.abs((G.x-U.x)*(at.y-U.y)-(G.y-U.y)*(at.x-U.x))<.001)))&&(c.push([D,C]),D=C)}var U,G,at;return c},f.prototype.route=function(y,d){var p=this,c=this.nodes[y],D=this.nodes[d];this.obstacles=this.siblingObstacles(c,D);var I={};this.obstacles.forEach(function(O){return I[O.id]=O}),this.passableEdges=this.edges.filter(function(O){var H=p.verts[O.source],j=p.verts[O.target];return!(H.node&&H.node.id in I||j.node&&j.node.id in I)});for(var C=1;C<c.ports.length;C++)this.passableEdges.push({source:c.ports[0].id,target:c.ports[C].id,length:0});for(C=1;C<D.ports.length;C++)this.passableEdges.push({source:D.ports[0].id,target:D.ports[C].id,length:0});var rt=new k.Calculator(this.verts.length,this.passableEdges,function(O){return O.source},function(O){return O.target},function(O){return O.length}).PathFromNodeToNodeWithPrevCost(c.ports[0].id,D.ports[0].id,function(O,H,j){var J=p.verts[O],nt=p.verts[H],yt=p.verts[j],Nt=Math.abs(yt.x-J.x),W=Math.abs(yt.y-J.y);return J.node===c&&J.node===nt.node||nt.node===D&&nt.node===yt.node?0:Nt>1&&W>1?1e3:0}).reverse().map(function(O){return p.verts[O]});return rt.push(this.nodes[D.id].ports[0]),rt.filter(function(O,H){return!(H<rt.length-1&&rt[H+1].node===c&&O.node===c||H>0&&O.node===D&&rt[H-1].node===D)})},f.getRoutePath=function(y,d,p,c){var C,N,U,Nt,W,D={routepath:"M "+y[0][0].x+" "+y[0][0].y+" ",arrowpath:""};if(y.length>1)for(var I=0;I<y.length;I++){var G=(N=(C=y[I])[1].x)-C[0].x,at=(U=C[1].y)-C[0].y;if(I<y.length-1){Math.abs(G)>0?N-=G/Math.abs(G)*d:U-=at/Math.abs(at)*d,D.routepath+="L "+N+" "+U+" ";var gt=y[I+1],At=gt[0].x,q=gt[0].y;G=gt[1].x-At,at=gt[1].y-q;var H,j,O=f.angleBetween2Lines(C,gt)<0?1:0;Math.abs(G)>0?(H=At+G/Math.abs(G)*d,j=q):(H=At,j=q+at/Math.abs(at)*d);var J=Math.abs(H-N),nt=Math.abs(j-U);D.routepath+="A "+J+" "+nt+" 0 0 "+O+" "+H+" "+j+" "}else{var yt=[N,U];Math.abs(G)>0?(Nt=[N-=G/Math.abs(G)*c,U+p],W=[N,U-p]):(Nt=[N+p,U-=at/Math.abs(at)*c],W=[N-p,U]),D.routepath+="L "+N+" "+U+" ",c>0&&(D.arrowpath="M "+yt[0]+" "+yt[1]+" L "+Nt[0]+" "+Nt[1]+" L "+W[0]+" "+W[1])}}else G=(N=(C=y[0])[1].x)-C[0].x,at=(U=C[1].y)-C[0].y,yt=[N,U],Math.abs(G)>0?(Nt=[N-=G/Math.abs(G)*c,U+p],W=[N,U-p]):(Nt=[N+p,U-=at/Math.abs(at)*c],W=[N-p,U]),D.routepath+="L "+N+" "+U+" ",c>0&&(D.arrowpath="M "+yt[0]+" "+yt[1]+" L "+Nt[0]+" "+Nt[1]+" L "+W[0]+" "+W[1]);return D},f}();ct.GridRouter=v},7109:(Ee,ct)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var ut_GOLDEN_SECTION=(1+Math.sqrt(5))/2;ct.applyPacking=function(k,T,w,b,v,f){void 0===v&&(v=1),void 0===f&&(f=!0);var p=T,c=w,D=(v=void 0!==v?v:1,b=void 0!==b?b:0,0),I=0,C=0,N=0,U=[];function At(O,H){U=[],D=0,I=0,N=0;for(var j=0;j<O.length;j++)q(O[j],H);return Math.abs(D/I-v)}function q(O,H){for(var j=void 0,J=0;J<U.length;J++)if(U[J].space_left>=O.height&&U[J].x+U[J].width+O.width+10-H<=1e-4){j=U[J];break}U.push(O),void 0!==j?(O.x=j.x+j.width+10,O.y=j.bottom,O.space_left=O.height,O.bottom=O.y,j.space_left-=O.height+10,j.bottom+=O.height+10):(O.y=N,N+=O.height+10,O.x=0,O.bottom=O.y,O.space_left=O.height),O.y+O.height-I>-1e-4&&(I=O.y+O.height-0),O.x+O.width-D>-1e-4&&(D=O.x+O.width-0)}0!=k.length&&(k.forEach(function(j){!function(j){var J=Number.MAX_VALUE,nt=Number.MAX_VALUE,yt=0,Nt=0;j.array.forEach(function(W){var tt=void 0!==W.width?W.width:b,dt=void 0!==W.height?W.height:b;tt/=2,dt/=2,yt=Math.max(W.x+tt,yt),J=Math.min(W.x-tt,J),Nt=Math.max(W.y+dt,Nt),nt=Math.min(W.y-dt,nt)}),j.width=yt-J,j.height=Nt-nt}(j)}),function(O,H){var j=Number.POSITIVE_INFINITY,J=0;O.sort(function(Vt,te){return te.height-Vt.height});for(var nt=St=C=O.reduce(function(Vt,te){return Vt.width<te.width?Vt.width:te.width}),yt=Rt=function(O){var H=0;return O.forEach(function(j){return H+=j.width+10}),H}(O),Nt=0,W=Number.MAX_VALUE,tt=Number.MAX_VALUE,dt=-1,Dt=Number.MAX_VALUE,Ot=Number.MAX_VALUE;Dt>C||Ot>1e-4;){if(1!=dt){var St=yt-(yt-nt)/ut_GOLDEN_SECTION;W=At(O,St)}if(0!=dt){var Rt=nt+(yt-nt)/ut_GOLDEN_SECTION;tt=At(O,Rt)}if(Dt=Math.abs(St-Rt),Ot=Math.abs(W-tt),W<j&&(j=W,J=St),tt<j&&(j=tt,J=Rt),W>tt?(nt=St,St=Rt,W=tt,dt=1):(yt=Rt,Rt=St,tt=W,dt=0),Nt++>100)break}At(O,J)}(k),f&&k.forEach(function(H){var j={x:0,y:0};H.array.forEach(function(yt){j.x+=yt.x,j.y+=yt.y}),j.x/=H.array.length,j.y/=H.array.length;var nt_x=H.x-(j.x-H.width/2)+p/2-D/2,nt_y=H.y-(j.y-H.height/2)+c/2-I/2;H.array.forEach(function(yt){yt.x+=nt_x,yt.y+=nt_y})}))},ct.separateGraphs=function(k,T){for(var w={},b={},v=[],f=0,y=0;y<T.length;y++){var d=T[y],p=d.source,c=d.target;b[p.index]?b[p.index].push(c):b[p.index]=[c],b[c.index]?b[c.index].push(p):b[c.index]=[p]}for(y=0;y<k.length;y++){var D=k[y];w[D.index]||I(D,!0)}function I(C,N){if(void 0===w[C.index]){N&&(f++,v.push({array:[]})),w[C.index]=f,v[f-1].array.push(C);var U=b[C.index];if(U)for(var G=0;G<U.length;G++)I(U[G],!1)}}return v}},5581:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var f,p,pt=ut(1703),R=ut(5302),k=ut(6400),T=ut(1182),w=ut(1717),b=ut(6542),v=ut(7109);function y(p){return void 0!==p.leaves||void 0!==p.groups}(p=f=ct.EventType||(ct.EventType={}))[p.start=0]="start",p[p.tick=1]="tick",p[p.end=2]="end";var d=function(){function p(){var c=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:p.getSourceIndex,getTargetIndex:p.getTargetIndex,setLength:p.setLinkLength,getType:function(D){return"function"==typeof c._linkType?c._linkType(D):0}}}return p.prototype.on=function(c,D){return this.event||(this.event={}),"string"==typeof c?this.event[f[c]]=D:this.event[c]=D,this},p.prototype.trigger=function(c){this.event&&void 0!==this.event[c.type]&&this.event[c.type](c)},p.prototype.kick=function(){for(;!this.tick(););},p.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:f.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var I,C,c=this._nodes.length;for(this._descent.locks.clear(),C=0;C<c;++C)(I=this._nodes[C]).fixed&&((void 0===I.px||void 0===I.py)&&(I.px=I.x,I.py=I.y),this._descent.locks.add(C,[I.px,I.py]));var U=this._descent.rungeKutta();return 0===U?this._alpha=0:void 0!==this._lastStress&&(this._alpha=U),this._lastStress=U,this.updateNodePositions(),this.trigger({type:f.tick,alpha:this._alpha,stress:this._lastStress}),!1},p.prototype.updateNodePositions=function(){for(var I,c=this._descent.x[0],D=this._descent.x[1],C=this._nodes.length;C--;)(I=this._nodes[C]).x=c[C],I.y=D[C]},p.prototype.nodes=function(c){if(!c){if(0===this._nodes.length&&this._links.length>0){var D=0;this._links.forEach(function(C){D=Math.max(D,C.source,C.target)}),this._nodes=new Array(++D);for(var I=0;I<D;++I)this._nodes[I]={}}return this._nodes}return this._nodes=c,this},p.prototype.groups=function(c){var D=this;return c?(this._groups=c,this._rootGroup={},this._groups.forEach(function(I){void 0===I.padding&&(I.padding=1),void 0!==I.leaves&&I.leaves.forEach(function(C,N){"number"==typeof C&&((I.leaves[N]=D._nodes[C]).parent=I)}),void 0!==I.groups&&I.groups.forEach(function(C,N){"number"==typeof C&&((I.groups[N]=D._groups[C]).parent=I)})}),this._rootGroup.leaves=this._nodes.filter(function(I){return void 0===I.parent}),this._rootGroup.groups=this._groups.filter(function(I){return void 0===I.parent}),this):this._groups},p.prototype.powerGraphGroups=function(c){var D=pt.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(D.groups),c(D),this},p.prototype.avoidOverlaps=function(c){return arguments.length?(this._avoidOverlaps=c,this):this._avoidOverlaps},p.prototype.handleDisconnected=function(c){return arguments.length?(this._handleDisconnected=c,this):this._handleDisconnected},p.prototype.flowLayout=function(c,D){return arguments.length||(c="y"),this._directedLinkConstraints={axis:c,getMinSeparation:"number"==typeof D?function(){return D}:D},this},p.prototype.links=function(c){return arguments.length?(this._links=c,this):this._links},p.prototype.constraints=function(c){return arguments.length?(this._constraints=c,this):this._constraints},p.prototype.distanceMatrix=function(c){return arguments.length?(this._distanceMatrix=c,this):this._distanceMatrix},p.prototype.size=function(c){return c?(this._canvasSize=c,this):this._canvasSize},p.prototype.defaultNodeSize=function(c){return c?(this._defaultNodeSize=c,this):this._defaultNodeSize},p.prototype.groupCompactness=function(c){return c?(this._groupCompactness=c,this):this._groupCompactness},p.prototype.linkDistance=function(c){return c?(this._linkDistance="function"==typeof c?c:+c,this._linkLengthCalculator=null,this):this._linkDistance},p.prototype.linkType=function(c){return this._linkType=c,this},p.prototype.convergenceThreshold=function(c){return c?(this._threshold="function"==typeof c?c:+c,this):this._threshold},p.prototype.alpha=function(c){return arguments.length?(c=+c,this._alpha?this._alpha=c>0?c:0:c>0&&(this._running||(this._running=!0,this.trigger({type:f.start,alpha:this._alpha=c}),this.kick())),this):this._alpha},p.prototype.getLinkLength=function(c){return"function"==typeof this._linkDistance?+this._linkDistance(c):this._linkDistance},p.setLinkLength=function(c,D){c.length=D},p.prototype.getLinkType=function(c){return"function"==typeof this._linkType?this._linkType(c):0},p.prototype.symmetricDiffLinkLengths=function(c,D){var I=this;return void 0===D&&(D=1),this.linkDistance(function(C){return c*C.length}),this._linkLengthCalculator=function(){return R.symmetricDiffLinkLengths(I._links,I.linkAccessor,D)},this},p.prototype.jaccardLinkLengths=function(c,D){var I=this;return void 0===D&&(D=1),this.linkDistance(function(C){return c*C.length}),this._linkLengthCalculator=function(){return R.jaccardLinkLengths(I._links,I.linkAccessor,D)},this},p.prototype.start=function(c,D,I,C,N,U){var G=this;void 0===c&&(c=0),void 0===D&&(D=0),void 0===I&&(I=0),void 0===C&&(C=0),void 0===N&&(N=!0),void 0===U&&(U=!0);var yt,At=this.nodes().length,q=At+2*this._groups.length,rt=this._canvasSize[0],O=this._canvasSize[1],H=new Array(q),j=new Array(q),J=null,nt=this._avoidOverlaps;this._nodes.forEach(function(St,Rt){St.index=Rt,void 0===St.x&&(St.x=rt/2,St.y=O/2),H[Rt]=St.x,j[Rt]=St.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?yt=this._distanceMatrix:(yt=new w.Calculator(q,this._links,p.getSourceIndex,p.getTargetIndex,function(St){return G.getLinkLength(St)}).DistanceMatrix(),J=k.Descent.createSquareMatrix(q,function(){return 2}),this._links.forEach(function(St){"number"==typeof St.source&&(St.source=G._nodes[St.source]),"number"==typeof St.target&&(St.target=G._nodes[St.target])}),this._links.forEach(function(St){var Rt=p.getSourceIndex(St),Vt=p.getTargetIndex(St);J[Rt][Vt]=J[Vt][Rt]=St.weight||1}));var Nt=k.Descent.createSquareMatrix(q,function(St,Rt){return yt[St][Rt]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var at=At;this._groups.forEach(function(Rt){(function(Rt,Vt,te,he){J[Rt][Vt]=J[Vt][Rt]=te,Nt[Rt][Vt]=Nt[Vt][Rt]=.1})(at,at+1,G._groupCompactness),H[at]=0,j[at++]=0,H[at]=0,j[at++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var tt=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,tt=tt.concat(R.generateDirectedEdgeConstraints(At,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new k.Descent([H,j],Nt),this._descent.locks.clear(),at=0;at<At;++at){var dt=this._nodes[at];dt.fixed&&(dt.px=dt.x,dt.py=dt.y,this._descent.locks.add(at,[dt.x,dt.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(c,H,j),tt.length>0&&(this._descent.project=new T.Projection(this._nodes,this._groups,this._rootGroup,tt).projectFunctions()),this._descent.run(D),this.separateOverlappingComponents(rt,O,U),this.avoidOverlaps(nt),nt&&(this._nodes.forEach(function(St,Rt){St.x=H[Rt],St.y=j[Rt]}),this._descent.project=new T.Projection(this._nodes,this._groups,this._rootGroup,tt,!0).projectFunctions(),this._nodes.forEach(function(St,Rt){H[Rt]=St.x,j[Rt]=St.y})),this._descent.G=J,this._descent.run(I),C){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=At,this._descent.scaleSnapByMaxH=At!=q;var Ot=k.Descent.createSquareMatrix(q,function(St,Rt){return St>=At||Rt>=At?J[St][Rt]:0});this._descent.G=Ot,this._descent.run(C)}return this.updateNodePositions(),this.separateOverlappingComponents(rt,O,U),N?this.resume():this},p.prototype.initialLayout=function(c,D,I){if(this._groups.length>0&&c>0){var C=this._nodes.length,N=this._links.map(function(G){return{source:G.source.index,target:G.target.index}}),U=this._nodes.map(function(G){return{index:G.index}});this._groups.forEach(function(G,at){U.push({index:G.index=C+at})}),this._groups.forEach(function(G,at){void 0!==G.leaves&&G.leaves.forEach(function(gt){return N.push({source:G.index,target:gt.index})}),void 0!==G.groups&&G.groups.forEach(function(gt){return N.push({source:G.index,target:gt.index})})}),(new p).size(this.size()).nodes(U).links(N).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(c,0,0,0,!1),this._nodes.forEach(function(G){D[G.index]=U[G.index].x,I[G.index]=U[G.index].y})}else this._descent.run(c)},p.prototype.separateOverlappingComponents=function(c,D,I){var C=this;if(void 0===I&&(I=!0),!this._distanceMatrix&&this._handleDisconnected){var N=this._descent.x[0],U=this._descent.x[1];this._nodes.forEach(function(at,gt){at.x=N[gt],at.y=U[gt]});var G=v.separateGraphs(this._nodes,this._links);v.applyPacking(G,c,D,this._defaultNodeSize,1,I),this._nodes.forEach(function(at,gt){C._descent.x[0][gt]=at.x,C._descent.x[1][gt]=at.y,at.bounds&&(at.bounds.setXCentre(at.x),at.bounds.setYCentre(at.y))})}},p.prototype.resume=function(){return this.alpha(.1)},p.prototype.stop=function(){return this.alpha(0)},p.prototype.prepareEdgeRouting=function(c){void 0===c&&(c=0),this._visibilityGraph=new b.TangentVisibilityGraph(this._nodes.map(function(D){return D.bounds.inflate(-c).vertices()}))},p.prototype.routeEdge=function(c,D,I){void 0===D&&(D=5);var C=[],N=new b.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),U={x:c.source.x,y:c.source.y},G={x:c.target.x,y:c.target.y},at=N.addPoint(U,c.source.index),gt=N.addPoint(G,c.target.index);N.addEdgeIfVisible(U,G,c.source.index,c.target.index),void 0!==I&&I(N);var O=new w.Calculator(N.V.length,N.E,function(Nt){return Nt.source.id},function(Nt){return Nt.target.id},function(Nt){return Nt.length()}).PathFromNodeToNode(at.id,gt.id);if(1===O.length||O.length===N.V.length){var H=T.makeEdgeBetween(c.source.innerBounds,c.target.innerBounds,D);C=[H.sourceIntersection,H.arrowStart]}else{for(var j=O.length-2,J=N.V[O[j]].p,nt=N.V[O[0]].p,yt=(C=[c.source.innerBounds.rayIntersection(J.x,J.y)],j);yt>=0;--yt)C.push(N.V[O[yt]].p);C.push(T.makeEdgeTo(nt,c.target.innerBounds,D))}return C},p.getSourceIndex=function(c){return"number"==typeof c.source?c.source:c.source.index},p.getTargetIndex=function(c){return"number"==typeof c.target?c.target:c.target.index},p.linkId=function(c){return p.getSourceIndex(c)+"-"+p.getTargetIndex(c)},p.dragStart=function(c){y(c)?p.storeOffset(c,p.dragOrigin(c)):(p.stopNode(c),c.fixed|=2)},p.stopNode=function(c){c.px=c.x,c.py=c.y},p.storeOffset=function(c,D){void 0!==c.leaves&&c.leaves.forEach(function(I){I.fixed|=2,p.stopNode(I),I._dragGroupOffsetX=I.x-D.x,I._dragGroupOffsetY=I.y-D.y}),void 0!==c.groups&&c.groups.forEach(function(I){return p.storeOffset(I,D)})},p.dragOrigin=function(c){return y(c)?{x:c.bounds.cx(),y:c.bounds.cy()}:c},p.drag=function(c,D){y(c)?(void 0!==c.leaves&&c.leaves.forEach(function(I){c.bounds.setXCentre(D.x),c.bounds.setYCentre(D.y),I.px=I._dragGroupOffsetX+D.x,I.py=I._dragGroupOffsetY+D.y}),void 0!==c.groups&&c.groups.forEach(function(I){return p.drag(I,D)})):(c.px=D.x,c.py=D.y)},p.dragEnd=function(c){y(c)?(void 0!==c.leaves&&c.leaves.forEach(function(D){p.dragEnd(D),delete D._dragGroupOffsetX,delete D._dragGroupOffsetY}),void 0!==c.groups&&c.groups.forEach(p.dragEnd)):c.fixed&=-7},p.mouseOver=function(c){c.fixed|=4,c.px=c.x,c.py=c.y},p.mouseOut=function(c){c.fixed&=-5},p}();ct.Layout=d},8453:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var pt=ut(1717),R=ut(6400),k=ut(1182),T=ut(5302),w=function(){function y(d,p){this.source=d,this.target=p}return y.prototype.actualLength=function(d){var p=this;return Math.sqrt(d.reduce(function(c,D){var I=D[p.target]-D[p.source];return c+I*I},0))},y}();ct.Link3D=w,ct.Node3D=function(d,p,c){void 0===d&&(d=0),void 0===p&&(p=0),void 0===c&&(c=0),this.x=d,this.y=p,this.z=c};var v=function(){function y(d,p,c){var D=this;void 0===c&&(c=1),this.nodes=d,this.links=p,this.idealLinkLength=c,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(y.k);for(var I=0;I<y.k;++I)this.result[I]=new Array(d.length);d.forEach(function(C,N){for(var U=0,G=y.dims;U<G.length;U++){var at=G[U];void 0===C[at]&&(C[at]=Math.random())}D.result[0][N]=C.x,D.result[1][N]=C.y,D.result[2][N]=C.z})}return y.prototype.linkLength=function(d){return d.actualLength(this.result)},y.prototype.start=function(d){var p=this;void 0===d&&(d=100);var c=this.nodes.length,D=new f;this.useJaccardLinkLengths&&T.jaccardLinkLengths(this.links,D,1.5),this.links.forEach(function(at){return at.length*=p.idealLinkLength});var I=new pt.Calculator(c,this.links,function(at){return at.source},function(at){return at.target},function(at){return at.length}).DistanceMatrix(),C=R.Descent.createSquareMatrix(c,function(at,gt){return I[at][gt]}),N=R.Descent.createSquareMatrix(c,function(){return 2});this.links.forEach(function(at){var gt=at.source,At=at.target;return N[gt][At]=N[At][gt]=1}),this.descent=new R.Descent(this.result,C),this.descent.threshold=.001,this.descent.G=N,this.constraints&&(this.descent.project=new k.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var U=0;U<this.nodes.length;U++){var G=this.nodes[U];G.fixed&&this.descent.locks.add(U,[G.x,G.y,G.z])}return this.descent.run(d),this},y.prototype.tick=function(){this.descent.locks.clear();for(var d=0;d<this.nodes.length;d++){var p=this.nodes[d];p.fixed&&this.descent.locks.add(d,[p.x,p.y,p.z])}return this.descent.rungeKutta()},y.k=(y.dims=["x","y","z"]).length,y}();ct.Layout3D=v;var f=function(){function y(){}return y.prototype.getSourceIndex=function(d){return d.source},y.prototype.getTargetIndex=function(d){return d.target},y.prototype.getLength=function(d){return d.length},y.prototype.setLength=function(d,p){d.length=p},y}()},5302:(Ee,ct)=>{"use strict";function ut(f,y){var d={};for(var p in f)d[p]={};for(var p in y)d[p]={};return Object.keys(d).length}function pt(f,y){var d=0;for(var p in f)void 0!==y[p]&&++d;return d}function k(f,y,d,p){var c=function(f,y){var d={},p=function(c,D){void 0===d[c]&&(d[c]={}),d[c][D]={}};return f.forEach(function(c){var D=y.getSourceIndex(c),I=y.getTargetIndex(c);p(D,I),p(I,D)}),d}(f,p);f.forEach(function(D){var I=c[p.getSourceIndex(D)],C=c[p.getTargetIndex(D)];p.setLength(D,1+y*d(I,C))})}function v(f,y,d){var p=[],c=0,D=[],I=[];function C(O){O.index=O.lowlink=c++,D.push(O),O.onStack=!0;for(var H=0,j=O.out;H<j.length;H++){var J=j[H];void 0===J.index?(C(J),O.lowlink=Math.min(O.lowlink,J.lowlink)):J.onStack&&(O.lowlink=Math.min(O.lowlink,J.index))}if(O.lowlink===O.index){for(var nt=[];D.length&&((J=D.pop()).onStack=!1,nt.push(J),J!==O););I.push(nt.map(function(yt){return yt.id}))}}for(var N=0;N<f;N++)p.push({id:N,out:[]});for(var U=0,G=y;U<G.length;U++){var at=G[U],gt=p[d.getSourceIndex(at)],At=p[d.getTargetIndex(at)];gt.out.push(At)}for(var q=0,$=p;q<$.length;q++){var rt=$[q];void 0===rt.index&&C(rt)}return I}Object.defineProperty(ct,"__esModule",{value:!0}),ct.symmetricDiffLinkLengths=function(f,y,d){void 0===d&&(d=1),k(f,d,function(p,c){return Math.sqrt(ut(p,c)-pt(p,c))},y)},ct.jaccardLinkLengths=function(f,y,d){void 0===d&&(d=1),k(f,d,function(p,c){return Math.min(Object.keys(p).length,Object.keys(c).length)<1.1?0:pt(p,c)/ut(p,c)},y)},ct.generateDirectedEdgeConstraints=function(f,y,d,p){var c=v(f,y,p),D={};c.forEach(function(C,N){return C.forEach(function(U){return D[U]=N})});var I=[];return y.forEach(function(C){var N=p.getSourceIndex(C),U=p.getTargetIndex(C);D[N]!==D[U]&&I.push({axis:d,left:N,right:U,gap:p.getMinSeparation(C)})}),I},ct.stronglyConnectedComponents=v},1703:(Ee,ct)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var ut=function(d,p,c){this.source=d,this.target=p,this.type=c};ct.PowerEdge=ut;var pt=function(){function y(d,p,c,D){var I=this;if(this.linkAccessor=c,this.modules=new Array(d),this.roots=[],D)this.initModulesFromGroup(D);else{this.roots.push(new w);for(var C=0;C<d;++C)this.roots[0].add(this.modules[C]=new k(C))}this.R=p.length,p.forEach(function(N){var U=I.modules[c.getSourceIndex(N)],G=I.modules[c.getTargetIndex(N)],at=c.getType(N);U.outgoing.add(at,G),G.incoming.add(at,U)})}return y.prototype.initModulesFromGroup=function(d){var p=new w;this.roots.push(p);for(var c=0;c<d.leaves.length;++c){var D=d.leaves[c],I=new k(D.id);this.modules[D.id]=I,p.add(I)}if(d.groups)for(var C=0;C<d.groups.length;++C){var N=d.groups[C],U={};for(var G in N)"leaves"!==G&&"groups"!==G&&N.hasOwnProperty(G)&&(U[G]=N[G]);p.add(new k(-1-C,new b,new b,this.initModulesFromGroup(N),U))}return p},y.prototype.merge=function(d,p,c){void 0===c&&(c=0);var D=d.incoming.intersection(p.incoming),I=d.outgoing.intersection(p.outgoing),C=new w;C.add(d),C.add(p);var N=new k(this.modules.length,I,D,C);this.modules.push(N);var U=function(G,at,gt){G.forAll(function(At,q){At.forAll(function($){var rt=$[at];rt.add(q,N),rt.remove(q,d),rt.remove(q,p),d[gt].remove(q,$),p[gt].remove(q,$)})})};return U(I,"incoming","outgoing"),U(D,"outgoing","incoming"),this.R-=D.count()+I.count(),this.roots[c].remove(d),this.roots[c].remove(p),this.roots[c].add(N),N},y.prototype.rootMerges=function(d){void 0===d&&(d=0);for(var p=this.roots[d].modules(),c=p.length,D=new Array(c*(c-1)),I=0,C=0,N=c-1;C<N;++C)for(var U=C+1;U<c;++U){var G=p[C],at=p[U];D[I]={id:I,nEdges:this.nEdges(G,at),a:G,b:at},I++}return D},y.prototype.greedyMerge=function(){for(var d=0;d<this.roots.length;++d)if(!(this.roots[d].modules().length<2)){var c=this.rootMerges(d).sort(function(D,I){return D.nEdges==I.nEdges?D.id-I.id:D.nEdges-I.nEdges})[0];if(!(c.nEdges>=this.R))return this.merge(c.a,c.b,d),!0}},y.prototype.nEdges=function(d,p){var c=d.incoming.intersection(p.incoming),D=d.outgoing.intersection(p.outgoing);return this.R-c.count()-D.count()},y.prototype.getGroupHierarchy=function(d){var p=this,c=[];return R(this.roots[0],{},c),this.allEdges().forEach(function(C){var N=p.modules[C.source],U=p.modules[C.target];d.push(new ut(void 0===N.gid?C.source:c[N.gid],void 0===U.gid?C.target:c[U.gid],C.type))}),c},y.prototype.allEdges=function(){var d=[];return y.getEdges(this.roots[0],d),d},y.getEdges=function(d,p){d.forAll(function(c){c.getEdges(p),y.getEdges(c.children,p)})},y}();function R(y,d,p){y.forAll(function(c){if(c.isLeaf())d.leaves||(d.leaves=[]),d.leaves.push(c.id);else{var D=d;if(c.gid=p.length,!c.isIsland()||c.isPredefined()){if(D={id:c.gid},c.isPredefined())for(var I in c.definition)D[I]=c.definition[I];d.groups||(d.groups=[]),d.groups.push(c.gid),p.push(D)}R(c.children,D,p)}})}ct.Configuration=pt;var k=function(){function y(d,p,c,D,I){void 0===p&&(p=new b),void 0===c&&(c=new b),void 0===D&&(D=new w),this.id=d,this.outgoing=p,this.incoming=c,this.children=D,this.definition=I}return y.prototype.getEdges=function(d){var p=this;this.outgoing.forAll(function(c,D){c.forAll(function(I){d.push(new ut(p.id,I.id,D))})})},y.prototype.isLeaf=function(){return 0===this.children.count()},y.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},y.prototype.isPredefined=function(){return void 0!==this.definition},y}();ct.Module=k;var w=function(){function y(){this.table={}}return y.prototype.count=function(){return Object.keys(this.table).length},y.prototype.intersection=function(d){var p=new y;return p.table=function(y,d){var p={};for(var c in y)c in d&&(p[c]=y[c]);return p}(this.table,d.table),p},y.prototype.intersectionCount=function(d){return this.intersection(d).count()},y.prototype.contains=function(d){return d in this.table},y.prototype.add=function(d){this.table[d.id]=d},y.prototype.remove=function(d){delete this.table[d.id]},y.prototype.forAll=function(d){for(var p in this.table)d(this.table[p])},y.prototype.modules=function(){var d=[];return this.forAll(function(p){p.isPredefined()||d.push(p)}),d},y}();ct.ModuleSet=w;var b=function(){function y(){this.sets={},this.n=0}return y.prototype.count=function(){return this.n},y.prototype.contains=function(d){var p=!1;return this.forAllModules(function(c){!p&&c.id==d&&(p=!0)}),p},y.prototype.add=function(d,p){(d in this.sets?this.sets[d]:this.sets[d]=new w).add(p),++this.n},y.prototype.remove=function(d,p){var c=this.sets[d];c.remove(p),0===c.count()&&delete this.sets[d],--this.n},y.prototype.forAll=function(d){for(var p in this.sets)d(this.sets[p],Number(p))},y.prototype.forAllModules=function(d){this.forAll(function(p,c){return p.forAll(d)})},y.prototype.intersection=function(d){var p=new y;return this.forAll(function(c,D){if(D in d.sets){var I=c.intersection(d.sets[D]),C=I.count();C>0&&(p.sets[D]=I,p.n+=C)}}),p},y}();ct.LinkSets=b,ct.getGroups=function(y,d,p,c){for(var I=new pt(y.length,d,p,c);I.greedyMerge(););var C=[],N=I.getGroupHierarchy(C);return C.forEach(function(U){var G=function(at){var gt=U[at];"number"==typeof gt&&(U[at]=y[gt])};G("source"),G("target")}),{groups:N,powerEdges:C}}},7992:(Ee,ct)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var ut=function(){function R(k){this.elem=k,this.subheaps=[]}return R.prototype.toString=function(k){for(var T="",w=!1,b=0;b<this.subheaps.length;++b){var v=this.subheaps[b];v.elem?(w&&(T+=","),T+=v.toString(k),w=!0):w=!1}return""!==T&&(T="("+T+")"),(this.elem?k(this.elem):"")+T},R.prototype.forEach=function(k){this.empty()||(k(this.elem,this),this.subheaps.forEach(function(T){return T.forEach(k)}))},R.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(k,T){return k+T.count()},0)},R.prototype.min=function(){return this.elem},R.prototype.empty=function(){return null==this.elem},R.prototype.contains=function(k){if(this===k)return!0;for(var T=0;T<this.subheaps.length;T++)if(this.subheaps[T].contains(k))return!0;return!1},R.prototype.isHeap=function(k){var T=this;return this.subheaps.every(function(w){return k(T.elem,w.elem)&&w.isHeap(k)})},R.prototype.insert=function(k,T){return this.merge(new R(k),T)},R.prototype.merge=function(k,T){return this.empty()?k:k.empty()?this:T(this.elem,k.elem)?(this.subheaps.push(k),this):(k.subheaps.push(this),k)},R.prototype.removeMin=function(k){return this.empty()?null:this.mergePairs(k)},R.prototype.mergePairs=function(k){if(0==this.subheaps.length)return new R(null);if(1==this.subheaps.length)return this.subheaps[0];var T=this.subheaps.pop().merge(this.subheaps.pop(),k),w=this.mergePairs(k);return T.merge(w,k)},R.prototype.decreaseKey=function(k,T,w,b){var v=k.removeMin(b);k.elem=v.elem,k.subheaps=v.subheaps,null!==w&&null!==v.elem&&w(k.elem,k);var f=new R(T);return null!==w&&w(T,f),this.merge(f,b)},R}();ct.PairingHeap=ut;var pt=function(){function R(k){this.lessThan=k}return R.prototype.top=function(){return this.empty()?null:this.root.elem},R.prototype.push=function(){for(var k=[],T=0;T<arguments.length;T++)k[T]=arguments[T];for(var w,v,b=0;v=k[b];++b)w=new ut(v),this.root=this.empty()?w:this.root.merge(w,this.lessThan);return w},R.prototype.empty=function(){return!this.root||!this.root.elem},R.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},R.prototype.forEach=function(k){this.root.forEach(k)},R.prototype.pop=function(){if(this.empty())return null;var k=this.root.min();return this.root=this.root.removeMin(this.lessThan),k},R.prototype.reduceKey=function(k,T,w){void 0===w&&(w=null),this.root=this.root.decreaseKey(k,T,w,this.lessThan)},R.prototype.toString=function(k){return this.root.toString(k)},R.prototype.count=function(){return this.root.count()},R}();ct.PriorityQueue=pt},4655:function(Ee,ct){"use strict";var w,ut=this&&this.__extends||(w=function(b,v){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,y){f.__proto__=y}||function(f,y){for(var d in y)y.hasOwnProperty(d)&&(f[d]=y[d])})(b,v)},function(b,v){function f(){this.constructor=b}w(b,v),b.prototype=null===v?Object.create(v):(f.prototype=v.prototype,new f)});Object.defineProperty(ct,"__esModule",{value:!0});var pt=function(){function w(){this.findIter=function(b){for(var v=this._root,f=this.iterator();null!==v;){var y=this._comparator(b,v.data);if(0===y)return f._cursor=v,f;f._ancestors.push(v),v=v.get_child(y>0)}return null}}return w.prototype.clear=function(){this._root=null,this.size=0},w.prototype.find=function(b){for(var v=this._root;null!==v;){var f=this._comparator(b,v.data);if(0===f)return v.data;v=v.get_child(f>0)}return null},w.prototype.lowerBound=function(b){return this._bound(b,this._comparator)},w.prototype.upperBound=function(b){var v=this._comparator;return this._bound(b,function(y,d){return v(d,y)})},w.prototype.min=function(){var b=this._root;if(null===b)return null;for(;null!==b.left;)b=b.left;return b.data},w.prototype.max=function(){var b=this._root;if(null===b)return null;for(;null!==b.right;)b=b.right;return b.data},w.prototype.iterator=function(){return new R(this)},w.prototype.each=function(b){for(var f,v=this.iterator();null!==(f=v.next());)b(f)},w.prototype.reach=function(b){for(var f,v=this.iterator();null!==(f=v.prev());)b(f)},w.prototype._bound=function(b,v){for(var f=this._root,y=this.iterator();null!==f;){var d=this._comparator(b,f.data);if(0===d)return y._cursor=f,y;y._ancestors.push(f),f=f.get_child(d>0)}for(var p=y._ancestors.length-1;p>=0;--p)if(v(b,(f=y._ancestors[p]).data)>0)return y._cursor=f,y._ancestors.length=p,y;return y._ancestors.length=0,y},w}();ct.TreeBase=pt;var R=function(){function w(b){this._tree=b,this._ancestors=[],this._cursor=null}return w.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},w.prototype.next=function(){if(null===this._cursor){var b=this._tree._root;null!==b&&this._minNode(b)}else if(null===this._cursor.right){var v;do{if(v=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===v)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},w.prototype.prev=function(){if(null===this._cursor){var b=this._tree._root;null!==b&&this._maxNode(b)}else if(null===this._cursor.left){var v;do{if(v=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===v)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},w.prototype._minNode=function(b){for(;null!==b.left;)this._ancestors.push(b),b=b.left;this._cursor=b},w.prototype._maxNode=function(b){for(;null!==b.right;)this._ancestors.push(b),b=b.right;this._cursor=b},w}();ct.Iterator=R;var k=function(){function w(b){this.data=b,this.left=null,this.right=null,this.red=!0}return w.prototype.get_child=function(b){return b?this.right:this.left},w.prototype.set_child=function(b,v){b?this.right=v:this.left=v},w}(),T=function(w){function b(v){var f=w.call(this)||this;return f._root=null,f._comparator=v,f.size=0,f}return ut(b,w),b.prototype.insert=function(v){var f=!1;if(null===this._root)this._root=new k(v),f=!0,this.size++;else{var y=new k(void 0),d=!1,p=!1,c=null,D=y,I=null,C=this._root;for(D.right=this._root;;){if(null===C?(C=new k(v),I.set_child(d,C),f=!0,this.size++):b.is_red(C.left)&&b.is_red(C.right)&&(C.red=!0,C.left.red=!1,C.right.red=!1),b.is_red(C)&&b.is_red(I)){var N=D.right===c;C===I.get_child(p)?D.set_child(N,b.single_rotate(c,!p)):D.set_child(N,b.double_rotate(c,!p))}var U=this._comparator(C.data,v);if(0===U)break;p=d,null!==c&&(D=c),c=I,I=C,C=C.get_child(d=U<0)}this._root=y.right}return this._root.red=!1,f},b.prototype.remove=function(v){if(null===this._root)return!1;var f=new k(void 0),y=f;y.right=this._root;for(var d=null,p=null,c=null,D=!0;null!==y.get_child(D);){var I=D;p=d,d=y,y=y.get_child(D);var C=this._comparator(v,y.data);if(D=C>0,0===C&&(c=y),!b.is_red(y)&&!b.is_red(y.get_child(D)))if(b.is_red(y.get_child(!D))){var N=b.single_rotate(y,D);d.set_child(I,N),d=N}else if(!b.is_red(y.get_child(!D))){var U=d.get_child(!I);if(null!==U)if(b.is_red(U.get_child(!I))||b.is_red(U.get_child(I))){var G=p.right===d;b.is_red(U.get_child(I))?p.set_child(G,b.double_rotate(d,I)):b.is_red(U.get_child(!I))&&p.set_child(G,b.single_rotate(d,I));var at=p.get_child(G);at.red=!0,y.red=!0,at.left.red=!1,at.right.red=!1}else d.red=!1,U.red=!0,y.red=!0}}return null!==c&&(c.data=y.data,d.set_child(d.right===y,y.get_child(null===y.left)),this.size--),this._root=f.right,null!==this._root&&(this._root.red=!1),null!==c},b.is_red=function(v){return null!==v&&v.red},b.single_rotate=function(v,f){var y=v.get_child(!f);return v.set_child(!f,y.get_child(f)),y.set_child(f,v),v.red=!0,y.red=!1,y},b.double_rotate=function(v,f){return v.set_child(!f,b.single_rotate(v.get_child(!f),!f)),b.single_rotate(v,f)},b}(pt);ct.RBTree=T},1182:function(Ee,ct,ut){"use strict";var O,pt=this&&this.__extends||(O=function(H,j){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,nt){J.__proto__=nt}||function(J,nt){for(var yt in nt)nt.hasOwnProperty(yt)&&(J[yt]=nt[yt])})(H,j)},function(H,j){function J(){this.constructor=H}O(H,j),H.prototype=null===j?Object.create(j):(J.prototype=j.prototype,new J)});Object.defineProperty(ct,"__esModule",{value:!0});var R=ut(9474),k=ut(4655);function T(O){return O.bounds=void 0!==O.leaves?O.leaves.reduce(function(H,j){return j.bounds.union(H)},w.empty()):w.empty(),void 0!==O.groups&&(O.bounds=O.groups.reduce(function(H,j){return T(j).union(H)},O.bounds)),O.bounds=O.bounds.inflate(O.padding),O.bounds}ct.computeGroupBounds=T;var w=function(){function O(H,j,J,nt){this.x=H,this.X=j,this.y=J,this.Y=nt}return O.empty=function(){return new O(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},O.prototype.cx=function(){return(this.x+this.X)/2},O.prototype.cy=function(){return(this.y+this.Y)/2},O.prototype.overlapX=function(H){var j=this.cx(),J=H.cx();return j<=J&&H.x<this.X?this.X-H.x:J<=j&&this.x<H.X?H.X-this.x:0},O.prototype.overlapY=function(H){var j=this.cy(),J=H.cy();return j<=J&&H.y<this.Y?this.Y-H.y:J<=j&&this.y<H.Y?H.Y-this.y:0},O.prototype.setXCentre=function(H){var j=H-this.cx();this.x+=j,this.X+=j},O.prototype.setYCentre=function(H){var j=H-this.cy();this.y+=j,this.Y+=j},O.prototype.width=function(){return this.X-this.x},O.prototype.height=function(){return this.Y-this.y},O.prototype.union=function(H){return new O(Math.min(this.x,H.x),Math.max(this.X,H.X),Math.min(this.y,H.y),Math.max(this.Y,H.Y))},O.prototype.lineIntersections=function(H,j,J,nt){for(var yt=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],Nt=[],W=0;W<4;++W){var tt=O.lineIntersection(H,j,J,nt,yt[W][0],yt[W][1],yt[W][2],yt[W][3]);null!==tt&&Nt.push({x:tt.x,y:tt.y})}return Nt},O.prototype.rayIntersection=function(H,j){var J=this.lineIntersections(this.cx(),this.cy(),H,j);return J.length>0?J[0]:null},O.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},O.lineIntersection=function(H,j,J,nt,yt,Nt,W,tt){var dt=J-H,Dt=W-yt,Ot=nt-j,St=tt-Nt,Rt=St*dt-Dt*Ot;if(0==Rt)return null;var Vt=H-yt,te=j-Nt,de=(Dt*te-St*Vt)/Rt,De=(dt*te-Ot*Vt)/Rt;return de>=0&&de<=1&&De>=0&&De<=1?{x:H+de*dt,y:j+de*Ot}:null},O.prototype.inflate=function(H){return new O(this.x-H,this.X+H,this.y-H,this.Y+H)},O}();ct.Rectangle=w,ct.makeEdgeBetween=function(O,H,j){var J=O.rayIntersection(H.cx(),H.cy())||{x:O.cx(),y:O.cy()},nt=H.rayIntersection(O.cx(),O.cy())||{x:H.cx(),y:H.cy()},yt=nt.x-J.x,Nt=nt.y-J.y,W=Math.sqrt(yt*yt+Nt*Nt),tt=W-j;return{sourceIntersection:J,targetIntersection:nt,arrowStart:{x:J.x+tt*yt/W,y:J.y+tt*Nt/W}}},ct.makeEdgeTo=function(O,H,j){var J=H.rayIntersection(O.x,O.y);J||(J={x:H.cx(),y:H.cy()});var nt=J.x-O.x,yt=J.y-O.y,Nt=Math.sqrt(nt*nt+yt*yt);return{x:J.x-j*nt/Nt,y:J.y-j*yt/Nt}};var f=function(H,j,J){this.v=H,this.r=j,this.pos=J,this.prev=p(),this.next=p()},y=function(H,j,J){this.isOpen=H,this.v=j,this.pos=J};function d(O,H){return O.pos>H.pos?1:O.pos<H.pos||O.isOpen?-1:H.isOpen?1:0}function p(){return new k.RBTree(function(O,H){return O.pos-H.pos})}var c={getCentre:function(O){return O.cx()},getOpen:function(O){return O.y},getClose:function(O){return O.Y},getSize:function(O){return O.width()},makeRect:function(O,H,j,J){return new w(j-J/2,j+J/2,O,H)},findNeighbours:function(O,H){var j=function(J,nt){for(var Nt,yt=H.findIter(O);null!==(Nt=yt[J]());){var W=Nt.r.overlapX(O.r);if((W<=0||W<=Nt.r.overlapY(O.r))&&(O[J].insert(Nt),Nt[nt].insert(O)),W<=0)break}};j("next","prev"),j("prev","next")}},D={getCentre:function(O){return O.cy()},getOpen:function(O){return O.x},getClose:function(O){return O.X},getSize:function(O){return O.height()},makeRect:function(O,H,j,J){return new w(O,H,j-J/2,j+J/2)},findNeighbours:function(O,H){var j=function(J,nt){var yt=H.findIter(O)[J]();null!==yt&&yt.r.overlapX(O.r)>0&&(O[J].insert(yt),yt[nt].insert(O))};j("next","prev"),j("prev","next")}};function I(O,H,j,J){void 0===J&&(J=!1);var nt=O.padding,yt=void 0!==O.groups?O.groups.length:0,Nt=void 0!==O.leaves?O.leaves.length:0,W=yt?O.groups.reduce(function(Ut,Jt){return Ut.concat(I(Jt,H,j,!0))},[]):[],tt=(J?2:0)+Nt+yt,dt=new Array(tt),Dt=new Array(tt),Ot=0,St=function(Ut,Jt){Dt[Ot]=Ut,dt[Ot++]=Jt};if(J){var Rt=O.bounds,Vt=H.getCentre(Rt),te=H.getSize(Rt)/2,he=H.getOpen(Rt),de=H.getClose(Rt),se=Vt-te+nt/2,De=Vt+te-nt/2;O.minVar.desiredPosition=se,St(H.makeRect(he,de,se,nt),O.minVar),O.maxVar.desiredPosition=De,St(H.makeRect(he,de,De,nt),O.maxVar)}Nt&&O.leaves.forEach(function(Ut){return St(Ut.bounds,Ut.variable)}),yt&&O.groups.forEach(function(Ut){var Jt=Ut.bounds;St(H.makeRect(H.getOpen(Jt),H.getClose(Jt),H.getCentre(Jt),H.getSize(Jt)),Ut.minVar)});var Le=C(Dt,dt,H,j);return yt&&(dt.forEach(function(Ut){Ut.cOut=[],Ut.cIn=[]}),Le.forEach(function(Ut){Ut.left.cOut.push(Ut),Ut.right.cIn.push(Ut)}),O.groups.forEach(function(Ut){var Jt=(Ut.padding-H.getSize(Ut.bounds))/2;Ut.minVar.cIn.forEach(function(ie){return ie.gap+=Jt}),Ut.minVar.cOut.forEach(function(ie){ie.left=Ut.maxVar,ie.gap+=Jt})})),W.concat(Le)}function C(O,H,j,J){var nt,yt=O.length,Nt=2*yt;console.assert(H.length>=yt);var W=new Array(Nt);for(nt=0;nt<yt;++nt){var tt=O[nt],dt=new f(H[nt],tt,j.getCentre(tt));W[nt]=new y(!0,dt,j.getOpen(tt)),W[nt+yt]=new y(!1,dt,j.getClose(tt))}W.sort(d);var Dt=new Array,Ot=p();for(nt=0;nt<Nt;++nt){var St=W[nt];if(dt=St.v,St.isOpen)Ot.insert(dt),j.findNeighbours(dt,Ot);else{Ot.remove(dt);var Rt=function(he,de){var se=(j.getSize(he.r)+j.getSize(de.r))/2+J;Dt.push(new R.Constraint(he.v,de.v,se))},Vt=function(he,de,se){for(var De,Le=dt[he].iterator();null!==(De=Le[he]());)se(De,dt),De[de].remove(dt)};Vt("prev","next",function(he,de){return Rt(he,de)}),Vt("next","prev",function(he,de){return Rt(de,he)})}}return console.assert(0===Ot.size),Dt}function G(O,H){return C(O,H,c,1e-6)}function at(O,H){return C(O,H,D,1e-6)}function gt(O){return I(O,c,1e-6)}function At(O){return I(O,D,1e-6)}ct.generateXConstraints=G,ct.generateYConstraints=at,ct.generateXGroupConstraints=gt,ct.generateYGroupConstraints=At,ct.removeOverlaps=function(O){var H=O.map(function(nt){return new R.Variable(nt.cx())}),j=G(O,H),J=new R.Solver(H,j);J.solve(),H.forEach(function(nt,yt){return O[yt].setXCentre(nt.position())}),H=O.map(function(nt){return new R.Variable(nt.cy())}),j=at(O,H),(J=new R.Solver(H,j)).solve(),H.forEach(function(nt,yt){return O[yt].setYCentre(nt.position())})};var $=function(O){function H(j,J){var nt=O.call(this,0,J)||this;return nt.index=j,nt}return pt(H,O),H}(R.Variable);ct.IndexedVariable=$;var rt=function(){function O(H,j,J,nt,yt){var Nt=this;if(void 0===J&&(J=null),void 0===nt&&(nt=null),void 0===yt&&(yt=!1),this.nodes=H,this.groups=j,this.rootGroup=J,this.avoidOverlaps=yt,this.variables=H.map(function(tt,dt){return tt.variable=new $(dt,1)}),nt&&this.createConstraints(nt),yt&&J&&void 0!==J.groups){H.forEach(function(tt){if(tt.width&&tt.height){var dt=tt.width/2,Dt=tt.height/2;tt.bounds=new w(tt.x-dt,tt.x+dt,tt.y-Dt,tt.y+Dt)}else tt.bounds=new w(tt.x,tt.x,tt.y,tt.y)}),T(J);var W=H.length;j.forEach(function(tt){Nt.variables[W]=tt.minVar=new $(W++,void 0!==tt.stiffness?tt.stiffness:.01),Nt.variables[W]=tt.maxVar=new $(W++,void 0!==tt.stiffness?tt.stiffness:.01)})}}return O.prototype.createSeparation=function(H){return new R.Constraint(this.nodes[H.left].variable,this.nodes[H.right].variable,H.gap,void 0!==H.equality&&H.equality)},O.prototype.makeFeasible=function(H){var j=this;if(this.avoidOverlaps){var J="x",nt="width";"x"===H.axis&&(J="y",nt="height");var yt=H.offsets.map(function(W){return j.nodes[W.node]}).sort(function(W,tt){return W[J]-tt[J]}),Nt=null;yt.forEach(function(W){if(Nt){var tt=Nt[J]+Nt[nt];tt>W[J]&&(W[J]=tt)}Nt=W})}},O.prototype.createAlignment=function(H){var j=this,J=this.nodes[H.offsets[0].node].variable;this.makeFeasible(H);var nt="x"===H.axis?this.xConstraints:this.yConstraints;H.offsets.slice(1).forEach(function(yt){nt.push(new R.Constraint(J,j.nodes[yt.node].variable,yt.offset,!0))})},O.prototype.createConstraints=function(H){var j=this,J=function(nt){return void 0===nt.type||"separation"===nt.type};this.xConstraints=H.filter(function(nt){return"x"===nt.axis&&J(nt)}).map(function(nt){return j.createSeparation(nt)}),this.yConstraints=H.filter(function(nt){return"y"===nt.axis&&J(nt)}).map(function(nt){return j.createSeparation(nt)}),H.filter(function(nt){return"alignment"===nt.type}).forEach(function(nt){return j.createAlignment(nt)})},O.prototype.setupVariablesAndBounds=function(H,j,J,nt){this.nodes.forEach(function(yt,Nt){yt.fixed?(yt.variable.weight=yt.fixedWeight?yt.fixedWeight:1e3,J[Nt]=nt(yt)):yt.variable.weight=1;var W=(yt.width||0)/2,tt=(yt.height||0)/2,dt=H[Nt],Dt=j[Nt];yt.bounds=new w(dt-W,dt+W,Dt-tt,Dt+tt)})},O.prototype.xProject=function(H,j,J){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(H,j,H,J,function(nt){return nt.px},this.xConstraints,gt,function(nt){return nt.bounds.setXCentre(J[nt.variable.index]=nt.variable.position())},function(nt){var yt=J[nt.minVar.index]=nt.minVar.position(),Nt=J[nt.maxVar.index]=nt.maxVar.position(),W=nt.padding/2;nt.bounds.x=yt-W,nt.bounds.X=Nt+W})},O.prototype.yProject=function(H,j,J){!this.rootGroup&&!this.yConstraints||this.project(H,j,j,J,function(nt){return nt.py},this.yConstraints,At,function(nt){return nt.bounds.setYCentre(J[nt.variable.index]=nt.variable.position())},function(nt){var yt=J[nt.minVar.index]=nt.minVar.position(),Nt=J[nt.maxVar.index]=nt.maxVar.position(),W=nt.padding/2;nt.bounds.y=yt-W,nt.bounds.Y=Nt+W})},O.prototype.projectFunctions=function(){var H=this;return[function(j,J,nt){return H.xProject(j,J,nt)},function(j,J,nt){return H.yProject(j,J,nt)}]},O.prototype.project=function(H,j,J,nt,yt,Nt,W,tt,dt){this.setupVariablesAndBounds(H,j,nt,yt),this.rootGroup&&this.avoidOverlaps&&(T(this.rootGroup),Nt=Nt.concat(W(this.rootGroup))),this.solve(this.variables,Nt,J,nt),this.nodes.forEach(tt),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(dt),T(this.rootGroup))},O.prototype.solve=function(H,j,J,nt){var yt=new R.Solver(H,j);yt.setStartingPositions(J),yt.setDesiredPositions(nt),yt.solve()},O}();ct.Projection=rt},1717:(Ee,ct,ut)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var pt=ut(7992),R=function(v,f){this.id=v,this.distance=f},k=function(v){this.id=v,this.neighbours=[]},T=function(v,f,y){this.node=v,this.prev=f,this.d=y},w=function(){function b(v,f,y,d,p){this.n=v,this.es=f,this.neighbours=new Array(this.n);for(var c=this.n;c--;)this.neighbours[c]=new k(c);for(c=this.es.length;c--;){var D=this.es[c],I=y(D),C=d(D),N=p(D);this.neighbours[I].neighbours.push(new R(C,N)),this.neighbours[C].neighbours.push(new R(I,N))}}return b.prototype.DistanceMatrix=function(){for(var v=new Array(this.n),f=0;f<this.n;++f)v[f]=this.dijkstraNeighbours(f);return v},b.prototype.DistancesFromNode=function(v){return this.dijkstraNeighbours(v)},b.prototype.PathFromNodeToNode=function(v,f){return this.dijkstraNeighbours(v,f)},b.prototype.PathFromNodeToNodeWithPrevCost=function(v,f,y){var d=new pt.PriorityQueue(function(At,q){return At.d<=q.d}),p=this.neighbours[v],c=new T(p,null,0),D={};for(d.push(c);!d.empty()&&(p=(c=d.pop()).node).id!==f;)for(var I=p.neighbours.length;I--;){var C=p.neighbours[I],N=this.neighbours[C.id];if(!c.prev||N.id!==c.prev.node.id){var U=N.id+","+p.id;if(!(U in D&&D[U]<=c.d)){var G=c.prev?y(c.prev.node.id,p.id,N.id):0,at=c.d+C.distance+G;D[U]=at,d.push(new T(N,c,at))}}}for(var gt=[];c.prev;)gt.push((c=c.prev).node.id);return gt},b.prototype.dijkstraNeighbours=function(v,f){void 0===f&&(f=-1);for(var y=new pt.PriorityQueue(function(G,at){return G.d<=at.d}),d=this.neighbours.length,p=new Array(d);d--;){var c=this.neighbours[d];c.d=d===v?0:Number.POSITIVE_INFINITY,c.q=y.push(c)}for(;!y.empty();){var D=y.pop();if(p[D.id]=D.d,D.id===f){for(var I=[],C=D;void 0!==C.prev;)I.push(C.prev.id),C=C.prev;return I}for(d=D.neighbours.length;d--;){var N=D.neighbours[d],U=(C=this.neighbours[N.id],D.d+N.distance);D.d!==Number.MAX_VALUE&&C.d>U&&(C.d=U,C.prev=D,y.reduceKey(C.q,C,function(at,gt){return at.q=gt}))}}return p},b}();ct.Calculator=w},9474:(Ee,ct)=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});var ut=function(){function v(f){this.scale=f,this.AB=0,this.AD=0,this.A2=0}return v.prototype.addVariable=function(f){var y=this.scale/f.scale,p=f.weight;this.AB+=p*y*(f.offset/f.scale),this.AD+=p*y*f.desiredPosition,this.A2+=p*y*y},v.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},v}();ct.PositionStats=ut;var pt=function(){function v(f,y,d,p){void 0===p&&(p=!1),this.left=f,this.right=y,this.gap=d,this.equality=p,this.active=!1,this.unsatisfiable=!1,this.left=f,this.right=y,this.gap=d,this.equality=p}return v.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},v}();ct.Constraint=pt;var R=function(){function v(f,y,d){void 0===y&&(y=1),void 0===d&&(d=1),this.desiredPosition=f,this.weight=y,this.scale=d,this.offset=0}return v.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},v.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},v.prototype.visitNeighbours=function(f,y){var d=function(p,c){return p.active&&f!==c&&y(p,c)};this.cOut.forEach(function(p){return d(p,p.right)}),this.cIn.forEach(function(p){return d(p,p.left)})},v}();ct.Variable=R;var k=function(){function v(f){this.vars=[],f.offset=0,this.ps=new ut(f.scale),this.addVariable(f)}return v.prototype.addVariable=function(f){f.block=this,this.vars.push(f),this.ps.addVariable(f),this.posn=this.ps.getPosn()},v.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var f=0,y=this.vars.length;f<y;++f)this.ps.addVariable(this.vars[f]);this.posn=this.ps.getPosn()},v.prototype.compute_lm=function(f,y,d){var p=this,c=f.dfdv();return f.visitNeighbours(y,function(D,I){var C=p.compute_lm(I,f,d);I===D.right?(c+=C*D.left.scale,D.lm=C):(c+=C*D.right.scale,D.lm=-C),d(D)}),c/f.scale},v.prototype.populateSplitBlock=function(f,y){var d=this;f.visitNeighbours(y,function(p,c){c.offset=f.offset+(c===p.right?p.gap:-p.gap),d.addVariable(c),d.populateSplitBlock(c,f)})},v.prototype.traverse=function(f,y,d,p){var c=this;void 0===d&&(d=this.vars[0]),void 0===p&&(p=null),d.visitNeighbours(p,function(D,I){y.push(f(D)),c.traverse(f,y,I,d)})},v.prototype.findMinLM=function(){var f=null;return this.compute_lm(this.vars[0],null,function(y){!y.equality&&(null===f||y.lm<f.lm)&&(f=y)}),f},v.prototype.findMinLMBetween=function(f,y){this.compute_lm(f,null,function(){});var d=null;return this.findPath(f,null,y,function(p,c){!p.equality&&p.right===c&&(null===d||p.lm<d.lm)&&(d=p)}),d},v.prototype.findPath=function(f,y,d,p){var c=this,D=!1;return f.visitNeighbours(y,function(I,C){!D&&(C===d||c.findPath(C,f,d,p))&&(D=!0,p(I,C))}),D},v.prototype.isActiveDirectedPathBetween=function(f,y){if(f===y)return!0;for(var d=f.cOut.length;d--;){var p=f.cOut[d];if(p.active&&this.isActiveDirectedPathBetween(p.right,y))return!0}return!1},v.split=function(f){return f.active=!1,[v.createSplitBlock(f.left),v.createSplitBlock(f.right)]},v.createSplitBlock=function(f){var y=new v(f);return y.populateSplitBlock(f,null),y},v.prototype.splitBetween=function(f,y){var d=this.findMinLMBetween(f,y);if(null!==d){var p=v.split(d);return{constraint:d,lb:p[0],rb:p[1]}}return null},v.prototype.mergeAcross=function(f,y,d){y.active=!0;for(var p=0,c=f.vars.length;p<c;++p){var D=f.vars[p];D.offset+=d,this.addVariable(D)}this.posn=this.ps.getPosn()},v.prototype.cost=function(){for(var f=0,y=this.vars.length;y--;){var d=this.vars[y],p=d.position()-d.desiredPosition;f+=p*p*d.weight}return f},v}();ct.Block=k;var T=function(){function v(f){this.vs=f;var y=f.length;for(this.list=new Array(y);y--;){var d=new k(f[y]);this.list[y]=d,d.blockInd=y}}return v.prototype.cost=function(){for(var f=0,y=this.list.length;y--;)f+=this.list[y].cost();return f},v.prototype.insert=function(f){f.blockInd=this.list.length,this.list.push(f)},v.prototype.remove=function(f){var y=this.list.length-1,d=this.list[y];this.list.length=y,f!==d&&(this.list[f.blockInd]=d,d.blockInd=f.blockInd)},v.prototype.merge=function(f){var y=f.left.block,d=f.right.block,p=f.right.offset-f.left.offset-f.gap;y.vars.length<d.vars.length?(d.mergeAcross(y,f,p),this.remove(y)):(y.mergeAcross(d,f,-p),this.remove(d))},v.prototype.forEach=function(f){this.list.forEach(f)},v.prototype.updateBlockPositions=function(){this.list.forEach(function(f){return f.updateWeightedPosition()})},v.prototype.split=function(f){var y=this;this.updateBlockPositions(),this.list.forEach(function(d){var p=d.findMinLM();null!==p&&p.lm<w.LAGRANGIAN_TOLERANCE&&(d=p.left.block,k.split(p).forEach(function(c){return y.insert(c)}),y.remove(d),f.push(p))})},v}();ct.Blocks=T;var w=function(){function v(f,y){this.vs=f,this.cs=y,this.vs=f,f.forEach(function(d){d.cIn=[],d.cOut=[]}),this.cs=y,y.forEach(function(d){d.left.cOut.push(d),d.right.cIn.push(d)}),this.inactive=y.map(function(d){return d.active=!1,d}),this.bs=null}return v.prototype.cost=function(){return this.bs.cost()},v.prototype.setStartingPositions=function(f){this.inactive=this.cs.map(function(y){return y.active=!1,y}),this.bs=new T(this.vs),this.bs.forEach(function(y,d){return y.posn=f[d]})},v.prototype.setDesiredPositions=function(f){this.vs.forEach(function(y,d){return y.desiredPosition=f[d]})},v.prototype.mostViolated=function(){for(var f=Number.MAX_VALUE,y=null,d=this.inactive,p=d.length,c=p,D=0;D<p;++D){var I=d[D];if(!I.unsatisfiable){var C=I.slack();if((I.equality||C<f)&&(f=C,y=I,c=D,I.equality))break}}return c!==p&&(f<v.ZERO_UPPERBOUND&&!y.active||y.equality)&&(d[c]=d[p-1],d.length=p-1),y},v.prototype.satisfy=function(){null==this.bs&&(this.bs=new T(this.vs)),this.bs.split(this.inactive);for(var f=null;(f=this.mostViolated())&&(f.equality||f.slack()<v.ZERO_UPPERBOUND&&!f.active);){var y=f.left.block;if(y!==f.right.block)this.bs.merge(f);else{if(y.isActiveDirectedPathBetween(f.right,f.left)){f.unsatisfiable=!0;continue}var p=y.splitBetween(f.left,f.right);if(null===p){f.unsatisfiable=!0;continue}this.bs.insert(p.lb),this.bs.insert(p.rb),this.bs.remove(y),this.inactive.push(p.constraint),f.slack()>=0?this.inactive.push(f):this.bs.merge(f)}}},v.prototype.solve=function(){this.satisfy();for(var f=Number.MAX_VALUE,y=this.bs.cost();Math.abs(f-y)>1e-4;)this.satisfy(),f=y,y=this.bs.cost();return y},v.LAGRANGIAN_TOLERANCE=-1e-4,v.ZERO_UPPERBOUND=-1e-10,v}();ct.Solver=w,ct.removeOverlapInOneDimension=function(v,f,y){for(var d=v.map(function($){return new R($.desiredCenter)}),p=[],c=v.length,D=0;D<c-1;D++)p.push(new pt(d[D],d[D+1],(v[D].size+v[D+1].size)/2));var N=d[0],U=d[c-1],G=v[0].size/2,at=v[c-1].size/2,gt=null,At=null;return f&&(gt=new R(f,1e3*N.weight),d.push(gt),p.push(new pt(gt,N,G))),y&&(At=new R(y,1e3*U.weight),d.push(At),p.push(new pt(U,At,at))),new w(d,p).solve(),{newCenters:d.slice(0,v.length).map(function($){return $.position()}),lowerBound:gt?gt.position():N.position()-G,upperBound:At?At.position():U.position()+at}}},1618:(Ee,ct,ut)=>{"use strict";ut.r(ct),ut.d(ct,{PPIexpModule:()=>rr});var pt=ut(6019),R=ut(9133),k=ut(9256),T=ut(3856),w=ut(8702),b=ut(3928),v=ut(3667),f=ut(4099),y=ut(6813),d=ut(2411),p=ut(2668),c=ut(8526),D=ut(8053),I=ut(8735),C=ut(9204),N=ut(6636),U=ut(5571),G=ut(8472),at=ut(661),gt=ut(8425),At=ut(1890),q=ut(8970),$=ut(7473),rt=ut(9744),O=ut(3052),H=ut(6149),j=ut(1430),J=ut(7500);function nt(lt){for(var Q,It=[];!(Q=lt.next()).done;)It.push(Q.value);return It}function yt(lt,It,Q){for(var kt=0,Ft=Q.length;kt<Ft;){if(lt(It,Q[kt]))return!0;kt+=1}return!1}function W(lt,It){return Object.prototype.hasOwnProperty.call(It,lt)}const dt="function"==typeof Object.is?Object.is:function(lt,It){return lt===It?0!==lt||1/lt==1/It:lt!=lt&&It!=It};var Dt=ut(4182),Ot=Object.prototype.toString;const Rt=function(){return"[object Arguments]"===Ot.call(arguments)?function(It){return"[object Arguments]"===Ot.call(It)}:function(It){return W("callee",It)}}();var Vt=!{toString:null}.propertyIsEnumerable("toString"),te=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],he=function(){return arguments.propertyIsEnumerable("length")}(),de=function(It,Q){for(var kt=0;kt<It.length;){if(It[kt]===Q)return!0;kt+=1}return!1};const De=(0,Dt.Z)("function"!=typeof Object.keys||he?function(It){if(Object(It)!==It)return[];var Q,kt,Ft=[],qt=he&&Rt(It);for(Q in It)W(Q,It)&&(!qt||"length"!==Q)&&(Ft[Ft.length]=Q);if(Vt)for(kt=te.length-1;kt>=0;)W(Q=te[kt],It)&&!de(Ft,Q)&&(Ft[Ft.length]=Q),kt-=1;return Ft}:function(It){return Object(It)!==It?[]:Object.keys(It)}),Ut=(0,Dt.Z)(function(It){return null===It?"Null":void 0===It?"Undefined":Object.prototype.toString.call(It).slice(8,-1)});function Jt(lt,It,Q,kt){var Ft=nt(lt);function Xe(He,bn){return ie(He,bn,Q.slice(),kt.slice())}return!yt(function(He,bn){return!yt(Xe,bn,He)},nt(It),Ft)}function ie(lt,It,Q,kt){if(dt(lt,It))return!0;var Ft=Ut(lt);if(Ft!==Ut(It)||null==lt||null==It)return!1;if("function"==typeof lt["fantasy-land/equals"]||"function"==typeof It["fantasy-land/equals"])return"function"==typeof lt["fantasy-land/equals"]&&lt["fantasy-land/equals"](It)&&"function"==typeof It["fantasy-land/equals"]&&It["fantasy-land/equals"](lt);if("function"==typeof lt.equals||"function"==typeof It.equals)return"function"==typeof lt.equals&&lt.equals(It)&&"function"==typeof It.equals&&It.equals(lt);switch(Ft){case"Arguments":case"Array":case"Object":if("function"==typeof lt.constructor&&"Promise"===function(lt){var It=String(lt).match(/^function (\w*)/);return null==It?"":It[1]}(lt.constructor))return lt===It;break;case"Boolean":case"Number":case"String":if(typeof lt!=typeof It||!dt(lt.valueOf(),It.valueOf()))return!1;break;case"Date":if(!dt(lt.valueOf(),It.valueOf()))return!1;break;case"Error":return lt.name===It.name&&lt.message===It.message;case"RegExp":if(lt.source!==It.source||lt.global!==It.global||lt.ignoreCase!==It.ignoreCase||lt.multiline!==It.multiline||lt.sticky!==It.sticky||lt.unicode!==It.unicode)return!1}for(var qt=Q.length-1;qt>=0;){if(Q[qt]===lt)return kt[qt]===It;qt-=1}switch(Ft){case"Map":return lt.size===It.size&&Jt(lt.entries(),It.entries(),Q.concat([lt]),kt.concat([It]));case"Set":return lt.size===It.size&&Jt(lt.values(),It.values(),Q.concat([lt]),kt.concat([It]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var Xe=De(lt);if(Xe.length!==De(It).length)return!1;var He=Q.concat([lt]),bn=kt.concat([It]);for(qt=Xe.length-1;qt>=0;){var xn=Xe[qt];if(!W(xn,It)||!ie(It[xn],lt[xn],He,bn))return!1;qt-=1}return!0}const xe=(0,J.Z)(function(It,Q){return ie(It,Q,[],[])});function Ge(lt,It){return function(lt,It,Q){var kt,Ft;if("function"==typeof lt.indexOf)switch(typeof It){case"number":if(0===It){for(kt=1/It;Q<lt.length;){if(0===(Ft=lt[Q])&&1/Ft===kt)return Q;Q+=1}return-1}if(It!=It){for(;Q<lt.length;){if("number"==typeof(Ft=lt[Q])&&Ft!=Ft)return Q;Q+=1}return-1}return lt.indexOf(It,Q);case"string":case"boolean":case"function":case"undefined":return lt.indexOf(It,Q);case"object":if(null===It)return lt.indexOf(It,Q)}for(;Q<lt.length;){if(xe(lt[Q],It))return Q;Q+=1}return-1}(It,lt,0)>=0}const un=(0,J.Z)(Ge);var Qn=ut(5211);const gr=lt=>lt.PPIexpState.graphList,hn=lt=>lt.PPIexpState.expressionInDatasets,kr=lt=>lt.PPIexpState.datasetExpressionVisSettingsState,Ni=(0,G.P1)(gr,Qn.$D),Jn=(0,G.P1)(gr,Qn.ft),vr=(0,G.P1)(Jn,(lt,It)=>lt[It.graphID]),_n=(0,G.P1)(Jn,(lt,It)=>lt[It.graphID].graph.nodes.map(Ft=>Ft.data.id)),yr=lt=>lt.PPIexpState.graphZoomNodesPositions,{selectIds:Bn,selectEntities:ki}=Qn.mC.getSelectors(),wa=(0,G.P1)(yr,Bn),Mi=(0,G.P1)(yr,ki),Ea=(0,G.P1)(wa,(lt,It)=>un(It.graphID,lt)),Da=(0,G.P1)(Mi,(lt,It)=>lt[It.graphID]),Mr=lt=>lt.PPIexpState.geneListsForSpecificGenes,{selectIds:Oi,selectEntities:Or}=Qn.UC.getSelectors(),Gi=(0,G.P1)(Mr,Oi),ri=(0,G.P1)(Mr,Or),_e=(0,G.P1)(ri,(lt,It)=>{const Q=lt[It.geneListName];return Q?Q.symbols:void 0}),Ri=(0,G.P1)(hn,lt=>lt.ids),be=(0,G.P1)(hn,(lt,It)=>lt.ids.includes(It.graphDatasetExpressionID)),yn=(0,G.P1)(hn,(lt,It)=>lt.entities[It.graphDatasetExpressionID]),Fi=(0,G.P1)(kr,lt=>lt.ids),La=(0,G.P1)(kr,(lt,It)=>lt.entities[It.graphDatasetExpressionID]),Bi=(0,G.P1)(kr,(lt,It)=>lt.ids.includes(It.graphDatasetExpressionID));var Re=ut(7548),Cn=ut(1118),Gr=ut(877),cn=ut(7089),tr=ut(1218),zn=ut(4967),Rr=ut(8956),ii=ut(9232);const kn=function(lt,It,Q){return[lt,It,Q].join("/")};var Sn=ut(9220),Ta=ut(7194),B=ut(3668),ai=ut(4522),oi=ut(172),Sa=ut(8260),Ia=ut(2047);let Pa=(()=>{class lt{constructor(Q){this.http=Q,this.ppiRequestUrl=Sa.N.serverUrl+"restful/ppinetwork/constructNetwork/"}handleResponse(Q){return Q.type===ai.dt.Response?Q.body.PPIs:oi.E}requestPPIsFromServer(Q){const kt=new ai.aW("POST",this.ppiRequestUrl,Q,{reportProgress:!1,responseType:"json"});return this.http.request(kt).pipe((0,D.U)(Ft=>this.handleResponse(Ft)),(0,Ia.K)(Ft=>(alert(Ft),oi.E)),(0,I.h)(Ft=>Ft!==oi.E))}}return lt.\u0275fac=function(Q){return new(Q||lt)(B.LFG(ai.eN))},lt.\u0275prov=B.Yz7({token:lt,factory:lt.\u0275fac,providedIn:"root"}),lt})();var Aa=ut(4165),_a=ut(726),Ca=ut(9990),Na=ut(9868),si=ut(4205),ka=ut(5535),Fr=ut(4473);let li=(()=>{class lt extends Ta.g{constructor(Q,kt,Ft,qt,Xe,He,bn,xn,Yr){super(Q,bn,xn,Yr),this.store=Q,this.ppisRequestService=kt,this.clusterService=Ft,this.diffAnalysisRequestService=qt,this.trySamppleService=Xe,this.interAppsInteractService=He,this.constructGeneListPPIsRequest$=new f.X(null),this.requestGeneListGraph$=new f.X(null),this.modifyGraphZoomNodesPosition$=new f.X(null),this.datasetHierarRequestSubject=new f.X(null),this.updateNodesExpressionVisSettingsSubject=new f.X(null),this.genesSelectedFromExpressionPatternSubject=new f.X(null),this.datasetIDForDiffGenesHighlight$=new f.X(null),this.groupPairForDiffGenesHighlight$=new f.X(null),this.diffFilterInput$=new f.X(null),this.addGeneListIDForSpecificGenesHighlight$=new f.X(null),this.obtainGenesForSpecificGenesHighlight$=new f.X(null),this.ifSelectedGraphHasNodesPosition$=new f.X(!1),this.requestExpressionPatternFromStore$=new f.X(null),this.requestExpressionPatternOfLocalDataFromServer$=new f.X(null),this.requestExpressionPatternOfRemoteDataFromServer$=new f.X(null),this.requestDiffAnalysisOfRemoteDataFromServer$=new f.X(null),this.requestDiffAnalysisOfLocalDataFromServer$=new f.X(null),this.allGeneListIDs$=this.store.pipe((0,G.Ys)(gt.Dm),(0,D.U)(Et=>(0,ii.NT)(Et))),this.allDatasetInfoForDisplay$=this.store.pipe((0,G.Ys)($.yz)).pipe((0,D.U)(Et=>[...Et].reverse())),this.allGeneListGraphIDs$=this.store.pipe((0,G.Ys)(Ni),(0,D.U)(Et=>(0,ii.NT)(Et))),this.graph$=this.requestGeneListGraph$.pipe((0,I.h)(Et=>null!==Et),(0,C.w)(Et=>{let $t=this.store.pipe((0,G.Ys)(vr,{graphID:Et}),(0,N.q)(1)),ee=this.store.pipe((0,G.Ys)(Da,{graphID:Et}),(0,N.q)(1));return(0,y.D)([$t,ee]).pipe((0,D.U)(([le,ge])=>void 0===ge?{graph:le.graph,ifHasNodesPositions:!1}:{graph:le.graph,ifHasNodesPositions:!0,positions:ge.nodesPositions,zoom:ge.zoom}))})),this.interAppsInteractService.geneListIDFromOtherApp$.pipe((0,I.h)(Et=>null!=Et),(0,D.U)(Et=>({geneListID:Et,database:"Mentha",subNetworkType:"between"}))).subscribe(this.constructGeneListPPIsRequest$),this.constructGeneListPPIsRequest$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>this.store.pipe((0,G.Ys)(gt.Vq,{ID:Et.geneListID}),(0,N.q)(1),(0,C.w)($t=>"SYMBOL"===$t.IDtype?(0,d.of)(Object.assign(Object.assign({},$t),{symbols:$t.genes})):this.store.pipe((0,G.Ys)(At.Rk,{ID:`${$t.speciesID}-${$t.IDtype}`,geneIDs:$t.genes}),(0,N.q)(1),(0,D.U)(le=>Object.assign(Object.assign({},$t),{symbols:le})))),(0,C.w)($t=>this.ppisRequestService.requestPPIsFromServer({speciesID:$t.speciesID,IDtype:"SYMBOL",proteinIDs:$t.symbols,database:Et.database,subNetworkType:Et.subNetworkType})),(0,D.U)($t=>{const ee=function(lt){let qt=new Set,Xe=[],He=[];return lt.forEach((xn,Yr)=>{const Et=xn[0],$t=xn[1],ee=xn[2],le=xn[3];Xe.push({data:{id:Yr.toString(),source:Et,target:$t}}),qt.has(Et)||(He.push({data:{id:Et,name:ee}}),qt.add(Et)),qt.has($t)||(He.push({data:{id:$t,name:le}}),qt.add($t))}),{edges:Xe,nodes:He}}($t);return{geneListPPIsRequest:Et,graph:ee}})))).subscribe(({geneListPPIsRequest:Et,graph:$t})=>{const ee=function(lt){return[lt.geneListID,lt.database,lt.subNetworkType].join("-")}(Et);this.store.dispatch(j._n({geneListGraph:{geneListID:Et.geneListID,database:Et.database,subNetworkType:Et.subNetworkType,graphID:ee,graph:$t}}))}),this.requestGeneListGraph$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>this.store.pipe((0,G.Ys)(Ea,{graphID:Et})))).subscribe(Et=>{this.ifSelectedGraphHasNodesPosition$.next(Et)}),this.modifyGraphZoomNodesPosition$.pipe((0,I.h)(Et=>null!==Et),(0,U.M)(this.ifSelectedGraphHasNodesPosition$,this.requestGeneListGraph$)).subscribe(([Et,$t,ee])=>{const le={graphID:ee,nodesPositions:Et.nodesPositions,zoom:Et.zoom};this.store.dispatch($t?j.YY({geneListGraphZoomNodesPosition:le}):j._p({geneListGraphZoomNodesPosition:le}))}),this.addGeneListIDForSpecificGenesHighlight$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>this.store.pipe((0,G.Ys)(gt.Vq,{ID:Et}),(0,N.q)(1))),(0,C.w)(Et=>"SYMBOL"===Et.IDtype?(0,d.of)({name:Et.name,symbols:Et.genes}):this.store.pipe((0,G.Ys)(At.Rk,{ID:`${Et.speciesID}-${Et.IDtype}`,geneIDs:Et.genes}),(0,N.q)(1),(0,D.U)(le=>({name:Et.name,symbols:le}))))).subscribe(Et=>{this.store.dispatch(j.H6({geneList:Et}))}),this.genesFromGeneListSymbolsForHighlighting$=this.obtainGenesForSpecificGenesHighlight$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>"noList"===Et?(0,d.of)([]):this.store.pipe((0,G.Ys)(_e,{geneListName:Et}),(0,N.q)(1)))),this.genelistIDsForSpecificGenesHighlight$=this.store.pipe((0,G.Ys)(Gi),(0,D.U)(Et=>Et.map($t=>$t.toString()))),(0,p.aj)([this.datasetHierarRequestSubject.pipe((0,I.h)(Et=>null!=Et)),this.requestGeneListGraph$.pipe((0,I.h)(Et=>null!=Et))]).pipe((0,C.w)(([Et,$t])=>{const ee=Et.datasetID,le=Et.acrossGroupsOrSamples,ge=kn($t,ee,le);return this.store.pipe((0,G.Ys)(be,{graphDatasetExpressionID:ge}),(0,N.q)(1),(0,D.U)(Pe=>({datasetID:ee,acrossGroupsOrSamples:le,graphID:$t,ifExisted:Pe})))}),(0,I.h)(Et=>!Et.ifExisted),(0,C.w)(Et=>this.store.pipe((0,G.Ys)($.iR,{datasetID:Et.datasetID}),(0,N.q)(1),(0,D.U)($t=>({datasetID:Et.datasetID,acrossGroupsOrSamples:Et.acrossGroupsOrSamples,graphID:Et.graphID,datasetLocalOrRemote:$t.expressLocalOrRemote}))))).subscribe(Et=>{const $t=Et.graphID,ee=Et.datasetID;Et.datasetLocalOrRemote===Gr.M.local?this.requestExpressionPatternOfLocalDataFromServer$.next({graphID:$t,datasetID:ee,acrossGroupsOrSamples:Et.acrossGroupsOrSamples}):this.requestExpressionPatternOfRemoteDataFromServer$.next({graphID:$t,datasetID:ee,acrossGroupsOrSamples:Et.acrossGroupsOrSamples})}),this.requestExpressionPatternOfLocalDataFromServer$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>{const $t=Et.graphID,ee=Et.datasetID,le=Et.acrossGroupsOrSamples,ge=this.store.pipe((0,G.Ys)(_n,{graphID:$t}),(0,N.q)(1)),Pe=this.store.pipe((0,G.Ys)($.iR,{datasetID:ee}),(0,N.q)(1));return(0,y.D)([ge,Pe]).pipe((0,C.w)(([on,Te])=>{const Fe=`${Te.speciesID}-${Te.IDtype}`;return this.store.pipe((0,G.Ys)(At.by,{ID:Fe,symbols:on})).pipe((0,C.w)(Ce=>this.store.pipe((0,G.Ys)(Re.l,{datasetID:ee,geneIDs:Ce}),(0,N.q)(1))),(0,C.w)(Ce=>{const Be=this.clusterService.requestNormalizedValuesSpecificClusterResult({experimentType:Te.experimentType,dataArray:Ce.expressionValues,genes:Ce.geneIDs,samples:Te.samples,groups:Te.groups,acrossGroupsOrSamples:le,clusterMethod:"Hierarchical",clusterMethodSetting:"average"}),Ve=this.store.pipe((0,G.Ys)(At.MR,{ID:Fe,geneIDs:Ce.geneIDs}),(0,N.q)(1));return(0,y.D)([Be,Ve]).pipe((0,D.U)(([sn,wn])=>{let fn;return fn="SYMBOL"!=Te.IDtype?sn.leftUniqueTerms.map(Gn=>wn.get(Gn)):sn.leftUniqueTerms,Object.assign(Object.assign({},sn),{leftDisplayTerms:fn})}))}),(0,D.U)(Ce=>({clusterResultID:kn($t,ee,le),graphID:$t,datasetID:ee,acrossGroupsOrSamples:Et.acrossGroupsOrSamples,result:Ce})))}))})).subscribe(Et=>{const $t={mapID:Et.clusterResultID,transform:{realTranslateX:0,realTranslateY:0,realScaleX:1,realScaleY:1,zoomTranslateX:0,zoomTranslateY:0,zoomScale:1},basicSetting:null};this.store.dispatch(j.OZ({clusteringResult:Et})),this.store.dispatch(j.LW({visSettings:$t}))}),this.expressionPatternInfo$=(0,p.aj)([this.datasetHierarRequestSubject.pipe((0,I.h)(Et=>null!=Et)),this.requestGeneListGraph$.pipe((0,I.h)(Et=>null!=Et)),this.store.pipe((0,G.Ys)(Ri)),this.store.pipe((0,G.Ys)(Fi))]).pipe((0,C.w)(([Et,$t,ee,le])=>{const ge=kn($t,Et.datasetID,Et.acrossGroupsOrSamples),Pe=this.store.pipe((0,G.Ys)(be,{graphDatasetExpressionID:ge}),(0,N.q)(1),(0,I.h)(Te=>Te)),on=this.store.pipe((0,G.Ys)(Bi,{graphDatasetExpressionID:ge}),(0,N.q)(1),(0,I.h)(Te=>Te));return(0,y.D)([Pe,on]).pipe((0,I.h)(([Te,Fe])=>Te&&Fe),(0,C.w)(Te=>{const Fe=this.store.pipe((0,G.Ys)(yn,{graphDatasetExpressionID:ge}),(0,N.q)(1)),Ce=this.store.pipe((0,G.Ys)(La,{graphDatasetExpressionID:ge}),(0,N.q)(1));return(0,y.D)([Fe,Ce]).pipe((0,D.U)(([dn,Be])=>({clusterResultID:ge,graphID:$t,datasetID:Et.datasetID,acrossGroupsOrSamples:Et.acrossGroupsOrSamples,result:Object.assign({},dn.result),transform:Object.assign({},Be.transform),basicSetting:Be.basicSetting})))}))})),this.updateNodesExpressionVisSettingsSubject.pipe((0,I.h)(Et=>null!=Et),(0,U.M)(this.requestGeneListGraph$,this.datasetHierarRequestSubject),(0,D.U)(([Et,$t,ee])=>{const le=kn($t,ee.datasetID,ee.acrossGroupsOrSamples);return Object.assign(Object.assign({},Et),{mapID:le})})).subscribe(Et=>{this.store.dispatch(j.pY({visSettings:Et}))}),this.genesFromExpressionPatternSymbolsForHighlighting$=this.genesSelectedFromExpressionPatternSubject.pipe((0,I.h)(Et=>null!=Et),(0,U.M)(this.datasetHierarRequestSubject.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>this.store.pipe((0,G.Ys)($.iR,{datasetID:Et.datasetID}),(0,D.U)($t=>({speciesID:$t.speciesID,datasetIDtype:$t.IDtype})),(0,N.q)(1))))),(0,C.w)(([Et,$t])=>"SYMBOL"===$t.datasetIDtype?(0,d.of)(Et):this.store.pipe((0,G.Ys)(At.Rk,{ID:`${$t.speciesID}-${$t.datasetIDtype}`,geneIDs:Et}),(0,N.q)(1)))),this.datasetIDForDiffGenesHighlight$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>{let $t=this.store.pipe((0,G.Ys)($.XF,{datasetID:Et}),(0,N.q)(1)),ee=this.store.pipe((0,G.Ys)(O.ON,{datasetID:Et}),(0,N.q)(1));return(0,y.D)([$t,ee]).pipe((0,D.U)(([le,ge])=>{const Pe=(0,tr.S8)(le,ge);return{datasetID:Et,diffGroupPairs:Pe}}))}),(0,I.h)(Et=>Et.diffGroupPairs.length>=1),(0,C.w)(Et=>{const $t=Et.datasetID;return this.store.pipe((0,G.Ys)($.iR,{datasetID:$t}),(0,N.q)(1)).pipe((0,D.U)(ee=>({datasetID:$t,datasetLocalOrRemote:ee.expressLocalOrRemote,experimentType:ee.experimentType,diffGroupPairs:Et.diffGroupPairs})))})).subscribe(Et=>{const $t={experimentType:Et.experimentType,datasetID:Et.datasetID,groupPairs:Et.diffGroupPairs};Et.datasetLocalOrRemote===Gr.M.remote?this.requestDiffAnalysisOfRemoteDataFromServer$.next($t):this.requestDiffAnalysisOfLocalDataFromServer$.next($t)}),this.requestDiffAnalysisOfLocalDataFromServer$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>{const $t=Et.datasetID,ee=Et.groupPairs;return this.store.pipe((0,G.Ys)($.iR,{datasetID:$t}),(0,N.q)(1)).pipe((0,C.w)(le=>{const ge=le.experimentType,Pe=le.speciesID,on=le.IDtype,Te=(0,tr.XU)(ee),Fe=le.groups.filter(Be=>Te.has(Be.name)),Ce=(0,zn.Z)(Fe),dn=(0,tr.FV)(ee,Ce);return this.store.pipe((0,G.Ys)(Re.ZM,{datasetID:$t})).pipe((0,C.w)(Be=>{const wn=Be.genes,fn=(0,Rr.l)(Be.values,Be.samples,dn),On=Sn.e8.get(ge);return"RNA-seq of coding RNA"===ge?this.diffAnalysisRequestService.requestLocalSeqDiffAnalysisMultipleGroupPair({valuesDic:fn,genes:wn,groupPairs:ee,groups2samples:Ce,experimentType:ge,diffSoftware:On}):"Protein profiling by Mass Spec"===ge||"Other"===ge?this.diffAnalysisRequestService.requestProteomicsDiffAnalysisMultipleGroupPairs({valuesDic:fn,genes:wn,groupPairs:ee,groups2samples:Ce,experimentType:ge,diffSoftware:On}):"Expression profiling by array"===ge?this.diffAnalysisRequestService.requestLocalArrayDiffAnalysisMultipleGroupPair({valuesDic:fn,genes:wn,groupPairs:ee,groups2samples:Ce,experimentType:ge,diffSoftware:On,annoLibrary:le.IDtype+".db"}):void 0}),(0,D.U)(Be=>{const sn=Be.diffSoftware;return Be.diffResultList.map((fn,On)=>{const Gn=ee[On];return{id:`${$t}-${Gn.targetGroup} VS ${Gn.baseGroup}-${sn}`,datasetID:$t,baseGroup:Gn.baseGroup,targetGroup:Gn.targetGroup,diffSoftware:sn,IDtype:on,speciesID:Pe,diffResults:fn}})}))}))})).subscribe(Et=>{this.store.dispatch(H.rv({diffAnalysisResultInfos:Et}))}),this.requestDiffAnalysisOfRemoteDataFromServer$.pipe((0,I.h)(Et=>null!=Et),(0,C.w)(Et=>{const $t=Et.datasetID,ee=Et.groupPairs;return this.store.pipe((0,G.Ys)($.iR,{datasetID:$t}),(0,N.q)(1)).pipe((0,C.w)(le=>{const ge=le.experimentType,Pe=le.speciesID,on=le.idType,Te=le.database,Fe=(0,tr.XU)(ee),Ce=le.groups.filter(Ve=>Fe.has(Ve.name)),dn=(0,zn.Z)(Ce);return(0,tr.FV)(ee,dn),this.diffAnalysisRequestService.requestRemoteDatasetDiffAnalysisMultipleGroupParis({database:Te,datasetID:$t,experimentType:ge,IDtype:on,groupPairs:ee,groups2samples:dn,diffSoftware:Sn.e8[ge]}).pipe((0,D.U)(Ve=>{const wn=Ve.diffSoftware;return Ve.diffResultList.map((On,Gn)=>{const qn=ee[Gn];return{id:`${$t}-${qn.targetGroup} VS ${qn.baseGroup}-${wn}`,datasetID:$t,baseGroup:qn.baseGroup,targetGroup:qn.targetGroup,diffSoftware:wn,IDtype:on,speciesID:Pe,diffResults:On}})}))}))})).subscribe(Et=>{this.store.dispatch(H.rv({diffAnalysisResultInfos:Et}))}),this.datasetGroupsWithStatus$=(0,p.aj)([this.store.pipe((0,G.Ys)(O.Nq)),this.datasetIDForDiffGenesHighlight$.pipe((0,I.h)(Et=>null!=Et))]).pipe((0,C.w)(([Et,$t])=>{let ee=this.store.pipe((0,G.Ys)($.XF,{datasetID:$t}),(0,N.q)(1)),le=this.store.pipe((0,G.Ys)(O.ON,{datasetID:$t}),(0,N.q)(1));return(0,y.D)([ee,le]).pipe((0,D.U)(([ge,Pe])=>(0,tr.HI)(ge,Pe)))})),this.diffGenesSymbolsForHighlighting$=(0,p.aj)([this.diffFilterInput$.pipe((0,I.h)(Et=>null!=Et)),this.groupPairForDiffGenesHighlight$.pipe((0,I.h)(Et=>null!=Et))]).pipe((0,D.U)(([Et,$t])=>({diffFilterInput:Et,diffGroupPair:$t})),(0,U.M)(this.datasetIDForDiffGenesHighlight$),(0,C.w)(([Et,$t])=>{const ee=Et.diffGroupPair.baseGroup,le=Et.diffGroupPair.targetGroup,ge=Et.diffFilterInput;return ee===le?(0,d.of)({up:[],down:[]}):this.store.pipe((0,G.Ys)(O.fh,{datasetID:$t,baseGroup:ee,targetGroup:le}),(0,N.q)(1),(0,D.U)(Pe=>({diffGenes:(0,cn.IT)(Pe.diffSoftware,Pe.diffResults,ge),geneAnnoID:Pe.speciesID+"-"+Pe.IDtype})),(0,C.w)(Pe=>{const Te=Pe.diffGenes.down,Fe=Pe.geneAnnoID;let Ce=this.store.pipe((0,G.Ys)(At.Rk,{ID:Fe,geneIDs:Pe.diffGenes.up}),(0,N.q)(1)),dn=this.store.pipe((0,G.Ys)(At.Rk,{ID:Fe,geneIDs:Te}),(0,N.q)(1));return(0,y.D)([Ce,dn]).pipe((0,D.U)(([Be,Ve])=>({up:Be,down:Ve})))}))})),this.genesForHighlight$=(0,c.T)(this.genesFromExpressionPatternSymbolsForHighlighting$,this.genesFromGeneListSymbolsForHighlighting$),this.trySamppleService.trySampleData$.pipe((0,I.h)(Boolean)).subscribe(Et=>{this.store.dispatch(rt.CF({newState:Et.datasetListState})),this.store.dispatch(Cn.gw({newState:Et.localExpressDataState})),this.store.dispatch(q.A({newState:Et.geneAnnotationsState})),this.store.dispatch(at.c({newState:Et.geneListState})),this.store.dispatch(j.iS({newState:Et.PPIexpState}))}),this.trySamplePercentage$=this.trySamppleService.trySamplePercentage$}constructGeneListPPIsRequest(Q){this.constructGeneListPPIsRequest$.next(Q)}requestGeneListGraph(Q){this.requestGeneListGraph$.next(Q)}modifyGraphZoomNodesPosition(Q){this.modifyGraphZoomNodesPosition$.next(Q)}requestExpressionPattern(Q){this.datasetHierarRequestSubject.next(Q)}updateVisSettingsOfNodesExpressionInDataset(Q){this.updateNodesExpressionVisSettingsSubject.next(Q)}requestSymbolsForGenesSelectedFromExpressionPattern(Q){this.genesSelectedFromExpressionPatternSubject.next(Q)}requestDatasetDiffGenesForHighlight(Q){this.datasetIDForDiffGenesHighlight$.next(Q)}requestGroupPairDiffGenesForHighlight(Q){this.groupPairForDiffGenesHighlight$.next(Q)}changeDiffFilterInput(Q){this.diffFilterInput$.next(Q)}addGeneListIDForSpecificGenesHighlight(Q){this.addGeneListIDForSpecificGenesHighlight$.next(Q)}obtainGenesForSpecificGenesHighlight(Q){this.obtainGenesForSpecificGenesHighlight$.next(Q)}prepareTrySampleData(Q){this.trySamppleService.requestTrySampleData(Q)}}return lt.\u0275fac=function(Q){return new(Q||lt)(B.LFG(G.yh),B.LFG(Pa),B.LFG(Aa.W),B.LFG(_a.h),B.LFG(Ca.v),B.LFG(Na.h),B.LFG(si.b),B.LFG(ka.f),B.LFG(Fr.h))},lt.\u0275prov=B.Yz7({token:lt,factory:lt.\u0275fac}),lt})();var Yn=ut(1144),mr=ut(4102);function ui(lt,It){if(1&lt&&(B.TgZ(0,"option",11),B._uU(1),B.qZA()),2&lt){const Q=It.$implicit;B.Q6J("value",Q),B.xp6(1),B.hij(" ",Q," ")}}function zi(lt,It){if(1&lt){const Q=B.EpF();B.TgZ(0,"label",12),B.TgZ(1,"p"),B._uU(2,"Please load or generate a new gene list "),B.TgZ(3,"a",13),B.NdJ("click",function(Ft){return B.CHM(Q),B.oxw().triggerInputGeneListSignal(Ft)}),B._uU(4,"New Gene List"),B.qZA(),B.qZA(),B.qZA()}}function Xn(lt,It){if(1&lt&&(B.TgZ(0,"option",11),B._uU(1),B.qZA()),2&lt){const Q=It.$implicit;B.Q6J("value",Q),B.xp6(1),B.hij(" ",Q," ")}}function Hn(lt,It){if(1&lt&&(B.TgZ(0,"option",11),B._uU(1),B.qZA()),2&lt){const Q=It.$implicit;B.Q6J("value",Q.name),B.xp6(1),B.hij(" ",Q.description," ")}}let Ma=(()=>{class lt{constructor(Q){this.cdr=Q,this.inputGeneListSignal$=new B.vpe,this.geneListPPIrequest$=new B.vpe,this.subNetworkTypes=[{name:"between",description:"Between Input Genes"},{name:"participate",description:"Input Genes Participate in"}],this.geneListPPIinputForm=new R.cw({geneListID:new R.NI("",R.kI.required),database:new R.NI("",R.kI.required),subNetworkType:new R.NI("between",R.kI.required)}),this.geneListPPIinputForm.valueChanges.subscribe(kt=>{this.cdr.detectChanges()})}ngOnInit(){this._setDefaultPPIdatabase()}onSubmit(Q){this.geneListPPIrequest$.next(this.geneListPPIinputForm.value)}ngOnChanges(Q){Q.ppiDatabases&&!Q.ppiDatabases.isFirstChange()&&this._setDefaultPPIdatabase(),Q.geneListIDs&&Q.geneListIDs.isFirstChange()}_setDefaultPPIdatabase(){this.ppiDatabases&&this.geneListPPIinputForm.patchValue({database:this.ppiDatabases[0]})}triggerInputGeneListSignal(Q){this.inputGeneListSignal$.next(!0)}}return lt.\u0275fac=function(Q){return new(Q||lt)(B.Y36(B.sBO))},lt.\u0275cmp=B.Xpm({type:lt,selectors:[["app-generate-new-ppi-network"]],inputs:{geneListIDs:"geneListIDs",ppiDatabases:"ppiDatabases"},outputs:{inputGeneListSignal$:"inputGeneListSignal$",geneListPPIrequest$:"geneListPPIrequest$"},features:[B.TTD],decls:20,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","geneList"],["formControlName","geneListID","name","geneListID",1,"form-control","form-control-sm"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger font-weight-light",4,"ngIf"],["for","database"],["formControlName","database","name","database",1,"form-control","form-control-sm"],["for","subNetworkType"],["formControlName","subNetworkType","name","subNetworkType",1,"form-control","form-control-sm"],["data-testid","submitNewPPI","type","submit",1,"btn","btn-sm","btn-expressvis",3,"disabled"],[3,"value"],[1,"text-danger","font-weight-light"],["href","javascript:void(0)",3,"click"]],template:function(Q,kt){1&Q&&(B.TgZ(0,"form",0),B.NdJ("ngSubmit",function(qt){return kt.onSubmit(qt)}),B.TgZ(1,"div",1),B.TgZ(2,"label",2),B._uU(3,"Gene List"),B.qZA(),B.TgZ(4,"select",3),B.YNc(5,ui,2,2,"option",4),B.qZA(),B.YNc(6,zi,5,0,"label",5),B.qZA(),B.TgZ(7,"div",1),B.TgZ(8,"label",6),B._uU(9,"PPI Database"),B.qZA(),B.TgZ(10,"select",7),B.YNc(11,Xn,2,2,"option",4),B.qZA(),B.qZA(),B.TgZ(12,"div",1),B.TgZ(13,"label",8),B._uU(14,"Sub PPI Network Type"),B.qZA(),B.TgZ(15,"select",9),B.YNc(16,Hn,2,2,"option",4),B.qZA(),B.qZA(),B.TgZ(17,"div",1),B.TgZ(18,"button",10),B._uU(19," Submit "),B.qZA(),B.qZA(),B.qZA()),2&Q&&(B.Q6J("formGroup",kt.geneListPPIinputForm),B.xp6(5),B.Q6J("ngForOf",kt.geneListIDs),B.xp6(1),B.Q6J("ngIf",!((null==kt.geneListIDs?null:kt.geneListIDs.length)>=1&&kt.geneListIDs)),B.xp6(5),B.Q6J("ngForOf",kt.ppiDatabases),B.xp6(5),B.Q6J("ngForOf",kt.subNetworkTypes),B.xp6(2),B.Q6J("disabled",!kt.geneListPPIinputForm.valid))},directives:[R._Y,R.JL,R.sg,R.EJ,R.JJ,R.u,pt.sg,pt.O5,R.YN,R.Kr],styles:[""],changeDetection:0}),lt})();var Oe=ut(3405),Vn=ut(8805);function br(lt,It){if(1&lt&&(B.TgZ(0,"option",5),B._uU(1),B.qZA()),2&lt){const Q=It.$implicit;B.Q6J("value",Q),B.xp6(1),B.hij(" ",Q," ")}}function Ke(lt,It){1&lt&&(B.TgZ(0,"label",6),B._uU(1," Construct a PPI in the Left Sidebar "),B.qZA())}let Oa=(()=>{class lt{constructor(){this.selectedGeneListGraphID$=new B.vpe,this.destroyNotifier$=new Oe.xQ,this.graphSelectForm=new R.cw({graphID:new R.NI("",R.kI.required)})}ngOnInit(){this.graphSelectForm.get("graphID").valueChanges.pipe((0,Vn.R)(this.destroyNotifier$)).subscribe(Q=>{this.selectedGeneListGraphID$.next(Q)})}ngOnChanges(Q){Q.geneListGraphIDs&&!Q.geneListGraphIDs.isFirstChange()&&this.graphSelectForm.patchValue({graphID:[...this.geneListGraphIDs].reverse()[0]})}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}}return lt.\u0275fac=function(Q){return new(Q||lt)},lt.\u0275cmp=B.Xpm({type:lt,selectors:[["app-select-genelist-graph-id"]],inputs:{geneListGraphIDs:"geneListGraphIDs"},outputs:{selectedGeneListGraphID$:"selectedGeneListGraphID$"},features:[B.TTD],decls:6,vars:3,consts:[[1,"form-inline",3,"formGroup"],["for","graphSelect"],["formControlName","graphID",1,"form-control","form-control-sm","ml-2"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger font-weight-light",4,"ngIf"],[3,"value"],[1,"text-danger","font-weight-light"]],template:function(Q,kt){1&Q&&(B.TgZ(0,"form",0),B.TgZ(1,"label",1),B._uU(2,"Select a PPI network:"),B.qZA(),B.TgZ(3,"select",2),B.YNc(4,br,2,2,"option",3),B.qZA(),B.YNc(5,Ke,2,0,"label",4),B.qZA()),2&Q&&(B.Q6J("formGroup",kt.graphSelectForm),B.xp6(4),B.Q6J("ngForOf",kt.geneListGraphIDs),B.xp6(1),B.Q6J("ngIf",!((null==kt.geneListGraphIDs?null:kt.geneListGraphIDs.length)>=1&&kt.geneListGraphIDs)))},directives:[R._Y,R.JL,R.sg,R.EJ,R.JJ,R.u,pt.sg,pt.O5,R.YN,R.Kr],styles:[""],changeDetection:0}),lt})();var Br=ut(2473),hi=ut(9319),xr=ut.n(hi),ci=ut(5674),er=ut.n(ci),Yi=ut(2142),Xi=ut.n(Yi);const Ga={name:"cose-bilkent",ready:function(){},stop:function(){},refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.8},Hi=[{selector:"node",style:{"background-color":"#3399ff",shape:"ellipse",label:"data(name)",width:"30px",height:"30px","font-size":15,"text-valign":"center","border-color":"#3399ff"}},{selector:"edge",style:{width:"3px","control-point-step-size":30}},{selector:".nodeUpRegulated",style:{"background-color":"red"}},{selector:".nodeDownRegulated",style:{"background-color":"green"}},{selector:".edgeUpRegulated",style:{"background-color":"red","line-color":"red"}},{selector:".edgeDownRegulated",style:{"background-color":"green","line-color":"green"}}];var Ra=ut(5686),Qe=ut(5043);const In=["cyMap"];let Vi=(()=>{class lt{constructor(){this.outputZoomPan$=new B.vpe,this.outputZoomNodesPosition$=new B.vpe,this.faDownload=Qe.q7m,this.style=Hi,this.layout=Ga,this.zoom={min:.1,max:10},this.emitNodesPosition$=new f.X(null),this.destroyNotifier$=new Oe.xQ}ngOnInit(){this.emitNodesPosition$.pipe((0,Vn.R)(this.destroyNotifier$),(0,I.h)(Q=>null!=Q),(0,Ra.b)(1e3)).subscribe(()=>{const Q=this._obtainNodesPosition(),kt=parseFloat(this.cy.zoom())*this.initialZoom;this.outputZoomNodesPosition$.next({nodesPositions:Q,zoom:kt})}),this._registerLayouts(),this.graphForDisplay&&(this._renderPPIgraph(),this._addEvents())}ngOnChanges(Q){Q.graphForDisplay&&!Q.graphForDisplay.isFirstChange()&&(this._renderPPIgraph(),this._addEvents()),Q.diffGenes&&!Q.diffGenes.isFirstChange()&&this._highlightDiffNodes(),Q.diffEdges&&!Q.diffEdges.isFirstChange()&&this._highlightDiffEdges(),Q.nodesPropertyHighlight&&!Q.nodesPropertyHighlight.isFirstChange()&&this._highlightNodesAccordingAttributeValue(),Q._highlightNodesAccordingAttributeValue&&!Q._highlightNodesAccordingAttributeValue.isFirstChange()&&this._highlightNodesAccordingAttributeValue(),Q.basicSettingModify&&!Q.basicSettingModify.isFirstChange()&&this._modifyBasicSetting()}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}_registerLayouts(){er()(xr()),Xi()(xr())}_renderPPIgraph(){this.graphForDisplay.ifHasNodesPositions?this._renderPPIgraphWithPositions():this._renderPPIgraphWithNoPositions()}_modifyBasicStyle(){this.initialZoom=this.graphForDisplay.zoom;const Q=this.graphForDisplay.zoom;let kt=[...Hi].map(Ft=>{if("node"===Ft.selector){const qt=Ft.style,Xe=parseFloat(qt.width),He=parseFloat(qt.height),bn=qt["font-size"];return Object.assign(Object.assign({},Ft),{style:Object.assign(Object.assign({},qt),{width:Xe*Q+"px",height:He*Q+"px","font-size":bn*Q})})}if("edge"===Ft.selector){const qt=Ft.style,Xe=parseFloat(qt.width),He=qt["control-point-step-size"];return Object.assign(Object.assign({},Ft),{style:Object.assign(Object.assign({},qt),{width:Xe*Q+"px","control-point-step-size":He*Q})})}return Ft});this.modifiedStyle=kt}_renderPPIgraphWithPositions(){this._modifyBasicStyle();const kt={name:"preset",positions:this.graphForDisplay.positions,fit:!1};this.cy=xr()({container:this.cyMap.nativeElement,elements:this.graphForDisplay.graph,layout:kt,style:this.modifiedStyle,minZoom:this.zoom.min,maxZoom:this.zoom.max})}_renderPPIgraphWithNoPositions(){this.initialZoom=1,this.cy=xr()({container:this.cyMap.nativeElement,elements:this.graphForDisplay.graph,style:this.style,minZoom:this.zoom.min,maxZoom:this.zoom.max,wheelSensitivity:.4}),this.cy.elements().layout(Object.assign(Object.assign({},this.layout),{fit:!0})).run()}_addEvents(){this.cy.on("zoom",Q=>{this.emitNodesPosition$.next(!0)}),this.cy.on("pan",Q=>{this.emitNodesPosition$.next(!0)}),this.cy.nodes().on("drag",Q=>{this.emitNodesPosition$.next(!0)})}_obtainNodesPosition(){let Q={};return this.cy.nodes().forEach(kt=>{Q[kt.data().id]=kt.renderedPosition()}),Q}_obtainNodesModelPosition(){let Q={};return this.cy.nodes().forEach(kt=>{Q[kt.data().id]=kt.position()}),Q}_highlightDiffNodes(){let Q=this.diffGenes.up,kt=this.diffGenes.down;this.cy.nodes().removeClass("nodeUpRegulated").removeClass("nodeDownRegulated"),this.cy.nodes().filter(function(Ft,qt){return Q.indexOf(Ft.data("id"))>-1}).addClass("nodeUpRegulated"),this.cy.nodes().filter(function(Ft,qt){return kt.indexOf(Ft.data("id"))>-1}).addClass("nodeDownRegulated")}_highlightDiffEdges(){let Q=this.diffEdges.up,kt=this.diffEdges.down;this.cy.edges().removeClass("edgeUpRegulated").removeClass("edgeDownRegulated"),this.cy.edges().filter(function(Ft){return Q.indexOf(Ft.data("id"))>-1}).addClass("edgeUpRegulated"),this.cy.edges().filter(function(Ft){return kt.indexOf(Ft.data("id"))>-1}).addClass("edgeDownRegulated")}_highlightNodesAccordingAttributeValue(){const{nodes:Q,property:kt,propertyValue:Ft,type:qt}=Object.assign({},this.nodesPropertyHighlight);"add"===qt?(this.cy.nodes().removeStyle(kt),this.cy.nodes().filter(function(Xe,He){return Q.indexOf(Xe.data("id"))>-1}).style(kt,Ft)):this.cy.nodes().removeStyle(kt)}_modifyBasicSetting(){const kt={property:this.basicSettingModify.property,propertyValue:this.basicSettingModify.propertyValue};this.cy.style().selector(this.basicSettingModify.selector).style(kt).update()}downloadPlot(Q){let kt=this.cy.png({output:"blob",bg:"white",scale:5});(0,Br.saveAs)(kt,"network.png")}}return lt.\u0275fac=function(Q){return new(Q||lt)},lt.\u0275cmp=B.Xpm({type:lt,selectors:[["app-cytoscapejs-ppi-vis"]],viewQuery:function(Q,kt){if(1&Q&&B.Gf(In,5),2&Q){let Ft;B.iGM(Ft=B.CRH())&&(kt.cyMap=Ft.first)}},inputs:{graphForDisplay:"graphForDisplay",diffGenes:"diffGenes",diffEdges:"diffEdges",nodesPropertyHighlight:"nodesPropertyHighlight",basicSettingModify:"basicSettingModify"},outputs:{outputZoomNodesPosition$:"outputZoomNodesPosition$"},features:[B.TTD],decls:5,vars:2,consts:[[2,"width","100%","height","70vh","display","block"],["cyMap",""],["ngbTooltip","Downlaod Figure as PNG",1,"hoverBigger",3,"icon","size","click"]],template:function(Q,kt){1&Q&&(B.TgZ(0,"div"),B._UZ(1,"div",0,1),B.qZA(),B.TgZ(3,"div"),B.TgZ(4,"fa-icon",2),B.NdJ("click",function(qt){return kt.downloadPlot(qt)}),B.qZA(),B.qZA()),2&Q&&(B.xp6(4),B.Q6J("icon",kt.faDownload)("size","1x"))},directives:[T.BN],styles:[""],changeDetection:0}),lt})();var Ui=ut(7075),Un=ut(1545),wr=ut(4234),di=ut(7360);function Mn(lt,It){if(1&lt){const Q=B.EpF();B.TgZ(0,"div"),B.TgZ(1,"app-select-gene-list",6),B.NdJ("selectedGeneListName",function(Ft){return B.CHM(Q),B.oxw().processGeneListIDforAdding(Ft)}),B.qZA(),B.TgZ(2,"a",7),B.NdJ("click",function(Ft){return B.CHM(Q),B.oxw().triggerInputGeneListSignal(Ft)}),B._uU(3,"Import A New Gene List"),B.qZA(),B.qZA()}if(2&lt){const Q=B.oxw();B.xp6(1),B.Q6J("availableGeneListNames",Q.allGeneListIDs)}}function Er(lt,It){if(1&lt){const Q=B.EpF();B.TgZ(0,"p"),B._uU(1,"Please import a gene list first. "),B.TgZ(2,"a",7),B.NdJ("click",function(Ft){return B.CHM(Q),B.oxw().triggerInputGeneListSignal(Ft)}),B._uU(3,"Import Gene List"),B.qZA(),B.qZA()}}function zr(lt,It){if(1&lt&&(B.TgZ(0,"p"),B._uU(1),B.qZA()),2&lt){const Q=B.oxw();B.xp6(1),B.Oqu(null==Q.addGeneListForHighlightStatus?null:Q.addGeneListForHighlightStatus.statusValue)}}function Ue(lt,It){if(1&lt&&(B.TgZ(0,"p",8),B._uU(1),B.qZA()),2&lt){const Q=B.oxw();B.xp6(1),B.Oqu(null==Q.addGeneListForHighlightStatus?null:Q.addGeneListForHighlightStatus.statusValue)}}let qi=(()=>{class lt{constructor(){this.geneListIDforAdding$=new B.vpe,this.geneListIDforRemove$=new B.vpe,this.geneListIDforHighlight$=new B.vpe,this.inputGeneListSignal$=new B.vpe}ngOnInit(){}processGeneListIDforAdding(Q){this.geneListIDforAdding$.next(Q)}processGeneListIDforHighlight(Q){this.geneListIDforHighlight$.next(Q)}processGeneListIDforRemove(Q){this.geneListIDforRemove$.next(Q)}triggerInputGeneListSignal(Q){this.inputGeneListSignal$.next(!0)}}return lt.\u0275fac=function(Q){return new(Q||lt)},lt.\u0275cmp=B.Xpm({type:lt,selectors:[["app-manage-gene-lists-for-highlight"]],inputs:{allGeneListIDs:"allGeneListIDs",availableGenelistIDsForHighlight:"availableGenelistIDsForHighlight",addGeneListForHighlightStatus:"addGeneListForHighlightStatus",disActiveAllGenelist:"disActiveAllGenelist"},outputs:{geneListIDforAdding$:"geneListIDforAdding$",geneListIDforRemove$:"geneListIDforRemove$",geneListIDforHighlight$:"geneListIDforHighlight$",inputGeneListSignal$:"inputGeneListSignal$"},decls:9,vars:6,consts:[[1,"text-center"],[1,"col-12","border-right"],[4,"ngIf","ngIfElse"],["importGeneListNote",""],[3,"ngIf"],[3,"availableGenelistIDs","disActiveAll","selectedGeneListIDforHighlight$","selectedGeneListIDforRemove$"],[3,"availableGeneListNames","selectedGeneListName"],["href","javascript:void(0)","data-testid","importGeneList",3,"click"],[2,"color","red"]],template:function(Q,kt){if(1&Q&&(B.TgZ(0,"h5",0),B._uU(1,"Highlight specific Genes"),B.qZA(),B.TgZ(2,"div",1),B.YNc(3,Mn,4,1,"div",2),B.YNc(4,Er,4,0,"ng-template",null,3,B.W1O),B.qZA(),B.YNc(6,zr,2,1,"ng-template",4),B.YNc(7,Ue,2,1,"ng-template",4),B.TgZ(8,"app-click-gene-list-for-highlighting",5),B.NdJ("selectedGeneListIDforHighlight$",function(qt){return kt.processGeneListIDforHighlight(qt)})("selectedGeneListIDforRemove$",function(qt){return kt.processGeneListIDforRemove(qt)}),B.qZA()),2&Q){const Ft=B.MAs(5);B.xp6(3),B.Q6J("ngIf",(null==kt.allGeneListIDs?null:kt.allGeneListIDs.length)>0)("ngIfElse",Ft),B.xp6(3),B.Q6J("ngIf","loading"===(null==kt.addGeneListForHighlightStatus?null:kt.addGeneListForHighlightStatus.status)),B.xp6(1),B.Q6J("ngIf","error"===(null==kt.addGeneListForHighlightStatus?null:kt.addGeneListForHighlightStatus.status)),B.xp6(1),B.Q6J("availableGenelistIDs",kt.availableGenelistIDsForHighlight)("disActiveAll",kt.disActiveAllGenelist)}},directives:[pt.O5,wr.T,di.i],styles:[""],changeDetection:0}),lt})();var fi=ut(4547),Dr=ut(5826),pi=ut(7166);const gi=["inputGeneListComponent"];function Fa(lt,It){if(1&lt){const Q=B.EpF();B.TgZ(0,"div",22),B.TgZ(1,"div",23),B.TgZ(2,"app-try-sample",24),B.NdJ("sampleForTryName$",function(Ft){return B.CHM(Q),B.oxw().processTrySampleFileName(Ft)})("sampleForImportName$",function(Ft){return B.CHM(Q),B.oxw().processDownloadSampleData(Ft)})("closeMe$",function(Ft){return B.CHM(Q),B.oxw().closeTrySampleComponent(Ft)}),B.ALo(3,"async"),B.ALo(4,"async"),B.qZA(),B.qZA(),B.qZA()}if(2&lt){const Q=B.oxw();B.xp6(2),B.Q6J("fileInfos",Q.trySamplesInfos)("trySamplePercentage",B.lcZ(3,3,Q.trySamplePercentage$))("downloadSampleDataPercentage",B.lcZ(4,5,Q.downloadSampleDataPercentage$))}}function Ba(lt,It){if(1&lt){const Q=B.EpF();B.TgZ(0,"div",25),B.TgZ(1,"h3"),B._uU(2,"Generate a New Gene List"),B.qZA(),B.TgZ(3,"button",26),B.NdJ("click",function(){B.CHM(Q);const Ft=B.oxw();return null==Ft.inputGenelistModalRef?null:Ft.inputGenelistModalRef.hide()}),B.TgZ(4,"span",27),B._uU(5,"\xd7"),B.qZA(),B.qZA(),B.qZA(),B.TgZ(6,"div",28),B.TgZ(7,"app-generate-new-gene-list",29),B.NdJ("outputGeneList$",function(Ft){return B.CHM(Q),B.oxw().processInputGeneList(Ft)})("annotationTermsRequest$",function(Ft){return B.CHM(Q),B.oxw().processAnnotationTermsRequest(Ft)})("annotationGenesRequest$",function(Ft){return B.CHM(Q),B.oxw().processAnnotationGenesRequest(Ft)})("geneListFromDatasetRequest$",function(Ft){return B.CHM(Q),B.oxw().processGeneListFromDatasetRequest(Ft)}),B.ALo(8,"async"),B.ALo(9,"async"),B.ALo(10,"async"),B.ALo(11,"async"),B.qZA(),B.qZA(),B.TgZ(12,"div",30),B.TgZ(13,"button",31),B.NdJ("click",function(){return B.CHM(Q),B.oxw().inputGenelistModalRef.hide()}),B._uU(14,"close"),B.qZA(),B.qZA()}if(2&lt){const Q=B.oxw();B.xp6(7),B.Q6J("availableSpecies",Q.availableSpecies)("availableGeneIDtypes",Q.availableGeneIDtypes)("annotationTerms",B.lcZ(8,6,Q.annotationTerms$))("allDatasetInfoForDisplay",B.lcZ(9,8,Q.allDatasetInfoForDisplay$))("geneNumberAfterFilter",B.lcZ(10,10,Q.geneNumberAfterFilter$))("latestAddedGeneListID",B.lcZ(11,12,Q.latestAddedGenelistName$))}}const nr=[{path:"",component:(()=>{class lt{constructor(Q,kt){this.facade=Q,this.modalService=kt,this.trySamplesInfos=[{fileForTry:"Proteomics-preprocessed-Gao-PPIExp.json.gz",fileForImport:"Proteomics-preprocessed-Gao.zip",description:"Proteomics-preprocessed-Gao"}],this.availableSpecies=Sn.it,this.availableGeneIDtypes=Sn.k1,this.availablePPIdatabases=Sn.dT,this.allDatasetInfoForDisplay$=this.facade.allDatasetInfoForDisplay$.pipe((0,mr.d)(2)),this.allGeneListIDs$=this.facade.allGeneListIDs$.pipe((0,mr.d)(3)),this.genelistIDsForSpecificGenesHighlight$=this.facade.genelistIDsForSpecificGenesHighlight$,this.allGeneListGraphIDs$=this.facade.allGeneListGraphIDs$,this.datasetGroupsWithStatusForDiffGenes$=this.facade.datasetGroupsWithStatus$,this.latestAddedGenelistName$=this.facade.latestAddedGenelistName$,this.annotationTerms$=this.facade.annotationTerms$,this.geneNumberAfterFilter$=this.facade.geneNumberAfterFilter$,this.trySamplePercentage$=this.facade.trySamplePercentage$,this.downloadSampleDataPercentage$=this.facade.downloadSampleDataPercentage$,this.ifShowTrySampleComponent=!0,this.graph$=this.facade.graph$,this.diffGenes$=this.facade.diffGenesSymbolsForHighlighting$,this.diffEdges$=this.facade.diffEdges$,this.disSelectedGenesInExpressionPattern=!1,this.disActiveAllDiffGroupPairs=!1,this.disActiveAllGenelist=!1,this.facade.changeDiffFilterInput({pValueType:"rawPvalue",pValue:.05,foldChangeType:"log2FoldChange",foldChange:1})}ngOnInit(){this.nodesPropertyHighlight$=this.facade.genesForHighlight$.pipe((0,D.U)(Q=>({nodes:[...Q],property:"background-color",propertyValue:"red",type:"add"}))),this.hierarClusteringResult$=this.facade.expressionPatternInfo$.pipe((0,D.U)(Q=>({clusterResult:Q.result,transform:Q.transform,basicSetting:Q.basicSetting,colorScaleSetting:{lowValueColor:"blue",middleValueColor:"white",highValueColor:"red"},ifDisplayTopTermsWithRawOrder:!1,ifDisplayLeftTermsWithRawOrder:!1})))}processGeneListPPIrequest(Q){this.facade.constructGeneListPPIsRequest(Q)}processSelectedDatasetForDiffGenesHighlight(Q){this.facade.requestDatasetDiffGenesForHighlight(Q)}processDiffGroupPairForDiffGenesHighlight(Q){this.facade.requestGroupPairDiffGenesForHighlight(Q),this._doNotHighlightGenesAnyMore(),this.disActiveAllGenelist=!0,this.disSelectedGenesInExpressionPattern=!0,this.disActiveAllDiffGroupPairs=!1}processExpressionPatternInDataset(Q){this.facade.requestExpressionPattern(Q)}processExpressionPatternMapVisSettings(Q){this.facade.updateVisSettingsOfNodesExpressionInDataset(Q)}processGenesSelectedFromExpressionPattern(Q){this.facade.requestSymbolsForGenesSelectedFromExpressionPattern(Q.selectedNodes),this._doNotHighlightDiffGenesAnyMore(),this.disActiveAllGenelist=!0,this.disActiveAllDiffGroupPairs=!0,this.disSelectedGenesInExpressionPattern=!1}processGeneListForAddSpecificGenes(Q){this.facade.addGeneListIDForSpecificGenesHighlight(Q)}processGeneListForHighlight(Q){this.facade.obtainGenesForSpecificGenesHighlight(Q),this._doNotHighlightDiffGenesAnyMore(),this.disActiveAllDiffGroupPairs=!0,this.disSelectedGenesInExpressionPattern=!0,this.disActiveAllGenelist=!1}processSelectedGeneListGraphID(Q){this.facade.requestGeneListGraph(Q)}processOutputZoomNodesPosition(Q){this.facade.modifyGraphZoomNodesPosition(Q)}openModalForLoadingGeneList(Q){this.inputGenelistModalRef=this.modalService.show(this.inputGeneListComponent)}processInputGeneList(Q){this.facade.inputGeneList(Q)}processAnnotationTermsRequest(Q){this.facade.requestAnnotationTerms(Q)}processAnnotationGenesRequest(Q){this.facade.requestAnnotationGenes(Q)}processGeneListFromDatasetRequest(Q){this.facade.processNewGeneListFromDatasetRequest(Q)}processDownloadProjectSignal(Q){this.facade.downloadProjectSignal()}processTrySampleFileName(Q){this.facade.prepareTrySampleData(Q)}closeTrySampleComponent(Q){this.ifShowTrySampleComponent=!1}processDownloadSampleData(Q){this.facade.downloadSampleData(Q)}_doNotHighlightDiffGenesAnyMore(){this.facade.requestGroupPairDiffGenesForHighlight({baseGroup:"noGroup",targetGroup:"noGroup"})}_doNotHighlightGenesAnyMore(){this.facade.obtainGenesForSpecificGenesHighlight("noList")}}return lt.\u0275fac=function(Q){return new(Q||lt)(B.Y36(li),B.Y36(k.tT))},lt.\u0275cmp=B.Xpm({type:lt,selectors:[["app-ppi-exp"]],viewQuery:function(Q,kt){if(1&Q&&B.Gf(gi,5,B.Rgc),2&Q){let Ft;B.iGM(Ft=B.CRH())&&(kt.inputGeneListComponent=Ft.first)}},decls:40,vars:41,consts:[[1,"row","flex-xl-nowrap"],[1,"col-12","col-md-3","col-xl-2","border"],[1,"mb-3","mt-5"],[3,"geneListIDs","ppiDatabases","inputGeneListSignal$","geneListPPIrequest$"],[1,"border-top","mt-4"],["data-testid","newGeneList",1,"btn","btn-sm","mb-4",3,"click"],[1,"col-12","col-md-9","col-xl-10","mt-2"],["class","row border",4,"ngIf"],[3,"geneListGraphIDs","selectedGeneListGraphID$"],[1,"row","row-cols-3","mt-2"],[1,"col-12","col-md-7","order-1","order-md-1","border"],[1,"text-center",2,"margin-bottom","0"],[1,"col-12","col-md-5","order-3","order-md-3","border"],[1,"text-center"],[1,"col-12","col-md-7","order-2","order-md-4","border","mainVisSection",3,"graphForDisplay","diffGenes","diffEdges","nodesPropertyHighlight","outputZoomNodesPosition$"],[1,"col-12","col-md-5","order-4","order-md-6","border","mainVisSection"],[3,"allDatasetInfoForDisplay","hierarClusteringResult","disSelectedGenes","datasetHierarRequest$","mapVisSettings$","selectedNodes$"],[1,"row",3,"allDatasetInfoForDisplay","datasetGroupsWithStatus","disActiveAllDiffGroupPairs","selectedDatasetID$","diffGroupPair$"],[1,"row",3,"allGeneListIDs","addGeneListForHighlightStatus","availableGenelistIDsForHighlight","disActiveAllGenelist","geneListIDforAdding$","geneListIDforHighlight$","inputGeneListSignal$"],[1,"row","mt-4"],[3,"downloadProjectSignal$"],["inputGeneListComponent",""],[1,"row","border"],[1,"col-12","p-1"],[3,"fileInfos","trySamplePercentage","downloadSampleDataPercentage","sampleForTryName$","sampleForImportName$","closeMe$"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[3,"availableSpecies","availableGeneIDtypes","annotationTerms","allDatasetInfoForDisplay","geneNumberAfterFilter","latestAddedGeneListID","outputGeneList$","annotationTermsRequest$","annotationGenesRequest$","geneListFromDatasetRequest$"],[1,"modal-footer"],["data-testid","closeGeneListInput","type","button",1,"btn","btn-default","btn-sm",3,"click"]],template:function(Q,kt){1&Q&&(B.TgZ(0,"div",0),B.TgZ(1,"div",1),B.TgZ(2,"h5",2),B._uU(3,"Construct a new PPI network"),B.qZA(),B.TgZ(4,"app-generate-new-ppi-network",3),B.NdJ("inputGeneListSignal$",function(qt){return kt.openModalForLoadingGeneList(qt)})("geneListPPIrequest$",function(qt){return kt.processGeneListPPIrequest(qt)}),B.ALo(5,"async"),B.qZA(),B.TgZ(6,"p",4),B._uU(7,"If the genes are not in the gene lists, click the following button to input a new gene list "),B.qZA(),B.TgZ(8,"button",5),B.NdJ("click",function(qt){return kt.openModalForLoadingGeneList(qt)}),B._uU(9," Load a new gene list "),B.qZA(),B.qZA(),B.TgZ(10,"div",6),B.YNc(11,Fa,5,7,"div",7),B.TgZ(12,"app-select-genelist-graph-id",8),B.NdJ("selectedGeneListGraphID$",function(qt){return kt.processSelectedGeneListGraphID(qt)}),B.ALo(13,"async"),B.qZA(),B.TgZ(14,"div",9),B.TgZ(15,"div",10),B.TgZ(16,"h5",11),B._uU(17," PPI Graph "),B.qZA(),B.qZA(),B.TgZ(18,"div",12),B.TgZ(19,"h5",13),B._uU(20," Expression Profile of PPI Nodes In Dataset "),B.qZA(),B.qZA(),B.TgZ(21,"app-cytoscapejs-ppi-vis",14),B.NdJ("outputZoomNodesPosition$",function(qt){return kt.processOutputZoomNodesPosition(qt)}),B.ALo(22,"async"),B.ALo(23,"async"),B.ALo(24,"async"),B.ALo(25,"async"),B.qZA(),B.TgZ(26,"div",15),B.TgZ(27,"app-manage-genes-expression-in-dataset",16),B.NdJ("datasetHierarRequest$",function(qt){return kt.processExpressionPatternInDataset(qt)})("mapVisSettings$",function(qt){return kt.processExpressionPatternMapVisSettings(qt)})("selectedNodes$",function(qt){return kt.processGenesSelectedFromExpressionPattern(qt)}),B.ALo(28,"async"),B.ALo(29,"async"),B.qZA(),B.qZA(),B.qZA(),B.TgZ(30,"app-manage-diff-genes-for-highlight",17),B.NdJ("selectedDatasetID$",function(qt){return kt.processSelectedDatasetForDiffGenesHighlight(qt)})("diffGroupPair$",function(qt){return kt.processDiffGroupPairForDiffGenesHighlight(qt)}),B.ALo(31,"async"),B.ALo(32,"async"),B.qZA(),B.TgZ(33,"app-manage-gene-lists-for-highlight",18),B.NdJ("geneListIDforAdding$",function(qt){return kt.processGeneListForAddSpecificGenes(qt)})("geneListIDforHighlight$",function(qt){return kt.processGeneListForHighlight(qt)})("inputGeneListSignal$",function(qt){return kt.openModalForLoadingGeneList(qt)}),B.ALo(34,"async"),B.ALo(35,"async"),B.qZA(),B.TgZ(36,"div",19),B.TgZ(37,"app-download-project",20),B.NdJ("downloadProjectSignal$",function(qt){return kt.processDownloadProjectSignal(qt)}),B.qZA(),B.qZA(),B.qZA(),B.YNc(38,Ba,15,14,"ng-template",null,21,B.W1O),B.qZA()),2&Q&&(B.xp6(4),B.Q6J("geneListIDs",B.lcZ(5,17,kt.allGeneListIDs$))("ppiDatabases",kt.availablePPIdatabases),B.xp6(7),B.Q6J("ngIf",kt.ifShowTrySampleComponent),B.xp6(1),B.Q6J("geneListGraphIDs",B.lcZ(13,19,kt.allGeneListGraphIDs$)),B.xp6(9),B.Q6J("graphForDisplay",B.lcZ(22,21,kt.graph$))("diffGenes",B.lcZ(23,23,kt.diffGenes$))("diffEdges",B.lcZ(24,25,kt.diffEdges$))("nodesPropertyHighlight",B.lcZ(25,27,kt.nodesPropertyHighlight$)),B.xp6(6),B.Q6J("allDatasetInfoForDisplay",B.lcZ(28,29,kt.allDatasetInfoForDisplay$))("hierarClusteringResult",B.lcZ(29,31,kt.hierarClusteringResult$))("disSelectedGenes",kt.disSelectedGenesInExpressionPattern),B.xp6(3),B.Q6J("allDatasetInfoForDisplay",B.lcZ(31,33,kt.allDatasetInfoForDisplay$))("datasetGroupsWithStatus",B.lcZ(32,35,kt.datasetGroupsWithStatusForDiffGenes$))("disActiveAllDiffGroupPairs",kt.disActiveAllDiffGroupPairs),B.xp6(3),B.Q6J("allGeneListIDs",B.lcZ(34,37,kt.allGeneListIDs$))("availableGenelistIDsForHighlight",B.lcZ(35,39,kt.genelistIDsForSpecificGenesHighlight$))("disActiveAllGenelist",kt.disActiveAllGenelist))},directives:[Ma,pt.O5,Oa,Vi,Ui.h,Un.d,qi,fi.E,Dr.P,pi.D],pipes:[pt.Ov],styles:[""]}),lt})(),data:{key:"PPIExp"}}];let $i=(()=>{class lt{}return lt.\u0275fac=function(Q){return new(Q||lt)},lt.\u0275mod=B.oAB({type:lt}),lt.\u0275inj=B.cJS({imports:[[Yn.Bz.forChild(nr)],Yn.Bz]}),lt})(),rr=(()=>{class lt{}return lt.\u0275fac=function(Q){return new(Q||lt)},lt.\u0275mod=B.oAB({type:lt}),lt.\u0275inj=B.cJS({providers:[li],imports:[[pt.ez,R.u5,R.UX,T.uH,k.zk.forRoot(),$i,w.f,b.m,v.D]]}),lt})()}}]);