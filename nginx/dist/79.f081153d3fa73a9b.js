"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[79],{7582:(E,C,n)=>{n.d(C,{q:()=>e});const e=(m,a)=>m<a?-1:m>a?1:0},383:(E,C,n)=>{n.d(C,{m:()=>m});var e=n(3668);let m=(()=>{class a{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}computeStringWidth(T,_,l){return this.context.font=`${_}px ${l}`,Math.ceil(this.context.measureText(T).width)}computeStringHeight(T,_,l){return this.context.font=`${_}px ${l}`,Math.ceil(this.context.measureText(T).height)}}return a.\u0275fac=function(T){return new(T||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},8779:(E,C,n)=>{n.d(C,{g:()=>t});var e=n(4522),m=n(172),a=n(540),p=n(8053),T=n(8735),_=n(2047),l=n(8260),h=n(3668);let t=(()=>{class s{constructor(r){this.http=r,this.enrichUrl=l.N.serverUrl+"restful/enrichment/pathway/",this.gseaUrl=l.N.serverUrl+"restful/enrichment/gseaAllAnnotations/"}handleResponse(r){return r.type===e.dt.Response?r.body:m.E}requestGenesEnrichedAnnotations(r){const c=new e.aW("POST",this.enrichUrl,r,{reportProgress:!1,responseType:"json"});return this.http.request(c).pipe((0,p.U)(u=>this.handleResponse(u)),(0,T.h)(u=>u!==m.E),(0,p.U)(u=>u),(0,_.K)(u=>(0,a._)(u)))}requestGSEAenrichedAnnotations(r){const c=new e.aW("POST",this.gseaUrl,r,{reportProgress:!1,responseType:"json"});return this.http.request(c).pipe((0,p.U)(u=>this.handleResponse(u)),(0,T.h)(u=>u!==m.E),(0,p.U)(u=>u),(0,_.K)(u=>(0,a._)(u)))}}return s.\u0275fac=function(r){return new(r||s)(h.LFG(e.eN))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},3945:(E,C,n)=>{n.d(C,{q:()=>_});var e=n(3668),m=n(6019),a=n(8638),p=n(9133);function T(l,h){if(1&l){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e._uU(2),e._UZ(3,"span",8),e.qZA(),e.TgZ(4,"ul",9),e.TgZ(5,"li"),e.TgZ(6,"input",10),e.NdJ("ngModelChange",function(i){const c=e.CHM(t).$implicit;return e.oxw().modifiedSettings[c.name]=i})("mouseup",function(i){return e.CHM(t),e.oxw().changePlotSetting(i),i.stopPropagation()}),e.qZA(),e._uU(7),e.qZA(),e.qZA(),e.qZA()}if(2&l){const t=h.$implicit,s=e.oxw();e.xp6(2),e.hij(" ",t.name," "),e.xp6(4),e.Q6J("step",t.stepValue)("min",t.minValue)("max",t.maxValue)("ngModel",s.modifiedSettings[t.name]),e.xp6(1),e.hij(" ",s.modifiedSettings[t.name]," ")}}let _=(()=>{class l{constructor(t,s){this.elem=t,this.renderer=s,this.modifiedSettings$=new e.vpe,this.closeSignal$=new e.vpe,this.modifiedSettings={}}ngOnInit(){this.plotSettingInfoList&&this.plotSettingInfoList.forEach(t=>{this.modifiedSettings[t.name]=t.defaultValue})}ngAfterViewInit(){}onClick(t){t.stopPropagation(),["BUTTON","INPUT"].indexOf(t.target.tagName)<0&&(this.elem.nativeElement.querySelectorAll(".dropdown-menu").forEach(c=>{this.renderer.removeClass(c,"show")}),this.elem.nativeElement.querySelectorAll(".dropdown").forEach(c=>{this.renderer.removeClass(c,"show")}),this.elem.nativeElement.querySelectorAll("button[aria-expanded='true']").forEach(c=>{this.renderer.setAttribute(c,"aria-expanded","false")}))}onMousemove(t){this.checkIfEventOnDropdownMenu(t)&&t.stopPropagation()}onMouseup(t){this.checkIfEventOnDropdownMenu(t)&&t.stopPropagation()}onMousedown(t){this.checkIfEventOnDropdownMenu(t)&&t.stopPropagation()}checkIfEventOnDropdownMenu(t){return["BUTTON","INPUT","LI","UL"].includes(t.target.nodeName)}changePlotSetting(t){this.modifiedSettings$.next(this.modifiedSettings)}closeThisComponent(t){this.closeSignal$.next(!0)}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(e.SBq),e.Y36(e.Qsj))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-change-figure-settings"]],hostBindings:function(t,s){1&t&&e.NdJ("click",function(r){return s.onClick(r)})("mousemove",function(r){return s.onMousemove(r)})("mouseup",function(r){return s.onMouseup(r)})("mousedown",function(r){return s.onMousedown(r)})},inputs:{plotSettingInfoList:"plotSettingInfoList"},outputs:{modifiedSettings$:"modifiedSettings$",closeSignal$:"closeSignal$"},decls:9,vars:1,consts:[[2,"height","1rem"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[2,"height","50%","min-height","20rem"],[1,"d-flex","flex-column"],["ngbDropdown","","class","align-self-start btn-group mt-1 ","style","display:block","role","group",4,"ngFor","ngForOf"],["ngbDropdown","","role","group",1,"align-self-start","btn-group","mt-1",2,"display","block"],["ngbDropdownToggle","","type","button","id","drowdownSetting","data-toggle","dropdown","aria-haspopup","true","aria-expanded","true",1,"btn","btn-light","btn-sm","dropdown-toggle"],[1,"caret"],["ngbDropdownMenu","","aria-labelledby","drowdownSetting",1,"dropdown-menu"],["type","range","name","points","value","settingInfo.defaultValue","data-show-value","true","data-popup-enabled","true",3,"step","min","max","ngModel","ngModelChange","mouseup"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(r){return s.closeThisComponent(r)}),e.TgZ(2,"span",2),e._uU(3,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"p"),e._uU(7,"Plot Settings"),e.qZA(),e.YNc(8,T,8,6,"div",5),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngForOf",s.plotSettingInfoList))},directives:[m.sg,a.jt,a.iD,a.Vi,p.eT,p.Fj,p.JJ,p.On],styles:[""],changeDetection:0}),l})()},6458:(E,C,n)=>{n.d(C,{T:()=>O});var e=n(3668),m=n(277),a=n(5043),p=n(7582),T=n(9232),_=n(471),l=n(4250),h=n(6019),t=n(8638),s=n(9133),i=n(3856);function r(d,I){1&d&&(e.TgZ(0,"th"),e._uU(1," View Expression "),e.qZA())}function c(d,I){if(1&d){const o=e.EpF();e.TgZ(0,"th",12),e.NdJ("sort",function(f){return e.CHM(o),e.oxw().onSort(f)}),e._uU(1),e.qZA()}if(2&d){const o=I.$implicit;e.Q6J("sortableColumn",o),e.xp6(1),e.hij(" ",o," ")}}function u(d,I){if(1&d){const o=e.EpF();e.TgZ(0,"td",14),e.NdJ("click",function(){e.CHM(o);const f=e.oxw().index;return e.oxw().processSelectedGene(f)}),e.TgZ(1,"div",15),e._UZ(2,"fa-icon",16),e.qZA(),e.qZA()}if(2&d){const o=e.oxw(2);e.xp6(2),e.Q6J("icon",o.faChartBar)("size","1x")("ngbTooltip",o.viewOneGeneInfo)}}function v(d,I){if(1&d&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&d){const o=I.$implicit,g=e.oxw().$implicit;e.xp6(1),e.hij(" ",g[o]," ")}}function M(d,I){if(1&d&&(e.TgZ(0,"tr"),e.YNc(1,u,3,3,"td",13),e.YNc(2,v,2,1,"td",6),e.qZA()),2&d){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.ifViewOneGenePlot),e.xp6(1),e.Q6J("ngForOf",o.features)}}let O=(()=>{class d{constructor(o){this.cdr=o,this.ifViewOneGenePlot=!0,this.viewOneGeneInfo="Click to visualize expression",this.selectedGene$=new e.vpe,this.page=1,this.pageSize=5,this.faArrowUp=a.FPD,this.faArrowDown=a.r5q,this.faChartBar=a.koM}ngOnInit(){this.genesInfoForTable&&(this._prepareForTable(),this.refreshSubGenesInfo())}ngOnChanges(o){o.genesInfoForTable&&!o.genesInfoForTable.isFirstChange()&&(this._prepareForTable(),this.refreshSubGenesInfo())}_prepareForTable(){this.features=[...this.genesInfoForTable.features],this.genesInfo=[...this.genesInfoForTable.genesInfo],this.filteredGenesInfo=[...this.genesInfoForTable.genesInfo],this.collectionSize=this.filteredGenesInfo.length}refreshSubGenesInfo(){this.subGenesInfo=this.filteredGenesInfo.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.cdr.detectChanges()}onSort({column:o,direction:g}){this.headers.forEach(f=>{f.sortableColumn!==o&&(f.direction="")}),(""!=g||""!=o)&&(this.filteredGenesInfo=[...this.filteredGenesInfo].sort((f,b)=>{const D=(0,p.q)(f[o],b[o]);return"asc"===g?D:-D}),this.refreshSubGenesInfo())}filterGenes(o){const g=o.matchType;let f=[];if(o.filterSteps.length>=1){for(let D of o.filterSteps){const P=D.attribute,S=D.filterType,G=D.filterValue.toLowerCase();let y=this.genesInfo.map(A=>A[P]);const x=T.qP[S](y,G);f.push(new Set(x))}const b=f.reduce(_.JN[g]);this.filteredGenesInfo=[...b].map(D=>this.genesInfo[D])}else this.filteredGenesInfo=[...this.genesInfo];this.collectionSize=this.filteredGenesInfo.length,this.refreshSubGenesInfo()}processSelectedGene(o){this.selectedGene$.next(this.subGenesInfo[o][this.features[0]])}}return d.\u0275fac=function(o){return new(o||d)(e.Y36(e.sBO))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-display-genes-info-table-pagination"]],viewQuery:function(o,g){if(1&o&&e.Gf(m.Y,5),2&o){let f;e.iGM(f=e.CRH())&&(g.headers=f)}},inputs:{genesInfoForTable:"genesInfoForTable",ifViewOneGenePlot:"ifViewOneGenePlot",viewOneGeneInfo:"viewOneGeneInfo"},outputs:{selectedGene$:"selectedGene$"},features:[e.TTD],decls:20,vars:13,consts:[[1,"mt-1",3,"dataAttributes","filterStepsInfo$"],[1,"table-responsive","mt-1",2,"margin-left","10px","margin-right","10px"],[1,"table"],[4,"ngIf"],["sortable","",3,"sortableColumn","sort",4,"ngFor","ngForOf"],[1,"border-bottom"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","align-items-center","p-2"],["data-testid","diffGenesNum"],[3,"collectionSize","page","pageSize","maxSize","pageChange"],[1,"custom-select","mb-3",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue"],["sortable","",3,"sortableColumn","sort"],[3,"click",4,"ngIf"],[3,"click"],[1,"form-inline"],[1,"hoverBigger",3,"icon","size","ngbTooltip"]],template:function(o,g){1&o&&(e.TgZ(0,"app-define-filter-steps",0),e.NdJ("filterStepsInfo$",function(b){return g.filterGenes(b)}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"table",2),e.TgZ(3,"thead"),e.TgZ(4,"tr"),e.YNc(5,r,2,0,"th",3),e.YNc(6,c,2,2,"th",4),e.qZA(),e.qZA(),e.TgZ(7,"tbody",5),e.YNc(8,M,3,2,"tr",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"p",8),e._uU(11),e.qZA(),e.TgZ(12,"ngb-pagination",9),e.NdJ("pageChange",function(b){return g.page=b})("pageChange",function(){return g.refreshSubGenesInfo()}),e.qZA(),e.TgZ(13,"select",10),e.NdJ("ngModelChange",function(b){return g.pageSize=b})("ngModelChange",function(){return g.refreshSubGenesInfo()}),e.TgZ(14,"option",11),e._uU(15,"5 per page"),e.qZA(),e.TgZ(16,"option",11),e._uU(17,"10 per page"),e.qZA(),e.TgZ(18,"option",11),e._uU(19,"20 per page"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("dataAttributes",g.features),e.xp6(5),e.Q6J("ngIf",g.ifViewOneGenePlot),e.xp6(1),e.Q6J("ngForOf",g.features),e.xp6(2),e.Q6J("ngForOf",g.subGenesInfo),e.xp6(3),e.hij(" ",g.collectionSize," Genes "),e.xp6(1),e.Q6J("collectionSize",g.collectionSize)("page",g.page)("pageSize",g.pageSize)("maxSize",5),e.xp6(1),e.Q6J("ngModel",g.pageSize),e.xp6(1),e.Q6J("ngValue",5),e.xp6(2),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",20))},directives:[l.u,h.O5,h.sg,t.N9,s.EJ,s.JJ,s.On,s.YN,s.Kr,m.Y,i.BN,t._L],styles:["table[_ngcontent-%COMP%]{max-height:80vh}tbody[_ngcontent-%COMP%]{text-align:start;overflow-y:scroll;overflow-x:hidden}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;height:2em;white-space:nowrap}"],changeDetection:0}),d})()},9918:(E,C,n)=>{n.d(C,{n:()=>h});var e=n(3668),m=n(9256),a=n(8638),p=n(6019);const T=["displayTutorialGifComponent"];function _(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){const u=e.CHM(i).$implicit;return e.oxw().outputTutorialGif(u)}),e._uU(1),e.qZA()}if(2&t){const i=s.$implicit;e.xp6(1),e.hij(" ",i.name," ")}}function l(t,s){if(1&t){const i=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",7),e.NdJ("click",function(){e.CHM(i);const c=e.oxw();return null==c.displayTutorialModalRef?null:c.displayTutorialModalRef.hide()}),e.TgZ(2,"span",8),e._uU(3,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",9),e.TgZ(5,"h4"),e._uU(6),e.qZA(),e._UZ(7,"img",10),e.qZA(),e.TgZ(8,"div",11),e.TgZ(9,"button",12),e.NdJ("click",function(){return e.CHM(i),e.oxw().displayTutorialModalRef.hide()}),e._uU(10,"close"),e.qZA(),e.qZA()}if(2&t){const i=e.oxw();e.xp6(6),e.Oqu(i.selectedTutorialGifInfo.name),e.xp6(1),e.Q6J("src",i.selectedTutorialGifInfo.src,e.LSH)}}let h=(()=>{class t{constructor(i,r){this.modalService=i,this.cdr=r,this.selectedTutorialGif$=new e.vpe}ngOnInit(){}outputTutorialGif(i){this.displayTutorialModalRef=this.modalService.show(this.displayTutorialGifComponent,Object.assign({},{class:"modal-lg"})),this.selectedTutorialGifInfo=Object.assign({},i)}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.tT),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-trigger-to-display-tutorial-gif"]],viewQuery:function(i,r){if(1&i&&e.Gf(T,5,e.Rgc),2&i){let c;e.iGM(c=e.CRH())&&(r.displayTutorialGifComponent=c.first)}},inputs:{tutorialGifInfos:"tutorialGifInfos"},outputs:{selectedTutorialGif$:"selectedTutorialGif$"},decls:7,vars:1,consts:[["ngbDropdown","",1,"d-inline-block"],["id","tutorialGifs","ngbDropdownToggle","",1,"btn","btn-sm","btn-outline-expressvis"],["ngbDropdownMenu","","aria-labelledby","tutorialGifs"],["ngbDropdownItem","",3,"click",4,"ngFor","ngForOf"],["displayTutorialGifComponent",""],["ngbDropdownItem","",3,"click"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close","close","pull-right",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"modal-body"],[1,"img-fluid","rounded","mx-auto","d-block",3,"src"],[1,"modal-footer"],["data-testid","closeGeneListInput","type","button",1,"btn","btn-default","btn-sm",3,"click"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e._uU(2,"Key Operations"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,_,2,1,"button",3),e.qZA(),e.qZA(),e.YNc(5,l,11,2,"ng-template",null,4,e.W1O)),2&i&&(e.xp6(4),e.Q6J("ngForOf",r.tutorialGifInfos))},directives:[a.jt,a.iD,a.Vi,p.sg,a.TH],styles:[""],changeDetection:0}),t})()},277:(E,C,n)=>{n.d(C,{Y:()=>a});var e=n(3668);const m={asc:"desc",desc:"","":"asc"};let a=(()=>{class p{constructor(_,l){this.renderer=_,this.el=l,this.sortableColumn="",this.direction="",this.sort=new e.vpe}rotate(){const _=this.el.nativeElement;this.direction&&this.renderer.removeClass(_,this.direction),this.direction=m[this.direction],this.direction&&this.renderer.addClass(_,this.direction),this.sort.emit({column:this.sortableColumn,direction:this.direction})}}return p.\u0275fac=function(_){return new(_||p)(e.Y36(e.Qsj),e.Y36(e.SBq))},p.\u0275dir=e.lG2({type:p,selectors:[["th","sortable",""]],hostVars:4,hostBindings:function(_,l){1&_&&e.NdJ("click",function(){return l.rotate()}),2&_&&e.ekj("asc","asc"===l.direction)("desc","desc"===l.direction)},inputs:{sortableColumn:"sortableColumn",direction:"direction"},outputs:{sort:"sort"}}),p})()}}]);