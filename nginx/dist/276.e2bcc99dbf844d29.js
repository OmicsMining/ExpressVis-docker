"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[276],{3128:(D,g,e)=>{e.d(g,{O:()=>l});var t=e(3668);let l=(()=>{class o{constructor(u){this.tpl=u}}return o.\u0275fac=function(u){return new(u||o)(t.Y36(t.Rgc))},o.\u0275dir=t.lG2({type:o,selectors:[["","appEditableEdit",""]]}),o})()},5903:(D,g,e)=>{e.d(g,{_:()=>o});var t=e(3668),l=e(1789);let o=(()=>{class d{constructor(c,s){this.editable=c,this.host=s}onEnter(){""!=this.host.nativeElement.value&&this.editable.toViewMode()}}return d.\u0275fac=function(c){return new(c||d)(t.Y36(l.y),t.Y36(t.SBq))},d.\u0275dir=t.lG2({type:d,selectors:[["","appEditableOnEnter",""]],hostBindings:function(c,s){1&c&&t.NdJ("keyup.enter",function(){return s.onEnter()})}}),d})()},9879:(D,g,e)=>{e.d(g,{i:()=>l});var t=e(3668);let l=(()=>{class o{constructor(u){this.tpl=u}}return o.\u0275fac=function(u){return new(u||o)(t.Y36(t.Rgc))},o.\u0275dir=t.lG2({type:o,selectors:[["","appEditableView",""]]}),o})()},1789:(D,g,e)=>{e.d(g,{y:()=>w});var t=e(3668),l=e(9879),o=e(3128),d=e(5433),u=e(5894),c=e(4168),s=e(4352),h=e(8345);class f{constructor(i){this.resultSelector=i}call(i,r){return r.subscribe(new I(i,this.resultSelector))}}class I extends c.L{constructor(i,r,m=Object.create(null)){super(i),this.resultSelector=r,this.iterators=[],this.active=0,this.resultSelector="function"==typeof r?r:void 0}_next(i){const r=this.iterators;(0,u.k)(i)?r.push(new x(i)):r.push("function"==typeof i[s.hZ]?new C(i[s.hZ]()):new a(this.destination,this,i))}_complete(){const i=this.iterators,r=i.length;if(this.unsubscribe(),0!==r){this.active=r;for(let m=0;m<r;m++){let b=i[m];b.stillUnsubscribed?this.destination.add(b.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const i=this.iterators,r=i.length,m=this.destination;for(let y=0;y<r;y++){let T=i[y];if("function"==typeof T.hasValue&&!T.hasValue())return}let b=!1;const v=[];for(let y=0;y<r;y++){let T=i[y],L=T.next();if(T.hasCompleted()&&(b=!0),L.done)return void m.complete();v.push(L.value)}this.resultSelector?this._tryresultSelector(v):m.next(v),b&&m.complete()}_tryresultSelector(i){let r;try{r=this.resultSelector.apply(this,i)}catch(m){return void this.destination.error(m)}this.destination.next(r)}}class C{constructor(i){this.iterator=i,this.nextResult=i.next()}hasValue(){return!0}next(){const i=this.nextResult;return this.nextResult=this.iterator.next(),i}hasCompleted(){const i=this.nextResult;return Boolean(i&&i.done)}}class x{constructor(i){this.array=i,this.index=0,this.length=0,this.length=i.length}[s.hZ](){return this}next(i){const r=this.index++;return r<this.length?{value:this.array[r],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class a extends h.Ds{constructor(i,r,m){super(i),this.parent=r,this.observable=m,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[s.hZ](){return this}next(){const i=this.buffer;return 0===i.length&&this.isComplete?{value:null,done:!0}:{value:i.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(i){this.buffer.push(i),this.parent.checkIterators()}subscribe(){return(0,h.ft)(this.observable,new h.IY(this))}}var E=e(3405),n=e(6087),O=e(2668),S=e(9204);function P(_,i){return i?(0,S.w)(()=>_,i):(0,S.w)(()=>_)}var A=e(8805),M=e(8735),j=e(8053),F=e(6636),R=e(6019);function N(_,i){1&_&&t.GkF(0)}let w=(()=>{class _{constructor(r,m,b){this.host=r,this.cdr=m,this.update=new t.vpe,this.editMode=new E.xQ,this.editMode$=this.editMode.asObservable(),this.destroyNotifier$=new E.xQ,this.mode=b}ngOnInit(){this.viewModeHander(),this.editModeHandler(),"edit"===this.mode&&this.editMode.next(!0)}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}toViewMode(){this.update.next(),this.mode="view"}get currentView(){return"view"===this.mode?this.viewModeTpl.tpl:this.editModeTpl.tpl}get element(){return this.host.nativeElement}viewModeHander(){(0,n.R)(this.element,"dblclick").pipe((0,A.R)(this.destroyNotifier$)).subscribe(()=>{this.mode="edit",this.editMode.next(!0),this.cdr.detectChanges()})}editModeHandler(){const b=function(..._){const i=_[_.length-1];return"function"==typeof i&&_.pop(),(0,d.n)(_,void 0).lift(new f(i))}((0,n.R)(document,"mousedown").pipe((0,A.R)(this.destroyNotifier$),(0,M.h)(()=>this.element.querySelector("input")),(0,M.h)(()=>this.element.querySelector("input").value)),(0,n.R)(document,"mouseup").pipe((0,A.R)(this.destroyNotifier$),(0,M.h)(()=>this.element.querySelector("input")),(0,M.h)(()=>this.element.querySelector("input").value))).pipe((0,j.U)(([v,y])=>!1===this.element.contains(v.target)&&!1===this.element.contains(y.target)),(0,M.h)(v=>v),(0,F.q)(1));if("edit"===this.mode){const v=(0,n.R)(this.element,"input").pipe((0,j.U)(y=>y.target.value),(0,M.h)(y=>""!==y),(0,F.q)(1));(0,O.aj)([this.editMode$,v]).pipe(P(b),(0,A.R)(this.destroyNotifier$)).subscribe(y=>{this.element.querySelector("input").value&&(this.update.next(),this.mode="view")})}else this.editMode$.pipe(P(b),(0,A.R)(this.destroyNotifier$)).subscribe(v=>{this.element.querySelector("input").value&&(this.update.next(),this.mode="view",this.cdr.detectChanges())})}}return _.\u0275fac=function(r){return new(r||_)(t.Y36(t.SBq),t.Y36(t.sBO),t.$8M("initialMode"))},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-editable"]],contentQueries:function(r,m,b){if(1&r&&(t.Suo(b,l.i,5),t.Suo(b,o.O,5)),2&r){let v;t.iGM(v=t.CRH())&&(m.viewModeTpl=v.first),t.iGM(v=t.CRH())&&(m.editModeTpl=v.first)}},outputs:{update:"update"},decls:1,vars:1,consts:[[4,"ngTemplateOutlet"]],template:function(r,m){1&r&&t.YNc(0,N,1,0,"ng-container",0),2&r&&t.Q6J("ngTemplateOutlet",m.currentView)},directives:[R.tP],encapsulation:2}),_})()},3991:(D,g,e)=>{e.d(g,{x:()=>l});var t=e(3668);let l=(()=>{class o{constructor(u){this.host=u}ngAfterViewInit(){this.host.nativeElement.focus()}}return o.\u0275fac=function(u){return new(u||o)(t.Y36(t.SBq))},o.\u0275dir=t.lG2({type:o,selectors:[["","appFocusable",""]]}),o})()},3139:(D,g,e)=>{e.d(g,{S:()=>o});var t=e(4099),l=e(3668);let o=(()=>{class d{constructor(){this.textLines=[],this.textMatrix=[],this.fileParseStatusSubject=new t.X(null),this.firstLinesSubject=new t.X(null),this.fileHeadersSubject=new t.X(null),this.fileParseStatus$=this.fileParseStatusSubject.asObservable(),this.firstLines$=this.firstLinesSubject.asObservable(),this.fileHeaders$=this.fileHeadersSubject.asObservable()}initLoadedFile(c){this.fileParseStatusSubject.next({status:"loading",statusValue:"loading"});const s=this._determineFileType(c.target.files[0]);"txt"===s||"TXT"===s?this._parseTextFile(c.target.files[0]):this._parseExcelFile(c)}_determineFileType(c){const h=c.name.split(".");return h[h.length-1]}_parseExcelFile(c){const s=c.target;if(1!==s.files.length)throw new Error("Cannot use multiple files");e.e(981).then(e.t.bind(e,3981,23)).then(h=>{const p=new FileReader;p.onload=f=>{const C=h.read(f.target.result,{raw:!0}),E=h.utils.sheet_to_json(C.Sheets[C.SheetNames[0]],{header:1});this.textMatrix=E,this.firstLinesSubject.next(this.obtainFirstLines(5)),this.fileHeadersSubject.next([...this.textMatrix][0]),this.fileParseStatusSubject.next({status:"finished",statusValue:"finished"})},p.readAsArrayBuffer(s.files[0])})}_parseTextFile(c){let s=new FileReader;s.readAsText(c),s.onload=h=>{this.textLines=s.result.trim().split("\n"),this.textMatrix=this.textLines.map(f=>f.trim().split("\t")),this.firstLinesSubject.next(this.obtainFirstLines(5)),this.fileHeadersSubject.next([...this.textLines][0].split("\t")),this.fileParseStatusSubject.next({status:"finished",statusValue:"finished"})}}obtainFirstLines(c){return[...this.textMatrix].slice(1,c+1)}}return d.\u0275fac=function(c){return new(c||d)},d.\u0275prov=l.Yz7({token:d,factory:d.\u0275fac}),d})()},4813:(D,g,e)=>{e.d(g,{w:()=>c});var t=e(3668),l=e(6019);function o(s,h){if(1&s&&(t.TgZ(0,"p",3),t._uU(1),t.qZA()),2&s){const p=h.$implicit;t.xp6(1),t.Oqu(p)}}function d(s,h){if(1&s){const p=t.EpF();t.TgZ(0,"p",4),t.NdJ("click",function(I){return t.CHM(p),t.oxw().displayAllItems(I)}),t.TgZ(1,"a",5),t._uU(2,"more"),t.qZA(),t.qZA()}}function u(s,h){if(1&s){const p=t.EpF();t.TgZ(0,"p",4),t.NdJ("click",function(I){return t.CHM(p),t.oxw().displayLimitedItems(I)}),t.TgZ(1,"a",6),t._uU(2,"less"),t.qZA(),t.qZA()}}let c=(()=>{class s{constructor(){this.ifDisplayAll=!1}ngOnInit(){this.items&&this._preprocessItems()}ngOnChanges(p){p.items&&!p.items.isFirstChange()&&this._preprocessItems()}_preprocessItems(){this.ifDisplayAll=!1,this.displayedItems=this.items.slice(0,this.displayNum).map(p=>p),this.items.length<=this.displayNum&&(this.ifDisplayAll=!0)}displayAllItems(p){this.displayedItems=this.items,this.ifDisplayAll=!0}displayLimitedItems(p){this._preprocessItems()}}return s.\u0275fac=function(p){return new(p||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-display-limited-items"]],inputs:{items:"items",displayNum:"displayNum"},features:[t.TTD],decls:4,vars:3,consts:[[1,"d-flex","justify-content-start","flex-wrap"],["class","ml-2",4,"ngFor","ngForOf"],["class","ml-2",3,"click",4,"ngIf"],[1,"ml-2"],[1,"ml-2",3,"click"],["href","javascript:void(0)"],["href","javascript:void(0);"]],template:function(p,f){1&p&&(t.TgZ(0,"div",0),t.YNc(1,o,2,1,"p",1),t.YNc(2,d,3,0,"p",2),t.YNc(3,u,3,0,"p",2),t.qZA()),2&p&&(t.xp6(1),t.Q6J("ngForOf",f.displayedItems),t.xp6(1),t.Q6J("ngIf",!f.ifDisplayAll&&(null==f.displayedItems?null:f.displayedItems.length)>0),t.xp6(1),t.Q6J("ngIf",f.ifDisplayAll&&(null==f.displayedItems?null:f.displayedItems.length)>f.displayNum))},directives:[l.sg,l.O5],styles:[""],changeDetection:0}),s})()},6872:(D,g,e)=>{e.d(g,{K:()=>l});var t=e(3668);let l=(()=>{class o{transform(u,c){let h;return h=u.length>c?u.substring(0,c)+"...":u,h}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275pipe=t.Yjl({name:"trimString",type:o,pure:!0}),o})()},9769:(D,g,e)=>{e.d(g,{y:()=>x});var t=e(3668),l=e(9133),o=e(3405),d=e(8735),u=e(8805),c=e(5389),s=e(1789),h=e(9879),p=e(3128),f=e(5903);function I(a,E){if(1&a&&t._uU(0),2&a){const n=t.oxw();t.hij(" ",n.inputStringControl.value," ")}}function C(a,E){if(1&a&&t._UZ(0,"input",3),2&a){const n=t.oxw();t.s9C("placeholder",n.placeholder),t.Q6J("formControl",n.inputStringControl)}}let x=(()=>{class a{constructor(n){this.cdr=n,this.resetToDefault=!1,this.placeholder="default placeholder",this.inputString$=new t.vpe(null),this.inputStringControl=new l.NI(""),this.destroyNotifier$=new o.xQ}ngOnInit(){this.inputStringControl.valueChanges.pipe((0,d.h)(n=>n),(0,u.R)(this.destroyNotifier$),(0,c.x)()).subscribe(n=>{this.inputString$.emit(n),this.cdr.detectChanges()})}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-click-focus-input"]],inputs:{resetToDefault:"resetToDefault",placeholder:"placeholder"},outputs:{inputString$:"inputString$"},decls:3,vars:0,consts:[["initialMode","edit"],["appEditableView",""],["appEditableEdit",""],["appEditableOnEnter","","required","",1,"form-control","form-control-sm",3,"placeholder","formControl"]],template:function(n,O){1&n&&(t.TgZ(0,"app-editable",0),t.YNc(1,I,1,1,"ng-template",1),t.YNc(2,C,1,2,"ng-template",2),t.qZA())},directives:[s.y,h.i,p.O,l.Fj,f._,l.Q7,l.JJ,l.oH],styles:[""],changeDetection:0}),a})()},438:(D,g,e)=>{e.d(g,{w:()=>x});var t=e(3668),l=e(9133),o=e(3405),d=e(8735),u=e(8805),c=e(5389),s=e(6019);function h(a,E){1&a&&(t.TgZ(0,"option",6),t._uU(1," --- "),t.qZA())}function p(a,E){if(1&a&&(t.TgZ(0,"option",7),t._uU(1),t.qZA()),2&a){const n=E.$implicit,O=t.oxw();t.Q6J("value",n[O.idAttribute]),t.xp6(1),t.hij(" ",n[O.displayAttribute]," ")}}function f(a,E){if(1&a&&(t.TgZ(0,"label",8),t._uU(1),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.hij(" ",n.emptyNote," ")}}const I=function(a){return{"form-inline":a}},C=function(a){return{"max-width":a}};let x=(()=>{class a{constructor(n){this.cdr=n,this.formInlineOrNot=!1,this.ifOutputFirstValue=!1,this.emptyNote="",this.ifWidthAuto=!1,this.formWidth="15rem",this.selectedItemObject$=new t.vpe,this.destroyNotifier$=new o.xQ,this.itemForm=new l.cw({itemValue:new l.NI("",l.kI.required)})}ngOnInit(){}ngAfterViewInit(){this.itemForm.get("itemValue").valueChanges.pipe((0,d.h)(n=>n),(0,u.R)(this.destroyNotifier$),(0,c.x)()).subscribe(n=>{if("VALID"===this.itemForm.get("itemValue").status){let O;for(let S of this.inputObjects)S[this.idAttribute]===n&&(O=S);this.selectedItemObject$.next(O||null)}else this.selectedItemObject$.next(null);this.cdr.detectChanges()}),this.ifOutputFirstValue&&this._outputSetFirstItemAsSelctedItem()}ngOnChanges(n){n.inputObjects&&!n.inputObjects.isFirstChange()&&(this.ifOutputFirstValue?this._outputSetFirstItemAsSelctedItem():this.itemForm.patchValue({itemValue:""}))}ngOnDestroy(){this.destroyNotifier$.next(),this.destroyNotifier$.complete()}_outputSetFirstItemAsSelctedItem(){this.inputObjects&&this.inputObjects.length>=1&&this.itemForm.patchValue({itemValue:this.inputObjects[0][this.idAttribute]})}}return a.\u0275fac=function(n){return new(n||a)(t.Y36(t.sBO))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-select-item-object"]],inputs:{inputObjects:"inputObjects",idAttribute:"idAttribute",displayAttribute:"displayAttribute",itemLabel:"itemLabel",formInlineOrNot:"formInlineOrNot",ifOutputFirstValue:"ifOutputFirstValue",emptyNote:"emptyNote",ifWidthAuto:"ifWidthAuto",formWidth:"formWidth"},outputs:{selectedItemObject$:"selectedItemObject$"},features:[t.TTD],decls:8,vars:11,consts:[[3,"ngClass","formGroup"],[1,"align-self-start"],["formControlName","itemValue","data-testid","selectItem",1,"form-control","form-control-sm",3,"ngStyle"],["value","",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger font-weight-light",4,"ngIf"],["value",""],[3,"value"],[1,"text-danger","font-weight-light"]],template:function(n,O){1&n&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"h5"),t._uU(3),t.qZA(),t.TgZ(4,"select",2),t.YNc(5,h,2,0,"option",3),t.YNc(6,p,2,2,"option",4),t.qZA(),t.YNc(7,f,2,1,"label",5),t.qZA(),t.qZA()),2&n&&(t.Q6J("ngClass",t.VKq(7,I,O.formInlineOrNot))("formGroup",O.itemForm),t.xp6(3),t.hij("",O.itemLabel,":"),t.xp6(1),t.Q6J("ngStyle",t.VKq(9,C,O.ifWidthAuto?"none":O.formWidth)),t.xp6(1),t.Q6J("ngIf",!O.ifOutputFirstValue),t.xp6(1),t.Q6J("ngForOf",O.inputObjects),t.xp6(1),t.Q6J("ngIf",!((null==O.inputObjects?null:O.inputObjects.length)>=1)))},directives:[l._Y,l.JL,s.mk,l.sg,l.EJ,l.JJ,l.u,s.PC,s.O5,s.sg,l.YN,l.Kr],styles:[""],changeDetection:0}),a})()}}]);